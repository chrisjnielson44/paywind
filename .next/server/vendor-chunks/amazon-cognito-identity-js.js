"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
exports.id = "vendor-chunks/amazon-cognito-identity-js";
exports.ids = ["vendor-chunks/amazon-cognito-identity-js"];
exports.modules = {

/***/ "(ssr)/./node_modules/amazon-cognito-identity-js/lib/AuthenticationDetails.js":
/*!******************************************************************************!*\
  !*** ./node_modules/amazon-cognito-identity-js/lib/AuthenticationDetails.js ***!
  \******************************************************************************/
/***/ ((__unused_webpack_module, exports) => {

eval("\n\nexports.__esModule = true;\nexports[\"default\"] = void 0;\n/*!\n * Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n * SPDX-License-Identifier: Apache-2.0\n */\n/** @class */\nvar AuthenticationDetails = /*#__PURE__*/function () {\n  /**\n   * Constructs a new AuthenticationDetails object\n   * @param {object=} data Creation options.\n   * @param {string} data.Username User being authenticated.\n   * @param {string} data.Password Plain-text password to authenticate with.\n   * @param {(AttributeArg[])?} data.ValidationData Application extra metadata.\n   * @param {(AttributeArg[])?} data.AuthParamaters Authentication paramaters for custom auth.\n   */\n  function AuthenticationDetails(data) {\n    var _ref = data || {},\n      ValidationData = _ref.ValidationData,\n      Username = _ref.Username,\n      Password = _ref.Password,\n      AuthParameters = _ref.AuthParameters,\n      ClientMetadata = _ref.ClientMetadata;\n    this.validationData = ValidationData || {};\n    this.authParameters = AuthParameters || {};\n    this.clientMetadata = ClientMetadata || {};\n    this.username = Username;\n    this.password = Password;\n  }\n\n  /**\n   * @returns {string} the record's username\n   */\n  var _proto = AuthenticationDetails.prototype;\n  _proto.getUsername = function getUsername() {\n    return this.username;\n  }\n\n  /**\n   * @returns {string} the record's password\n   */;\n  _proto.getPassword = function getPassword() {\n    return this.password;\n  }\n\n  /**\n   * @returns {Array} the record's validationData\n   */;\n  _proto.getValidationData = function getValidationData() {\n    return this.validationData;\n  }\n\n  /**\n   * @returns {Array} the record's authParameters\n   */;\n  _proto.getAuthParameters = function getAuthParameters() {\n    return this.authParameters;\n  }\n\n  /**\n   * @returns {ClientMetadata} the clientMetadata for a Lambda trigger\n   */;\n  _proto.getClientMetadata = function getClientMetadata() {\n    return this.clientMetadata;\n  };\n  return AuthenticationDetails;\n}();\nexports[\"default\"] = AuthenticationDetails;//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvYW1hem9uLWNvZ25pdG8taWRlbnRpdHktanMvbGliL0F1dGhlbnRpY2F0aW9uRGV0YWlscy5qcyIsIm1hcHBpbmdzIjoiQUFBYTs7QUFFYixrQkFBa0I7QUFDbEIsa0JBQWtCO0FBQ2xCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhLFNBQVM7QUFDdEIsYUFBYSxRQUFRO0FBQ3JCLGFBQWEsUUFBUTtBQUNyQixhQUFhLG1CQUFtQjtBQUNoQyxhQUFhLG1CQUFtQjtBQUNoQztBQUNBO0FBQ0EseUJBQXlCO0FBQ3pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxlQUFlLFFBQVE7QUFDdkI7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLGVBQWUsUUFBUTtBQUN2QjtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLGVBQWUsT0FBTztBQUN0QjtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLGVBQWUsT0FBTztBQUN0QjtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLGVBQWUsZ0JBQWdCO0FBQy9CO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDO0FBQ0Qsa0JBQWtCIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vcGF5d2luZC8uL25vZGVfbW9kdWxlcy9hbWF6b24tY29nbml0by1pZGVudGl0eS1qcy9saWIvQXV0aGVudGljYXRpb25EZXRhaWxzLmpzP2Q1YzkiXSwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG5cbmV4cG9ydHMuX19lc01vZHVsZSA9IHRydWU7XG5leHBvcnRzW1wiZGVmYXVsdFwiXSA9IHZvaWQgMDtcbi8qIVxuICogQ29weXJpZ2h0IEFtYXpvbi5jb20sIEluYy4gb3IgaXRzIGFmZmlsaWF0ZXMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG4gKiBTUERYLUxpY2Vuc2UtSWRlbnRpZmllcjogQXBhY2hlLTIuMFxuICovXG4vKiogQGNsYXNzICovXG52YXIgQXV0aGVudGljYXRpb25EZXRhaWxzID0gLyojX19QVVJFX18qL2Z1bmN0aW9uICgpIHtcbiAgLyoqXG4gICAqIENvbnN0cnVjdHMgYSBuZXcgQXV0aGVudGljYXRpb25EZXRhaWxzIG9iamVjdFxuICAgKiBAcGFyYW0ge29iamVjdD19IGRhdGEgQ3JlYXRpb24gb3B0aW9ucy5cbiAgICogQHBhcmFtIHtzdHJpbmd9IGRhdGEuVXNlcm5hbWUgVXNlciBiZWluZyBhdXRoZW50aWNhdGVkLlxuICAgKiBAcGFyYW0ge3N0cmluZ30gZGF0YS5QYXNzd29yZCBQbGFpbi10ZXh0IHBhc3N3b3JkIHRvIGF1dGhlbnRpY2F0ZSB3aXRoLlxuICAgKiBAcGFyYW0geyhBdHRyaWJ1dGVBcmdbXSk/fSBkYXRhLlZhbGlkYXRpb25EYXRhIEFwcGxpY2F0aW9uIGV4dHJhIG1ldGFkYXRhLlxuICAgKiBAcGFyYW0geyhBdHRyaWJ1dGVBcmdbXSk/fSBkYXRhLkF1dGhQYXJhbWF0ZXJzIEF1dGhlbnRpY2F0aW9uIHBhcmFtYXRlcnMgZm9yIGN1c3RvbSBhdXRoLlxuICAgKi9cbiAgZnVuY3Rpb24gQXV0aGVudGljYXRpb25EZXRhaWxzKGRhdGEpIHtcbiAgICB2YXIgX3JlZiA9IGRhdGEgfHwge30sXG4gICAgICBWYWxpZGF0aW9uRGF0YSA9IF9yZWYuVmFsaWRhdGlvbkRhdGEsXG4gICAgICBVc2VybmFtZSA9IF9yZWYuVXNlcm5hbWUsXG4gICAgICBQYXNzd29yZCA9IF9yZWYuUGFzc3dvcmQsXG4gICAgICBBdXRoUGFyYW1ldGVycyA9IF9yZWYuQXV0aFBhcmFtZXRlcnMsXG4gICAgICBDbGllbnRNZXRhZGF0YSA9IF9yZWYuQ2xpZW50TWV0YWRhdGE7XG4gICAgdGhpcy52YWxpZGF0aW9uRGF0YSA9IFZhbGlkYXRpb25EYXRhIHx8IHt9O1xuICAgIHRoaXMuYXV0aFBhcmFtZXRlcnMgPSBBdXRoUGFyYW1ldGVycyB8fCB7fTtcbiAgICB0aGlzLmNsaWVudE1ldGFkYXRhID0gQ2xpZW50TWV0YWRhdGEgfHwge307XG4gICAgdGhpcy51c2VybmFtZSA9IFVzZXJuYW1lO1xuICAgIHRoaXMucGFzc3dvcmQgPSBQYXNzd29yZDtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcmV0dXJucyB7c3RyaW5nfSB0aGUgcmVjb3JkJ3MgdXNlcm5hbWVcbiAgICovXG4gIHZhciBfcHJvdG8gPSBBdXRoZW50aWNhdGlvbkRldGFpbHMucHJvdG90eXBlO1xuICBfcHJvdG8uZ2V0VXNlcm5hbWUgPSBmdW5jdGlvbiBnZXRVc2VybmFtZSgpIHtcbiAgICByZXR1cm4gdGhpcy51c2VybmFtZTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcmV0dXJucyB7c3RyaW5nfSB0aGUgcmVjb3JkJ3MgcGFzc3dvcmRcbiAgICovO1xuICBfcHJvdG8uZ2V0UGFzc3dvcmQgPSBmdW5jdGlvbiBnZXRQYXNzd29yZCgpIHtcbiAgICByZXR1cm4gdGhpcy5wYXNzd29yZDtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcmV0dXJucyB7QXJyYXl9IHRoZSByZWNvcmQncyB2YWxpZGF0aW9uRGF0YVxuICAgKi87XG4gIF9wcm90by5nZXRWYWxpZGF0aW9uRGF0YSA9IGZ1bmN0aW9uIGdldFZhbGlkYXRpb25EYXRhKCkge1xuICAgIHJldHVybiB0aGlzLnZhbGlkYXRpb25EYXRhO1xuICB9XG5cbiAgLyoqXG4gICAqIEByZXR1cm5zIHtBcnJheX0gdGhlIHJlY29yZCdzIGF1dGhQYXJhbWV0ZXJzXG4gICAqLztcbiAgX3Byb3RvLmdldEF1dGhQYXJhbWV0ZXJzID0gZnVuY3Rpb24gZ2V0QXV0aFBhcmFtZXRlcnMoKSB7XG4gICAgcmV0dXJuIHRoaXMuYXV0aFBhcmFtZXRlcnM7XG4gIH1cblxuICAvKipcbiAgICogQHJldHVybnMge0NsaWVudE1ldGFkYXRhfSB0aGUgY2xpZW50TWV0YWRhdGEgZm9yIGEgTGFtYmRhIHRyaWdnZXJcbiAgICovO1xuICBfcHJvdG8uZ2V0Q2xpZW50TWV0YWRhdGEgPSBmdW5jdGlvbiBnZXRDbGllbnRNZXRhZGF0YSgpIHtcbiAgICByZXR1cm4gdGhpcy5jbGllbnRNZXRhZGF0YTtcbiAgfTtcbiAgcmV0dXJuIEF1dGhlbnRpY2F0aW9uRGV0YWlscztcbn0oKTtcbmV4cG9ydHNbXCJkZWZhdWx0XCJdID0gQXV0aGVudGljYXRpb25EZXRhaWxzOyJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/amazon-cognito-identity-js/lib/AuthenticationDetails.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/amazon-cognito-identity-js/lib/AuthenticationHelper.js":
/*!*****************************************************************************!*\
  !*** ./node_modules/amazon-cognito-identity-js/lib/AuthenticationHelper.js ***!
  \*****************************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

eval("\n\nexports.__esModule = true;\nexports[\"default\"] = void 0;\nvar _buffer = __webpack_require__(/*! buffer */ \"buffer\");\nvar _WordArray = _interopRequireDefault(__webpack_require__(/*! ./utils/WordArray */ \"(ssr)/./node_modules/amazon-cognito-identity-js/lib/utils/WordArray.js\"));\nvar _sha256Js = __webpack_require__(/*! @aws-crypto/sha256-js */ \"(ssr)/./node_modules/@aws-crypto/sha256-js/build/index.js\");\nvar _BigInteger = _interopRequireDefault(__webpack_require__(/*! ./BigInteger */ \"(ssr)/./node_modules/amazon-cognito-identity-js/lib/BigInteger.js\"));\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { \"default\": obj }; }\n/*!\n * Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n * SPDX-License-Identifier: Apache-2.0\n */\n\n/**\n * Returns a Buffer with a sequence of random nBytes\n *\n * @param {number} nBytes\n * @returns {Buffer} fixed-length sequence of random bytes\n */\n\nfunction randomBytes(nBytes) {\n  return _buffer.Buffer.from(new _WordArray[\"default\"]().random(nBytes).toString(), 'hex');\n}\n/**\n * Tests if a hex string has it most significant bit set (case-insensitive regex)\n */\nvar HEX_MSB_REGEX = /^[89a-f]/i;\nvar initN = 'FFFFFFFFFFFFFFFFC90FDAA22168C234C4C6628B80DC1CD1' + '29024E088A67CC74020BBEA63B139B22514A08798E3404DD' + 'EF9519B3CD3A431B302B0A6DF25F14374FE1356D6D51C245' + 'E485B576625E7EC6F44C42E9A637ED6B0BFF5CB6F406B7ED' + 'EE386BFB5A899FA5AE9F24117C4B1FE649286651ECE45B3D' + 'C2007CB8A163BF0598DA48361C55D39A69163FA8FD24CF5F' + '83655D23DCA3AD961C62F356208552BB9ED529077096966D' + '670C354E4ABC9804F1746C08CA18217C32905E462E36CE3B' + 'E39E772C180E86039B2783A2EC07A28FB5C55DF06F4C52C9' + 'DE2BCBF6955817183995497CEA956AE515D2261898FA0510' + '15728E5A8AAAC42DAD33170D04507A33A85521ABDF1CBA64' + 'ECFB850458DBEF0A8AEA71575D060C7DB3970F85A6E1E4C7' + 'ABF5AE8CDB0933D71E8C94E04A25619DCEE3D2261AD2EE6B' + 'F12FFA06D98A0864D87602733EC86A64521F2B18177B200C' + 'BBE117577A615D6C770988C0BAD946E208E24FA074E5AB31' + '43DB5BFCE0FD108E4B82D120A93AD2CAFFFFFFFFFFFFFFFF';\nvar newPasswordRequiredChallengeUserAttributePrefix = 'userAttributes.';\n\n/** @class */\nvar AuthenticationHelper = /*#__PURE__*/function () {\n  /**\n   * Constructs a new AuthenticationHelper object\n   * @param {string} PoolName Cognito user pool name.\n   */\n  function AuthenticationHelper(PoolName) {\n    this.N = new _BigInteger[\"default\"](initN, 16);\n    this.g = new _BigInteger[\"default\"]('2', 16);\n    this.k = new _BigInteger[\"default\"](this.hexHash(\"\" + this.padHex(this.N) + this.padHex(this.g)), 16);\n    this.smallAValue = this.generateRandomSmallA();\n    this.getLargeAValue(function () {});\n    this.infoBits = _buffer.Buffer.from('Caldera Derived Key', 'utf8');\n    this.poolName = PoolName;\n  }\n\n  /**\n   * @returns {BigInteger} small A, a random number\n   */\n  var _proto = AuthenticationHelper.prototype;\n  _proto.getSmallAValue = function getSmallAValue() {\n    return this.smallAValue;\n  }\n\n  /**\n   * @param {nodeCallback<BigInteger>} callback Called with (err, largeAValue)\n   * @returns {void}\n   */;\n  _proto.getLargeAValue = function getLargeAValue(callback) {\n    var _this = this;\n    if (this.largeAValue) {\n      callback(null, this.largeAValue);\n    } else {\n      this.calculateA(this.smallAValue, function (err, largeAValue) {\n        if (err) {\n          callback(err, null);\n        }\n        _this.largeAValue = largeAValue;\n        callback(null, _this.largeAValue);\n      });\n    }\n  }\n\n  /**\n   * helper function to generate a random big integer\n   * @returns {BigInteger} a random value.\n   * @private\n   */;\n  _proto.generateRandomSmallA = function generateRandomSmallA() {\n    // This will be interpreted as a postive 128-bit integer\n    var hexRandom = randomBytes(128).toString('hex');\n    var randomBigInt = new _BigInteger[\"default\"](hexRandom, 16);\n\n    // There is no need to do randomBigInt.mod(this.N - 1) as N (3072-bit) is > 128 bytes (1024-bit)\n\n    return randomBigInt;\n  }\n\n  /**\n   * helper function to generate a random string\n   * @returns {string} a random value.\n   * @private\n   */;\n  _proto.generateRandomString = function generateRandomString() {\n    return randomBytes(40).toString('base64');\n  }\n\n  /**\n   * @returns {string} Generated random value included in password hash.\n   */;\n  _proto.getRandomPassword = function getRandomPassword() {\n    return this.randomPassword;\n  }\n\n  /**\n   * @returns {string} Generated random value included in devices hash.\n   */;\n  _proto.getSaltDevices = function getSaltDevices() {\n    return this.SaltToHashDevices;\n  }\n\n  /**\n   * @returns {string} Value used to verify devices.\n   */;\n  _proto.getVerifierDevices = function getVerifierDevices() {\n    return this.verifierDevices;\n  }\n\n  /**\n   * Generate salts and compute verifier.\n   * @param {string} deviceGroupKey Devices to generate verifier for.\n   * @param {string} username User to generate verifier for.\n   * @param {nodeCallback<null>} callback Called with (err, null)\n   * @returns {void}\n   */;\n  _proto.generateHashDevice = function generateHashDevice(deviceGroupKey, username, callback) {\n    var _this2 = this;\n    this.randomPassword = this.generateRandomString();\n    var combinedString = \"\" + deviceGroupKey + username + \":\" + this.randomPassword;\n    var hashedString = this.hash(combinedString);\n    var hexRandom = randomBytes(16).toString('hex');\n\n    // The random hex will be unambiguously represented as a postive integer\n    this.SaltToHashDevices = this.padHex(new _BigInteger[\"default\"](hexRandom, 16));\n    this.g.modPow(new _BigInteger[\"default\"](this.hexHash(this.SaltToHashDevices + hashedString), 16), this.N, function (err, verifierDevicesNotPadded) {\n      if (err) {\n        callback(err, null);\n      }\n      _this2.verifierDevices = _this2.padHex(verifierDevicesNotPadded);\n      callback(null, null);\n    });\n  }\n\n  /**\n   * Calculate the client's public value A = g^a%N\n   * with the generated random number a\n   * @param {BigInteger} a Randomly generated small A.\n   * @param {nodeCallback<BigInteger>} callback Called with (err, largeAValue)\n   * @returns {void}\n   * @private\n   */;\n  _proto.calculateA = function calculateA(a, callback) {\n    var _this3 = this;\n    this.g.modPow(a, this.N, function (err, A) {\n      if (err) {\n        callback(err, null);\n      }\n      if (A.mod(_this3.N).equals(_BigInteger[\"default\"].ZERO)) {\n        callback(new Error('Illegal paramater. A mod N cannot be 0.'), null);\n      }\n      callback(null, A);\n    });\n  }\n\n  /**\n   * Calculate the client's value U which is the hash of A and B\n   * @param {BigInteger} A Large A value.\n   * @param {BigInteger} B Server B value.\n   * @returns {BigInteger} Computed U value.\n   * @private\n   */;\n  _proto.calculateU = function calculateU(A, B) {\n    this.UHexHash = this.hexHash(this.padHex(A) + this.padHex(B));\n    var finalU = new _BigInteger[\"default\"](this.UHexHash, 16);\n    return finalU;\n  }\n\n  /**\n   * Calculate a hash from a bitArray\n   * @param {Buffer} buf Value to hash.\n   * @returns {String} Hex-encoded hash.\n   * @private\n   */;\n  _proto.hash = function hash(buf) {\n    var awsCryptoHash = new _sha256Js.Sha256();\n    awsCryptoHash.update(buf);\n    var resultFromAWSCrypto = awsCryptoHash.digestSync();\n    var hashHex = _buffer.Buffer.from(resultFromAWSCrypto).toString('hex');\n    return new Array(64 - hashHex.length).join('0') + hashHex;\n  }\n\n  /**\n   * Calculate a hash from a hex string\n   * @param {String} hexStr Value to hash.\n   * @returns {String} Hex-encoded hash.\n   * @private\n   */;\n  _proto.hexHash = function hexHash(hexStr) {\n    return this.hash(_buffer.Buffer.from(hexStr, 'hex'));\n  }\n\n  /**\n   * Standard hkdf algorithm\n   * @param {Buffer} ikm Input key material.\n   * @param {Buffer} salt Salt value.\n   * @returns {Buffer} Strong key material.\n   * @private\n   */;\n  _proto.computehkdf = function computehkdf(ikm, salt) {\n    var infoBitsBuffer = _buffer.Buffer.concat([this.infoBits, _buffer.Buffer.from(String.fromCharCode(1), 'utf8')]);\n    var awsCryptoHash = new _sha256Js.Sha256(salt);\n    awsCryptoHash.update(ikm);\n    var resultFromAWSCryptoPrk = awsCryptoHash.digestSync();\n    var awsCryptoHashHmac = new _sha256Js.Sha256(resultFromAWSCryptoPrk);\n    awsCryptoHashHmac.update(infoBitsBuffer);\n    var resultFromAWSCryptoHmac = awsCryptoHashHmac.digestSync();\n    var hashHexFromAWSCrypto = resultFromAWSCryptoHmac;\n    var currentHex = hashHexFromAWSCrypto.slice(0, 16);\n    return currentHex;\n  }\n\n  /**\n   * Calculates the final hkdf based on computed S value, and computed U value and the key\n   * @param {String} username Username.\n   * @param {String} password Password.\n   * @param {BigInteger} serverBValue Server B value.\n   * @param {BigInteger} salt Generated salt.\n   * @param {nodeCallback<Buffer>} callback Called with (err, hkdfValue)\n   * @returns {void}\n   */;\n  _proto.getPasswordAuthenticationKey = function getPasswordAuthenticationKey(username, password, serverBValue, salt, callback) {\n    var _this4 = this;\n    if (serverBValue.mod(this.N).equals(_BigInteger[\"default\"].ZERO)) {\n      throw new Error('B cannot be zero.');\n    }\n    this.UValue = this.calculateU(this.largeAValue, serverBValue);\n    if (this.UValue.equals(_BigInteger[\"default\"].ZERO)) {\n      throw new Error('U cannot be zero.');\n    }\n    var usernamePassword = \"\" + this.poolName + username + \":\" + password;\n    var usernamePasswordHash = this.hash(usernamePassword);\n    var xValue = new _BigInteger[\"default\"](this.hexHash(this.padHex(salt) + usernamePasswordHash), 16);\n    this.calculateS(xValue, serverBValue, function (err, sValue) {\n      if (err) {\n        callback(err, null);\n      }\n      var hkdf = _this4.computehkdf(_buffer.Buffer.from(_this4.padHex(sValue), 'hex'), _buffer.Buffer.from(_this4.padHex(_this4.UValue), 'hex'));\n      callback(null, hkdf);\n    });\n  }\n\n  /**\n   * Calculates the S value used in getPasswordAuthenticationKey\n   * @param {BigInteger} xValue Salted password hash value.\n   * @param {BigInteger} serverBValue Server B value.\n   * @param {nodeCallback<string>} callback Called on success or error.\n   * @returns {void}\n   */;\n  _proto.calculateS = function calculateS(xValue, serverBValue, callback) {\n    var _this5 = this;\n    this.g.modPow(xValue, this.N, function (err, gModPowXN) {\n      if (err) {\n        callback(err, null);\n      }\n      var intValue2 = serverBValue.subtract(_this5.k.multiply(gModPowXN));\n      intValue2.modPow(_this5.smallAValue.add(_this5.UValue.multiply(xValue)), _this5.N, function (err2, result) {\n        if (err2) {\n          callback(err2, null);\n        }\n        callback(null, result.mod(_this5.N));\n      });\n    });\n  }\n\n  /**\n   * Return constant newPasswordRequiredChallengeUserAttributePrefix\n   * @return {newPasswordRequiredChallengeUserAttributePrefix} constant prefix value\n   */;\n  _proto.getNewPasswordRequiredChallengeUserAttributePrefix = function getNewPasswordRequiredChallengeUserAttributePrefix() {\n    return newPasswordRequiredChallengeUserAttributePrefix;\n  }\n\n  /**\n   * Returns an unambiguous, even-length hex string of the two's complement encoding of an integer.\n   *\n   * It is compatible with the hex encoding of Java's BigInteger's toByteArray(), wich returns a\n   * byte array containing the two's-complement representation of a BigInteger. The array contains\n   * the minimum number of bytes required to represent the BigInteger, including at least one sign bit.\n   *\n   * Examples showing how ambiguity is avoided by left padding with:\n   * \t\"00\" (for positive values where the most-significant-bit is set)\n   *  \"FF\" (for negative values where the most-significant-bit is set)\n   *\n   * padHex(bigInteger.fromInt(-236))  === \"FF14\"\n   * padHex(bigInteger.fromInt(20))    === \"14\"\n   *\n   * padHex(bigInteger.fromInt(-200))  === \"FF38\"\n   * padHex(bigInteger.fromInt(56))    === \"38\"\n   *\n   * padHex(bigInteger.fromInt(-20))   === \"EC\"\n   * padHex(bigInteger.fromInt(236))   === \"00EC\"\n   *\n   * padHex(bigInteger.fromInt(-56))   === \"C8\"\n   * padHex(bigInteger.fromInt(200))   === \"00C8\"\n   *\n   * @param {BigInteger} bigInt Number to encode.\n   * @returns {String} even-length hex string of the two's complement encoding.\n   */;\n  _proto.padHex = function padHex(bigInt) {\n    if (!(bigInt instanceof _BigInteger[\"default\"])) {\n      throw new Error('Not a BigInteger');\n    }\n    var isNegative = bigInt.compareTo(_BigInteger[\"default\"].ZERO) < 0;\n\n    /* Get a hex string for abs(bigInt) */\n    var hexStr = bigInt.abs().toString(16);\n\n    /* Pad hex to even length if needed */\n    hexStr = hexStr.length % 2 !== 0 ? \"0\" + hexStr : hexStr;\n\n    /* Prepend \"00\" if the most significant bit is set */\n    hexStr = HEX_MSB_REGEX.test(hexStr) ? \"00\" + hexStr : hexStr;\n    if (isNegative) {\n      /* Flip the bits of the representation */\n      var invertedNibbles = hexStr.split('').map(function (x) {\n        var invertedNibble = ~parseInt(x, 16) & 0xf;\n        return '0123456789ABCDEF'.charAt(invertedNibble);\n      }).join('');\n\n      /* After flipping the bits, add one to get the 2's complement representation */\n      var flippedBitsBI = new _BigInteger[\"default\"](invertedNibbles, 16).add(_BigInteger[\"default\"].ONE);\n      hexStr = flippedBitsBI.toString(16);\n\n      /*\n      For hex strings starting with 'FF8', 'FF' can be dropped, e.g. 0xFFFF80=0xFF80=0x80=-128\n      \t\tAny sequence of '1' bits on the left can always be substituted with a single '1' bit\n      without changing the represented value.\n      \t\tThis only happens in the case when the input is 80...00\n      */\n      if (hexStr.toUpperCase().startsWith('FF8')) {\n        hexStr = hexStr.substring(2);\n      }\n    }\n    return hexStr;\n  };\n  return AuthenticationHelper;\n}();\nexports[\"default\"] = AuthenticationHelper;//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvYW1hem9uLWNvZ25pdG8taWRlbnRpdHktanMvbGliL0F1dGhlbnRpY2F0aW9uSGVscGVyLmpzIiwibWFwcGluZ3MiOiJBQUFhOztBQUViLGtCQUFrQjtBQUNsQixrQkFBa0I7QUFDbEIsY0FBYyxtQkFBTyxDQUFDLHNCQUFRO0FBQzlCLHdDQUF3QyxtQkFBTyxDQUFDLGlHQUFtQjtBQUNuRSxnQkFBZ0IsbUJBQU8sQ0FBQyx3RkFBdUI7QUFDL0MseUNBQXlDLG1CQUFPLENBQUMsdUZBQWM7QUFDL0QsdUNBQXVDLHVDQUF1QztBQUM5RTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxXQUFXLFFBQVE7QUFDbkIsYUFBYSxRQUFRO0FBQ3JCOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWEsUUFBUTtBQUNyQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxzQ0FBc0M7QUFDdEM7QUFDQTtBQUNBOztBQUVBO0FBQ0EsZUFBZSxZQUFZO0FBQzNCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxhQUFhLDBCQUEwQjtBQUN2QyxlQUFlO0FBQ2Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsZUFBZSxZQUFZO0FBQzNCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxlQUFlLFFBQVE7QUFDdkI7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLGVBQWUsUUFBUTtBQUN2QjtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLGVBQWUsUUFBUTtBQUN2QjtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLGVBQWUsUUFBUTtBQUN2QjtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsYUFBYSxRQUFRO0FBQ3JCLGFBQWEsUUFBUTtBQUNyQixhQUFhLG9CQUFvQjtBQUNqQyxlQUFlO0FBQ2Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxhQUFhLFlBQVk7QUFDekIsYUFBYSwwQkFBMEI7QUFDdkMsZUFBZTtBQUNmO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDs7QUFFQTtBQUNBO0FBQ0EsYUFBYSxZQUFZO0FBQ3pCLGFBQWEsWUFBWTtBQUN6QixlQUFlLFlBQVk7QUFDM0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLGFBQWEsUUFBUTtBQUNyQixlQUFlLFFBQVE7QUFDdkI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxhQUFhLFFBQVE7QUFDckIsZUFBZSxRQUFRO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLGFBQWEsUUFBUTtBQUNyQixhQUFhLFFBQVE7QUFDckIsZUFBZSxRQUFRO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLGFBQWEsUUFBUTtBQUNyQixhQUFhLFFBQVE7QUFDckIsYUFBYSxZQUFZO0FBQ3pCLGFBQWEsWUFBWTtBQUN6QixhQUFhLHNCQUFzQjtBQUNuQyxlQUFlO0FBQ2Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7O0FBRUE7QUFDQTtBQUNBLGFBQWEsWUFBWTtBQUN6QixhQUFhLFlBQVk7QUFDekIsYUFBYSxzQkFBc0I7QUFDbkMsZUFBZTtBQUNmO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQLEtBQUs7QUFDTDs7QUFFQTtBQUNBO0FBQ0EsY0FBYyxpREFBaUQ7QUFDL0Q7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWEsWUFBWTtBQUN6QixlQUFlLFFBQVE7QUFDdkI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87O0FBRVA7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQztBQUNELGtCQUFrQiIsInNvdXJjZXMiOlsid2VicGFjazovL3BheXdpbmQvLi9ub2RlX21vZHVsZXMvYW1hem9uLWNvZ25pdG8taWRlbnRpdHktanMvbGliL0F1dGhlbnRpY2F0aW9uSGVscGVyLmpzPzQyODIiXSwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG5cbmV4cG9ydHMuX19lc01vZHVsZSA9IHRydWU7XG5leHBvcnRzW1wiZGVmYXVsdFwiXSA9IHZvaWQgMDtcbnZhciBfYnVmZmVyID0gcmVxdWlyZShcImJ1ZmZlclwiKTtcbnZhciBfV29yZEFycmF5ID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlKFwiLi91dGlscy9Xb3JkQXJyYXlcIikpO1xudmFyIF9zaGEyNTZKcyA9IHJlcXVpcmUoXCJAYXdzLWNyeXB0by9zaGEyNTYtanNcIik7XG52YXIgX0JpZ0ludGVnZXIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KHJlcXVpcmUoXCIuL0JpZ0ludGVnZXJcIikpO1xuZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgXCJkZWZhdWx0XCI6IG9iaiB9OyB9XG4vKiFcbiAqIENvcHlyaWdodCBBbWF6b24uY29tLCBJbmMuIG9yIGl0cyBhZmZpbGlhdGVzLiBBbGwgUmlnaHRzIFJlc2VydmVkLlxuICogU1BEWC1MaWNlbnNlLUlkZW50aWZpZXI6IEFwYWNoZS0yLjBcbiAqL1xuXG4vKipcbiAqIFJldHVybnMgYSBCdWZmZXIgd2l0aCBhIHNlcXVlbmNlIG9mIHJhbmRvbSBuQnl0ZXNcbiAqXG4gKiBAcGFyYW0ge251bWJlcn0gbkJ5dGVzXG4gKiBAcmV0dXJucyB7QnVmZmVyfSBmaXhlZC1sZW5ndGggc2VxdWVuY2Ugb2YgcmFuZG9tIGJ5dGVzXG4gKi9cblxuZnVuY3Rpb24gcmFuZG9tQnl0ZXMobkJ5dGVzKSB7XG4gIHJldHVybiBfYnVmZmVyLkJ1ZmZlci5mcm9tKG5ldyBfV29yZEFycmF5W1wiZGVmYXVsdFwiXSgpLnJhbmRvbShuQnl0ZXMpLnRvU3RyaW5nKCksICdoZXgnKTtcbn1cbi8qKlxuICogVGVzdHMgaWYgYSBoZXggc3RyaW5nIGhhcyBpdCBtb3N0IHNpZ25pZmljYW50IGJpdCBzZXQgKGNhc2UtaW5zZW5zaXRpdmUgcmVnZXgpXG4gKi9cbnZhciBIRVhfTVNCX1JFR0VYID0gL15bODlhLWZdL2k7XG52YXIgaW5pdE4gPSAnRkZGRkZGRkZGRkZGRkZGRkM5MEZEQUEyMjE2OEMyMzRDNEM2NjI4QjgwREMxQ0QxJyArICcyOTAyNEUwODhBNjdDQzc0MDIwQkJFQTYzQjEzOUIyMjUxNEEwODc5OEUzNDA0REQnICsgJ0VGOTUxOUIzQ0QzQTQzMUIzMDJCMEE2REYyNUYxNDM3NEZFMTM1NkQ2RDUxQzI0NScgKyAnRTQ4NUI1NzY2MjVFN0VDNkY0NEM0MkU5QTYzN0VENkIwQkZGNUNCNkY0MDZCN0VEJyArICdFRTM4NkJGQjVBODk5RkE1QUU5RjI0MTE3QzRCMUZFNjQ5Mjg2NjUxRUNFNDVCM0QnICsgJ0MyMDA3Q0I4QTE2M0JGMDU5OERBNDgzNjFDNTVEMzlBNjkxNjNGQThGRDI0Q0Y1RicgKyAnODM2NTVEMjNEQ0EzQUQ5NjFDNjJGMzU2MjA4NTUyQkI5RUQ1MjkwNzcwOTY5NjZEJyArICc2NzBDMzU0RTRBQkM5ODA0RjE3NDZDMDhDQTE4MjE3QzMyOTA1RTQ2MkUzNkNFM0InICsgJ0UzOUU3NzJDMTgwRTg2MDM5QjI3ODNBMkVDMDdBMjhGQjVDNTVERjA2RjRDNTJDOScgKyAnREUyQkNCRjY5NTU4MTcxODM5OTU0OTdDRUE5NTZBRTUxNUQyMjYxODk4RkEwNTEwJyArICcxNTcyOEU1QThBQUFDNDJEQUQzMzE3MEQwNDUwN0EzM0E4NTUyMUFCREYxQ0JBNjQnICsgJ0VDRkI4NTA0NThEQkVGMEE4QUVBNzE1NzVEMDYwQzdEQjM5NzBGODVBNkUxRTRDNycgKyAnQUJGNUFFOENEQjA5MzNENzFFOEM5NEUwNEEyNTYxOURDRUUzRDIyNjFBRDJFRTZCJyArICdGMTJGRkEwNkQ5OEEwODY0RDg3NjAyNzMzRUM4NkE2NDUyMUYyQjE4MTc3QjIwMEMnICsgJ0JCRTExNzU3N0E2MTVENkM3NzA5ODhDMEJBRDk0NkUyMDhFMjRGQTA3NEU1QUIzMScgKyAnNDNEQjVCRkNFMEZEMTA4RTRCODJEMTIwQTkzQUQyQ0FGRkZGRkZGRkZGRkZGRkZGJztcbnZhciBuZXdQYXNzd29yZFJlcXVpcmVkQ2hhbGxlbmdlVXNlckF0dHJpYnV0ZVByZWZpeCA9ICd1c2VyQXR0cmlidXRlcy4nO1xuXG4vKiogQGNsYXNzICovXG52YXIgQXV0aGVudGljYXRpb25IZWxwZXIgPSAvKiNfX1BVUkVfXyovZnVuY3Rpb24gKCkge1xuICAvKipcbiAgICogQ29uc3RydWN0cyBhIG5ldyBBdXRoZW50aWNhdGlvbkhlbHBlciBvYmplY3RcbiAgICogQHBhcmFtIHtzdHJpbmd9IFBvb2xOYW1lIENvZ25pdG8gdXNlciBwb29sIG5hbWUuXG4gICAqL1xuICBmdW5jdGlvbiBBdXRoZW50aWNhdGlvbkhlbHBlcihQb29sTmFtZSkge1xuICAgIHRoaXMuTiA9IG5ldyBfQmlnSW50ZWdlcltcImRlZmF1bHRcIl0oaW5pdE4sIDE2KTtcbiAgICB0aGlzLmcgPSBuZXcgX0JpZ0ludGVnZXJbXCJkZWZhdWx0XCJdKCcyJywgMTYpO1xuICAgIHRoaXMuayA9IG5ldyBfQmlnSW50ZWdlcltcImRlZmF1bHRcIl0odGhpcy5oZXhIYXNoKFwiXCIgKyB0aGlzLnBhZEhleCh0aGlzLk4pICsgdGhpcy5wYWRIZXgodGhpcy5nKSksIDE2KTtcbiAgICB0aGlzLnNtYWxsQVZhbHVlID0gdGhpcy5nZW5lcmF0ZVJhbmRvbVNtYWxsQSgpO1xuICAgIHRoaXMuZ2V0TGFyZ2VBVmFsdWUoZnVuY3Rpb24gKCkge30pO1xuICAgIHRoaXMuaW5mb0JpdHMgPSBfYnVmZmVyLkJ1ZmZlci5mcm9tKCdDYWxkZXJhIERlcml2ZWQgS2V5JywgJ3V0ZjgnKTtcbiAgICB0aGlzLnBvb2xOYW1lID0gUG9vbE5hbWU7XG4gIH1cblxuICAvKipcbiAgICogQHJldHVybnMge0JpZ0ludGVnZXJ9IHNtYWxsIEEsIGEgcmFuZG9tIG51bWJlclxuICAgKi9cbiAgdmFyIF9wcm90byA9IEF1dGhlbnRpY2F0aW9uSGVscGVyLnByb3RvdHlwZTtcbiAgX3Byb3RvLmdldFNtYWxsQVZhbHVlID0gZnVuY3Rpb24gZ2V0U21hbGxBVmFsdWUoKSB7XG4gICAgcmV0dXJuIHRoaXMuc21hbGxBVmFsdWU7XG4gIH1cblxuICAvKipcbiAgICogQHBhcmFtIHtub2RlQ2FsbGJhY2s8QmlnSW50ZWdlcj59IGNhbGxiYWNrIENhbGxlZCB3aXRoIChlcnIsIGxhcmdlQVZhbHVlKVxuICAgKiBAcmV0dXJucyB7dm9pZH1cbiAgICovO1xuICBfcHJvdG8uZ2V0TGFyZ2VBVmFsdWUgPSBmdW5jdGlvbiBnZXRMYXJnZUFWYWx1ZShjYWxsYmFjaykge1xuICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgaWYgKHRoaXMubGFyZ2VBVmFsdWUpIHtcbiAgICAgIGNhbGxiYWNrKG51bGwsIHRoaXMubGFyZ2VBVmFsdWUpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLmNhbGN1bGF0ZUEodGhpcy5zbWFsbEFWYWx1ZSwgZnVuY3Rpb24gKGVyciwgbGFyZ2VBVmFsdWUpIHtcbiAgICAgICAgaWYgKGVycikge1xuICAgICAgICAgIGNhbGxiYWNrKGVyciwgbnVsbCk7XG4gICAgICAgIH1cbiAgICAgICAgX3RoaXMubGFyZ2VBVmFsdWUgPSBsYXJnZUFWYWx1ZTtcbiAgICAgICAgY2FsbGJhY2sobnVsbCwgX3RoaXMubGFyZ2VBVmFsdWUpO1xuICAgICAgfSk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIGhlbHBlciBmdW5jdGlvbiB0byBnZW5lcmF0ZSBhIHJhbmRvbSBiaWcgaW50ZWdlclxuICAgKiBAcmV0dXJucyB7QmlnSW50ZWdlcn0gYSByYW5kb20gdmFsdWUuXG4gICAqIEBwcml2YXRlXG4gICAqLztcbiAgX3Byb3RvLmdlbmVyYXRlUmFuZG9tU21hbGxBID0gZnVuY3Rpb24gZ2VuZXJhdGVSYW5kb21TbWFsbEEoKSB7XG4gICAgLy8gVGhpcyB3aWxsIGJlIGludGVycHJldGVkIGFzIGEgcG9zdGl2ZSAxMjgtYml0IGludGVnZXJcbiAgICB2YXIgaGV4UmFuZG9tID0gcmFuZG9tQnl0ZXMoMTI4KS50b1N0cmluZygnaGV4Jyk7XG4gICAgdmFyIHJhbmRvbUJpZ0ludCA9IG5ldyBfQmlnSW50ZWdlcltcImRlZmF1bHRcIl0oaGV4UmFuZG9tLCAxNik7XG5cbiAgICAvLyBUaGVyZSBpcyBubyBuZWVkIHRvIGRvIHJhbmRvbUJpZ0ludC5tb2QodGhpcy5OIC0gMSkgYXMgTiAoMzA3Mi1iaXQpIGlzID4gMTI4IGJ5dGVzICgxMDI0LWJpdClcblxuICAgIHJldHVybiByYW5kb21CaWdJbnQ7XG4gIH1cblxuICAvKipcbiAgICogaGVscGVyIGZ1bmN0aW9uIHRvIGdlbmVyYXRlIGEgcmFuZG9tIHN0cmluZ1xuICAgKiBAcmV0dXJucyB7c3RyaW5nfSBhIHJhbmRvbSB2YWx1ZS5cbiAgICogQHByaXZhdGVcbiAgICovO1xuICBfcHJvdG8uZ2VuZXJhdGVSYW5kb21TdHJpbmcgPSBmdW5jdGlvbiBnZW5lcmF0ZVJhbmRvbVN0cmluZygpIHtcbiAgICByZXR1cm4gcmFuZG9tQnl0ZXMoNDApLnRvU3RyaW5nKCdiYXNlNjQnKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcmV0dXJucyB7c3RyaW5nfSBHZW5lcmF0ZWQgcmFuZG9tIHZhbHVlIGluY2x1ZGVkIGluIHBhc3N3b3JkIGhhc2guXG4gICAqLztcbiAgX3Byb3RvLmdldFJhbmRvbVBhc3N3b3JkID0gZnVuY3Rpb24gZ2V0UmFuZG9tUGFzc3dvcmQoKSB7XG4gICAgcmV0dXJuIHRoaXMucmFuZG9tUGFzc3dvcmQ7XG4gIH1cblxuICAvKipcbiAgICogQHJldHVybnMge3N0cmluZ30gR2VuZXJhdGVkIHJhbmRvbSB2YWx1ZSBpbmNsdWRlZCBpbiBkZXZpY2VzIGhhc2guXG4gICAqLztcbiAgX3Byb3RvLmdldFNhbHREZXZpY2VzID0gZnVuY3Rpb24gZ2V0U2FsdERldmljZXMoKSB7XG4gICAgcmV0dXJuIHRoaXMuU2FsdFRvSGFzaERldmljZXM7XG4gIH1cblxuICAvKipcbiAgICogQHJldHVybnMge3N0cmluZ30gVmFsdWUgdXNlZCB0byB2ZXJpZnkgZGV2aWNlcy5cbiAgICovO1xuICBfcHJvdG8uZ2V0VmVyaWZpZXJEZXZpY2VzID0gZnVuY3Rpb24gZ2V0VmVyaWZpZXJEZXZpY2VzKCkge1xuICAgIHJldHVybiB0aGlzLnZlcmlmaWVyRGV2aWNlcztcbiAgfVxuXG4gIC8qKlxuICAgKiBHZW5lcmF0ZSBzYWx0cyBhbmQgY29tcHV0ZSB2ZXJpZmllci5cbiAgICogQHBhcmFtIHtzdHJpbmd9IGRldmljZUdyb3VwS2V5IERldmljZXMgdG8gZ2VuZXJhdGUgdmVyaWZpZXIgZm9yLlxuICAgKiBAcGFyYW0ge3N0cmluZ30gdXNlcm5hbWUgVXNlciB0byBnZW5lcmF0ZSB2ZXJpZmllciBmb3IuXG4gICAqIEBwYXJhbSB7bm9kZUNhbGxiYWNrPG51bGw+fSBjYWxsYmFjayBDYWxsZWQgd2l0aCAoZXJyLCBudWxsKVxuICAgKiBAcmV0dXJucyB7dm9pZH1cbiAgICovO1xuICBfcHJvdG8uZ2VuZXJhdGVIYXNoRGV2aWNlID0gZnVuY3Rpb24gZ2VuZXJhdGVIYXNoRGV2aWNlKGRldmljZUdyb3VwS2V5LCB1c2VybmFtZSwgY2FsbGJhY2spIHtcbiAgICB2YXIgX3RoaXMyID0gdGhpcztcbiAgICB0aGlzLnJhbmRvbVBhc3N3b3JkID0gdGhpcy5nZW5lcmF0ZVJhbmRvbVN0cmluZygpO1xuICAgIHZhciBjb21iaW5lZFN0cmluZyA9IFwiXCIgKyBkZXZpY2VHcm91cEtleSArIHVzZXJuYW1lICsgXCI6XCIgKyB0aGlzLnJhbmRvbVBhc3N3b3JkO1xuICAgIHZhciBoYXNoZWRTdHJpbmcgPSB0aGlzLmhhc2goY29tYmluZWRTdHJpbmcpO1xuICAgIHZhciBoZXhSYW5kb20gPSByYW5kb21CeXRlcygxNikudG9TdHJpbmcoJ2hleCcpO1xuXG4gICAgLy8gVGhlIHJhbmRvbSBoZXggd2lsbCBiZSB1bmFtYmlndW91c2x5IHJlcHJlc2VudGVkIGFzIGEgcG9zdGl2ZSBpbnRlZ2VyXG4gICAgdGhpcy5TYWx0VG9IYXNoRGV2aWNlcyA9IHRoaXMucGFkSGV4KG5ldyBfQmlnSW50ZWdlcltcImRlZmF1bHRcIl0oaGV4UmFuZG9tLCAxNikpO1xuICAgIHRoaXMuZy5tb2RQb3cobmV3IF9CaWdJbnRlZ2VyW1wiZGVmYXVsdFwiXSh0aGlzLmhleEhhc2godGhpcy5TYWx0VG9IYXNoRGV2aWNlcyArIGhhc2hlZFN0cmluZyksIDE2KSwgdGhpcy5OLCBmdW5jdGlvbiAoZXJyLCB2ZXJpZmllckRldmljZXNOb3RQYWRkZWQpIHtcbiAgICAgIGlmIChlcnIpIHtcbiAgICAgICAgY2FsbGJhY2soZXJyLCBudWxsKTtcbiAgICAgIH1cbiAgICAgIF90aGlzMi52ZXJpZmllckRldmljZXMgPSBfdGhpczIucGFkSGV4KHZlcmlmaWVyRGV2aWNlc05vdFBhZGRlZCk7XG4gICAgICBjYWxsYmFjayhudWxsLCBudWxsKTtcbiAgICB9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBDYWxjdWxhdGUgdGhlIGNsaWVudCdzIHB1YmxpYyB2YWx1ZSBBID0gZ15hJU5cbiAgICogd2l0aCB0aGUgZ2VuZXJhdGVkIHJhbmRvbSBudW1iZXIgYVxuICAgKiBAcGFyYW0ge0JpZ0ludGVnZXJ9IGEgUmFuZG9tbHkgZ2VuZXJhdGVkIHNtYWxsIEEuXG4gICAqIEBwYXJhbSB7bm9kZUNhbGxiYWNrPEJpZ0ludGVnZXI+fSBjYWxsYmFjayBDYWxsZWQgd2l0aCAoZXJyLCBsYXJnZUFWYWx1ZSlcbiAgICogQHJldHVybnMge3ZvaWR9XG4gICAqIEBwcml2YXRlXG4gICAqLztcbiAgX3Byb3RvLmNhbGN1bGF0ZUEgPSBmdW5jdGlvbiBjYWxjdWxhdGVBKGEsIGNhbGxiYWNrKSB7XG4gICAgdmFyIF90aGlzMyA9IHRoaXM7XG4gICAgdGhpcy5nLm1vZFBvdyhhLCB0aGlzLk4sIGZ1bmN0aW9uIChlcnIsIEEpIHtcbiAgICAgIGlmIChlcnIpIHtcbiAgICAgICAgY2FsbGJhY2soZXJyLCBudWxsKTtcbiAgICAgIH1cbiAgICAgIGlmIChBLm1vZChfdGhpczMuTikuZXF1YWxzKF9CaWdJbnRlZ2VyW1wiZGVmYXVsdFwiXS5aRVJPKSkge1xuICAgICAgICBjYWxsYmFjayhuZXcgRXJyb3IoJ0lsbGVnYWwgcGFyYW1hdGVyLiBBIG1vZCBOIGNhbm5vdCBiZSAwLicpLCBudWxsKTtcbiAgICAgIH1cbiAgICAgIGNhbGxiYWNrKG51bGwsIEEpO1xuICAgIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqIENhbGN1bGF0ZSB0aGUgY2xpZW50J3MgdmFsdWUgVSB3aGljaCBpcyB0aGUgaGFzaCBvZiBBIGFuZCBCXG4gICAqIEBwYXJhbSB7QmlnSW50ZWdlcn0gQSBMYXJnZSBBIHZhbHVlLlxuICAgKiBAcGFyYW0ge0JpZ0ludGVnZXJ9IEIgU2VydmVyIEIgdmFsdWUuXG4gICAqIEByZXR1cm5zIHtCaWdJbnRlZ2VyfSBDb21wdXRlZCBVIHZhbHVlLlxuICAgKiBAcHJpdmF0ZVxuICAgKi87XG4gIF9wcm90by5jYWxjdWxhdGVVID0gZnVuY3Rpb24gY2FsY3VsYXRlVShBLCBCKSB7XG4gICAgdGhpcy5VSGV4SGFzaCA9IHRoaXMuaGV4SGFzaCh0aGlzLnBhZEhleChBKSArIHRoaXMucGFkSGV4KEIpKTtcbiAgICB2YXIgZmluYWxVID0gbmV3IF9CaWdJbnRlZ2VyW1wiZGVmYXVsdFwiXSh0aGlzLlVIZXhIYXNoLCAxNik7XG4gICAgcmV0dXJuIGZpbmFsVTtcbiAgfVxuXG4gIC8qKlxuICAgKiBDYWxjdWxhdGUgYSBoYXNoIGZyb20gYSBiaXRBcnJheVxuICAgKiBAcGFyYW0ge0J1ZmZlcn0gYnVmIFZhbHVlIHRvIGhhc2guXG4gICAqIEByZXR1cm5zIHtTdHJpbmd9IEhleC1lbmNvZGVkIGhhc2guXG4gICAqIEBwcml2YXRlXG4gICAqLztcbiAgX3Byb3RvLmhhc2ggPSBmdW5jdGlvbiBoYXNoKGJ1Zikge1xuICAgIHZhciBhd3NDcnlwdG9IYXNoID0gbmV3IF9zaGEyNTZKcy5TaGEyNTYoKTtcbiAgICBhd3NDcnlwdG9IYXNoLnVwZGF0ZShidWYpO1xuICAgIHZhciByZXN1bHRGcm9tQVdTQ3J5cHRvID0gYXdzQ3J5cHRvSGFzaC5kaWdlc3RTeW5jKCk7XG4gICAgdmFyIGhhc2hIZXggPSBfYnVmZmVyLkJ1ZmZlci5mcm9tKHJlc3VsdEZyb21BV1NDcnlwdG8pLnRvU3RyaW5nKCdoZXgnKTtcbiAgICByZXR1cm4gbmV3IEFycmF5KDY0IC0gaGFzaEhleC5sZW5ndGgpLmpvaW4oJzAnKSArIGhhc2hIZXg7XG4gIH1cblxuICAvKipcbiAgICogQ2FsY3VsYXRlIGEgaGFzaCBmcm9tIGEgaGV4IHN0cmluZ1xuICAgKiBAcGFyYW0ge1N0cmluZ30gaGV4U3RyIFZhbHVlIHRvIGhhc2guXG4gICAqIEByZXR1cm5zIHtTdHJpbmd9IEhleC1lbmNvZGVkIGhhc2guXG4gICAqIEBwcml2YXRlXG4gICAqLztcbiAgX3Byb3RvLmhleEhhc2ggPSBmdW5jdGlvbiBoZXhIYXNoKGhleFN0cikge1xuICAgIHJldHVybiB0aGlzLmhhc2goX2J1ZmZlci5CdWZmZXIuZnJvbShoZXhTdHIsICdoZXgnKSk7XG4gIH1cblxuICAvKipcbiAgICogU3RhbmRhcmQgaGtkZiBhbGdvcml0aG1cbiAgICogQHBhcmFtIHtCdWZmZXJ9IGlrbSBJbnB1dCBrZXkgbWF0ZXJpYWwuXG4gICAqIEBwYXJhbSB7QnVmZmVyfSBzYWx0IFNhbHQgdmFsdWUuXG4gICAqIEByZXR1cm5zIHtCdWZmZXJ9IFN0cm9uZyBrZXkgbWF0ZXJpYWwuXG4gICAqIEBwcml2YXRlXG4gICAqLztcbiAgX3Byb3RvLmNvbXB1dGVoa2RmID0gZnVuY3Rpb24gY29tcHV0ZWhrZGYoaWttLCBzYWx0KSB7XG4gICAgdmFyIGluZm9CaXRzQnVmZmVyID0gX2J1ZmZlci5CdWZmZXIuY29uY2F0KFt0aGlzLmluZm9CaXRzLCBfYnVmZmVyLkJ1ZmZlci5mcm9tKFN0cmluZy5mcm9tQ2hhckNvZGUoMSksICd1dGY4JyldKTtcbiAgICB2YXIgYXdzQ3J5cHRvSGFzaCA9IG5ldyBfc2hhMjU2SnMuU2hhMjU2KHNhbHQpO1xuICAgIGF3c0NyeXB0b0hhc2gudXBkYXRlKGlrbSk7XG4gICAgdmFyIHJlc3VsdEZyb21BV1NDcnlwdG9QcmsgPSBhd3NDcnlwdG9IYXNoLmRpZ2VzdFN5bmMoKTtcbiAgICB2YXIgYXdzQ3J5cHRvSGFzaEhtYWMgPSBuZXcgX3NoYTI1NkpzLlNoYTI1NihyZXN1bHRGcm9tQVdTQ3J5cHRvUHJrKTtcbiAgICBhd3NDcnlwdG9IYXNoSG1hYy51cGRhdGUoaW5mb0JpdHNCdWZmZXIpO1xuICAgIHZhciByZXN1bHRGcm9tQVdTQ3J5cHRvSG1hYyA9IGF3c0NyeXB0b0hhc2hIbWFjLmRpZ2VzdFN5bmMoKTtcbiAgICB2YXIgaGFzaEhleEZyb21BV1NDcnlwdG8gPSByZXN1bHRGcm9tQVdTQ3J5cHRvSG1hYztcbiAgICB2YXIgY3VycmVudEhleCA9IGhhc2hIZXhGcm9tQVdTQ3J5cHRvLnNsaWNlKDAsIDE2KTtcbiAgICByZXR1cm4gY3VycmVudEhleDtcbiAgfVxuXG4gIC8qKlxuICAgKiBDYWxjdWxhdGVzIHRoZSBmaW5hbCBoa2RmIGJhc2VkIG9uIGNvbXB1dGVkIFMgdmFsdWUsIGFuZCBjb21wdXRlZCBVIHZhbHVlIGFuZCB0aGUga2V5XG4gICAqIEBwYXJhbSB7U3RyaW5nfSB1c2VybmFtZSBVc2VybmFtZS5cbiAgICogQHBhcmFtIHtTdHJpbmd9IHBhc3N3b3JkIFBhc3N3b3JkLlxuICAgKiBAcGFyYW0ge0JpZ0ludGVnZXJ9IHNlcnZlckJWYWx1ZSBTZXJ2ZXIgQiB2YWx1ZS5cbiAgICogQHBhcmFtIHtCaWdJbnRlZ2VyfSBzYWx0IEdlbmVyYXRlZCBzYWx0LlxuICAgKiBAcGFyYW0ge25vZGVDYWxsYmFjazxCdWZmZXI+fSBjYWxsYmFjayBDYWxsZWQgd2l0aCAoZXJyLCBoa2RmVmFsdWUpXG4gICAqIEByZXR1cm5zIHt2b2lkfVxuICAgKi87XG4gIF9wcm90by5nZXRQYXNzd29yZEF1dGhlbnRpY2F0aW9uS2V5ID0gZnVuY3Rpb24gZ2V0UGFzc3dvcmRBdXRoZW50aWNhdGlvbktleSh1c2VybmFtZSwgcGFzc3dvcmQsIHNlcnZlckJWYWx1ZSwgc2FsdCwgY2FsbGJhY2spIHtcbiAgICB2YXIgX3RoaXM0ID0gdGhpcztcbiAgICBpZiAoc2VydmVyQlZhbHVlLm1vZCh0aGlzLk4pLmVxdWFscyhfQmlnSW50ZWdlcltcImRlZmF1bHRcIl0uWkVSTykpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignQiBjYW5ub3QgYmUgemVyby4nKTtcbiAgICB9XG4gICAgdGhpcy5VVmFsdWUgPSB0aGlzLmNhbGN1bGF0ZVUodGhpcy5sYXJnZUFWYWx1ZSwgc2VydmVyQlZhbHVlKTtcbiAgICBpZiAodGhpcy5VVmFsdWUuZXF1YWxzKF9CaWdJbnRlZ2VyW1wiZGVmYXVsdFwiXS5aRVJPKSkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdVIGNhbm5vdCBiZSB6ZXJvLicpO1xuICAgIH1cbiAgICB2YXIgdXNlcm5hbWVQYXNzd29yZCA9IFwiXCIgKyB0aGlzLnBvb2xOYW1lICsgdXNlcm5hbWUgKyBcIjpcIiArIHBhc3N3b3JkO1xuICAgIHZhciB1c2VybmFtZVBhc3N3b3JkSGFzaCA9IHRoaXMuaGFzaCh1c2VybmFtZVBhc3N3b3JkKTtcbiAgICB2YXIgeFZhbHVlID0gbmV3IF9CaWdJbnRlZ2VyW1wiZGVmYXVsdFwiXSh0aGlzLmhleEhhc2godGhpcy5wYWRIZXgoc2FsdCkgKyB1c2VybmFtZVBhc3N3b3JkSGFzaCksIDE2KTtcbiAgICB0aGlzLmNhbGN1bGF0ZVMoeFZhbHVlLCBzZXJ2ZXJCVmFsdWUsIGZ1bmN0aW9uIChlcnIsIHNWYWx1ZSkge1xuICAgICAgaWYgKGVycikge1xuICAgICAgICBjYWxsYmFjayhlcnIsIG51bGwpO1xuICAgICAgfVxuICAgICAgdmFyIGhrZGYgPSBfdGhpczQuY29tcHV0ZWhrZGYoX2J1ZmZlci5CdWZmZXIuZnJvbShfdGhpczQucGFkSGV4KHNWYWx1ZSksICdoZXgnKSwgX2J1ZmZlci5CdWZmZXIuZnJvbShfdGhpczQucGFkSGV4KF90aGlzNC5VVmFsdWUpLCAnaGV4JykpO1xuICAgICAgY2FsbGJhY2sobnVsbCwgaGtkZik7XG4gICAgfSk7XG4gIH1cblxuICAvKipcbiAgICogQ2FsY3VsYXRlcyB0aGUgUyB2YWx1ZSB1c2VkIGluIGdldFBhc3N3b3JkQXV0aGVudGljYXRpb25LZXlcbiAgICogQHBhcmFtIHtCaWdJbnRlZ2VyfSB4VmFsdWUgU2FsdGVkIHBhc3N3b3JkIGhhc2ggdmFsdWUuXG4gICAqIEBwYXJhbSB7QmlnSW50ZWdlcn0gc2VydmVyQlZhbHVlIFNlcnZlciBCIHZhbHVlLlxuICAgKiBAcGFyYW0ge25vZGVDYWxsYmFjazxzdHJpbmc+fSBjYWxsYmFjayBDYWxsZWQgb24gc3VjY2VzcyBvciBlcnJvci5cbiAgICogQHJldHVybnMge3ZvaWR9XG4gICAqLztcbiAgX3Byb3RvLmNhbGN1bGF0ZVMgPSBmdW5jdGlvbiBjYWxjdWxhdGVTKHhWYWx1ZSwgc2VydmVyQlZhbHVlLCBjYWxsYmFjaykge1xuICAgIHZhciBfdGhpczUgPSB0aGlzO1xuICAgIHRoaXMuZy5tb2RQb3coeFZhbHVlLCB0aGlzLk4sIGZ1bmN0aW9uIChlcnIsIGdNb2RQb3dYTikge1xuICAgICAgaWYgKGVycikge1xuICAgICAgICBjYWxsYmFjayhlcnIsIG51bGwpO1xuICAgICAgfVxuICAgICAgdmFyIGludFZhbHVlMiA9IHNlcnZlckJWYWx1ZS5zdWJ0cmFjdChfdGhpczUuay5tdWx0aXBseShnTW9kUG93WE4pKTtcbiAgICAgIGludFZhbHVlMi5tb2RQb3coX3RoaXM1LnNtYWxsQVZhbHVlLmFkZChfdGhpczUuVVZhbHVlLm11bHRpcGx5KHhWYWx1ZSkpLCBfdGhpczUuTiwgZnVuY3Rpb24gKGVycjIsIHJlc3VsdCkge1xuICAgICAgICBpZiAoZXJyMikge1xuICAgICAgICAgIGNhbGxiYWNrKGVycjIsIG51bGwpO1xuICAgICAgICB9XG4gICAgICAgIGNhbGxiYWNrKG51bGwsIHJlc3VsdC5tb2QoX3RoaXM1Lk4pKTtcbiAgICAgIH0pO1xuICAgIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybiBjb25zdGFudCBuZXdQYXNzd29yZFJlcXVpcmVkQ2hhbGxlbmdlVXNlckF0dHJpYnV0ZVByZWZpeFxuICAgKiBAcmV0dXJuIHtuZXdQYXNzd29yZFJlcXVpcmVkQ2hhbGxlbmdlVXNlckF0dHJpYnV0ZVByZWZpeH0gY29uc3RhbnQgcHJlZml4IHZhbHVlXG4gICAqLztcbiAgX3Byb3RvLmdldE5ld1Bhc3N3b3JkUmVxdWlyZWRDaGFsbGVuZ2VVc2VyQXR0cmlidXRlUHJlZml4ID0gZnVuY3Rpb24gZ2V0TmV3UGFzc3dvcmRSZXF1aXJlZENoYWxsZW5nZVVzZXJBdHRyaWJ1dGVQcmVmaXgoKSB7XG4gICAgcmV0dXJuIG5ld1Bhc3N3b3JkUmVxdWlyZWRDaGFsbGVuZ2VVc2VyQXR0cmlidXRlUHJlZml4O1xuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybnMgYW4gdW5hbWJpZ3VvdXMsIGV2ZW4tbGVuZ3RoIGhleCBzdHJpbmcgb2YgdGhlIHR3bydzIGNvbXBsZW1lbnQgZW5jb2Rpbmcgb2YgYW4gaW50ZWdlci5cbiAgICpcbiAgICogSXQgaXMgY29tcGF0aWJsZSB3aXRoIHRoZSBoZXggZW5jb2Rpbmcgb2YgSmF2YSdzIEJpZ0ludGVnZXIncyB0b0J5dGVBcnJheSgpLCB3aWNoIHJldHVybnMgYVxuICAgKiBieXRlIGFycmF5IGNvbnRhaW5pbmcgdGhlIHR3bydzLWNvbXBsZW1lbnQgcmVwcmVzZW50YXRpb24gb2YgYSBCaWdJbnRlZ2VyLiBUaGUgYXJyYXkgY29udGFpbnNcbiAgICogdGhlIG1pbmltdW0gbnVtYmVyIG9mIGJ5dGVzIHJlcXVpcmVkIHRvIHJlcHJlc2VudCB0aGUgQmlnSW50ZWdlciwgaW5jbHVkaW5nIGF0IGxlYXN0IG9uZSBzaWduIGJpdC5cbiAgICpcbiAgICogRXhhbXBsZXMgc2hvd2luZyBob3cgYW1iaWd1aXR5IGlzIGF2b2lkZWQgYnkgbGVmdCBwYWRkaW5nIHdpdGg6XG4gICAqIFx0XCIwMFwiIChmb3IgcG9zaXRpdmUgdmFsdWVzIHdoZXJlIHRoZSBtb3N0LXNpZ25pZmljYW50LWJpdCBpcyBzZXQpXG4gICAqICBcIkZGXCIgKGZvciBuZWdhdGl2ZSB2YWx1ZXMgd2hlcmUgdGhlIG1vc3Qtc2lnbmlmaWNhbnQtYml0IGlzIHNldClcbiAgICpcbiAgICogcGFkSGV4KGJpZ0ludGVnZXIuZnJvbUludCgtMjM2KSkgID09PSBcIkZGMTRcIlxuICAgKiBwYWRIZXgoYmlnSW50ZWdlci5mcm9tSW50KDIwKSkgICAgPT09IFwiMTRcIlxuICAgKlxuICAgKiBwYWRIZXgoYmlnSW50ZWdlci5mcm9tSW50KC0yMDApKSAgPT09IFwiRkYzOFwiXG4gICAqIHBhZEhleChiaWdJbnRlZ2VyLmZyb21JbnQoNTYpKSAgICA9PT0gXCIzOFwiXG4gICAqXG4gICAqIHBhZEhleChiaWdJbnRlZ2VyLmZyb21JbnQoLTIwKSkgICA9PT0gXCJFQ1wiXG4gICAqIHBhZEhleChiaWdJbnRlZ2VyLmZyb21JbnQoMjM2KSkgICA9PT0gXCIwMEVDXCJcbiAgICpcbiAgICogcGFkSGV4KGJpZ0ludGVnZXIuZnJvbUludCgtNTYpKSAgID09PSBcIkM4XCJcbiAgICogcGFkSGV4KGJpZ0ludGVnZXIuZnJvbUludCgyMDApKSAgID09PSBcIjAwQzhcIlxuICAgKlxuICAgKiBAcGFyYW0ge0JpZ0ludGVnZXJ9IGJpZ0ludCBOdW1iZXIgdG8gZW5jb2RlLlxuICAgKiBAcmV0dXJucyB7U3RyaW5nfSBldmVuLWxlbmd0aCBoZXggc3RyaW5nIG9mIHRoZSB0d28ncyBjb21wbGVtZW50IGVuY29kaW5nLlxuICAgKi87XG4gIF9wcm90by5wYWRIZXggPSBmdW5jdGlvbiBwYWRIZXgoYmlnSW50KSB7XG4gICAgaWYgKCEoYmlnSW50IGluc3RhbmNlb2YgX0JpZ0ludGVnZXJbXCJkZWZhdWx0XCJdKSkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdOb3QgYSBCaWdJbnRlZ2VyJyk7XG4gICAgfVxuICAgIHZhciBpc05lZ2F0aXZlID0gYmlnSW50LmNvbXBhcmVUbyhfQmlnSW50ZWdlcltcImRlZmF1bHRcIl0uWkVSTykgPCAwO1xuXG4gICAgLyogR2V0IGEgaGV4IHN0cmluZyBmb3IgYWJzKGJpZ0ludCkgKi9cbiAgICB2YXIgaGV4U3RyID0gYmlnSW50LmFicygpLnRvU3RyaW5nKDE2KTtcblxuICAgIC8qIFBhZCBoZXggdG8gZXZlbiBsZW5ndGggaWYgbmVlZGVkICovXG4gICAgaGV4U3RyID0gaGV4U3RyLmxlbmd0aCAlIDIgIT09IDAgPyBcIjBcIiArIGhleFN0ciA6IGhleFN0cjtcblxuICAgIC8qIFByZXBlbmQgXCIwMFwiIGlmIHRoZSBtb3N0IHNpZ25pZmljYW50IGJpdCBpcyBzZXQgKi9cbiAgICBoZXhTdHIgPSBIRVhfTVNCX1JFR0VYLnRlc3QoaGV4U3RyKSA/IFwiMDBcIiArIGhleFN0ciA6IGhleFN0cjtcbiAgICBpZiAoaXNOZWdhdGl2ZSkge1xuICAgICAgLyogRmxpcCB0aGUgYml0cyBvZiB0aGUgcmVwcmVzZW50YXRpb24gKi9cbiAgICAgIHZhciBpbnZlcnRlZE5pYmJsZXMgPSBoZXhTdHIuc3BsaXQoJycpLm1hcChmdW5jdGlvbiAoeCkge1xuICAgICAgICB2YXIgaW52ZXJ0ZWROaWJibGUgPSB+cGFyc2VJbnQoeCwgMTYpICYgMHhmO1xuICAgICAgICByZXR1cm4gJzAxMjM0NTY3ODlBQkNERUYnLmNoYXJBdChpbnZlcnRlZE5pYmJsZSk7XG4gICAgICB9KS5qb2luKCcnKTtcblxuICAgICAgLyogQWZ0ZXIgZmxpcHBpbmcgdGhlIGJpdHMsIGFkZCBvbmUgdG8gZ2V0IHRoZSAyJ3MgY29tcGxlbWVudCByZXByZXNlbnRhdGlvbiAqL1xuICAgICAgdmFyIGZsaXBwZWRCaXRzQkkgPSBuZXcgX0JpZ0ludGVnZXJbXCJkZWZhdWx0XCJdKGludmVydGVkTmliYmxlcywgMTYpLmFkZChfQmlnSW50ZWdlcltcImRlZmF1bHRcIl0uT05FKTtcbiAgICAgIGhleFN0ciA9IGZsaXBwZWRCaXRzQkkudG9TdHJpbmcoMTYpO1xuXG4gICAgICAvKlxuICAgICAgRm9yIGhleCBzdHJpbmdzIHN0YXJ0aW5nIHdpdGggJ0ZGOCcsICdGRicgY2FuIGJlIGRyb3BwZWQsIGUuZy4gMHhGRkZGODA9MHhGRjgwPTB4ODA9LTEyOFxuICAgICAgXHRcdEFueSBzZXF1ZW5jZSBvZiAnMScgYml0cyBvbiB0aGUgbGVmdCBjYW4gYWx3YXlzIGJlIHN1YnN0aXR1dGVkIHdpdGggYSBzaW5nbGUgJzEnIGJpdFxuICAgICAgd2l0aG91dCBjaGFuZ2luZyB0aGUgcmVwcmVzZW50ZWQgdmFsdWUuXG4gICAgICBcdFx0VGhpcyBvbmx5IGhhcHBlbnMgaW4gdGhlIGNhc2Ugd2hlbiB0aGUgaW5wdXQgaXMgODAuLi4wMFxuICAgICAgKi9cbiAgICAgIGlmIChoZXhTdHIudG9VcHBlckNhc2UoKS5zdGFydHNXaXRoKCdGRjgnKSkge1xuICAgICAgICBoZXhTdHIgPSBoZXhTdHIuc3Vic3RyaW5nKDIpO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gaGV4U3RyO1xuICB9O1xuICByZXR1cm4gQXV0aGVudGljYXRpb25IZWxwZXI7XG59KCk7XG5leHBvcnRzW1wiZGVmYXVsdFwiXSA9IEF1dGhlbnRpY2F0aW9uSGVscGVyOyJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/amazon-cognito-identity-js/lib/AuthenticationHelper.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/amazon-cognito-identity-js/lib/BigInteger.js":
/*!*******************************************************************!*\
  !*** ./node_modules/amazon-cognito-identity-js/lib/BigInteger.js ***!
  \*******************************************************************/
/***/ ((__unused_webpack_module, exports) => {

eval("\n\nexports.__esModule = true;\nexports[\"default\"] = void 0;\n// A small implementation of BigInteger based on http://www-cs-students.stanford.edu/~tjw/jsbn/\n//\n// All public methods have been removed except the following:\n//   new BigInteger(a, b) (only radix 2, 4, 8, 16 and 32 supported)\n//   toString (only radix 2, 4, 8, 16 and 32 supported)\n//   negate\n//   abs\n//   compareTo\n//   bitLength\n//   mod\n//   equals\n//   add\n//   subtract\n//   multiply\n//   divide\n//   modPow\nvar _default = BigInteger;\n/*\n * Copyright (c) 2003-2005  Tom Wu\n * All Rights Reserved.\n *\n * Permission is hereby granted, free of charge, to any person obtaining\n * a copy of this software and associated documentation files (the\n * \"Software\"), to deal in the Software without restriction, including\n * without limitation the rights to use, copy, modify, merge, publish,\n * distribute, sublicense, and/or sell copies of the Software, and to\n * permit persons to whom the Software is furnished to do so, subject to\n * the following conditions:\n *\n * The above copyright notice and this permission notice shall be\n * included in all copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS-IS\" AND WITHOUT WARRANTY OF ANY KIND,\n * EXPRESS, IMPLIED OR OTHERWISE, INCLUDING WITHOUT LIMITATION, ANY\n * WARRANTY OF MERCHANTABILITY OR FITNESS FOR A PARTICULAR PURPOSE.\n *\n * IN NO EVENT SHALL TOM WU BE LIABLE FOR ANY SPECIAL, INCIDENTAL,\n * INDIRECT OR CONSEQUENTIAL DAMAGES OF ANY KIND, OR ANY DAMAGES WHATSOEVER\n * RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER OR NOT ADVISED OF\n * THE POSSIBILITY OF DAMAGE, AND ON ANY THEORY OF LIABILITY, ARISING OUT\n * OF OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.\n *\n * In addition, the following condition applies:\n *\n * All redistributions must retain an intact copy of this copyright notice\n * and disclaimer.\n */\n// (public) Constructor\nexports[\"default\"] = _default;\nfunction BigInteger(a, b) {\n  if (a != null) this.fromString(a, b);\n}\n\n// return new, unset BigInteger\nfunction nbi() {\n  return new BigInteger(null);\n}\n\n// Bits per digit\nvar dbits;\n\n// JavaScript engine analysis\nvar canary = 0xdeadbeefcafe;\nvar j_lm = (canary & 0xffffff) == 0xefcafe;\n\n// am: Compute w_j += (x*this_i), propagate carries,\n// c is initial carry, returns final carry.\n// c < 3*dvalue, x < 2*dvalue, this_i < dvalue\n// We need to select the fastest one that works in this environment.\n\n// am1: use a single mult and divide to get the high bits,\n// max digit bits should be 26 because\n// max internal value = 2*dvalue^2-2*dvalue (< 2^53)\nfunction am1(i, x, w, j, c, n) {\n  while (--n >= 0) {\n    var v = x * this[i++] + w[j] + c;\n    c = Math.floor(v / 0x4000000);\n    w[j++] = v & 0x3ffffff;\n  }\n  return c;\n}\n// am2 avoids a big mult-and-extract completely.\n// Max digit bits should be <= 30 because we do bitwise ops\n// on values up to 2*hdvalue^2-hdvalue-1 (< 2^31)\nfunction am2(i, x, w, j, c, n) {\n  var xl = x & 0x7fff,\n    xh = x >> 15;\n  while (--n >= 0) {\n    var l = this[i] & 0x7fff;\n    var h = this[i++] >> 15;\n    var m = xh * l + h * xl;\n    l = xl * l + ((m & 0x7fff) << 15) + w[j] + (c & 0x3fffffff);\n    c = (l >>> 30) + (m >>> 15) + xh * h + (c >>> 30);\n    w[j++] = l & 0x3fffffff;\n  }\n  return c;\n}\n// Alternately, set max digit bits to 28 since some\n// browsers slow down when dealing with 32-bit numbers.\nfunction am3(i, x, w, j, c, n) {\n  var xl = x & 0x3fff,\n    xh = x >> 14;\n  while (--n >= 0) {\n    var l = this[i] & 0x3fff;\n    var h = this[i++] >> 14;\n    var m = xh * l + h * xl;\n    l = xl * l + ((m & 0x3fff) << 14) + w[j] + c;\n    c = (l >> 28) + (m >> 14) + xh * h;\n    w[j++] = l & 0xfffffff;\n  }\n  return c;\n}\nvar inBrowser = typeof navigator !== 'undefined';\nif (inBrowser && j_lm && navigator.appName == 'Microsoft Internet Explorer') {\n  BigInteger.prototype.am = am2;\n  dbits = 30;\n} else if (inBrowser && j_lm && navigator.appName != 'Netscape') {\n  BigInteger.prototype.am = am1;\n  dbits = 26;\n} else {\n  // Mozilla/Netscape seems to prefer am3\n  BigInteger.prototype.am = am3;\n  dbits = 28;\n}\nBigInteger.prototype.DB = dbits;\nBigInteger.prototype.DM = (1 << dbits) - 1;\nBigInteger.prototype.DV = 1 << dbits;\nvar BI_FP = 52;\nBigInteger.prototype.FV = Math.pow(2, BI_FP);\nBigInteger.prototype.F1 = BI_FP - dbits;\nBigInteger.prototype.F2 = 2 * dbits - BI_FP;\n\n// Digit conversions\nvar BI_RM = '0123456789abcdefghijklmnopqrstuvwxyz';\nvar BI_RC = new Array();\nvar rr, vv;\nrr = '0'.charCodeAt(0);\nfor (vv = 0; vv <= 9; ++vv) BI_RC[rr++] = vv;\nrr = 'a'.charCodeAt(0);\nfor (vv = 10; vv < 36; ++vv) BI_RC[rr++] = vv;\nrr = 'A'.charCodeAt(0);\nfor (vv = 10; vv < 36; ++vv) BI_RC[rr++] = vv;\nfunction int2char(n) {\n  return BI_RM.charAt(n);\n}\nfunction intAt(s, i) {\n  var c = BI_RC[s.charCodeAt(i)];\n  return c == null ? -1 : c;\n}\n\n// (protected) copy this to r\nfunction bnpCopyTo(r) {\n  for (var i = this.t - 1; i >= 0; --i) r[i] = this[i];\n  r.t = this.t;\n  r.s = this.s;\n}\n\n// (protected) set from integer value x, -DV <= x < DV\nfunction bnpFromInt(x) {\n  this.t = 1;\n  this.s = x < 0 ? -1 : 0;\n  if (x > 0) this[0] = x;else if (x < -1) this[0] = x + this.DV;else this.t = 0;\n}\n\n// return bigint initialized to value\nfunction nbv(i) {\n  var r = nbi();\n  r.fromInt(i);\n  return r;\n}\n\n// (protected) set from string and radix\nfunction bnpFromString(s, b) {\n  var k;\n  if (b == 16) k = 4;else if (b == 8) k = 3;else if (b == 2) k = 1;else if (b == 32) k = 5;else if (b == 4) k = 2;else throw new Error('Only radix 2, 4, 8, 16, 32 are supported');\n  this.t = 0;\n  this.s = 0;\n  var i = s.length,\n    mi = false,\n    sh = 0;\n  while (--i >= 0) {\n    var x = intAt(s, i);\n    if (x < 0) {\n      if (s.charAt(i) == '-') mi = true;\n      continue;\n    }\n    mi = false;\n    if (sh == 0) this[this.t++] = x;else if (sh + k > this.DB) {\n      this[this.t - 1] |= (x & (1 << this.DB - sh) - 1) << sh;\n      this[this.t++] = x >> this.DB - sh;\n    } else this[this.t - 1] |= x << sh;\n    sh += k;\n    if (sh >= this.DB) sh -= this.DB;\n  }\n  this.clamp();\n  if (mi) BigInteger.ZERO.subTo(this, this);\n}\n\n// (protected) clamp off excess high words\nfunction bnpClamp() {\n  var c = this.s & this.DM;\n  while (this.t > 0 && this[this.t - 1] == c) --this.t;\n}\n\n// (public) return string representation in given radix\nfunction bnToString(b) {\n  if (this.s < 0) return '-' + this.negate().toString(b);\n  var k;\n  if (b == 16) k = 4;else if (b == 8) k = 3;else if (b == 2) k = 1;else if (b == 32) k = 5;else if (b == 4) k = 2;else throw new Error('Only radix 2, 4, 8, 16, 32 are supported');\n  var km = (1 << k) - 1,\n    d,\n    m = false,\n    r = '',\n    i = this.t;\n  var p = this.DB - i * this.DB % k;\n  if (i-- > 0) {\n    if (p < this.DB && (d = this[i] >> p) > 0) {\n      m = true;\n      r = int2char(d);\n    }\n    while (i >= 0) {\n      if (p < k) {\n        d = (this[i] & (1 << p) - 1) << k - p;\n        d |= this[--i] >> (p += this.DB - k);\n      } else {\n        d = this[i] >> (p -= k) & km;\n        if (p <= 0) {\n          p += this.DB;\n          --i;\n        }\n      }\n      if (d > 0) m = true;\n      if (m) r += int2char(d);\n    }\n  }\n  return m ? r : '0';\n}\n\n// (public) -this\nfunction bnNegate() {\n  var r = nbi();\n  BigInteger.ZERO.subTo(this, r);\n  return r;\n}\n\n// (public) |this|\nfunction bnAbs() {\n  return this.s < 0 ? this.negate() : this;\n}\n\n// (public) return + if this > a, - if this < a, 0 if equal\nfunction bnCompareTo(a) {\n  var r = this.s - a.s;\n  if (r != 0) return r;\n  var i = this.t;\n  r = i - a.t;\n  if (r != 0) return this.s < 0 ? -r : r;\n  while (--i >= 0) if ((r = this[i] - a[i]) != 0) return r;\n  return 0;\n}\n\n// returns bit length of the integer x\nfunction nbits(x) {\n  var r = 1,\n    t;\n  if ((t = x >>> 16) != 0) {\n    x = t;\n    r += 16;\n  }\n  if ((t = x >> 8) != 0) {\n    x = t;\n    r += 8;\n  }\n  if ((t = x >> 4) != 0) {\n    x = t;\n    r += 4;\n  }\n  if ((t = x >> 2) != 0) {\n    x = t;\n    r += 2;\n  }\n  if ((t = x >> 1) != 0) {\n    x = t;\n    r += 1;\n  }\n  return r;\n}\n\n// (public) return the number of bits in \"this\"\nfunction bnBitLength() {\n  if (this.t <= 0) return 0;\n  return this.DB * (this.t - 1) + nbits(this[this.t - 1] ^ this.s & this.DM);\n}\n\n// (protected) r = this << n*DB\nfunction bnpDLShiftTo(n, r) {\n  var i;\n  for (i = this.t - 1; i >= 0; --i) r[i + n] = this[i];\n  for (i = n - 1; i >= 0; --i) r[i] = 0;\n  r.t = this.t + n;\n  r.s = this.s;\n}\n\n// (protected) r = this >> n*DB\nfunction bnpDRShiftTo(n, r) {\n  for (var i = n; i < this.t; ++i) r[i - n] = this[i];\n  r.t = Math.max(this.t - n, 0);\n  r.s = this.s;\n}\n\n// (protected) r = this << n\nfunction bnpLShiftTo(n, r) {\n  var bs = n % this.DB;\n  var cbs = this.DB - bs;\n  var bm = (1 << cbs) - 1;\n  var ds = Math.floor(n / this.DB),\n    c = this.s << bs & this.DM,\n    i;\n  for (i = this.t - 1; i >= 0; --i) {\n    r[i + ds + 1] = this[i] >> cbs | c;\n    c = (this[i] & bm) << bs;\n  }\n  for (i = ds - 1; i >= 0; --i) r[i] = 0;\n  r[ds] = c;\n  r.t = this.t + ds + 1;\n  r.s = this.s;\n  r.clamp();\n}\n\n// (protected) r = this >> n\nfunction bnpRShiftTo(n, r) {\n  r.s = this.s;\n  var ds = Math.floor(n / this.DB);\n  if (ds >= this.t) {\n    r.t = 0;\n    return;\n  }\n  var bs = n % this.DB;\n  var cbs = this.DB - bs;\n  var bm = (1 << bs) - 1;\n  r[0] = this[ds] >> bs;\n  for (var i = ds + 1; i < this.t; ++i) {\n    r[i - ds - 1] |= (this[i] & bm) << cbs;\n    r[i - ds] = this[i] >> bs;\n  }\n  if (bs > 0) r[this.t - ds - 1] |= (this.s & bm) << cbs;\n  r.t = this.t - ds;\n  r.clamp();\n}\n\n// (protected) r = this - a\nfunction bnpSubTo(a, r) {\n  var i = 0,\n    c = 0,\n    m = Math.min(a.t, this.t);\n  while (i < m) {\n    c += this[i] - a[i];\n    r[i++] = c & this.DM;\n    c >>= this.DB;\n  }\n  if (a.t < this.t) {\n    c -= a.s;\n    while (i < this.t) {\n      c += this[i];\n      r[i++] = c & this.DM;\n      c >>= this.DB;\n    }\n    c += this.s;\n  } else {\n    c += this.s;\n    while (i < a.t) {\n      c -= a[i];\n      r[i++] = c & this.DM;\n      c >>= this.DB;\n    }\n    c -= a.s;\n  }\n  r.s = c < 0 ? -1 : 0;\n  if (c < -1) r[i++] = this.DV + c;else if (c > 0) r[i++] = c;\n  r.t = i;\n  r.clamp();\n}\n\n// (protected) r = this * a, r != this,a (HAC 14.12)\n// \"this\" should be the larger one if appropriate.\nfunction bnpMultiplyTo(a, r) {\n  var x = this.abs(),\n    y = a.abs();\n  var i = x.t;\n  r.t = i + y.t;\n  while (--i >= 0) r[i] = 0;\n  for (i = 0; i < y.t; ++i) r[i + x.t] = x.am(0, y[i], r, i, 0, x.t);\n  r.s = 0;\n  r.clamp();\n  if (this.s != a.s) BigInteger.ZERO.subTo(r, r);\n}\n\n// (protected) r = this^2, r != this (HAC 14.16)\nfunction bnpSquareTo(r) {\n  var x = this.abs();\n  var i = r.t = 2 * x.t;\n  while (--i >= 0) r[i] = 0;\n  for (i = 0; i < x.t - 1; ++i) {\n    var c = x.am(i, x[i], r, 2 * i, 0, 1);\n    if ((r[i + x.t] += x.am(i + 1, 2 * x[i], r, 2 * i + 1, c, x.t - i - 1)) >= x.DV) {\n      r[i + x.t] -= x.DV;\n      r[i + x.t + 1] = 1;\n    }\n  }\n  if (r.t > 0) r[r.t - 1] += x.am(i, x[i], r, 2 * i, 0, 1);\n  r.s = 0;\n  r.clamp();\n}\n\n// (protected) divide this by m, quotient and remainder to q, r (HAC 14.20)\n// r != q, this != m.  q or r may be null.\nfunction bnpDivRemTo(m, q, r) {\n  var pm = m.abs();\n  if (pm.t <= 0) return;\n  var pt = this.abs();\n  if (pt.t < pm.t) {\n    if (q != null) q.fromInt(0);\n    if (r != null) this.copyTo(r);\n    return;\n  }\n  if (r == null) r = nbi();\n  var y = nbi(),\n    ts = this.s,\n    ms = m.s;\n  var nsh = this.DB - nbits(pm[pm.t - 1]);\n  // normalize modulus\n  if (nsh > 0) {\n    pm.lShiftTo(nsh, y);\n    pt.lShiftTo(nsh, r);\n  } else {\n    pm.copyTo(y);\n    pt.copyTo(r);\n  }\n  var ys = y.t;\n  var y0 = y[ys - 1];\n  if (y0 == 0) return;\n  var yt = y0 * (1 << this.F1) + (ys > 1 ? y[ys - 2] >> this.F2 : 0);\n  var d1 = this.FV / yt,\n    d2 = (1 << this.F1) / yt,\n    e = 1 << this.F2;\n  var i = r.t,\n    j = i - ys,\n    t = q == null ? nbi() : q;\n  y.dlShiftTo(j, t);\n  if (r.compareTo(t) >= 0) {\n    r[r.t++] = 1;\n    r.subTo(t, r);\n  }\n  BigInteger.ONE.dlShiftTo(ys, t);\n  t.subTo(y, y);\n  // \"negative\" y so we can replace sub with am later\n  while (y.t < ys) y[y.t++] = 0;\n  while (--j >= 0) {\n    // Estimate quotient digit\n    var qd = r[--i] == y0 ? this.DM : Math.floor(r[i] * d1 + (r[i - 1] + e) * d2);\n    if ((r[i] += y.am(0, qd, r, j, 0, ys)) < qd) {\n      // Try it out\n      y.dlShiftTo(j, t);\n      r.subTo(t, r);\n      while (r[i] < --qd) r.subTo(t, r);\n    }\n  }\n  if (q != null) {\n    r.drShiftTo(ys, q);\n    if (ts != ms) BigInteger.ZERO.subTo(q, q);\n  }\n  r.t = ys;\n  r.clamp();\n  if (nsh > 0) r.rShiftTo(nsh, r);\n  // Denormalize remainder\n  if (ts < 0) BigInteger.ZERO.subTo(r, r);\n}\n\n// (public) this mod a\nfunction bnMod(a) {\n  var r = nbi();\n  this.abs().divRemTo(a, null, r);\n  if (this.s < 0 && r.compareTo(BigInteger.ZERO) > 0) a.subTo(r, r);\n  return r;\n}\n\n// (protected) return \"-1/this % 2^DB\"; useful for Mont. reduction\n// justification:\n//         xy == 1 (mod m)\n//         xy =  1+km\n//   xy(2-xy) = (1+km)(1-km)\n// x[y(2-xy)] = 1-k^2m^2\n// x[y(2-xy)] == 1 (mod m^2)\n// if y is 1/x mod m, then y(2-xy) is 1/x mod m^2\n// should reduce x and y(2-xy) by m^2 at each step to keep size bounded.\n// JS multiply \"overflows\" differently from C/C++, so care is needed here.\nfunction bnpInvDigit() {\n  if (this.t < 1) return 0;\n  var x = this[0];\n  if ((x & 1) == 0) return 0;\n  var y = x & 3;\n  // y == 1/x mod 2^2\n  y = y * (2 - (x & 0xf) * y) & 0xf;\n  // y == 1/x mod 2^4\n  y = y * (2 - (x & 0xff) * y) & 0xff;\n  // y == 1/x mod 2^8\n  y = y * (2 - ((x & 0xffff) * y & 0xffff)) & 0xffff;\n  // y == 1/x mod 2^16\n  // last step - calculate inverse mod DV directly;\n  // assumes 16 < DB <= 32 and assumes ability to handle 48-bit ints\n  y = y * (2 - x * y % this.DV) % this.DV;\n  // y == 1/x mod 2^dbits\n  // we really want the negative inverse, and -DV < y < DV\n  return y > 0 ? this.DV - y : -y;\n}\nfunction bnEquals(a) {\n  return this.compareTo(a) == 0;\n}\n\n// (protected) r = this + a\nfunction bnpAddTo(a, r) {\n  var i = 0,\n    c = 0,\n    m = Math.min(a.t, this.t);\n  while (i < m) {\n    c += this[i] + a[i];\n    r[i++] = c & this.DM;\n    c >>= this.DB;\n  }\n  if (a.t < this.t) {\n    c += a.s;\n    while (i < this.t) {\n      c += this[i];\n      r[i++] = c & this.DM;\n      c >>= this.DB;\n    }\n    c += this.s;\n  } else {\n    c += this.s;\n    while (i < a.t) {\n      c += a[i];\n      r[i++] = c & this.DM;\n      c >>= this.DB;\n    }\n    c += a.s;\n  }\n  r.s = c < 0 ? -1 : 0;\n  if (c > 0) r[i++] = c;else if (c < -1) r[i++] = this.DV + c;\n  r.t = i;\n  r.clamp();\n}\n\n// (public) this + a\nfunction bnAdd(a) {\n  var r = nbi();\n  this.addTo(a, r);\n  return r;\n}\n\n// (public) this - a\nfunction bnSubtract(a) {\n  var r = nbi();\n  this.subTo(a, r);\n  return r;\n}\n\n// (public) this * a\nfunction bnMultiply(a) {\n  var r = nbi();\n  this.multiplyTo(a, r);\n  return r;\n}\n\n// (public) this / a\nfunction bnDivide(a) {\n  var r = nbi();\n  this.divRemTo(a, r, null);\n  return r;\n}\n\n// Montgomery reduction\nfunction Montgomery(m) {\n  this.m = m;\n  this.mp = m.invDigit();\n  this.mpl = this.mp & 0x7fff;\n  this.mph = this.mp >> 15;\n  this.um = (1 << m.DB - 15) - 1;\n  this.mt2 = 2 * m.t;\n}\n\n// xR mod m\nfunction montConvert(x) {\n  var r = nbi();\n  x.abs().dlShiftTo(this.m.t, r);\n  r.divRemTo(this.m, null, r);\n  if (x.s < 0 && r.compareTo(BigInteger.ZERO) > 0) this.m.subTo(r, r);\n  return r;\n}\n\n// x/R mod m\nfunction montRevert(x) {\n  var r = nbi();\n  x.copyTo(r);\n  this.reduce(r);\n  return r;\n}\n\n// x = x/R mod m (HAC 14.32)\nfunction montReduce(x) {\n  while (x.t <= this.mt2)\n  // pad x so am has enough room later\n  x[x.t++] = 0;\n  for (var i = 0; i < this.m.t; ++i) {\n    // faster way of calculating u0 = x[i]*mp mod DV\n    var j = x[i] & 0x7fff;\n    var u0 = j * this.mpl + ((j * this.mph + (x[i] >> 15) * this.mpl & this.um) << 15) & x.DM;\n    // use am to combine the multiply-shift-add into one call\n    j = i + this.m.t;\n    x[j] += this.m.am(0, u0, x, i, 0, this.m.t);\n    // propagate carry\n    while (x[j] >= x.DV) {\n      x[j] -= x.DV;\n      x[++j]++;\n    }\n  }\n  x.clamp();\n  x.drShiftTo(this.m.t, x);\n  if (x.compareTo(this.m) >= 0) x.subTo(this.m, x);\n}\n\n// r = \"x^2/R mod m\"; x != r\nfunction montSqrTo(x, r) {\n  x.squareTo(r);\n  this.reduce(r);\n}\n\n// r = \"xy/R mod m\"; x,y != r\nfunction montMulTo(x, y, r) {\n  x.multiplyTo(y, r);\n  this.reduce(r);\n}\nMontgomery.prototype.convert = montConvert;\nMontgomery.prototype.revert = montRevert;\nMontgomery.prototype.reduce = montReduce;\nMontgomery.prototype.mulTo = montMulTo;\nMontgomery.prototype.sqrTo = montSqrTo;\n\n// (public) this^e % m (HAC 14.85)\nfunction bnModPow(e, m, callback) {\n  var i = e.bitLength(),\n    k,\n    r = nbv(1),\n    z = new Montgomery(m);\n  if (i <= 0) return r;else if (i < 18) k = 1;else if (i < 48) k = 3;else if (i < 144) k = 4;else if (i < 768) k = 5;else k = 6;\n\n  // precomputation\n  var g = new Array(),\n    n = 3,\n    k1 = k - 1,\n    km = (1 << k) - 1;\n  g[1] = z.convert(this);\n  if (k > 1) {\n    var g2 = nbi();\n    z.sqrTo(g[1], g2);\n    while (n <= km) {\n      g[n] = nbi();\n      z.mulTo(g2, g[n - 2], g[n]);\n      n += 2;\n    }\n  }\n  var j = e.t - 1,\n    w,\n    is1 = true,\n    r2 = nbi(),\n    t;\n  i = nbits(e[j]) - 1;\n  while (j >= 0) {\n    if (i >= k1) w = e[j] >> i - k1 & km;else {\n      w = (e[j] & (1 << i + 1) - 1) << k1 - i;\n      if (j > 0) w |= e[j - 1] >> this.DB + i - k1;\n    }\n    n = k;\n    while ((w & 1) == 0) {\n      w >>= 1;\n      --n;\n    }\n    if ((i -= n) < 0) {\n      i += this.DB;\n      --j;\n    }\n    if (is1) {\n      // ret == 1, don't bother squaring or multiplying it\n      g[w].copyTo(r);\n      is1 = false;\n    } else {\n      while (n > 1) {\n        z.sqrTo(r, r2);\n        z.sqrTo(r2, r);\n        n -= 2;\n      }\n      if (n > 0) z.sqrTo(r, r2);else {\n        t = r;\n        r = r2;\n        r2 = t;\n      }\n      z.mulTo(r2, g[w], r);\n    }\n    while (j >= 0 && (e[j] & 1 << i) == 0) {\n      z.sqrTo(r, r2);\n      t = r;\n      r = r2;\n      r2 = t;\n      if (--i < 0) {\n        i = this.DB - 1;\n        --j;\n      }\n    }\n  }\n  var result = z.revert(r);\n  callback(null, result);\n  return result;\n}\n\n// protected\nBigInteger.prototype.copyTo = bnpCopyTo;\nBigInteger.prototype.fromInt = bnpFromInt;\nBigInteger.prototype.fromString = bnpFromString;\nBigInteger.prototype.clamp = bnpClamp;\nBigInteger.prototype.dlShiftTo = bnpDLShiftTo;\nBigInteger.prototype.drShiftTo = bnpDRShiftTo;\nBigInteger.prototype.lShiftTo = bnpLShiftTo;\nBigInteger.prototype.rShiftTo = bnpRShiftTo;\nBigInteger.prototype.subTo = bnpSubTo;\nBigInteger.prototype.multiplyTo = bnpMultiplyTo;\nBigInteger.prototype.squareTo = bnpSquareTo;\nBigInteger.prototype.divRemTo = bnpDivRemTo;\nBigInteger.prototype.invDigit = bnpInvDigit;\nBigInteger.prototype.addTo = bnpAddTo;\n\n// public\nBigInteger.prototype.toString = bnToString;\nBigInteger.prototype.negate = bnNegate;\nBigInteger.prototype.abs = bnAbs;\nBigInteger.prototype.compareTo = bnCompareTo;\nBigInteger.prototype.bitLength = bnBitLength;\nBigInteger.prototype.mod = bnMod;\nBigInteger.prototype.equals = bnEquals;\nBigInteger.prototype.add = bnAdd;\nBigInteger.prototype.subtract = bnSubtract;\nBigInteger.prototype.multiply = bnMultiply;\nBigInteger.prototype.divide = bnDivide;\nBigInteger.prototype.modPow = bnModPow;\n\n// \"constants\"\nBigInteger.ZERO = nbv(0);\nBigInteger.ONE = nbv(1);//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvYW1hem9uLWNvZ25pdG8taWRlbnRpdHktanMvbGliL0JpZ0ludGVnZXIuanMiLCJtYXBwaW5ncyI6IkFBQWE7O0FBRWIsa0JBQWtCO0FBQ2xCLGtCQUFrQjtBQUNsQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrQkFBa0I7QUFDbEI7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBRTtBQUNGO0FBQ0E7QUFDQSxFQUFFO0FBQ0Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYSxTQUFTO0FBQ3RCO0FBQ0EsY0FBYyxTQUFTO0FBQ3ZCO0FBQ0EsY0FBYyxTQUFTO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSwyQkFBMkIsUUFBUTtBQUNuQztBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSx5QkFBeUIsdUNBQXVDO0FBQ2hFOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxxQkFBcUIsdUJBQXVCLHVCQUF1Qix3QkFBd0IsdUJBQXVCO0FBQ2xIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG9DQUFvQztBQUNwQztBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscUJBQXFCLHVCQUF1Qix1QkFBdUIsd0JBQXdCLHVCQUF1QjtBQUNsSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxRQUFRO0FBQ1I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsdUJBQXVCLFFBQVE7QUFDL0Isa0JBQWtCLFFBQVE7QUFDMUI7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxrQkFBa0IsWUFBWTtBQUM5QjtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHVCQUF1QixRQUFRO0FBQy9CO0FBQ0E7QUFDQTtBQUNBLG1CQUFtQixRQUFRO0FBQzNCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsdUJBQXVCLFlBQVk7QUFDbkM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG1DQUFtQztBQUNuQztBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGNBQWMsU0FBUztBQUN2QjtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsY0FBYyxhQUFhO0FBQzNCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLHdDQUF3QztBQUN4QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esd0JBQXdCO0FBQ3hCO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtCQUFrQixjQUFjO0FBQ2hDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLHNCQUFzQjtBQUN0QjtBQUNBO0FBQ0E7QUFDQTs7QUFFQSxxQkFBcUI7QUFDckI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHVCQUF1Qix1QkFBdUIsdUJBQXVCLHdCQUF3Qix3QkFBd0I7O0FBRXJIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EseUNBQXlDO0FBQ3pDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnQ0FBZ0M7QUFDaEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9wYXl3aW5kLy4vbm9kZV9tb2R1bGVzL2FtYXpvbi1jb2duaXRvLWlkZW50aXR5LWpzL2xpYi9CaWdJbnRlZ2VyLmpzP2NkYTYiXSwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG5cbmV4cG9ydHMuX19lc01vZHVsZSA9IHRydWU7XG5leHBvcnRzW1wiZGVmYXVsdFwiXSA9IHZvaWQgMDtcbi8vIEEgc21hbGwgaW1wbGVtZW50YXRpb24gb2YgQmlnSW50ZWdlciBiYXNlZCBvbiBodHRwOi8vd3d3LWNzLXN0dWRlbnRzLnN0YW5mb3JkLmVkdS9+dGp3L2pzYm4vXG4vL1xuLy8gQWxsIHB1YmxpYyBtZXRob2RzIGhhdmUgYmVlbiByZW1vdmVkIGV4Y2VwdCB0aGUgZm9sbG93aW5nOlxuLy8gICBuZXcgQmlnSW50ZWdlcihhLCBiKSAob25seSByYWRpeCAyLCA0LCA4LCAxNiBhbmQgMzIgc3VwcG9ydGVkKVxuLy8gICB0b1N0cmluZyAob25seSByYWRpeCAyLCA0LCA4LCAxNiBhbmQgMzIgc3VwcG9ydGVkKVxuLy8gICBuZWdhdGVcbi8vICAgYWJzXG4vLyAgIGNvbXBhcmVUb1xuLy8gICBiaXRMZW5ndGhcbi8vICAgbW9kXG4vLyAgIGVxdWFsc1xuLy8gICBhZGRcbi8vICAgc3VidHJhY3Rcbi8vICAgbXVsdGlwbHlcbi8vICAgZGl2aWRlXG4vLyAgIG1vZFBvd1xudmFyIF9kZWZhdWx0ID0gQmlnSW50ZWdlcjtcbi8qXG4gKiBDb3B5cmlnaHQgKGMpIDIwMDMtMjAwNSAgVG9tIFd1XG4gKiBBbGwgUmlnaHRzIFJlc2VydmVkLlxuICpcbiAqIFBlcm1pc3Npb24gaXMgaGVyZWJ5IGdyYW50ZWQsIGZyZWUgb2YgY2hhcmdlLCB0byBhbnkgcGVyc29uIG9idGFpbmluZ1xuICogYSBjb3B5IG9mIHRoaXMgc29mdHdhcmUgYW5kIGFzc29jaWF0ZWQgZG9jdW1lbnRhdGlvbiBmaWxlcyAodGhlXG4gKiBcIlNvZnR3YXJlXCIpLCB0byBkZWFsIGluIHRoZSBTb2Z0d2FyZSB3aXRob3V0IHJlc3RyaWN0aW9uLCBpbmNsdWRpbmdcbiAqIHdpdGhvdXQgbGltaXRhdGlvbiB0aGUgcmlnaHRzIHRvIHVzZSwgY29weSwgbW9kaWZ5LCBtZXJnZSwgcHVibGlzaCxcbiAqIGRpc3RyaWJ1dGUsIHN1YmxpY2Vuc2UsIGFuZC9vciBzZWxsIGNvcGllcyBvZiB0aGUgU29mdHdhcmUsIGFuZCB0b1xuICogcGVybWl0IHBlcnNvbnMgdG8gd2hvbSB0aGUgU29mdHdhcmUgaXMgZnVybmlzaGVkIHRvIGRvIHNvLCBzdWJqZWN0IHRvXG4gKiB0aGUgZm9sbG93aW5nIGNvbmRpdGlvbnM6XG4gKlxuICogVGhlIGFib3ZlIGNvcHlyaWdodCBub3RpY2UgYW5kIHRoaXMgcGVybWlzc2lvbiBub3RpY2Ugc2hhbGwgYmVcbiAqIGluY2x1ZGVkIGluIGFsbCBjb3BpZXMgb3Igc3Vic3RhbnRpYWwgcG9ydGlvbnMgb2YgdGhlIFNvZnR3YXJlLlxuICpcbiAqIFRIRSBTT0ZUV0FSRSBJUyBQUk9WSURFRCBcIkFTLUlTXCIgQU5EIFdJVEhPVVQgV0FSUkFOVFkgT0YgQU5ZIEtJTkQsXG4gKiBFWFBSRVNTLCBJTVBMSUVEIE9SIE9USEVSV0lTRSwgSU5DTFVESU5HIFdJVEhPVVQgTElNSVRBVElPTiwgQU5ZXG4gKiBXQVJSQU5UWSBPRiBNRVJDSEFOVEFCSUxJVFkgT1IgRklUTkVTUyBGT1IgQSBQQVJUSUNVTEFSIFBVUlBPU0UuXG4gKlxuICogSU4gTk8gRVZFTlQgU0hBTEwgVE9NIFdVIEJFIExJQUJMRSBGT1IgQU5ZIFNQRUNJQUwsIElOQ0lERU5UQUwsXG4gKiBJTkRJUkVDVCBPUiBDT05TRVFVRU5USUFMIERBTUFHRVMgT0YgQU5ZIEtJTkQsIE9SIEFOWSBEQU1BR0VTIFdIQVRTT0VWRVJcbiAqIFJFU1VMVElORyBGUk9NIExPU1MgT0YgVVNFLCBEQVRBIE9SIFBST0ZJVFMsIFdIRVRIRVIgT1IgTk9UIEFEVklTRUQgT0ZcbiAqIFRIRSBQT1NTSUJJTElUWSBPRiBEQU1BR0UsIEFORCBPTiBBTlkgVEhFT1JZIE9GIExJQUJJTElUWSwgQVJJU0lORyBPVVRcbiAqIE9GIE9SIElOIENPTk5FQ1RJT04gV0lUSCBUSEUgVVNFIE9SIFBFUkZPUk1BTkNFIE9GIFRISVMgU09GVFdBUkUuXG4gKlxuICogSW4gYWRkaXRpb24sIHRoZSBmb2xsb3dpbmcgY29uZGl0aW9uIGFwcGxpZXM6XG4gKlxuICogQWxsIHJlZGlzdHJpYnV0aW9ucyBtdXN0IHJldGFpbiBhbiBpbnRhY3QgY29weSBvZiB0aGlzIGNvcHlyaWdodCBub3RpY2VcbiAqIGFuZCBkaXNjbGFpbWVyLlxuICovXG4vLyAocHVibGljKSBDb25zdHJ1Y3RvclxuZXhwb3J0c1tcImRlZmF1bHRcIl0gPSBfZGVmYXVsdDtcbmZ1bmN0aW9uIEJpZ0ludGVnZXIoYSwgYikge1xuICBpZiAoYSAhPSBudWxsKSB0aGlzLmZyb21TdHJpbmcoYSwgYik7XG59XG5cbi8vIHJldHVybiBuZXcsIHVuc2V0IEJpZ0ludGVnZXJcbmZ1bmN0aW9uIG5iaSgpIHtcbiAgcmV0dXJuIG5ldyBCaWdJbnRlZ2VyKG51bGwpO1xufVxuXG4vLyBCaXRzIHBlciBkaWdpdFxudmFyIGRiaXRzO1xuXG4vLyBKYXZhU2NyaXB0IGVuZ2luZSBhbmFseXNpc1xudmFyIGNhbmFyeSA9IDB4ZGVhZGJlZWZjYWZlO1xudmFyIGpfbG0gPSAoY2FuYXJ5ICYgMHhmZmZmZmYpID09IDB4ZWZjYWZlO1xuXG4vLyBhbTogQ29tcHV0ZSB3X2ogKz0gKHgqdGhpc19pKSwgcHJvcGFnYXRlIGNhcnJpZXMsXG4vLyBjIGlzIGluaXRpYWwgY2FycnksIHJldHVybnMgZmluYWwgY2FycnkuXG4vLyBjIDwgMypkdmFsdWUsIHggPCAyKmR2YWx1ZSwgdGhpc19pIDwgZHZhbHVlXG4vLyBXZSBuZWVkIHRvIHNlbGVjdCB0aGUgZmFzdGVzdCBvbmUgdGhhdCB3b3JrcyBpbiB0aGlzIGVudmlyb25tZW50LlxuXG4vLyBhbTE6IHVzZSBhIHNpbmdsZSBtdWx0IGFuZCBkaXZpZGUgdG8gZ2V0IHRoZSBoaWdoIGJpdHMsXG4vLyBtYXggZGlnaXQgYml0cyBzaG91bGQgYmUgMjYgYmVjYXVzZVxuLy8gbWF4IGludGVybmFsIHZhbHVlID0gMipkdmFsdWVeMi0yKmR2YWx1ZSAoPCAyXjUzKVxuZnVuY3Rpb24gYW0xKGksIHgsIHcsIGosIGMsIG4pIHtcbiAgd2hpbGUgKC0tbiA+PSAwKSB7XG4gICAgdmFyIHYgPSB4ICogdGhpc1tpKytdICsgd1tqXSArIGM7XG4gICAgYyA9IE1hdGguZmxvb3IodiAvIDB4NDAwMDAwMCk7XG4gICAgd1tqKytdID0gdiAmIDB4M2ZmZmZmZjtcbiAgfVxuICByZXR1cm4gYztcbn1cbi8vIGFtMiBhdm9pZHMgYSBiaWcgbXVsdC1hbmQtZXh0cmFjdCBjb21wbGV0ZWx5LlxuLy8gTWF4IGRpZ2l0IGJpdHMgc2hvdWxkIGJlIDw9IDMwIGJlY2F1c2Ugd2UgZG8gYml0d2lzZSBvcHNcbi8vIG9uIHZhbHVlcyB1cCB0byAyKmhkdmFsdWVeMi1oZHZhbHVlLTEgKDwgMl4zMSlcbmZ1bmN0aW9uIGFtMihpLCB4LCB3LCBqLCBjLCBuKSB7XG4gIHZhciB4bCA9IHggJiAweDdmZmYsXG4gICAgeGggPSB4ID4+IDE1O1xuICB3aGlsZSAoLS1uID49IDApIHtcbiAgICB2YXIgbCA9IHRoaXNbaV0gJiAweDdmZmY7XG4gICAgdmFyIGggPSB0aGlzW2krK10gPj4gMTU7XG4gICAgdmFyIG0gPSB4aCAqIGwgKyBoICogeGw7XG4gICAgbCA9IHhsICogbCArICgobSAmIDB4N2ZmZikgPDwgMTUpICsgd1tqXSArIChjICYgMHgzZmZmZmZmZik7XG4gICAgYyA9IChsID4+PiAzMCkgKyAobSA+Pj4gMTUpICsgeGggKiBoICsgKGMgPj4+IDMwKTtcbiAgICB3W2orK10gPSBsICYgMHgzZmZmZmZmZjtcbiAgfVxuICByZXR1cm4gYztcbn1cbi8vIEFsdGVybmF0ZWx5LCBzZXQgbWF4IGRpZ2l0IGJpdHMgdG8gMjggc2luY2Ugc29tZVxuLy8gYnJvd3NlcnMgc2xvdyBkb3duIHdoZW4gZGVhbGluZyB3aXRoIDMyLWJpdCBudW1iZXJzLlxuZnVuY3Rpb24gYW0zKGksIHgsIHcsIGosIGMsIG4pIHtcbiAgdmFyIHhsID0geCAmIDB4M2ZmZixcbiAgICB4aCA9IHggPj4gMTQ7XG4gIHdoaWxlICgtLW4gPj0gMCkge1xuICAgIHZhciBsID0gdGhpc1tpXSAmIDB4M2ZmZjtcbiAgICB2YXIgaCA9IHRoaXNbaSsrXSA+PiAxNDtcbiAgICB2YXIgbSA9IHhoICogbCArIGggKiB4bDtcbiAgICBsID0geGwgKiBsICsgKChtICYgMHgzZmZmKSA8PCAxNCkgKyB3W2pdICsgYztcbiAgICBjID0gKGwgPj4gMjgpICsgKG0gPj4gMTQpICsgeGggKiBoO1xuICAgIHdbaisrXSA9IGwgJiAweGZmZmZmZmY7XG4gIH1cbiAgcmV0dXJuIGM7XG59XG52YXIgaW5Ccm93c2VyID0gdHlwZW9mIG5hdmlnYXRvciAhPT0gJ3VuZGVmaW5lZCc7XG5pZiAoaW5Ccm93c2VyICYmIGpfbG0gJiYgbmF2aWdhdG9yLmFwcE5hbWUgPT0gJ01pY3Jvc29mdCBJbnRlcm5ldCBFeHBsb3JlcicpIHtcbiAgQmlnSW50ZWdlci5wcm90b3R5cGUuYW0gPSBhbTI7XG4gIGRiaXRzID0gMzA7XG59IGVsc2UgaWYgKGluQnJvd3NlciAmJiBqX2xtICYmIG5hdmlnYXRvci5hcHBOYW1lICE9ICdOZXRzY2FwZScpIHtcbiAgQmlnSW50ZWdlci5wcm90b3R5cGUuYW0gPSBhbTE7XG4gIGRiaXRzID0gMjY7XG59IGVsc2Uge1xuICAvLyBNb3ppbGxhL05ldHNjYXBlIHNlZW1zIHRvIHByZWZlciBhbTNcbiAgQmlnSW50ZWdlci5wcm90b3R5cGUuYW0gPSBhbTM7XG4gIGRiaXRzID0gMjg7XG59XG5CaWdJbnRlZ2VyLnByb3RvdHlwZS5EQiA9IGRiaXRzO1xuQmlnSW50ZWdlci5wcm90b3R5cGUuRE0gPSAoMSA8PCBkYml0cykgLSAxO1xuQmlnSW50ZWdlci5wcm90b3R5cGUuRFYgPSAxIDw8IGRiaXRzO1xudmFyIEJJX0ZQID0gNTI7XG5CaWdJbnRlZ2VyLnByb3RvdHlwZS5GViA9IE1hdGgucG93KDIsIEJJX0ZQKTtcbkJpZ0ludGVnZXIucHJvdG90eXBlLkYxID0gQklfRlAgLSBkYml0cztcbkJpZ0ludGVnZXIucHJvdG90eXBlLkYyID0gMiAqIGRiaXRzIC0gQklfRlA7XG5cbi8vIERpZ2l0IGNvbnZlcnNpb25zXG52YXIgQklfUk0gPSAnMDEyMzQ1Njc4OWFiY2RlZmdoaWprbG1ub3BxcnN0dXZ3eHl6JztcbnZhciBCSV9SQyA9IG5ldyBBcnJheSgpO1xudmFyIHJyLCB2djtcbnJyID0gJzAnLmNoYXJDb2RlQXQoMCk7XG5mb3IgKHZ2ID0gMDsgdnYgPD0gOTsgKyt2dikgQklfUkNbcnIrK10gPSB2djtcbnJyID0gJ2EnLmNoYXJDb2RlQXQoMCk7XG5mb3IgKHZ2ID0gMTA7IHZ2IDwgMzY7ICsrdnYpIEJJX1JDW3JyKytdID0gdnY7XG5yciA9ICdBJy5jaGFyQ29kZUF0KDApO1xuZm9yICh2diA9IDEwOyB2diA8IDM2OyArK3Z2KSBCSV9SQ1tycisrXSA9IHZ2O1xuZnVuY3Rpb24gaW50MmNoYXIobikge1xuICByZXR1cm4gQklfUk0uY2hhckF0KG4pO1xufVxuZnVuY3Rpb24gaW50QXQocywgaSkge1xuICB2YXIgYyA9IEJJX1JDW3MuY2hhckNvZGVBdChpKV07XG4gIHJldHVybiBjID09IG51bGwgPyAtMSA6IGM7XG59XG5cbi8vIChwcm90ZWN0ZWQpIGNvcHkgdGhpcyB0byByXG5mdW5jdGlvbiBibnBDb3B5VG8ocikge1xuICBmb3IgKHZhciBpID0gdGhpcy50IC0gMTsgaSA+PSAwOyAtLWkpIHJbaV0gPSB0aGlzW2ldO1xuICByLnQgPSB0aGlzLnQ7XG4gIHIucyA9IHRoaXMucztcbn1cblxuLy8gKHByb3RlY3RlZCkgc2V0IGZyb20gaW50ZWdlciB2YWx1ZSB4LCAtRFYgPD0geCA8IERWXG5mdW5jdGlvbiBibnBGcm9tSW50KHgpIHtcbiAgdGhpcy50ID0gMTtcbiAgdGhpcy5zID0geCA8IDAgPyAtMSA6IDA7XG4gIGlmICh4ID4gMCkgdGhpc1swXSA9IHg7ZWxzZSBpZiAoeCA8IC0xKSB0aGlzWzBdID0geCArIHRoaXMuRFY7ZWxzZSB0aGlzLnQgPSAwO1xufVxuXG4vLyByZXR1cm4gYmlnaW50IGluaXRpYWxpemVkIHRvIHZhbHVlXG5mdW5jdGlvbiBuYnYoaSkge1xuICB2YXIgciA9IG5iaSgpO1xuICByLmZyb21JbnQoaSk7XG4gIHJldHVybiByO1xufVxuXG4vLyAocHJvdGVjdGVkKSBzZXQgZnJvbSBzdHJpbmcgYW5kIHJhZGl4XG5mdW5jdGlvbiBibnBGcm9tU3RyaW5nKHMsIGIpIHtcbiAgdmFyIGs7XG4gIGlmIChiID09IDE2KSBrID0gNDtlbHNlIGlmIChiID09IDgpIGsgPSAzO2Vsc2UgaWYgKGIgPT0gMikgayA9IDE7ZWxzZSBpZiAoYiA9PSAzMikgayA9IDU7ZWxzZSBpZiAoYiA9PSA0KSBrID0gMjtlbHNlIHRocm93IG5ldyBFcnJvcignT25seSByYWRpeCAyLCA0LCA4LCAxNiwgMzIgYXJlIHN1cHBvcnRlZCcpO1xuICB0aGlzLnQgPSAwO1xuICB0aGlzLnMgPSAwO1xuICB2YXIgaSA9IHMubGVuZ3RoLFxuICAgIG1pID0gZmFsc2UsXG4gICAgc2ggPSAwO1xuICB3aGlsZSAoLS1pID49IDApIHtcbiAgICB2YXIgeCA9IGludEF0KHMsIGkpO1xuICAgIGlmICh4IDwgMCkge1xuICAgICAgaWYgKHMuY2hhckF0KGkpID09ICctJykgbWkgPSB0cnVlO1xuICAgICAgY29udGludWU7XG4gICAgfVxuICAgIG1pID0gZmFsc2U7XG4gICAgaWYgKHNoID09IDApIHRoaXNbdGhpcy50KytdID0geDtlbHNlIGlmIChzaCArIGsgPiB0aGlzLkRCKSB7XG4gICAgICB0aGlzW3RoaXMudCAtIDFdIHw9ICh4ICYgKDEgPDwgdGhpcy5EQiAtIHNoKSAtIDEpIDw8IHNoO1xuICAgICAgdGhpc1t0aGlzLnQrK10gPSB4ID4+IHRoaXMuREIgLSBzaDtcbiAgICB9IGVsc2UgdGhpc1t0aGlzLnQgLSAxXSB8PSB4IDw8IHNoO1xuICAgIHNoICs9IGs7XG4gICAgaWYgKHNoID49IHRoaXMuREIpIHNoIC09IHRoaXMuREI7XG4gIH1cbiAgdGhpcy5jbGFtcCgpO1xuICBpZiAobWkpIEJpZ0ludGVnZXIuWkVSTy5zdWJUbyh0aGlzLCB0aGlzKTtcbn1cblxuLy8gKHByb3RlY3RlZCkgY2xhbXAgb2ZmIGV4Y2VzcyBoaWdoIHdvcmRzXG5mdW5jdGlvbiBibnBDbGFtcCgpIHtcbiAgdmFyIGMgPSB0aGlzLnMgJiB0aGlzLkRNO1xuICB3aGlsZSAodGhpcy50ID4gMCAmJiB0aGlzW3RoaXMudCAtIDFdID09IGMpIC0tdGhpcy50O1xufVxuXG4vLyAocHVibGljKSByZXR1cm4gc3RyaW5nIHJlcHJlc2VudGF0aW9uIGluIGdpdmVuIHJhZGl4XG5mdW5jdGlvbiBiblRvU3RyaW5nKGIpIHtcbiAgaWYgKHRoaXMucyA8IDApIHJldHVybiAnLScgKyB0aGlzLm5lZ2F0ZSgpLnRvU3RyaW5nKGIpO1xuICB2YXIgaztcbiAgaWYgKGIgPT0gMTYpIGsgPSA0O2Vsc2UgaWYgKGIgPT0gOCkgayA9IDM7ZWxzZSBpZiAoYiA9PSAyKSBrID0gMTtlbHNlIGlmIChiID09IDMyKSBrID0gNTtlbHNlIGlmIChiID09IDQpIGsgPSAyO2Vsc2UgdGhyb3cgbmV3IEVycm9yKCdPbmx5IHJhZGl4IDIsIDQsIDgsIDE2LCAzMiBhcmUgc3VwcG9ydGVkJyk7XG4gIHZhciBrbSA9ICgxIDw8IGspIC0gMSxcbiAgICBkLFxuICAgIG0gPSBmYWxzZSxcbiAgICByID0gJycsXG4gICAgaSA9IHRoaXMudDtcbiAgdmFyIHAgPSB0aGlzLkRCIC0gaSAqIHRoaXMuREIgJSBrO1xuICBpZiAoaS0tID4gMCkge1xuICAgIGlmIChwIDwgdGhpcy5EQiAmJiAoZCA9IHRoaXNbaV0gPj4gcCkgPiAwKSB7XG4gICAgICBtID0gdHJ1ZTtcbiAgICAgIHIgPSBpbnQyY2hhcihkKTtcbiAgICB9XG4gICAgd2hpbGUgKGkgPj0gMCkge1xuICAgICAgaWYgKHAgPCBrKSB7XG4gICAgICAgIGQgPSAodGhpc1tpXSAmICgxIDw8IHApIC0gMSkgPDwgayAtIHA7XG4gICAgICAgIGQgfD0gdGhpc1stLWldID4+IChwICs9IHRoaXMuREIgLSBrKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGQgPSB0aGlzW2ldID4+IChwIC09IGspICYga207XG4gICAgICAgIGlmIChwIDw9IDApIHtcbiAgICAgICAgICBwICs9IHRoaXMuREI7XG4gICAgICAgICAgLS1pO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBpZiAoZCA+IDApIG0gPSB0cnVlO1xuICAgICAgaWYgKG0pIHIgKz0gaW50MmNoYXIoZCk7XG4gICAgfVxuICB9XG4gIHJldHVybiBtID8gciA6ICcwJztcbn1cblxuLy8gKHB1YmxpYykgLXRoaXNcbmZ1bmN0aW9uIGJuTmVnYXRlKCkge1xuICB2YXIgciA9IG5iaSgpO1xuICBCaWdJbnRlZ2VyLlpFUk8uc3ViVG8odGhpcywgcik7XG4gIHJldHVybiByO1xufVxuXG4vLyAocHVibGljKSB8dGhpc3xcbmZ1bmN0aW9uIGJuQWJzKCkge1xuICByZXR1cm4gdGhpcy5zIDwgMCA/IHRoaXMubmVnYXRlKCkgOiB0aGlzO1xufVxuXG4vLyAocHVibGljKSByZXR1cm4gKyBpZiB0aGlzID4gYSwgLSBpZiB0aGlzIDwgYSwgMCBpZiBlcXVhbFxuZnVuY3Rpb24gYm5Db21wYXJlVG8oYSkge1xuICB2YXIgciA9IHRoaXMucyAtIGEucztcbiAgaWYgKHIgIT0gMCkgcmV0dXJuIHI7XG4gIHZhciBpID0gdGhpcy50O1xuICByID0gaSAtIGEudDtcbiAgaWYgKHIgIT0gMCkgcmV0dXJuIHRoaXMucyA8IDAgPyAtciA6IHI7XG4gIHdoaWxlICgtLWkgPj0gMCkgaWYgKChyID0gdGhpc1tpXSAtIGFbaV0pICE9IDApIHJldHVybiByO1xuICByZXR1cm4gMDtcbn1cblxuLy8gcmV0dXJucyBiaXQgbGVuZ3RoIG9mIHRoZSBpbnRlZ2VyIHhcbmZ1bmN0aW9uIG5iaXRzKHgpIHtcbiAgdmFyIHIgPSAxLFxuICAgIHQ7XG4gIGlmICgodCA9IHggPj4+IDE2KSAhPSAwKSB7XG4gICAgeCA9IHQ7XG4gICAgciArPSAxNjtcbiAgfVxuICBpZiAoKHQgPSB4ID4+IDgpICE9IDApIHtcbiAgICB4ID0gdDtcbiAgICByICs9IDg7XG4gIH1cbiAgaWYgKCh0ID0geCA+PiA0KSAhPSAwKSB7XG4gICAgeCA9IHQ7XG4gICAgciArPSA0O1xuICB9XG4gIGlmICgodCA9IHggPj4gMikgIT0gMCkge1xuICAgIHggPSB0O1xuICAgIHIgKz0gMjtcbiAgfVxuICBpZiAoKHQgPSB4ID4+IDEpICE9IDApIHtcbiAgICB4ID0gdDtcbiAgICByICs9IDE7XG4gIH1cbiAgcmV0dXJuIHI7XG59XG5cbi8vIChwdWJsaWMpIHJldHVybiB0aGUgbnVtYmVyIG9mIGJpdHMgaW4gXCJ0aGlzXCJcbmZ1bmN0aW9uIGJuQml0TGVuZ3RoKCkge1xuICBpZiAodGhpcy50IDw9IDApIHJldHVybiAwO1xuICByZXR1cm4gdGhpcy5EQiAqICh0aGlzLnQgLSAxKSArIG5iaXRzKHRoaXNbdGhpcy50IC0gMV0gXiB0aGlzLnMgJiB0aGlzLkRNKTtcbn1cblxuLy8gKHByb3RlY3RlZCkgciA9IHRoaXMgPDwgbipEQlxuZnVuY3Rpb24gYm5wRExTaGlmdFRvKG4sIHIpIHtcbiAgdmFyIGk7XG4gIGZvciAoaSA9IHRoaXMudCAtIDE7IGkgPj0gMDsgLS1pKSByW2kgKyBuXSA9IHRoaXNbaV07XG4gIGZvciAoaSA9IG4gLSAxOyBpID49IDA7IC0taSkgcltpXSA9IDA7XG4gIHIudCA9IHRoaXMudCArIG47XG4gIHIucyA9IHRoaXMucztcbn1cblxuLy8gKHByb3RlY3RlZCkgciA9IHRoaXMgPj4gbipEQlxuZnVuY3Rpb24gYm5wRFJTaGlmdFRvKG4sIHIpIHtcbiAgZm9yICh2YXIgaSA9IG47IGkgPCB0aGlzLnQ7ICsraSkgcltpIC0gbl0gPSB0aGlzW2ldO1xuICByLnQgPSBNYXRoLm1heCh0aGlzLnQgLSBuLCAwKTtcbiAgci5zID0gdGhpcy5zO1xufVxuXG4vLyAocHJvdGVjdGVkKSByID0gdGhpcyA8PCBuXG5mdW5jdGlvbiBibnBMU2hpZnRUbyhuLCByKSB7XG4gIHZhciBicyA9IG4gJSB0aGlzLkRCO1xuICB2YXIgY2JzID0gdGhpcy5EQiAtIGJzO1xuICB2YXIgYm0gPSAoMSA8PCBjYnMpIC0gMTtcbiAgdmFyIGRzID0gTWF0aC5mbG9vcihuIC8gdGhpcy5EQiksXG4gICAgYyA9IHRoaXMucyA8PCBicyAmIHRoaXMuRE0sXG4gICAgaTtcbiAgZm9yIChpID0gdGhpcy50IC0gMTsgaSA+PSAwOyAtLWkpIHtcbiAgICByW2kgKyBkcyArIDFdID0gdGhpc1tpXSA+PiBjYnMgfCBjO1xuICAgIGMgPSAodGhpc1tpXSAmIGJtKSA8PCBicztcbiAgfVxuICBmb3IgKGkgPSBkcyAtIDE7IGkgPj0gMDsgLS1pKSByW2ldID0gMDtcbiAgcltkc10gPSBjO1xuICByLnQgPSB0aGlzLnQgKyBkcyArIDE7XG4gIHIucyA9IHRoaXMucztcbiAgci5jbGFtcCgpO1xufVxuXG4vLyAocHJvdGVjdGVkKSByID0gdGhpcyA+PiBuXG5mdW5jdGlvbiBibnBSU2hpZnRUbyhuLCByKSB7XG4gIHIucyA9IHRoaXMucztcbiAgdmFyIGRzID0gTWF0aC5mbG9vcihuIC8gdGhpcy5EQik7XG4gIGlmIChkcyA+PSB0aGlzLnQpIHtcbiAgICByLnQgPSAwO1xuICAgIHJldHVybjtcbiAgfVxuICB2YXIgYnMgPSBuICUgdGhpcy5EQjtcbiAgdmFyIGNicyA9IHRoaXMuREIgLSBicztcbiAgdmFyIGJtID0gKDEgPDwgYnMpIC0gMTtcbiAgclswXSA9IHRoaXNbZHNdID4+IGJzO1xuICBmb3IgKHZhciBpID0gZHMgKyAxOyBpIDwgdGhpcy50OyArK2kpIHtcbiAgICByW2kgLSBkcyAtIDFdIHw9ICh0aGlzW2ldICYgYm0pIDw8IGNicztcbiAgICByW2kgLSBkc10gPSB0aGlzW2ldID4+IGJzO1xuICB9XG4gIGlmIChicyA+IDApIHJbdGhpcy50IC0gZHMgLSAxXSB8PSAodGhpcy5zICYgYm0pIDw8IGNicztcbiAgci50ID0gdGhpcy50IC0gZHM7XG4gIHIuY2xhbXAoKTtcbn1cblxuLy8gKHByb3RlY3RlZCkgciA9IHRoaXMgLSBhXG5mdW5jdGlvbiBibnBTdWJUbyhhLCByKSB7XG4gIHZhciBpID0gMCxcbiAgICBjID0gMCxcbiAgICBtID0gTWF0aC5taW4oYS50LCB0aGlzLnQpO1xuICB3aGlsZSAoaSA8IG0pIHtcbiAgICBjICs9IHRoaXNbaV0gLSBhW2ldO1xuICAgIHJbaSsrXSA9IGMgJiB0aGlzLkRNO1xuICAgIGMgPj49IHRoaXMuREI7XG4gIH1cbiAgaWYgKGEudCA8IHRoaXMudCkge1xuICAgIGMgLT0gYS5zO1xuICAgIHdoaWxlIChpIDwgdGhpcy50KSB7XG4gICAgICBjICs9IHRoaXNbaV07XG4gICAgICByW2krK10gPSBjICYgdGhpcy5ETTtcbiAgICAgIGMgPj49IHRoaXMuREI7XG4gICAgfVxuICAgIGMgKz0gdGhpcy5zO1xuICB9IGVsc2Uge1xuICAgIGMgKz0gdGhpcy5zO1xuICAgIHdoaWxlIChpIDwgYS50KSB7XG4gICAgICBjIC09IGFbaV07XG4gICAgICByW2krK10gPSBjICYgdGhpcy5ETTtcbiAgICAgIGMgPj49IHRoaXMuREI7XG4gICAgfVxuICAgIGMgLT0gYS5zO1xuICB9XG4gIHIucyA9IGMgPCAwID8gLTEgOiAwO1xuICBpZiAoYyA8IC0xKSByW2krK10gPSB0aGlzLkRWICsgYztlbHNlIGlmIChjID4gMCkgcltpKytdID0gYztcbiAgci50ID0gaTtcbiAgci5jbGFtcCgpO1xufVxuXG4vLyAocHJvdGVjdGVkKSByID0gdGhpcyAqIGEsIHIgIT0gdGhpcyxhIChIQUMgMTQuMTIpXG4vLyBcInRoaXNcIiBzaG91bGQgYmUgdGhlIGxhcmdlciBvbmUgaWYgYXBwcm9wcmlhdGUuXG5mdW5jdGlvbiBibnBNdWx0aXBseVRvKGEsIHIpIHtcbiAgdmFyIHggPSB0aGlzLmFicygpLFxuICAgIHkgPSBhLmFicygpO1xuICB2YXIgaSA9IHgudDtcbiAgci50ID0gaSArIHkudDtcbiAgd2hpbGUgKC0taSA+PSAwKSByW2ldID0gMDtcbiAgZm9yIChpID0gMDsgaSA8IHkudDsgKytpKSByW2kgKyB4LnRdID0geC5hbSgwLCB5W2ldLCByLCBpLCAwLCB4LnQpO1xuICByLnMgPSAwO1xuICByLmNsYW1wKCk7XG4gIGlmICh0aGlzLnMgIT0gYS5zKSBCaWdJbnRlZ2VyLlpFUk8uc3ViVG8ociwgcik7XG59XG5cbi8vIChwcm90ZWN0ZWQpIHIgPSB0aGlzXjIsIHIgIT0gdGhpcyAoSEFDIDE0LjE2KVxuZnVuY3Rpb24gYm5wU3F1YXJlVG8ocikge1xuICB2YXIgeCA9IHRoaXMuYWJzKCk7XG4gIHZhciBpID0gci50ID0gMiAqIHgudDtcbiAgd2hpbGUgKC0taSA+PSAwKSByW2ldID0gMDtcbiAgZm9yIChpID0gMDsgaSA8IHgudCAtIDE7ICsraSkge1xuICAgIHZhciBjID0geC5hbShpLCB4W2ldLCByLCAyICogaSwgMCwgMSk7XG4gICAgaWYgKChyW2kgKyB4LnRdICs9IHguYW0oaSArIDEsIDIgKiB4W2ldLCByLCAyICogaSArIDEsIGMsIHgudCAtIGkgLSAxKSkgPj0geC5EVikge1xuICAgICAgcltpICsgeC50XSAtPSB4LkRWO1xuICAgICAgcltpICsgeC50ICsgMV0gPSAxO1xuICAgIH1cbiAgfVxuICBpZiAoci50ID4gMCkgcltyLnQgLSAxXSArPSB4LmFtKGksIHhbaV0sIHIsIDIgKiBpLCAwLCAxKTtcbiAgci5zID0gMDtcbiAgci5jbGFtcCgpO1xufVxuXG4vLyAocHJvdGVjdGVkKSBkaXZpZGUgdGhpcyBieSBtLCBxdW90aWVudCBhbmQgcmVtYWluZGVyIHRvIHEsIHIgKEhBQyAxNC4yMClcbi8vIHIgIT0gcSwgdGhpcyAhPSBtLiAgcSBvciByIG1heSBiZSBudWxsLlxuZnVuY3Rpb24gYm5wRGl2UmVtVG8obSwgcSwgcikge1xuICB2YXIgcG0gPSBtLmFicygpO1xuICBpZiAocG0udCA8PSAwKSByZXR1cm47XG4gIHZhciBwdCA9IHRoaXMuYWJzKCk7XG4gIGlmIChwdC50IDwgcG0udCkge1xuICAgIGlmIChxICE9IG51bGwpIHEuZnJvbUludCgwKTtcbiAgICBpZiAociAhPSBudWxsKSB0aGlzLmNvcHlUbyhyKTtcbiAgICByZXR1cm47XG4gIH1cbiAgaWYgKHIgPT0gbnVsbCkgciA9IG5iaSgpO1xuICB2YXIgeSA9IG5iaSgpLFxuICAgIHRzID0gdGhpcy5zLFxuICAgIG1zID0gbS5zO1xuICB2YXIgbnNoID0gdGhpcy5EQiAtIG5iaXRzKHBtW3BtLnQgLSAxXSk7XG4gIC8vIG5vcm1hbGl6ZSBtb2R1bHVzXG4gIGlmIChuc2ggPiAwKSB7XG4gICAgcG0ubFNoaWZ0VG8obnNoLCB5KTtcbiAgICBwdC5sU2hpZnRUbyhuc2gsIHIpO1xuICB9IGVsc2Uge1xuICAgIHBtLmNvcHlUbyh5KTtcbiAgICBwdC5jb3B5VG8ocik7XG4gIH1cbiAgdmFyIHlzID0geS50O1xuICB2YXIgeTAgPSB5W3lzIC0gMV07XG4gIGlmICh5MCA9PSAwKSByZXR1cm47XG4gIHZhciB5dCA9IHkwICogKDEgPDwgdGhpcy5GMSkgKyAoeXMgPiAxID8geVt5cyAtIDJdID4+IHRoaXMuRjIgOiAwKTtcbiAgdmFyIGQxID0gdGhpcy5GViAvIHl0LFxuICAgIGQyID0gKDEgPDwgdGhpcy5GMSkgLyB5dCxcbiAgICBlID0gMSA8PCB0aGlzLkYyO1xuICB2YXIgaSA9IHIudCxcbiAgICBqID0gaSAtIHlzLFxuICAgIHQgPSBxID09IG51bGwgPyBuYmkoKSA6IHE7XG4gIHkuZGxTaGlmdFRvKGosIHQpO1xuICBpZiAoci5jb21wYXJlVG8odCkgPj0gMCkge1xuICAgIHJbci50KytdID0gMTtcbiAgICByLnN1YlRvKHQsIHIpO1xuICB9XG4gIEJpZ0ludGVnZXIuT05FLmRsU2hpZnRUbyh5cywgdCk7XG4gIHQuc3ViVG8oeSwgeSk7XG4gIC8vIFwibmVnYXRpdmVcIiB5IHNvIHdlIGNhbiByZXBsYWNlIHN1YiB3aXRoIGFtIGxhdGVyXG4gIHdoaWxlICh5LnQgPCB5cykgeVt5LnQrK10gPSAwO1xuICB3aGlsZSAoLS1qID49IDApIHtcbiAgICAvLyBFc3RpbWF0ZSBxdW90aWVudCBkaWdpdFxuICAgIHZhciBxZCA9IHJbLS1pXSA9PSB5MCA/IHRoaXMuRE0gOiBNYXRoLmZsb29yKHJbaV0gKiBkMSArIChyW2kgLSAxXSArIGUpICogZDIpO1xuICAgIGlmICgocltpXSArPSB5LmFtKDAsIHFkLCByLCBqLCAwLCB5cykpIDwgcWQpIHtcbiAgICAgIC8vIFRyeSBpdCBvdXRcbiAgICAgIHkuZGxTaGlmdFRvKGosIHQpO1xuICAgICAgci5zdWJUbyh0LCByKTtcbiAgICAgIHdoaWxlIChyW2ldIDwgLS1xZCkgci5zdWJUbyh0LCByKTtcbiAgICB9XG4gIH1cbiAgaWYgKHEgIT0gbnVsbCkge1xuICAgIHIuZHJTaGlmdFRvKHlzLCBxKTtcbiAgICBpZiAodHMgIT0gbXMpIEJpZ0ludGVnZXIuWkVSTy5zdWJUbyhxLCBxKTtcbiAgfVxuICByLnQgPSB5cztcbiAgci5jbGFtcCgpO1xuICBpZiAobnNoID4gMCkgci5yU2hpZnRUbyhuc2gsIHIpO1xuICAvLyBEZW5vcm1hbGl6ZSByZW1haW5kZXJcbiAgaWYgKHRzIDwgMCkgQmlnSW50ZWdlci5aRVJPLnN1YlRvKHIsIHIpO1xufVxuXG4vLyAocHVibGljKSB0aGlzIG1vZCBhXG5mdW5jdGlvbiBibk1vZChhKSB7XG4gIHZhciByID0gbmJpKCk7XG4gIHRoaXMuYWJzKCkuZGl2UmVtVG8oYSwgbnVsbCwgcik7XG4gIGlmICh0aGlzLnMgPCAwICYmIHIuY29tcGFyZVRvKEJpZ0ludGVnZXIuWkVSTykgPiAwKSBhLnN1YlRvKHIsIHIpO1xuICByZXR1cm4gcjtcbn1cblxuLy8gKHByb3RlY3RlZCkgcmV0dXJuIFwiLTEvdGhpcyAlIDJeREJcIjsgdXNlZnVsIGZvciBNb250LiByZWR1Y3Rpb25cbi8vIGp1c3RpZmljYXRpb246XG4vLyAgICAgICAgIHh5ID09IDEgKG1vZCBtKVxuLy8gICAgICAgICB4eSA9ICAxK2ttXG4vLyAgIHh5KDIteHkpID0gKDEra20pKDEta20pXG4vLyB4W3koMi14eSldID0gMS1rXjJtXjJcbi8vIHhbeSgyLXh5KV0gPT0gMSAobW9kIG1eMilcbi8vIGlmIHkgaXMgMS94IG1vZCBtLCB0aGVuIHkoMi14eSkgaXMgMS94IG1vZCBtXjJcbi8vIHNob3VsZCByZWR1Y2UgeCBhbmQgeSgyLXh5KSBieSBtXjIgYXQgZWFjaCBzdGVwIHRvIGtlZXAgc2l6ZSBib3VuZGVkLlxuLy8gSlMgbXVsdGlwbHkgXCJvdmVyZmxvd3NcIiBkaWZmZXJlbnRseSBmcm9tIEMvQysrLCBzbyBjYXJlIGlzIG5lZWRlZCBoZXJlLlxuZnVuY3Rpb24gYm5wSW52RGlnaXQoKSB7XG4gIGlmICh0aGlzLnQgPCAxKSByZXR1cm4gMDtcbiAgdmFyIHggPSB0aGlzWzBdO1xuICBpZiAoKHggJiAxKSA9PSAwKSByZXR1cm4gMDtcbiAgdmFyIHkgPSB4ICYgMztcbiAgLy8geSA9PSAxL3ggbW9kIDJeMlxuICB5ID0geSAqICgyIC0gKHggJiAweGYpICogeSkgJiAweGY7XG4gIC8vIHkgPT0gMS94IG1vZCAyXjRcbiAgeSA9IHkgKiAoMiAtICh4ICYgMHhmZikgKiB5KSAmIDB4ZmY7XG4gIC8vIHkgPT0gMS94IG1vZCAyXjhcbiAgeSA9IHkgKiAoMiAtICgoeCAmIDB4ZmZmZikgKiB5ICYgMHhmZmZmKSkgJiAweGZmZmY7XG4gIC8vIHkgPT0gMS94IG1vZCAyXjE2XG4gIC8vIGxhc3Qgc3RlcCAtIGNhbGN1bGF0ZSBpbnZlcnNlIG1vZCBEViBkaXJlY3RseTtcbiAgLy8gYXNzdW1lcyAxNiA8IERCIDw9IDMyIGFuZCBhc3N1bWVzIGFiaWxpdHkgdG8gaGFuZGxlIDQ4LWJpdCBpbnRzXG4gIHkgPSB5ICogKDIgLSB4ICogeSAlIHRoaXMuRFYpICUgdGhpcy5EVjtcbiAgLy8geSA9PSAxL3ggbW9kIDJeZGJpdHNcbiAgLy8gd2UgcmVhbGx5IHdhbnQgdGhlIG5lZ2F0aXZlIGludmVyc2UsIGFuZCAtRFYgPCB5IDwgRFZcbiAgcmV0dXJuIHkgPiAwID8gdGhpcy5EViAtIHkgOiAteTtcbn1cbmZ1bmN0aW9uIGJuRXF1YWxzKGEpIHtcbiAgcmV0dXJuIHRoaXMuY29tcGFyZVRvKGEpID09IDA7XG59XG5cbi8vIChwcm90ZWN0ZWQpIHIgPSB0aGlzICsgYVxuZnVuY3Rpb24gYm5wQWRkVG8oYSwgcikge1xuICB2YXIgaSA9IDAsXG4gICAgYyA9IDAsXG4gICAgbSA9IE1hdGgubWluKGEudCwgdGhpcy50KTtcbiAgd2hpbGUgKGkgPCBtKSB7XG4gICAgYyArPSB0aGlzW2ldICsgYVtpXTtcbiAgICByW2krK10gPSBjICYgdGhpcy5ETTtcbiAgICBjID4+PSB0aGlzLkRCO1xuICB9XG4gIGlmIChhLnQgPCB0aGlzLnQpIHtcbiAgICBjICs9IGEucztcbiAgICB3aGlsZSAoaSA8IHRoaXMudCkge1xuICAgICAgYyArPSB0aGlzW2ldO1xuICAgICAgcltpKytdID0gYyAmIHRoaXMuRE07XG4gICAgICBjID4+PSB0aGlzLkRCO1xuICAgIH1cbiAgICBjICs9IHRoaXMucztcbiAgfSBlbHNlIHtcbiAgICBjICs9IHRoaXMucztcbiAgICB3aGlsZSAoaSA8IGEudCkge1xuICAgICAgYyArPSBhW2ldO1xuICAgICAgcltpKytdID0gYyAmIHRoaXMuRE07XG4gICAgICBjID4+PSB0aGlzLkRCO1xuICAgIH1cbiAgICBjICs9IGEucztcbiAgfVxuICByLnMgPSBjIDwgMCA/IC0xIDogMDtcbiAgaWYgKGMgPiAwKSByW2krK10gPSBjO2Vsc2UgaWYgKGMgPCAtMSkgcltpKytdID0gdGhpcy5EViArIGM7XG4gIHIudCA9IGk7XG4gIHIuY2xhbXAoKTtcbn1cblxuLy8gKHB1YmxpYykgdGhpcyArIGFcbmZ1bmN0aW9uIGJuQWRkKGEpIHtcbiAgdmFyIHIgPSBuYmkoKTtcbiAgdGhpcy5hZGRUbyhhLCByKTtcbiAgcmV0dXJuIHI7XG59XG5cbi8vIChwdWJsaWMpIHRoaXMgLSBhXG5mdW5jdGlvbiBiblN1YnRyYWN0KGEpIHtcbiAgdmFyIHIgPSBuYmkoKTtcbiAgdGhpcy5zdWJUbyhhLCByKTtcbiAgcmV0dXJuIHI7XG59XG5cbi8vIChwdWJsaWMpIHRoaXMgKiBhXG5mdW5jdGlvbiBibk11bHRpcGx5KGEpIHtcbiAgdmFyIHIgPSBuYmkoKTtcbiAgdGhpcy5tdWx0aXBseVRvKGEsIHIpO1xuICByZXR1cm4gcjtcbn1cblxuLy8gKHB1YmxpYykgdGhpcyAvIGFcbmZ1bmN0aW9uIGJuRGl2aWRlKGEpIHtcbiAgdmFyIHIgPSBuYmkoKTtcbiAgdGhpcy5kaXZSZW1UbyhhLCByLCBudWxsKTtcbiAgcmV0dXJuIHI7XG59XG5cbi8vIE1vbnRnb21lcnkgcmVkdWN0aW9uXG5mdW5jdGlvbiBNb250Z29tZXJ5KG0pIHtcbiAgdGhpcy5tID0gbTtcbiAgdGhpcy5tcCA9IG0uaW52RGlnaXQoKTtcbiAgdGhpcy5tcGwgPSB0aGlzLm1wICYgMHg3ZmZmO1xuICB0aGlzLm1waCA9IHRoaXMubXAgPj4gMTU7XG4gIHRoaXMudW0gPSAoMSA8PCBtLkRCIC0gMTUpIC0gMTtcbiAgdGhpcy5tdDIgPSAyICogbS50O1xufVxuXG4vLyB4UiBtb2QgbVxuZnVuY3Rpb24gbW9udENvbnZlcnQoeCkge1xuICB2YXIgciA9IG5iaSgpO1xuICB4LmFicygpLmRsU2hpZnRUbyh0aGlzLm0udCwgcik7XG4gIHIuZGl2UmVtVG8odGhpcy5tLCBudWxsLCByKTtcbiAgaWYgKHgucyA8IDAgJiYgci5jb21wYXJlVG8oQmlnSW50ZWdlci5aRVJPKSA+IDApIHRoaXMubS5zdWJUbyhyLCByKTtcbiAgcmV0dXJuIHI7XG59XG5cbi8vIHgvUiBtb2QgbVxuZnVuY3Rpb24gbW9udFJldmVydCh4KSB7XG4gIHZhciByID0gbmJpKCk7XG4gIHguY29weVRvKHIpO1xuICB0aGlzLnJlZHVjZShyKTtcbiAgcmV0dXJuIHI7XG59XG5cbi8vIHggPSB4L1IgbW9kIG0gKEhBQyAxNC4zMilcbmZ1bmN0aW9uIG1vbnRSZWR1Y2UoeCkge1xuICB3aGlsZSAoeC50IDw9IHRoaXMubXQyKVxuICAvLyBwYWQgeCBzbyBhbSBoYXMgZW5vdWdoIHJvb20gbGF0ZXJcbiAgeFt4LnQrK10gPSAwO1xuICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMubS50OyArK2kpIHtcbiAgICAvLyBmYXN0ZXIgd2F5IG9mIGNhbGN1bGF0aW5nIHUwID0geFtpXSptcCBtb2QgRFZcbiAgICB2YXIgaiA9IHhbaV0gJiAweDdmZmY7XG4gICAgdmFyIHUwID0gaiAqIHRoaXMubXBsICsgKChqICogdGhpcy5tcGggKyAoeFtpXSA+PiAxNSkgKiB0aGlzLm1wbCAmIHRoaXMudW0pIDw8IDE1KSAmIHguRE07XG4gICAgLy8gdXNlIGFtIHRvIGNvbWJpbmUgdGhlIG11bHRpcGx5LXNoaWZ0LWFkZCBpbnRvIG9uZSBjYWxsXG4gICAgaiA9IGkgKyB0aGlzLm0udDtcbiAgICB4W2pdICs9IHRoaXMubS5hbSgwLCB1MCwgeCwgaSwgMCwgdGhpcy5tLnQpO1xuICAgIC8vIHByb3BhZ2F0ZSBjYXJyeVxuICAgIHdoaWxlICh4W2pdID49IHguRFYpIHtcbiAgICAgIHhbal0gLT0geC5EVjtcbiAgICAgIHhbKytqXSsrO1xuICAgIH1cbiAgfVxuICB4LmNsYW1wKCk7XG4gIHguZHJTaGlmdFRvKHRoaXMubS50LCB4KTtcbiAgaWYgKHguY29tcGFyZVRvKHRoaXMubSkgPj0gMCkgeC5zdWJUbyh0aGlzLm0sIHgpO1xufVxuXG4vLyByID0gXCJ4XjIvUiBtb2QgbVwiOyB4ICE9IHJcbmZ1bmN0aW9uIG1vbnRTcXJUbyh4LCByKSB7XG4gIHguc3F1YXJlVG8ocik7XG4gIHRoaXMucmVkdWNlKHIpO1xufVxuXG4vLyByID0gXCJ4eS9SIG1vZCBtXCI7IHgseSAhPSByXG5mdW5jdGlvbiBtb250TXVsVG8oeCwgeSwgcikge1xuICB4Lm11bHRpcGx5VG8oeSwgcik7XG4gIHRoaXMucmVkdWNlKHIpO1xufVxuTW9udGdvbWVyeS5wcm90b3R5cGUuY29udmVydCA9IG1vbnRDb252ZXJ0O1xuTW9udGdvbWVyeS5wcm90b3R5cGUucmV2ZXJ0ID0gbW9udFJldmVydDtcbk1vbnRnb21lcnkucHJvdG90eXBlLnJlZHVjZSA9IG1vbnRSZWR1Y2U7XG5Nb250Z29tZXJ5LnByb3RvdHlwZS5tdWxUbyA9IG1vbnRNdWxUbztcbk1vbnRnb21lcnkucHJvdG90eXBlLnNxclRvID0gbW9udFNxclRvO1xuXG4vLyAocHVibGljKSB0aGlzXmUgJSBtIChIQUMgMTQuODUpXG5mdW5jdGlvbiBibk1vZFBvdyhlLCBtLCBjYWxsYmFjaykge1xuICB2YXIgaSA9IGUuYml0TGVuZ3RoKCksXG4gICAgayxcbiAgICByID0gbmJ2KDEpLFxuICAgIHogPSBuZXcgTW9udGdvbWVyeShtKTtcbiAgaWYgKGkgPD0gMCkgcmV0dXJuIHI7ZWxzZSBpZiAoaSA8IDE4KSBrID0gMTtlbHNlIGlmIChpIDwgNDgpIGsgPSAzO2Vsc2UgaWYgKGkgPCAxNDQpIGsgPSA0O2Vsc2UgaWYgKGkgPCA3NjgpIGsgPSA1O2Vsc2UgayA9IDY7XG5cbiAgLy8gcHJlY29tcHV0YXRpb25cbiAgdmFyIGcgPSBuZXcgQXJyYXkoKSxcbiAgICBuID0gMyxcbiAgICBrMSA9IGsgLSAxLFxuICAgIGttID0gKDEgPDwgaykgLSAxO1xuICBnWzFdID0gei5jb252ZXJ0KHRoaXMpO1xuICBpZiAoayA+IDEpIHtcbiAgICB2YXIgZzIgPSBuYmkoKTtcbiAgICB6LnNxclRvKGdbMV0sIGcyKTtcbiAgICB3aGlsZSAobiA8PSBrbSkge1xuICAgICAgZ1tuXSA9IG5iaSgpO1xuICAgICAgei5tdWxUbyhnMiwgZ1tuIC0gMl0sIGdbbl0pO1xuICAgICAgbiArPSAyO1xuICAgIH1cbiAgfVxuICB2YXIgaiA9IGUudCAtIDEsXG4gICAgdyxcbiAgICBpczEgPSB0cnVlLFxuICAgIHIyID0gbmJpKCksXG4gICAgdDtcbiAgaSA9IG5iaXRzKGVbal0pIC0gMTtcbiAgd2hpbGUgKGogPj0gMCkge1xuICAgIGlmIChpID49IGsxKSB3ID0gZVtqXSA+PiBpIC0gazEgJiBrbTtlbHNlIHtcbiAgICAgIHcgPSAoZVtqXSAmICgxIDw8IGkgKyAxKSAtIDEpIDw8IGsxIC0gaTtcbiAgICAgIGlmIChqID4gMCkgdyB8PSBlW2ogLSAxXSA+PiB0aGlzLkRCICsgaSAtIGsxO1xuICAgIH1cbiAgICBuID0gaztcbiAgICB3aGlsZSAoKHcgJiAxKSA9PSAwKSB7XG4gICAgICB3ID4+PSAxO1xuICAgICAgLS1uO1xuICAgIH1cbiAgICBpZiAoKGkgLT0gbikgPCAwKSB7XG4gICAgICBpICs9IHRoaXMuREI7XG4gICAgICAtLWo7XG4gICAgfVxuICAgIGlmIChpczEpIHtcbiAgICAgIC8vIHJldCA9PSAxLCBkb24ndCBib3RoZXIgc3F1YXJpbmcgb3IgbXVsdGlwbHlpbmcgaXRcbiAgICAgIGdbd10uY29weVRvKHIpO1xuICAgICAgaXMxID0gZmFsc2U7XG4gICAgfSBlbHNlIHtcbiAgICAgIHdoaWxlIChuID4gMSkge1xuICAgICAgICB6LnNxclRvKHIsIHIyKTtcbiAgICAgICAgei5zcXJUbyhyMiwgcik7XG4gICAgICAgIG4gLT0gMjtcbiAgICAgIH1cbiAgICAgIGlmIChuID4gMCkgei5zcXJUbyhyLCByMik7ZWxzZSB7XG4gICAgICAgIHQgPSByO1xuICAgICAgICByID0gcjI7XG4gICAgICAgIHIyID0gdDtcbiAgICAgIH1cbiAgICAgIHoubXVsVG8ocjIsIGdbd10sIHIpO1xuICAgIH1cbiAgICB3aGlsZSAoaiA+PSAwICYmIChlW2pdICYgMSA8PCBpKSA9PSAwKSB7XG4gICAgICB6LnNxclRvKHIsIHIyKTtcbiAgICAgIHQgPSByO1xuICAgICAgciA9IHIyO1xuICAgICAgcjIgPSB0O1xuICAgICAgaWYgKC0taSA8IDApIHtcbiAgICAgICAgaSA9IHRoaXMuREIgLSAxO1xuICAgICAgICAtLWo7XG4gICAgICB9XG4gICAgfVxuICB9XG4gIHZhciByZXN1bHQgPSB6LnJldmVydChyKTtcbiAgY2FsbGJhY2sobnVsbCwgcmVzdWx0KTtcbiAgcmV0dXJuIHJlc3VsdDtcbn1cblxuLy8gcHJvdGVjdGVkXG5CaWdJbnRlZ2VyLnByb3RvdHlwZS5jb3B5VG8gPSBibnBDb3B5VG87XG5CaWdJbnRlZ2VyLnByb3RvdHlwZS5mcm9tSW50ID0gYm5wRnJvbUludDtcbkJpZ0ludGVnZXIucHJvdG90eXBlLmZyb21TdHJpbmcgPSBibnBGcm9tU3RyaW5nO1xuQmlnSW50ZWdlci5wcm90b3R5cGUuY2xhbXAgPSBibnBDbGFtcDtcbkJpZ0ludGVnZXIucHJvdG90eXBlLmRsU2hpZnRUbyA9IGJucERMU2hpZnRUbztcbkJpZ0ludGVnZXIucHJvdG90eXBlLmRyU2hpZnRUbyA9IGJucERSU2hpZnRUbztcbkJpZ0ludGVnZXIucHJvdG90eXBlLmxTaGlmdFRvID0gYm5wTFNoaWZ0VG87XG5CaWdJbnRlZ2VyLnByb3RvdHlwZS5yU2hpZnRUbyA9IGJucFJTaGlmdFRvO1xuQmlnSW50ZWdlci5wcm90b3R5cGUuc3ViVG8gPSBibnBTdWJUbztcbkJpZ0ludGVnZXIucHJvdG90eXBlLm11bHRpcGx5VG8gPSBibnBNdWx0aXBseVRvO1xuQmlnSW50ZWdlci5wcm90b3R5cGUuc3F1YXJlVG8gPSBibnBTcXVhcmVUbztcbkJpZ0ludGVnZXIucHJvdG90eXBlLmRpdlJlbVRvID0gYm5wRGl2UmVtVG87XG5CaWdJbnRlZ2VyLnByb3RvdHlwZS5pbnZEaWdpdCA9IGJucEludkRpZ2l0O1xuQmlnSW50ZWdlci5wcm90b3R5cGUuYWRkVG8gPSBibnBBZGRUbztcblxuLy8gcHVibGljXG5CaWdJbnRlZ2VyLnByb3RvdHlwZS50b1N0cmluZyA9IGJuVG9TdHJpbmc7XG5CaWdJbnRlZ2VyLnByb3RvdHlwZS5uZWdhdGUgPSBibk5lZ2F0ZTtcbkJpZ0ludGVnZXIucHJvdG90eXBlLmFicyA9IGJuQWJzO1xuQmlnSW50ZWdlci5wcm90b3R5cGUuY29tcGFyZVRvID0gYm5Db21wYXJlVG87XG5CaWdJbnRlZ2VyLnByb3RvdHlwZS5iaXRMZW5ndGggPSBibkJpdExlbmd0aDtcbkJpZ0ludGVnZXIucHJvdG90eXBlLm1vZCA9IGJuTW9kO1xuQmlnSW50ZWdlci5wcm90b3R5cGUuZXF1YWxzID0gYm5FcXVhbHM7XG5CaWdJbnRlZ2VyLnByb3RvdHlwZS5hZGQgPSBibkFkZDtcbkJpZ0ludGVnZXIucHJvdG90eXBlLnN1YnRyYWN0ID0gYm5TdWJ0cmFjdDtcbkJpZ0ludGVnZXIucHJvdG90eXBlLm11bHRpcGx5ID0gYm5NdWx0aXBseTtcbkJpZ0ludGVnZXIucHJvdG90eXBlLmRpdmlkZSA9IGJuRGl2aWRlO1xuQmlnSW50ZWdlci5wcm90b3R5cGUubW9kUG93ID0gYm5Nb2RQb3c7XG5cbi8vIFwiY29uc3RhbnRzXCJcbkJpZ0ludGVnZXIuWkVSTyA9IG5idigwKTtcbkJpZ0ludGVnZXIuT05FID0gbmJ2KDEpOyJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/amazon-cognito-identity-js/lib/BigInteger.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/amazon-cognito-identity-js/lib/Client.js":
/*!***************************************************************!*\
  !*** ./node_modules/amazon-cognito-identity-js/lib/Client.js ***!
  \***************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

eval("\n\nexports.__esModule = true;\nexports[\"default\"] = void 0;\n__webpack_require__(/*! isomorphic-unfetch */ \"(ssr)/./node_modules/isomorphic-unfetch/index.js\");\nvar _UserAgent = __webpack_require__(/*! ./UserAgent */ \"(ssr)/./node_modules/amazon-cognito-identity-js/lib/UserAgent.js\");\nfunction _inheritsLoose(subClass, superClass) { subClass.prototype = Object.create(superClass.prototype); subClass.prototype.constructor = subClass; _setPrototypeOf(subClass, superClass); }\nfunction _wrapNativeSuper(Class) { var _cache = typeof Map === \"function\" ? new Map() : undefined; _wrapNativeSuper = function _wrapNativeSuper(Class) { if (Class === null || !_isNativeFunction(Class)) return Class; if (typeof Class !== \"function\") { throw new TypeError(\"Super expression must either be null or a function\"); } if (typeof _cache !== \"undefined\") { if (_cache.has(Class)) return _cache.get(Class); _cache.set(Class, Wrapper); } function Wrapper() { return _construct(Class, arguments, _getPrototypeOf(this).constructor); } Wrapper.prototype = Object.create(Class.prototype, { constructor: { value: Wrapper, enumerable: false, writable: true, configurable: true } }); return _setPrototypeOf(Wrapper, Class); }; return _wrapNativeSuper(Class); }\nfunction _construct(Parent, args, Class) { if (_isNativeReflectConstruct()) { _construct = Reflect.construct.bind(); } else { _construct = function _construct(Parent, args, Class) { var a = [null]; a.push.apply(a, args); var Constructor = Function.bind.apply(Parent, a); var instance = new Constructor(); if (Class) _setPrototypeOf(instance, Class.prototype); return instance; }; } return _construct.apply(null, arguments); }\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\nfunction _isNativeFunction(fn) { return Function.toString.call(fn).indexOf(\"[native code]\") !== -1; }\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\nvar CognitoError = /*#__PURE__*/function (_Error) {\n  _inheritsLoose(CognitoError, _Error);\n  function CognitoError(message, code, name, statusCode) {\n    var _this;\n    _this = _Error.call(this, message) || this;\n    _this.code = code;\n    _this.name = name;\n    _this.statusCode = statusCode;\n    return _this;\n  }\n  return CognitoError;\n}( /*#__PURE__*/_wrapNativeSuper(Error));\n/** @class */\nvar Client = /*#__PURE__*/function () {\n  /**\n   * Constructs a new AWS Cognito Identity Provider client object\n   * @param {string} region AWS region\n   * @param {string} endpoint endpoint\n   * @param {object} fetchOptions options for fetch API (only credentials is supported)\n   */\n  function Client(region, endpoint, fetchOptions) {\n    this.endpoint = endpoint || \"https://cognito-idp.\" + region + \".amazonaws.com/\";\n    var _ref = fetchOptions || {},\n      credentials = _ref.credentials;\n    this.fetchOptions = credentials ? {\n      credentials: credentials\n    } : {};\n  }\n\n  /**\n   * Makes an unauthenticated request on AWS Cognito Identity Provider API\n   * using fetch\n   * @param {string} operation API operation\n   * @param {object} params Input parameters\n   * @returns Promise<object>\n   */\n  var _proto = Client.prototype;\n  _proto.promisifyRequest = function promisifyRequest(operation, params) {\n    var _this2 = this;\n    return new Promise(function (resolve, reject) {\n      _this2.request(operation, params, function (err, data) {\n        if (err) {\n          reject(new CognitoError(err.message, err.code, err.name, err.statusCode));\n        } else {\n          resolve(data);\n        }\n      });\n    });\n  };\n  _proto.requestWithRetry = function requestWithRetry(operation, params, callback) {\n    var _this3 = this;\n    var MAX_DELAY_IN_MILLIS = 5 * 1000;\n    jitteredExponentialRetry(function (p) {\n      return new Promise(function (res, rej) {\n        _this3.request(operation, p, function (error, result) {\n          if (error) {\n            rej(error);\n          } else {\n            res(result);\n          }\n        });\n      });\n    }, [params], MAX_DELAY_IN_MILLIS).then(function (result) {\n      return callback(null, result);\n    })[\"catch\"](function (error) {\n      return callback(error);\n    });\n  }\n\n  /**\n   * Makes an unauthenticated request on AWS Cognito Identity Provider API\n   * using fetch\n   * @param {string} operation API operation\n   * @param {object} params Input parameters\n   * @param {function} callback Callback called when a response is returned\n   * @returns {void}\n   */;\n  _proto.request = function request(operation, params, callback) {\n    var headers = {\n      'Content-Type': 'application/x-amz-json-1.1',\n      'X-Amz-Target': \"AWSCognitoIdentityProviderService.\" + operation,\n      'X-Amz-User-Agent': (0, _UserAgent.getAmplifyUserAgent)(),\n      'Cache-Control': 'no-store'\n    };\n    var options = Object.assign({}, this.fetchOptions, {\n      headers: headers,\n      method: 'POST',\n      mode: 'cors',\n      body: JSON.stringify(params)\n    });\n    var response;\n    var responseJsonData;\n    fetch(this.endpoint, options).then(function (resp) {\n      response = resp;\n      return resp;\n    }, function (err) {\n      // If error happens here, the request failed\n      // if it is TypeError throw network error\n      if (err instanceof TypeError) {\n        throw new Error('Network error');\n      }\n      throw err;\n    }).then(function (resp) {\n      return resp.json()[\"catch\"](function () {\n        return {};\n      });\n    }).then(function (data) {\n      // return parsed body stream\n      if (response.ok) return callback(null, data);\n      responseJsonData = data;\n\n      // Taken from aws-sdk-js/lib/protocol/json.js\n      // eslint-disable-next-line no-underscore-dangle\n      var code = (data.__type || data.code).split('#').pop();\n      var error = new Error(data.message || data.Message || null);\n      error.name = code;\n      error.code = code;\n      return callback(error);\n    })[\"catch\"](function (err) {\n      // first check if we have a service error\n      if (response && response.headers && response.headers.get('x-amzn-errortype')) {\n        try {\n          var code = response.headers.get('x-amzn-errortype').split(':')[0];\n          var error = new Error(response.status ? response.status.toString() : null);\n          error.code = code;\n          error.name = code;\n          error.statusCode = response.status;\n          return callback(error);\n        } catch (ex) {\n          return callback(err);\n        }\n        // otherwise check if error is Network error\n      } else if (err instanceof Error && err.message === 'Network error') {\n        err.code = 'NetworkError';\n      }\n      return callback(err);\n    });\n  };\n  return Client;\n}();\nexports[\"default\"] = Client;\nvar logger = {\n  debug: function debug() {\n    // Intentionally blank. This package doesn't have logging\n  }\n};\n\n/**\n * For now, all errors are retryable.\n */\nvar NonRetryableError = /*#__PURE__*/function (_Error2) {\n  _inheritsLoose(NonRetryableError, _Error2);\n  function NonRetryableError(message) {\n    var _this4;\n    _this4 = _Error2.call(this, message) || this;\n    _this4.nonRetryable = true;\n    return _this4;\n  }\n  return NonRetryableError;\n}( /*#__PURE__*/_wrapNativeSuper(Error));\nvar isNonRetryableError = function isNonRetryableError(obj) {\n  var key = 'nonRetryable';\n  return obj && obj[key];\n};\nfunction retry(functionToRetry, args, delayFn, attempt) {\n  if (attempt === void 0) {\n    attempt = 1;\n  }\n  if (typeof functionToRetry !== 'function') {\n    throw Error('functionToRetry must be a function');\n  }\n  logger.debug(functionToRetry.name + \" attempt #\" + attempt + \" with args: \" + JSON.stringify(args));\n  return functionToRetry.apply(void 0, args)[\"catch\"](function (err) {\n    logger.debug(\"error on \" + functionToRetry.name, err);\n    if (isNonRetryableError(err)) {\n      logger.debug(functionToRetry.name + \" non retryable error\", err);\n      throw err;\n    }\n    var retryIn = delayFn(attempt, args, err);\n    logger.debug(functionToRetry.name + \" retrying in \" + retryIn + \" ms\");\n    if (retryIn !== false) {\n      return new Promise(function (res) {\n        return setTimeout(res, retryIn);\n      }).then(function () {\n        return retry(functionToRetry, args, delayFn, attempt + 1);\n      });\n    } else {\n      throw err;\n    }\n  });\n}\nfunction jitteredBackoff(maxDelayMs) {\n  var BASE_TIME_MS = 100;\n  var JITTER_FACTOR = 100;\n  return function (attempt) {\n    var delay = Math.pow(2, attempt) * BASE_TIME_MS + JITTER_FACTOR * Math.random();\n    return delay > maxDelayMs ? false : delay;\n  };\n}\nvar MAX_DELAY_MS = 5 * 60 * 1000;\nfunction jitteredExponentialRetry(functionToRetry, args, maxDelayMs) {\n  if (maxDelayMs === void 0) {\n    maxDelayMs = MAX_DELAY_MS;\n  }\n  return retry(functionToRetry, args, jitteredBackoff(maxDelayMs));\n}//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvYW1hem9uLWNvZ25pdG8taWRlbnRpdHktanMvbGliL0NsaWVudC5qcyIsIm1hcHBpbmdzIjoiQUFBYTs7QUFFYixrQkFBa0I7QUFDbEIsa0JBQWtCO0FBQ2xCLG1CQUFPLENBQUMsNEVBQW9CO0FBQzVCLGlCQUFpQixtQkFBTyxDQUFDLHFGQUFhO0FBQ3RDLGdEQUFnRCwwREFBMEQsMkNBQTJDO0FBQ3JKLG1DQUFtQyxnRUFBZ0Usc0RBQXNELCtEQUErRCxtQ0FBbUMsNkVBQTZFLHFDQUFxQyxpREFBaUQsOEJBQThCLHFCQUFxQiwwRUFBMEUscURBQXFELGVBQWUseUVBQXlFLEdBQUcsMkNBQTJDO0FBQ3R0QiwyQ0FBMkMsbUNBQW1DLHlDQUF5QyxPQUFPLHdEQUF3RCxnQkFBZ0IsdUJBQXVCLGtEQUFrRCxrQ0FBa0MsdURBQXVELHNCQUFzQjtBQUM5WCx1Q0FBdUMsd0VBQXdFLDBDQUEwQyw4Q0FBOEMsTUFBTSw0RUFBNEUsSUFBSSxlQUFlLFlBQVk7QUFDeFQsaUNBQWlDO0FBQ2pDLGlDQUFpQywwR0FBMEcsaUJBQWlCLGFBQWE7QUFDekssOEJBQThCLHVHQUF1RyxtREFBbUQ7QUFDeEw7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWEsUUFBUTtBQUNyQixhQUFhLFFBQVE7QUFDckIsYUFBYSxRQUFRO0FBQ3JCO0FBQ0E7QUFDQTtBQUNBLGlDQUFpQztBQUNqQztBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ047O0FBRUE7QUFDQTtBQUNBO0FBQ0EsYUFBYSxRQUFRO0FBQ3JCLGFBQWEsUUFBUTtBQUNyQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxVQUFVO0FBQ1Y7QUFDQTtBQUNBLE9BQU87QUFDUCxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsWUFBWTtBQUNaO0FBQ0E7QUFDQSxTQUFTO0FBQ1QsT0FBTztBQUNQLEtBQUs7QUFDTDtBQUNBLEtBQUs7QUFDTDtBQUNBLEtBQUs7QUFDTDs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxhQUFhLFFBQVE7QUFDckIsYUFBYSxRQUFRO0FBQ3JCLGFBQWEsVUFBVTtBQUN2QixlQUFlO0FBQ2Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtDQUFrQztBQUNsQztBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsT0FBTztBQUNQLEtBQUs7QUFDTDtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsVUFBVTtBQUNWO0FBQ0E7QUFDQTtBQUNBLFFBQVE7QUFDUjtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLENBQUM7QUFDRCxrQkFBa0I7QUFDbEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBLE9BQU87QUFDUCxNQUFNO0FBQ047QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSIsInNvdXJjZXMiOlsid2VicGFjazovL3BheXdpbmQvLi9ub2RlX21vZHVsZXMvYW1hem9uLWNvZ25pdG8taWRlbnRpdHktanMvbGliL0NsaWVudC5qcz8zNWQ5Il0sInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO1xuXG5leHBvcnRzLl9fZXNNb2R1bGUgPSB0cnVlO1xuZXhwb3J0c1tcImRlZmF1bHRcIl0gPSB2b2lkIDA7XG5yZXF1aXJlKFwiaXNvbW9ycGhpYy11bmZldGNoXCIpO1xudmFyIF9Vc2VyQWdlbnQgPSByZXF1aXJlKFwiLi9Vc2VyQWdlbnRcIik7XG5mdW5jdGlvbiBfaW5oZXJpdHNMb29zZShzdWJDbGFzcywgc3VwZXJDbGFzcykgeyBzdWJDbGFzcy5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKHN1cGVyQ2xhc3MucHJvdG90eXBlKTsgc3ViQ2xhc3MucHJvdG90eXBlLmNvbnN0cnVjdG9yID0gc3ViQ2xhc3M7IF9zZXRQcm90b3R5cGVPZihzdWJDbGFzcywgc3VwZXJDbGFzcyk7IH1cbmZ1bmN0aW9uIF93cmFwTmF0aXZlU3VwZXIoQ2xhc3MpIHsgdmFyIF9jYWNoZSA9IHR5cGVvZiBNYXAgPT09IFwiZnVuY3Rpb25cIiA/IG5ldyBNYXAoKSA6IHVuZGVmaW5lZDsgX3dyYXBOYXRpdmVTdXBlciA9IGZ1bmN0aW9uIF93cmFwTmF0aXZlU3VwZXIoQ2xhc3MpIHsgaWYgKENsYXNzID09PSBudWxsIHx8ICFfaXNOYXRpdmVGdW5jdGlvbihDbGFzcykpIHJldHVybiBDbGFzczsgaWYgKHR5cGVvZiBDbGFzcyAhPT0gXCJmdW5jdGlvblwiKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoXCJTdXBlciBleHByZXNzaW9uIG11c3QgZWl0aGVyIGJlIG51bGwgb3IgYSBmdW5jdGlvblwiKTsgfSBpZiAodHlwZW9mIF9jYWNoZSAhPT0gXCJ1bmRlZmluZWRcIikgeyBpZiAoX2NhY2hlLmhhcyhDbGFzcykpIHJldHVybiBfY2FjaGUuZ2V0KENsYXNzKTsgX2NhY2hlLnNldChDbGFzcywgV3JhcHBlcik7IH0gZnVuY3Rpb24gV3JhcHBlcigpIHsgcmV0dXJuIF9jb25zdHJ1Y3QoQ2xhc3MsIGFyZ3VtZW50cywgX2dldFByb3RvdHlwZU9mKHRoaXMpLmNvbnN0cnVjdG9yKTsgfSBXcmFwcGVyLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoQ2xhc3MucHJvdG90eXBlLCB7IGNvbnN0cnVjdG9yOiB7IHZhbHVlOiBXcmFwcGVyLCBlbnVtZXJhYmxlOiBmYWxzZSwgd3JpdGFibGU6IHRydWUsIGNvbmZpZ3VyYWJsZTogdHJ1ZSB9IH0pOyByZXR1cm4gX3NldFByb3RvdHlwZU9mKFdyYXBwZXIsIENsYXNzKTsgfTsgcmV0dXJuIF93cmFwTmF0aXZlU3VwZXIoQ2xhc3MpOyB9XG5mdW5jdGlvbiBfY29uc3RydWN0KFBhcmVudCwgYXJncywgQ2xhc3MpIHsgaWYgKF9pc05hdGl2ZVJlZmxlY3RDb25zdHJ1Y3QoKSkgeyBfY29uc3RydWN0ID0gUmVmbGVjdC5jb25zdHJ1Y3QuYmluZCgpOyB9IGVsc2UgeyBfY29uc3RydWN0ID0gZnVuY3Rpb24gX2NvbnN0cnVjdChQYXJlbnQsIGFyZ3MsIENsYXNzKSB7IHZhciBhID0gW251bGxdOyBhLnB1c2guYXBwbHkoYSwgYXJncyk7IHZhciBDb25zdHJ1Y3RvciA9IEZ1bmN0aW9uLmJpbmQuYXBwbHkoUGFyZW50LCBhKTsgdmFyIGluc3RhbmNlID0gbmV3IENvbnN0cnVjdG9yKCk7IGlmIChDbGFzcykgX3NldFByb3RvdHlwZU9mKGluc3RhbmNlLCBDbGFzcy5wcm90b3R5cGUpOyByZXR1cm4gaW5zdGFuY2U7IH07IH0gcmV0dXJuIF9jb25zdHJ1Y3QuYXBwbHkobnVsbCwgYXJndW1lbnRzKTsgfVxuZnVuY3Rpb24gX2lzTmF0aXZlUmVmbGVjdENvbnN0cnVjdCgpIHsgaWYgKHR5cGVvZiBSZWZsZWN0ID09PSBcInVuZGVmaW5lZFwiIHx8ICFSZWZsZWN0LmNvbnN0cnVjdCkgcmV0dXJuIGZhbHNlOyBpZiAoUmVmbGVjdC5jb25zdHJ1Y3Quc2hhbSkgcmV0dXJuIGZhbHNlOyBpZiAodHlwZW9mIFByb3h5ID09PSBcImZ1bmN0aW9uXCIpIHJldHVybiB0cnVlOyB0cnkgeyBCb29sZWFuLnByb3RvdHlwZS52YWx1ZU9mLmNhbGwoUmVmbGVjdC5jb25zdHJ1Y3QoQm9vbGVhbiwgW10sIGZ1bmN0aW9uICgpIHt9KSk7IHJldHVybiB0cnVlOyB9IGNhdGNoIChlKSB7IHJldHVybiBmYWxzZTsgfSB9XG5mdW5jdGlvbiBfaXNOYXRpdmVGdW5jdGlvbihmbikgeyByZXR1cm4gRnVuY3Rpb24udG9TdHJpbmcuY2FsbChmbikuaW5kZXhPZihcIltuYXRpdmUgY29kZV1cIikgIT09IC0xOyB9XG5mdW5jdGlvbiBfc2V0UHJvdG90eXBlT2YobywgcCkgeyBfc2V0UHJvdG90eXBlT2YgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgPyBPYmplY3Quc2V0UHJvdG90eXBlT2YuYmluZCgpIDogZnVuY3Rpb24gX3NldFByb3RvdHlwZU9mKG8sIHApIHsgby5fX3Byb3RvX18gPSBwOyByZXR1cm4gbzsgfTsgcmV0dXJuIF9zZXRQcm90b3R5cGVPZihvLCBwKTsgfVxuZnVuY3Rpb24gX2dldFByb3RvdHlwZU9mKG8pIHsgX2dldFByb3RvdHlwZU9mID0gT2JqZWN0LnNldFByb3RvdHlwZU9mID8gT2JqZWN0LmdldFByb3RvdHlwZU9mLmJpbmQoKSA6IGZ1bmN0aW9uIF9nZXRQcm90b3R5cGVPZihvKSB7IHJldHVybiBvLl9fcHJvdG9fXyB8fCBPYmplY3QuZ2V0UHJvdG90eXBlT2Yobyk7IH07IHJldHVybiBfZ2V0UHJvdG90eXBlT2Yobyk7IH1cbnZhciBDb2duaXRvRXJyb3IgPSAvKiNfX1BVUkVfXyovZnVuY3Rpb24gKF9FcnJvcikge1xuICBfaW5oZXJpdHNMb29zZShDb2duaXRvRXJyb3IsIF9FcnJvcik7XG4gIGZ1bmN0aW9uIENvZ25pdG9FcnJvcihtZXNzYWdlLCBjb2RlLCBuYW1lLCBzdGF0dXNDb2RlKSB7XG4gICAgdmFyIF90aGlzO1xuICAgIF90aGlzID0gX0Vycm9yLmNhbGwodGhpcywgbWVzc2FnZSkgfHwgdGhpcztcbiAgICBfdGhpcy5jb2RlID0gY29kZTtcbiAgICBfdGhpcy5uYW1lID0gbmFtZTtcbiAgICBfdGhpcy5zdGF0dXNDb2RlID0gc3RhdHVzQ29kZTtcbiAgICByZXR1cm4gX3RoaXM7XG4gIH1cbiAgcmV0dXJuIENvZ25pdG9FcnJvcjtcbn0oIC8qI19fUFVSRV9fKi9fd3JhcE5hdGl2ZVN1cGVyKEVycm9yKSk7XG4vKiogQGNsYXNzICovXG52YXIgQ2xpZW50ID0gLyojX19QVVJFX18qL2Z1bmN0aW9uICgpIHtcbiAgLyoqXG4gICAqIENvbnN0cnVjdHMgYSBuZXcgQVdTIENvZ25pdG8gSWRlbnRpdHkgUHJvdmlkZXIgY2xpZW50IG9iamVjdFxuICAgKiBAcGFyYW0ge3N0cmluZ30gcmVnaW9uIEFXUyByZWdpb25cbiAgICogQHBhcmFtIHtzdHJpbmd9IGVuZHBvaW50IGVuZHBvaW50XG4gICAqIEBwYXJhbSB7b2JqZWN0fSBmZXRjaE9wdGlvbnMgb3B0aW9ucyBmb3IgZmV0Y2ggQVBJIChvbmx5IGNyZWRlbnRpYWxzIGlzIHN1cHBvcnRlZClcbiAgICovXG4gIGZ1bmN0aW9uIENsaWVudChyZWdpb24sIGVuZHBvaW50LCBmZXRjaE9wdGlvbnMpIHtcbiAgICB0aGlzLmVuZHBvaW50ID0gZW5kcG9pbnQgfHwgXCJodHRwczovL2NvZ25pdG8taWRwLlwiICsgcmVnaW9uICsgXCIuYW1hem9uYXdzLmNvbS9cIjtcbiAgICB2YXIgX3JlZiA9IGZldGNoT3B0aW9ucyB8fCB7fSxcbiAgICAgIGNyZWRlbnRpYWxzID0gX3JlZi5jcmVkZW50aWFscztcbiAgICB0aGlzLmZldGNoT3B0aW9ucyA9IGNyZWRlbnRpYWxzID8ge1xuICAgICAgY3JlZGVudGlhbHM6IGNyZWRlbnRpYWxzXG4gICAgfSA6IHt9O1xuICB9XG5cbiAgLyoqXG4gICAqIE1ha2VzIGFuIHVuYXV0aGVudGljYXRlZCByZXF1ZXN0IG9uIEFXUyBDb2duaXRvIElkZW50aXR5IFByb3ZpZGVyIEFQSVxuICAgKiB1c2luZyBmZXRjaFxuICAgKiBAcGFyYW0ge3N0cmluZ30gb3BlcmF0aW9uIEFQSSBvcGVyYXRpb25cbiAgICogQHBhcmFtIHtvYmplY3R9IHBhcmFtcyBJbnB1dCBwYXJhbWV0ZXJzXG4gICAqIEByZXR1cm5zIFByb21pc2U8b2JqZWN0PlxuICAgKi9cbiAgdmFyIF9wcm90byA9IENsaWVudC5wcm90b3R5cGU7XG4gIF9wcm90by5wcm9taXNpZnlSZXF1ZXN0ID0gZnVuY3Rpb24gcHJvbWlzaWZ5UmVxdWVzdChvcGVyYXRpb24sIHBhcmFtcykge1xuICAgIHZhciBfdGhpczIgPSB0aGlzO1xuICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgICBfdGhpczIucmVxdWVzdChvcGVyYXRpb24sIHBhcmFtcywgZnVuY3Rpb24gKGVyciwgZGF0YSkge1xuICAgICAgICBpZiAoZXJyKSB7XG4gICAgICAgICAgcmVqZWN0KG5ldyBDb2duaXRvRXJyb3IoZXJyLm1lc3NhZ2UsIGVyci5jb2RlLCBlcnIubmFtZSwgZXJyLnN0YXR1c0NvZGUpKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICByZXNvbHZlKGRhdGEpO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9KTtcbiAgfTtcbiAgX3Byb3RvLnJlcXVlc3RXaXRoUmV0cnkgPSBmdW5jdGlvbiByZXF1ZXN0V2l0aFJldHJ5KG9wZXJhdGlvbiwgcGFyYW1zLCBjYWxsYmFjaykge1xuICAgIHZhciBfdGhpczMgPSB0aGlzO1xuICAgIHZhciBNQVhfREVMQVlfSU5fTUlMTElTID0gNSAqIDEwMDA7XG4gICAgaml0dGVyZWRFeHBvbmVudGlhbFJldHJ5KGZ1bmN0aW9uIChwKSB7XG4gICAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlcywgcmVqKSB7XG4gICAgICAgIF90aGlzMy5yZXF1ZXN0KG9wZXJhdGlvbiwgcCwgZnVuY3Rpb24gKGVycm9yLCByZXN1bHQpIHtcbiAgICAgICAgICBpZiAoZXJyb3IpIHtcbiAgICAgICAgICAgIHJlaihlcnJvcik7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHJlcyhyZXN1bHQpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICB9KTtcbiAgICB9LCBbcGFyYW1zXSwgTUFYX0RFTEFZX0lOX01JTExJUykudGhlbihmdW5jdGlvbiAocmVzdWx0KSB7XG4gICAgICByZXR1cm4gY2FsbGJhY2sobnVsbCwgcmVzdWx0KTtcbiAgICB9KVtcImNhdGNoXCJdKGZ1bmN0aW9uIChlcnJvcikge1xuICAgICAgcmV0dXJuIGNhbGxiYWNrKGVycm9yKTtcbiAgICB9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBNYWtlcyBhbiB1bmF1dGhlbnRpY2F0ZWQgcmVxdWVzdCBvbiBBV1MgQ29nbml0byBJZGVudGl0eSBQcm92aWRlciBBUElcbiAgICogdXNpbmcgZmV0Y2hcbiAgICogQHBhcmFtIHtzdHJpbmd9IG9wZXJhdGlvbiBBUEkgb3BlcmF0aW9uXG4gICAqIEBwYXJhbSB7b2JqZWN0fSBwYXJhbXMgSW5wdXQgcGFyYW1ldGVyc1xuICAgKiBAcGFyYW0ge2Z1bmN0aW9ufSBjYWxsYmFjayBDYWxsYmFjayBjYWxsZWQgd2hlbiBhIHJlc3BvbnNlIGlzIHJldHVybmVkXG4gICAqIEByZXR1cm5zIHt2b2lkfVxuICAgKi87XG4gIF9wcm90by5yZXF1ZXN0ID0gZnVuY3Rpb24gcmVxdWVzdChvcGVyYXRpb24sIHBhcmFtcywgY2FsbGJhY2spIHtcbiAgICB2YXIgaGVhZGVycyA9IHtcbiAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24veC1hbXotanNvbi0xLjEnLFxuICAgICAgJ1gtQW16LVRhcmdldCc6IFwiQVdTQ29nbml0b0lkZW50aXR5UHJvdmlkZXJTZXJ2aWNlLlwiICsgb3BlcmF0aW9uLFxuICAgICAgJ1gtQW16LVVzZXItQWdlbnQnOiAoMCwgX1VzZXJBZ2VudC5nZXRBbXBsaWZ5VXNlckFnZW50KSgpLFxuICAgICAgJ0NhY2hlLUNvbnRyb2wnOiAnbm8tc3RvcmUnXG4gICAgfTtcbiAgICB2YXIgb3B0aW9ucyA9IE9iamVjdC5hc3NpZ24oe30sIHRoaXMuZmV0Y2hPcHRpb25zLCB7XG4gICAgICBoZWFkZXJzOiBoZWFkZXJzLFxuICAgICAgbWV0aG9kOiAnUE9TVCcsXG4gICAgICBtb2RlOiAnY29ycycsXG4gICAgICBib2R5OiBKU09OLnN0cmluZ2lmeShwYXJhbXMpXG4gICAgfSk7XG4gICAgdmFyIHJlc3BvbnNlO1xuICAgIHZhciByZXNwb25zZUpzb25EYXRhO1xuICAgIGZldGNoKHRoaXMuZW5kcG9pbnQsIG9wdGlvbnMpLnRoZW4oZnVuY3Rpb24gKHJlc3ApIHtcbiAgICAgIHJlc3BvbnNlID0gcmVzcDtcbiAgICAgIHJldHVybiByZXNwO1xuICAgIH0sIGZ1bmN0aW9uIChlcnIpIHtcbiAgICAgIC8vIElmIGVycm9yIGhhcHBlbnMgaGVyZSwgdGhlIHJlcXVlc3QgZmFpbGVkXG4gICAgICAvLyBpZiBpdCBpcyBUeXBlRXJyb3IgdGhyb3cgbmV0d29yayBlcnJvclxuICAgICAgaWYgKGVyciBpbnN0YW5jZW9mIFR5cGVFcnJvcikge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ05ldHdvcmsgZXJyb3InKTtcbiAgICAgIH1cbiAgICAgIHRocm93IGVycjtcbiAgICB9KS50aGVuKGZ1bmN0aW9uIChyZXNwKSB7XG4gICAgICByZXR1cm4gcmVzcC5qc29uKClbXCJjYXRjaFwiXShmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB7fTtcbiAgICAgIH0pO1xuICAgIH0pLnRoZW4oZnVuY3Rpb24gKGRhdGEpIHtcbiAgICAgIC8vIHJldHVybiBwYXJzZWQgYm9keSBzdHJlYW1cbiAgICAgIGlmIChyZXNwb25zZS5vaykgcmV0dXJuIGNhbGxiYWNrKG51bGwsIGRhdGEpO1xuICAgICAgcmVzcG9uc2VKc29uRGF0YSA9IGRhdGE7XG5cbiAgICAgIC8vIFRha2VuIGZyb20gYXdzLXNkay1qcy9saWIvcHJvdG9jb2wvanNvbi5qc1xuICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXVuZGVyc2NvcmUtZGFuZ2xlXG4gICAgICB2YXIgY29kZSA9IChkYXRhLl9fdHlwZSB8fCBkYXRhLmNvZGUpLnNwbGl0KCcjJykucG9wKCk7XG4gICAgICB2YXIgZXJyb3IgPSBuZXcgRXJyb3IoZGF0YS5tZXNzYWdlIHx8IGRhdGEuTWVzc2FnZSB8fCBudWxsKTtcbiAgICAgIGVycm9yLm5hbWUgPSBjb2RlO1xuICAgICAgZXJyb3IuY29kZSA9IGNvZGU7XG4gICAgICByZXR1cm4gY2FsbGJhY2soZXJyb3IpO1xuICAgIH0pW1wiY2F0Y2hcIl0oZnVuY3Rpb24gKGVycikge1xuICAgICAgLy8gZmlyc3QgY2hlY2sgaWYgd2UgaGF2ZSBhIHNlcnZpY2UgZXJyb3JcbiAgICAgIGlmIChyZXNwb25zZSAmJiByZXNwb25zZS5oZWFkZXJzICYmIHJlc3BvbnNlLmhlYWRlcnMuZ2V0KCd4LWFtem4tZXJyb3J0eXBlJykpIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICB2YXIgY29kZSA9IHJlc3BvbnNlLmhlYWRlcnMuZ2V0KCd4LWFtem4tZXJyb3J0eXBlJykuc3BsaXQoJzonKVswXTtcbiAgICAgICAgICB2YXIgZXJyb3IgPSBuZXcgRXJyb3IocmVzcG9uc2Uuc3RhdHVzID8gcmVzcG9uc2Uuc3RhdHVzLnRvU3RyaW5nKCkgOiBudWxsKTtcbiAgICAgICAgICBlcnJvci5jb2RlID0gY29kZTtcbiAgICAgICAgICBlcnJvci5uYW1lID0gY29kZTtcbiAgICAgICAgICBlcnJvci5zdGF0dXNDb2RlID0gcmVzcG9uc2Uuc3RhdHVzO1xuICAgICAgICAgIHJldHVybiBjYWxsYmFjayhlcnJvcik7XG4gICAgICAgIH0gY2F0Y2ggKGV4KSB7XG4gICAgICAgICAgcmV0dXJuIGNhbGxiYWNrKGVycik7XG4gICAgICAgIH1cbiAgICAgICAgLy8gb3RoZXJ3aXNlIGNoZWNrIGlmIGVycm9yIGlzIE5ldHdvcmsgZXJyb3JcbiAgICAgIH0gZWxzZSBpZiAoZXJyIGluc3RhbmNlb2YgRXJyb3IgJiYgZXJyLm1lc3NhZ2UgPT09ICdOZXR3b3JrIGVycm9yJykge1xuICAgICAgICBlcnIuY29kZSA9ICdOZXR3b3JrRXJyb3InO1xuICAgICAgfVxuICAgICAgcmV0dXJuIGNhbGxiYWNrKGVycik7XG4gICAgfSk7XG4gIH07XG4gIHJldHVybiBDbGllbnQ7XG59KCk7XG5leHBvcnRzW1wiZGVmYXVsdFwiXSA9IENsaWVudDtcbnZhciBsb2dnZXIgPSB7XG4gIGRlYnVnOiBmdW5jdGlvbiBkZWJ1ZygpIHtcbiAgICAvLyBJbnRlbnRpb25hbGx5IGJsYW5rLiBUaGlzIHBhY2thZ2UgZG9lc24ndCBoYXZlIGxvZ2dpbmdcbiAgfVxufTtcblxuLyoqXG4gKiBGb3Igbm93LCBhbGwgZXJyb3JzIGFyZSByZXRyeWFibGUuXG4gKi9cbnZhciBOb25SZXRyeWFibGVFcnJvciA9IC8qI19fUFVSRV9fKi9mdW5jdGlvbiAoX0Vycm9yMikge1xuICBfaW5oZXJpdHNMb29zZShOb25SZXRyeWFibGVFcnJvciwgX0Vycm9yMik7XG4gIGZ1bmN0aW9uIE5vblJldHJ5YWJsZUVycm9yKG1lc3NhZ2UpIHtcbiAgICB2YXIgX3RoaXM0O1xuICAgIF90aGlzNCA9IF9FcnJvcjIuY2FsbCh0aGlzLCBtZXNzYWdlKSB8fCB0aGlzO1xuICAgIF90aGlzNC5ub25SZXRyeWFibGUgPSB0cnVlO1xuICAgIHJldHVybiBfdGhpczQ7XG4gIH1cbiAgcmV0dXJuIE5vblJldHJ5YWJsZUVycm9yO1xufSggLyojX19QVVJFX18qL193cmFwTmF0aXZlU3VwZXIoRXJyb3IpKTtcbnZhciBpc05vblJldHJ5YWJsZUVycm9yID0gZnVuY3Rpb24gaXNOb25SZXRyeWFibGVFcnJvcihvYmopIHtcbiAgdmFyIGtleSA9ICdub25SZXRyeWFibGUnO1xuICByZXR1cm4gb2JqICYmIG9ialtrZXldO1xufTtcbmZ1bmN0aW9uIHJldHJ5KGZ1bmN0aW9uVG9SZXRyeSwgYXJncywgZGVsYXlGbiwgYXR0ZW1wdCkge1xuICBpZiAoYXR0ZW1wdCA9PT0gdm9pZCAwKSB7XG4gICAgYXR0ZW1wdCA9IDE7XG4gIH1cbiAgaWYgKHR5cGVvZiBmdW5jdGlvblRvUmV0cnkgIT09ICdmdW5jdGlvbicpIHtcbiAgICB0aHJvdyBFcnJvcignZnVuY3Rpb25Ub1JldHJ5IG11c3QgYmUgYSBmdW5jdGlvbicpO1xuICB9XG4gIGxvZ2dlci5kZWJ1ZyhmdW5jdGlvblRvUmV0cnkubmFtZSArIFwiIGF0dGVtcHQgI1wiICsgYXR0ZW1wdCArIFwiIHdpdGggYXJnczogXCIgKyBKU09OLnN0cmluZ2lmeShhcmdzKSk7XG4gIHJldHVybiBmdW5jdGlvblRvUmV0cnkuYXBwbHkodm9pZCAwLCBhcmdzKVtcImNhdGNoXCJdKGZ1bmN0aW9uIChlcnIpIHtcbiAgICBsb2dnZXIuZGVidWcoXCJlcnJvciBvbiBcIiArIGZ1bmN0aW9uVG9SZXRyeS5uYW1lLCBlcnIpO1xuICAgIGlmIChpc05vblJldHJ5YWJsZUVycm9yKGVycikpIHtcbiAgICAgIGxvZ2dlci5kZWJ1ZyhmdW5jdGlvblRvUmV0cnkubmFtZSArIFwiIG5vbiByZXRyeWFibGUgZXJyb3JcIiwgZXJyKTtcbiAgICAgIHRocm93IGVycjtcbiAgICB9XG4gICAgdmFyIHJldHJ5SW4gPSBkZWxheUZuKGF0dGVtcHQsIGFyZ3MsIGVycik7XG4gICAgbG9nZ2VyLmRlYnVnKGZ1bmN0aW9uVG9SZXRyeS5uYW1lICsgXCIgcmV0cnlpbmcgaW4gXCIgKyByZXRyeUluICsgXCIgbXNcIik7XG4gICAgaWYgKHJldHJ5SW4gIT09IGZhbHNlKSB7XG4gICAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlcykge1xuICAgICAgICByZXR1cm4gc2V0VGltZW91dChyZXMsIHJldHJ5SW4pO1xuICAgICAgfSkudGhlbihmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiByZXRyeShmdW5jdGlvblRvUmV0cnksIGFyZ3MsIGRlbGF5Rm4sIGF0dGVtcHQgKyAxKTtcbiAgICAgIH0pO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aHJvdyBlcnI7XG4gICAgfVxuICB9KTtcbn1cbmZ1bmN0aW9uIGppdHRlcmVkQmFja29mZihtYXhEZWxheU1zKSB7XG4gIHZhciBCQVNFX1RJTUVfTVMgPSAxMDA7XG4gIHZhciBKSVRURVJfRkFDVE9SID0gMTAwO1xuICByZXR1cm4gZnVuY3Rpb24gKGF0dGVtcHQpIHtcbiAgICB2YXIgZGVsYXkgPSBNYXRoLnBvdygyLCBhdHRlbXB0KSAqIEJBU0VfVElNRV9NUyArIEpJVFRFUl9GQUNUT1IgKiBNYXRoLnJhbmRvbSgpO1xuICAgIHJldHVybiBkZWxheSA+IG1heERlbGF5TXMgPyBmYWxzZSA6IGRlbGF5O1xuICB9O1xufVxudmFyIE1BWF9ERUxBWV9NUyA9IDUgKiA2MCAqIDEwMDA7XG5mdW5jdGlvbiBqaXR0ZXJlZEV4cG9uZW50aWFsUmV0cnkoZnVuY3Rpb25Ub1JldHJ5LCBhcmdzLCBtYXhEZWxheU1zKSB7XG4gIGlmIChtYXhEZWxheU1zID09PSB2b2lkIDApIHtcbiAgICBtYXhEZWxheU1zID0gTUFYX0RFTEFZX01TO1xuICB9XG4gIHJldHVybiByZXRyeShmdW5jdGlvblRvUmV0cnksIGFyZ3MsIGppdHRlcmVkQmFja29mZihtYXhEZWxheU1zKSk7XG59Il0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/amazon-cognito-identity-js/lib/Client.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/amazon-cognito-identity-js/lib/CognitoAccessToken.js":
/*!***************************************************************************!*\
  !*** ./node_modules/amazon-cognito-identity-js/lib/CognitoAccessToken.js ***!
  \***************************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

eval("\n\nexports.__esModule = true;\nexports[\"default\"] = void 0;\nvar _CognitoJwtToken2 = _interopRequireDefault(__webpack_require__(/*! ./CognitoJwtToken */ \"(ssr)/./node_modules/amazon-cognito-identity-js/lib/CognitoJwtToken.js\"));\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { \"default\": obj }; }\nfunction _inheritsLoose(subClass, superClass) { subClass.prototype = Object.create(superClass.prototype); subClass.prototype.constructor = subClass; _setPrototypeOf(subClass, superClass); }\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); } /*!\n                                                                                                                                                                                                          * Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n                                                                                                                                                                                                          * SPDX-License-Identifier: Apache-2.0\n                                                                                                                                                                                                          */\n/** @class */\nvar CognitoAccessToken = /*#__PURE__*/function (_CognitoJwtToken) {\n  _inheritsLoose(CognitoAccessToken, _CognitoJwtToken);\n  /**\n   * Constructs a new CognitoAccessToken object\n   * @param {string=} AccessToken The JWT access token.\n   */\n  function CognitoAccessToken(_temp) {\n    var _ref = _temp === void 0 ? {} : _temp,\n      AccessToken = _ref.AccessToken;\n    return _CognitoJwtToken.call(this, AccessToken || '') || this;\n  }\n  return CognitoAccessToken;\n}(_CognitoJwtToken2[\"default\"]);\nexports[\"default\"] = CognitoAccessToken;//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvYW1hem9uLWNvZ25pdG8taWRlbnRpdHktanMvbGliL0NvZ25pdG9BY2Nlc3NUb2tlbi5qcyIsIm1hcHBpbmdzIjoiQUFBYTs7QUFFYixrQkFBa0I7QUFDbEIsa0JBQWtCO0FBQ2xCLCtDQUErQyxtQkFBTyxDQUFDLGlHQUFtQjtBQUMxRSx1Q0FBdUMsdUNBQXVDO0FBQzlFLGdEQUFnRCwwREFBMEQsMkNBQTJDO0FBQ3JKLGlDQUFpQywwR0FBMEcsaUJBQWlCLGFBQWEsZ0NBQWdDO0FBQ3pNO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhLFNBQVM7QUFDdEI7QUFDQTtBQUNBLHFDQUFxQztBQUNyQztBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7QUFDRCxrQkFBa0IiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9wYXl3aW5kLy4vbm9kZV9tb2R1bGVzL2FtYXpvbi1jb2duaXRvLWlkZW50aXR5LWpzL2xpYi9Db2duaXRvQWNjZXNzVG9rZW4uanM/YTFjYyJdLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcblxuZXhwb3J0cy5fX2VzTW9kdWxlID0gdHJ1ZTtcbmV4cG9ydHNbXCJkZWZhdWx0XCJdID0gdm9pZCAwO1xudmFyIF9Db2duaXRvSnd0VG9rZW4yID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlKFwiLi9Db2duaXRvSnd0VG9rZW5cIikpO1xuZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgXCJkZWZhdWx0XCI6IG9iaiB9OyB9XG5mdW5jdGlvbiBfaW5oZXJpdHNMb29zZShzdWJDbGFzcywgc3VwZXJDbGFzcykgeyBzdWJDbGFzcy5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKHN1cGVyQ2xhc3MucHJvdG90eXBlKTsgc3ViQ2xhc3MucHJvdG90eXBlLmNvbnN0cnVjdG9yID0gc3ViQ2xhc3M7IF9zZXRQcm90b3R5cGVPZihzdWJDbGFzcywgc3VwZXJDbGFzcyk7IH1cbmZ1bmN0aW9uIF9zZXRQcm90b3R5cGVPZihvLCBwKSB7IF9zZXRQcm90b3R5cGVPZiA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiA/IE9iamVjdC5zZXRQcm90b3R5cGVPZi5iaW5kKCkgOiBmdW5jdGlvbiBfc2V0UHJvdG90eXBlT2YobywgcCkgeyBvLl9fcHJvdG9fXyA9IHA7IHJldHVybiBvOyB9OyByZXR1cm4gX3NldFByb3RvdHlwZU9mKG8sIHApOyB9IC8qIVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICogQ29weXJpZ2h0IEFtYXpvbi5jb20sIEluYy4gb3IgaXRzIGFmZmlsaWF0ZXMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKiBTUERYLUxpY2Vuc2UtSWRlbnRpZmllcjogQXBhY2hlLTIuMFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICovXG4vKiogQGNsYXNzICovXG52YXIgQ29nbml0b0FjY2Vzc1Rva2VuID0gLyojX19QVVJFX18qL2Z1bmN0aW9uIChfQ29nbml0b0p3dFRva2VuKSB7XG4gIF9pbmhlcml0c0xvb3NlKENvZ25pdG9BY2Nlc3NUb2tlbiwgX0NvZ25pdG9Kd3RUb2tlbik7XG4gIC8qKlxuICAgKiBDb25zdHJ1Y3RzIGEgbmV3IENvZ25pdG9BY2Nlc3NUb2tlbiBvYmplY3RcbiAgICogQHBhcmFtIHtzdHJpbmc9fSBBY2Nlc3NUb2tlbiBUaGUgSldUIGFjY2VzcyB0b2tlbi5cbiAgICovXG4gIGZ1bmN0aW9uIENvZ25pdG9BY2Nlc3NUb2tlbihfdGVtcCkge1xuICAgIHZhciBfcmVmID0gX3RlbXAgPT09IHZvaWQgMCA/IHt9IDogX3RlbXAsXG4gICAgICBBY2Nlc3NUb2tlbiA9IF9yZWYuQWNjZXNzVG9rZW47XG4gICAgcmV0dXJuIF9Db2duaXRvSnd0VG9rZW4uY2FsbCh0aGlzLCBBY2Nlc3NUb2tlbiB8fCAnJykgfHwgdGhpcztcbiAgfVxuICByZXR1cm4gQ29nbml0b0FjY2Vzc1Rva2VuO1xufShfQ29nbml0b0p3dFRva2VuMltcImRlZmF1bHRcIl0pO1xuZXhwb3J0c1tcImRlZmF1bHRcIl0gPSBDb2duaXRvQWNjZXNzVG9rZW47Il0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/amazon-cognito-identity-js/lib/CognitoAccessToken.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/amazon-cognito-identity-js/lib/CognitoIdToken.js":
/*!***********************************************************************!*\
  !*** ./node_modules/amazon-cognito-identity-js/lib/CognitoIdToken.js ***!
  \***********************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

eval("\n\nexports.__esModule = true;\nexports[\"default\"] = void 0;\nvar _CognitoJwtToken2 = _interopRequireDefault(__webpack_require__(/*! ./CognitoJwtToken */ \"(ssr)/./node_modules/amazon-cognito-identity-js/lib/CognitoJwtToken.js\"));\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { \"default\": obj }; }\nfunction _inheritsLoose(subClass, superClass) { subClass.prototype = Object.create(superClass.prototype); subClass.prototype.constructor = subClass; _setPrototypeOf(subClass, superClass); }\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); } /*!\n                                                                                                                                                                                                          * Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n                                                                                                                                                                                                          * SPDX-License-Identifier: Apache-2.0\n                                                                                                                                                                                                          */\n/** @class */\nvar CognitoIdToken = /*#__PURE__*/function (_CognitoJwtToken) {\n  _inheritsLoose(CognitoIdToken, _CognitoJwtToken);\n  /**\n   * Constructs a new CognitoIdToken object\n   * @param {string=} IdToken The JWT Id token\n   */\n  function CognitoIdToken(_temp) {\n    var _ref = _temp === void 0 ? {} : _temp,\n      IdToken = _ref.IdToken;\n    return _CognitoJwtToken.call(this, IdToken || '') || this;\n  }\n  return CognitoIdToken;\n}(_CognitoJwtToken2[\"default\"]);\nexports[\"default\"] = CognitoIdToken;//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvYW1hem9uLWNvZ25pdG8taWRlbnRpdHktanMvbGliL0NvZ25pdG9JZFRva2VuLmpzIiwibWFwcGluZ3MiOiJBQUFhOztBQUViLGtCQUFrQjtBQUNsQixrQkFBa0I7QUFDbEIsK0NBQStDLG1CQUFPLENBQUMsaUdBQW1CO0FBQzFFLHVDQUF1Qyx1Q0FBdUM7QUFDOUUsZ0RBQWdELDBEQUEwRCwyQ0FBMkM7QUFDckosaUNBQWlDLDBHQUEwRyxpQkFBaUIsYUFBYSxnQ0FBZ0M7QUFDek07QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWEsU0FBUztBQUN0QjtBQUNBO0FBQ0EscUNBQXFDO0FBQ3JDO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQztBQUNELGtCQUFrQiIsInNvdXJjZXMiOlsid2VicGFjazovL3BheXdpbmQvLi9ub2RlX21vZHVsZXMvYW1hem9uLWNvZ25pdG8taWRlbnRpdHktanMvbGliL0NvZ25pdG9JZFRva2VuLmpzPzkwNjYiXSwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG5cbmV4cG9ydHMuX19lc01vZHVsZSA9IHRydWU7XG5leHBvcnRzW1wiZGVmYXVsdFwiXSA9IHZvaWQgMDtcbnZhciBfQ29nbml0b0p3dFRva2VuMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQocmVxdWlyZShcIi4vQ29nbml0b0p3dFRva2VuXCIpKTtcbmZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IFwiZGVmYXVsdFwiOiBvYmogfTsgfVxuZnVuY3Rpb24gX2luaGVyaXRzTG9vc2Uoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpIHsgc3ViQ2xhc3MucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShzdXBlckNsYXNzLnByb3RvdHlwZSk7IHN1YkNsYXNzLnByb3RvdHlwZS5jb25zdHJ1Y3RvciA9IHN1YkNsYXNzOyBfc2V0UHJvdG90eXBlT2Yoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpOyB9XG5mdW5jdGlvbiBfc2V0UHJvdG90eXBlT2YobywgcCkgeyBfc2V0UHJvdG90eXBlT2YgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgPyBPYmplY3Quc2V0UHJvdG90eXBlT2YuYmluZCgpIDogZnVuY3Rpb24gX3NldFByb3RvdHlwZU9mKG8sIHApIHsgby5fX3Byb3RvX18gPSBwOyByZXR1cm4gbzsgfTsgcmV0dXJuIF9zZXRQcm90b3R5cGVPZihvLCBwKTsgfSAvKiFcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqIENvcHlyaWdodCBBbWF6b24uY29tLCBJbmMuIG9yIGl0cyBhZmZpbGlhdGVzLiBBbGwgUmlnaHRzIFJlc2VydmVkLlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICogU1BEWC1MaWNlbnNlLUlkZW50aWZpZXI6IEFwYWNoZS0yLjBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqL1xuLyoqIEBjbGFzcyAqL1xudmFyIENvZ25pdG9JZFRva2VuID0gLyojX19QVVJFX18qL2Z1bmN0aW9uIChfQ29nbml0b0p3dFRva2VuKSB7XG4gIF9pbmhlcml0c0xvb3NlKENvZ25pdG9JZFRva2VuLCBfQ29nbml0b0p3dFRva2VuKTtcbiAgLyoqXG4gICAqIENvbnN0cnVjdHMgYSBuZXcgQ29nbml0b0lkVG9rZW4gb2JqZWN0XG4gICAqIEBwYXJhbSB7c3RyaW5nPX0gSWRUb2tlbiBUaGUgSldUIElkIHRva2VuXG4gICAqL1xuICBmdW5jdGlvbiBDb2duaXRvSWRUb2tlbihfdGVtcCkge1xuICAgIHZhciBfcmVmID0gX3RlbXAgPT09IHZvaWQgMCA/IHt9IDogX3RlbXAsXG4gICAgICBJZFRva2VuID0gX3JlZi5JZFRva2VuO1xuICAgIHJldHVybiBfQ29nbml0b0p3dFRva2VuLmNhbGwodGhpcywgSWRUb2tlbiB8fCAnJykgfHwgdGhpcztcbiAgfVxuICByZXR1cm4gQ29nbml0b0lkVG9rZW47XG59KF9Db2duaXRvSnd0VG9rZW4yW1wiZGVmYXVsdFwiXSk7XG5leHBvcnRzW1wiZGVmYXVsdFwiXSA9IENvZ25pdG9JZFRva2VuOyJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/amazon-cognito-identity-js/lib/CognitoIdToken.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/amazon-cognito-identity-js/lib/CognitoJwtToken.js":
/*!************************************************************************!*\
  !*** ./node_modules/amazon-cognito-identity-js/lib/CognitoJwtToken.js ***!
  \************************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

eval("\n\nexports.__esModule = true;\nexports[\"default\"] = void 0;\nvar _buffer = __webpack_require__(/*! buffer */ \"buffer\");\n/*!\n * Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n * SPDX-License-Identifier: Apache-2.0\n */\n/** @class */\nvar CognitoJwtToken = /*#__PURE__*/function () {\n  /**\n   * Constructs a new CognitoJwtToken object\n   * @param {string=} token The JWT token.\n   */\n  function CognitoJwtToken(token) {\n    // Assign object\n    this.jwtToken = token || '';\n    this.payload = this.decodePayload();\n  }\n\n  /**\n   * @returns {string} the record's token.\n   */\n  var _proto = CognitoJwtToken.prototype;\n  _proto.getJwtToken = function getJwtToken() {\n    return this.jwtToken;\n  }\n\n  /**\n   * @returns {int} the token's expiration (exp member).\n   */;\n  _proto.getExpiration = function getExpiration() {\n    return this.payload.exp;\n  }\n\n  /**\n   * @returns {int} the token's \"issued at\" (iat member).\n   */;\n  _proto.getIssuedAt = function getIssuedAt() {\n    return this.payload.iat;\n  }\n\n  /**\n   * @returns {object} the token's payload.\n   */;\n  _proto.decodePayload = function decodePayload() {\n    var payload = this.jwtToken.split('.')[1];\n    try {\n      return JSON.parse(_buffer.Buffer.from(payload, 'base64').toString('utf8'));\n    } catch (err) {\n      return {};\n    }\n  };\n  return CognitoJwtToken;\n}();\nexports[\"default\"] = CognitoJwtToken;//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvYW1hem9uLWNvZ25pdG8taWRlbnRpdHktanMvbGliL0NvZ25pdG9Kd3RUb2tlbi5qcyIsIm1hcHBpbmdzIjoiQUFBYTs7QUFFYixrQkFBa0I7QUFDbEIsa0JBQWtCO0FBQ2xCLGNBQWMsbUJBQU8sQ0FBQyxzQkFBUTtBQUM5QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYSxTQUFTO0FBQ3RCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLGVBQWUsUUFBUTtBQUN2QjtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0EsZUFBZSxLQUFLO0FBQ3BCO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0EsZUFBZSxLQUFLO0FBQ3BCO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0EsZUFBZSxRQUFRO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDO0FBQ0Qsa0JBQWtCIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vcGF5d2luZC8uL25vZGVfbW9kdWxlcy9hbWF6b24tY29nbml0by1pZGVudGl0eS1qcy9saWIvQ29nbml0b0p3dFRva2VuLmpzPzFiN2MiXSwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG5cbmV4cG9ydHMuX19lc01vZHVsZSA9IHRydWU7XG5leHBvcnRzW1wiZGVmYXVsdFwiXSA9IHZvaWQgMDtcbnZhciBfYnVmZmVyID0gcmVxdWlyZShcImJ1ZmZlclwiKTtcbi8qIVxuICogQ29weXJpZ2h0IEFtYXpvbi5jb20sIEluYy4gb3IgaXRzIGFmZmlsaWF0ZXMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG4gKiBTUERYLUxpY2Vuc2UtSWRlbnRpZmllcjogQXBhY2hlLTIuMFxuICovXG4vKiogQGNsYXNzICovXG52YXIgQ29nbml0b0p3dFRva2VuID0gLyojX19QVVJFX18qL2Z1bmN0aW9uICgpIHtcbiAgLyoqXG4gICAqIENvbnN0cnVjdHMgYSBuZXcgQ29nbml0b0p3dFRva2VuIG9iamVjdFxuICAgKiBAcGFyYW0ge3N0cmluZz19IHRva2VuIFRoZSBKV1QgdG9rZW4uXG4gICAqL1xuICBmdW5jdGlvbiBDb2duaXRvSnd0VG9rZW4odG9rZW4pIHtcbiAgICAvLyBBc3NpZ24gb2JqZWN0XG4gICAgdGhpcy5qd3RUb2tlbiA9IHRva2VuIHx8ICcnO1xuICAgIHRoaXMucGF5bG9hZCA9IHRoaXMuZGVjb2RlUGF5bG9hZCgpO1xuICB9XG5cbiAgLyoqXG4gICAqIEByZXR1cm5zIHtzdHJpbmd9IHRoZSByZWNvcmQncyB0b2tlbi5cbiAgICovXG4gIHZhciBfcHJvdG8gPSBDb2duaXRvSnd0VG9rZW4ucHJvdG90eXBlO1xuICBfcHJvdG8uZ2V0Snd0VG9rZW4gPSBmdW5jdGlvbiBnZXRKd3RUb2tlbigpIHtcbiAgICByZXR1cm4gdGhpcy5qd3RUb2tlbjtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcmV0dXJucyB7aW50fSB0aGUgdG9rZW4ncyBleHBpcmF0aW9uIChleHAgbWVtYmVyKS5cbiAgICovO1xuICBfcHJvdG8uZ2V0RXhwaXJhdGlvbiA9IGZ1bmN0aW9uIGdldEV4cGlyYXRpb24oKSB7XG4gICAgcmV0dXJuIHRoaXMucGF5bG9hZC5leHA7XG4gIH1cblxuICAvKipcbiAgICogQHJldHVybnMge2ludH0gdGhlIHRva2VuJ3MgXCJpc3N1ZWQgYXRcIiAoaWF0IG1lbWJlcikuXG4gICAqLztcbiAgX3Byb3RvLmdldElzc3VlZEF0ID0gZnVuY3Rpb24gZ2V0SXNzdWVkQXQoKSB7XG4gICAgcmV0dXJuIHRoaXMucGF5bG9hZC5pYXQ7XG4gIH1cblxuICAvKipcbiAgICogQHJldHVybnMge29iamVjdH0gdGhlIHRva2VuJ3MgcGF5bG9hZC5cbiAgICovO1xuICBfcHJvdG8uZGVjb2RlUGF5bG9hZCA9IGZ1bmN0aW9uIGRlY29kZVBheWxvYWQoKSB7XG4gICAgdmFyIHBheWxvYWQgPSB0aGlzLmp3dFRva2VuLnNwbGl0KCcuJylbMV07XG4gICAgdHJ5IHtcbiAgICAgIHJldHVybiBKU09OLnBhcnNlKF9idWZmZXIuQnVmZmVyLmZyb20ocGF5bG9hZCwgJ2Jhc2U2NCcpLnRvU3RyaW5nKCd1dGY4JykpO1xuICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgcmV0dXJuIHt9O1xuICAgIH1cbiAgfTtcbiAgcmV0dXJuIENvZ25pdG9Kd3RUb2tlbjtcbn0oKTtcbmV4cG9ydHNbXCJkZWZhdWx0XCJdID0gQ29nbml0b0p3dFRva2VuOyJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/amazon-cognito-identity-js/lib/CognitoJwtToken.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/amazon-cognito-identity-js/lib/CognitoRefreshToken.js":
/*!****************************************************************************!*\
  !*** ./node_modules/amazon-cognito-identity-js/lib/CognitoRefreshToken.js ***!
  \****************************************************************************/
/***/ ((__unused_webpack_module, exports) => {

eval("\n\nexports.__esModule = true;\nexports[\"default\"] = void 0;\n/*!\n * Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n * SPDX-License-Identifier: Apache-2.0\n */\n/** @class */\nvar CognitoRefreshToken = /*#__PURE__*/function () {\n  /**\n   * Constructs a new CognitoRefreshToken object\n   * @param {string=} RefreshToken The JWT refresh token.\n   */\n  function CognitoRefreshToken(_temp) {\n    var _ref = _temp === void 0 ? {} : _temp,\n      RefreshToken = _ref.RefreshToken;\n    // Assign object\n    this.token = RefreshToken || '';\n  }\n\n  /**\n   * @returns {string} the record's token.\n   */\n  var _proto = CognitoRefreshToken.prototype;\n  _proto.getToken = function getToken() {\n    return this.token;\n  };\n  return CognitoRefreshToken;\n}();\nexports[\"default\"] = CognitoRefreshToken;//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvYW1hem9uLWNvZ25pdG8taWRlbnRpdHktanMvbGliL0NvZ25pdG9SZWZyZXNoVG9rZW4uanMiLCJtYXBwaW5ncyI6IkFBQWE7O0FBRWIsa0JBQWtCO0FBQ2xCLGtCQUFrQjtBQUNsQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYSxTQUFTO0FBQ3RCO0FBQ0E7QUFDQSxxQ0FBcUM7QUFDckM7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxlQUFlLFFBQVE7QUFDdkI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQztBQUNELGtCQUFrQiIsInNvdXJjZXMiOlsid2VicGFjazovL3BheXdpbmQvLi9ub2RlX21vZHVsZXMvYW1hem9uLWNvZ25pdG8taWRlbnRpdHktanMvbGliL0NvZ25pdG9SZWZyZXNoVG9rZW4uanM/YmEyZiJdLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcblxuZXhwb3J0cy5fX2VzTW9kdWxlID0gdHJ1ZTtcbmV4cG9ydHNbXCJkZWZhdWx0XCJdID0gdm9pZCAwO1xuLyohXG4gKiBDb3B5cmlnaHQgQW1hem9uLmNvbSwgSW5jLiBvciBpdHMgYWZmaWxpYXRlcy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbiAqIFNQRFgtTGljZW5zZS1JZGVudGlmaWVyOiBBcGFjaGUtMi4wXG4gKi9cbi8qKiBAY2xhc3MgKi9cbnZhciBDb2duaXRvUmVmcmVzaFRva2VuID0gLyojX19QVVJFX18qL2Z1bmN0aW9uICgpIHtcbiAgLyoqXG4gICAqIENvbnN0cnVjdHMgYSBuZXcgQ29nbml0b1JlZnJlc2hUb2tlbiBvYmplY3RcbiAgICogQHBhcmFtIHtzdHJpbmc9fSBSZWZyZXNoVG9rZW4gVGhlIEpXVCByZWZyZXNoIHRva2VuLlxuICAgKi9cbiAgZnVuY3Rpb24gQ29nbml0b1JlZnJlc2hUb2tlbihfdGVtcCkge1xuICAgIHZhciBfcmVmID0gX3RlbXAgPT09IHZvaWQgMCA/IHt9IDogX3RlbXAsXG4gICAgICBSZWZyZXNoVG9rZW4gPSBfcmVmLlJlZnJlc2hUb2tlbjtcbiAgICAvLyBBc3NpZ24gb2JqZWN0XG4gICAgdGhpcy50b2tlbiA9IFJlZnJlc2hUb2tlbiB8fCAnJztcbiAgfVxuXG4gIC8qKlxuICAgKiBAcmV0dXJucyB7c3RyaW5nfSB0aGUgcmVjb3JkJ3MgdG9rZW4uXG4gICAqL1xuICB2YXIgX3Byb3RvID0gQ29nbml0b1JlZnJlc2hUb2tlbi5wcm90b3R5cGU7XG4gIF9wcm90by5nZXRUb2tlbiA9IGZ1bmN0aW9uIGdldFRva2VuKCkge1xuICAgIHJldHVybiB0aGlzLnRva2VuO1xuICB9O1xuICByZXR1cm4gQ29nbml0b1JlZnJlc2hUb2tlbjtcbn0oKTtcbmV4cG9ydHNbXCJkZWZhdWx0XCJdID0gQ29nbml0b1JlZnJlc2hUb2tlbjsiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/amazon-cognito-identity-js/lib/CognitoRefreshToken.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/amazon-cognito-identity-js/lib/CognitoUser.js":
/*!********************************************************************!*\
  !*** ./node_modules/amazon-cognito-identity-js/lib/CognitoUser.js ***!
  \********************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

eval("\n\nexports.__esModule = true;\nexports[\"default\"] = void 0;\nvar _buffer = __webpack_require__(/*! buffer */ \"buffer\");\nvar _sha256Js = __webpack_require__(/*! @aws-crypto/sha256-js */ \"(ssr)/./node_modules/@aws-crypto/sha256-js/build/index.js\");\nvar _Platform = __webpack_require__(/*! ./Platform */ \"(ssr)/./node_modules/amazon-cognito-identity-js/lib/Platform/index.js\");\nvar _BigInteger = _interopRequireDefault(__webpack_require__(/*! ./BigInteger */ \"(ssr)/./node_modules/amazon-cognito-identity-js/lib/BigInteger.js\"));\nvar _AuthenticationHelper = _interopRequireDefault(__webpack_require__(/*! ./AuthenticationHelper */ \"(ssr)/./node_modules/amazon-cognito-identity-js/lib/AuthenticationHelper.js\"));\nvar _CognitoAccessToken = _interopRequireDefault(__webpack_require__(/*! ./CognitoAccessToken */ \"(ssr)/./node_modules/amazon-cognito-identity-js/lib/CognitoAccessToken.js\"));\nvar _CognitoIdToken = _interopRequireDefault(__webpack_require__(/*! ./CognitoIdToken */ \"(ssr)/./node_modules/amazon-cognito-identity-js/lib/CognitoIdToken.js\"));\nvar _CognitoRefreshToken = _interopRequireDefault(__webpack_require__(/*! ./CognitoRefreshToken */ \"(ssr)/./node_modules/amazon-cognito-identity-js/lib/CognitoRefreshToken.js\"));\nvar _CognitoUserSession = _interopRequireDefault(__webpack_require__(/*! ./CognitoUserSession */ \"(ssr)/./node_modules/amazon-cognito-identity-js/lib/CognitoUserSession.js\"));\nvar _DateHelper = _interopRequireDefault(__webpack_require__(/*! ./DateHelper */ \"(ssr)/./node_modules/amazon-cognito-identity-js/lib/DateHelper.js\"));\nvar _CognitoUserAttribute = _interopRequireDefault(__webpack_require__(/*! ./CognitoUserAttribute */ \"(ssr)/./node_modules/amazon-cognito-identity-js/lib/CognitoUserAttribute.js\"));\nvar _StorageHelper = _interopRequireDefault(__webpack_require__(/*! ./StorageHelper */ \"(ssr)/./node_modules/amazon-cognito-identity-js/lib/StorageHelper.js\"));\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { \"default\": obj }; }\n/*!\n * Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n * SPDX-License-Identifier: Apache-2.0\n */\n\n/**\n * @callback nodeCallback\n * @template T result\n * @param {*} err The operation failure reason, or null.\n * @param {T} result The operation result.\n */\n\n/**\n * @callback onFailure\n * @param {*} err Failure reason.\n */\n\n/**\n * @callback onSuccess\n * @template T result\n * @param {T} result The operation result.\n */\n\n/**\n * @callback mfaRequired\n * @param {*} details MFA challenge details.\n */\n\n/**\n * @callback customChallenge\n * @param {*} details Custom challenge details.\n */\n\n/**\n * @callback inputVerificationCode\n * @param {*} data Server response.\n */\n/**\n * @callback authSuccess\n * @param {CognitoUserSession} session The new session.\n * @param {bool=} userConfirmationNecessary User must be confirmed.\n */\nvar isNavigatorAvailable = typeof navigator !== 'undefined';\nvar userAgent = isNavigatorAvailable ? _Platform.Platform.isReactNative ? 'react-native' : navigator.userAgent : 'nodejs';\n\n/** @class */\nvar CognitoUser = /*#__PURE__*/function () {\n  /**\n   * Constructs a new CognitoUser object\n   * @param {object} data Creation options\n   * @param {string} data.Username The user's username.\n   * @param {CognitoUserPool} data.Pool Pool containing the user.\n   * @param {object} data.Storage Optional storage object.\n   */\n  function CognitoUser(data) {\n    if (data == null || data.Username == null || data.Pool == null) {\n      throw new Error('Username and Pool information are required.');\n    }\n    this.username = data.Username || '';\n    this.pool = data.Pool;\n    this.Session = null;\n    this.client = data.Pool.client;\n    this.signInUserSession = null;\n    this.authenticationFlowType = 'USER_SRP_AUTH';\n    this.storage = data.Storage || new _StorageHelper[\"default\"]().getStorage();\n    this.keyPrefix = \"CognitoIdentityServiceProvider.\" + this.pool.getClientId();\n    this.userDataKey = this.keyPrefix + \".\" + this.username + \".userData\";\n  }\n\n  /**\n   * Sets the session for this user\n   * @param {CognitoUserSession} signInUserSession the session\n   * @returns {void}\n   */\n  var _proto = CognitoUser.prototype;\n  _proto.setSignInUserSession = function setSignInUserSession(signInUserSession) {\n    this.clearCachedUserData();\n    this.signInUserSession = signInUserSession;\n    this.cacheTokens();\n  }\n\n  /**\n   * @returns {CognitoUserSession} the current session for this user\n   */;\n  _proto.getSignInUserSession = function getSignInUserSession() {\n    return this.signInUserSession;\n  }\n\n  /**\n   * @returns {string} the user's username\n   */;\n  _proto.getUsername = function getUsername() {\n    return this.username;\n  }\n\n  /**\n   * @returns {String} the authentication flow type\n   */;\n  _proto.getAuthenticationFlowType = function getAuthenticationFlowType() {\n    return this.authenticationFlowType;\n  }\n\n  /**\n   * sets authentication flow type\n   * @param {string} authenticationFlowType New value.\n   * @returns {void}\n   */;\n  _proto.setAuthenticationFlowType = function setAuthenticationFlowType(authenticationFlowType) {\n    this.authenticationFlowType = authenticationFlowType;\n  }\n\n  /**\n   * This is used for authenticating the user through the custom authentication flow.\n   * @param {AuthenticationDetails} authDetails Contains the authentication data\n   * @param {object} callback Result callback map.\n   * @param {onFailure} callback.onFailure Called on any error.\n   * @param {customChallenge} callback.customChallenge Custom challenge\n   *        response required to continue.\n   * @param {authSuccess} callback.onSuccess Called on success with the new session.\n   * @returns {void}\n   */;\n  _proto.initiateAuth = function initiateAuth(authDetails, callback) {\n    var _this = this;\n    var authParameters = authDetails.getAuthParameters();\n    authParameters.USERNAME = this.username;\n    var clientMetaData = Object.keys(authDetails.getValidationData()).length !== 0 ? authDetails.getValidationData() : authDetails.getClientMetadata();\n    var jsonReq = {\n      AuthFlow: 'CUSTOM_AUTH',\n      ClientId: this.pool.getClientId(),\n      AuthParameters: authParameters,\n      ClientMetadata: clientMetaData\n    };\n    if (this.getUserContextData()) {\n      jsonReq.UserContextData = this.getUserContextData();\n    }\n    this.client.request('InitiateAuth', jsonReq, function (err, data) {\n      if (err) {\n        return callback.onFailure(err);\n      }\n      var challengeName = data.ChallengeName;\n      var challengeParameters = data.ChallengeParameters;\n      if (challengeName === 'CUSTOM_CHALLENGE') {\n        _this.Session = data.Session;\n        return callback.customChallenge(challengeParameters);\n      }\n      _this.signInUserSession = _this.getCognitoUserSession(data.AuthenticationResult);\n      _this.cacheTokens();\n      return callback.onSuccess(_this.signInUserSession);\n    });\n  }\n\n  /**\n   * This is used for authenticating the user.\n   * stuff\n   * @param {AuthenticationDetails} authDetails Contains the authentication data\n   * @param {object} callback Result callback map.\n   * @param {onFailure} callback.onFailure Called on any error.\n   * @param {newPasswordRequired} callback.newPasswordRequired new\n   *        password and any required attributes are required to continue\n   * @param {mfaRequired} callback.mfaRequired MFA code\n   *        required to continue.\n   * @param {customChallenge} callback.customChallenge Custom challenge\n   *        response required to continue.\n   * @param {authSuccess} callback.onSuccess Called on success with the new session.\n   * @returns {void}\n   */;\n  _proto.authenticateUser = function authenticateUser(authDetails, callback) {\n    if (this.authenticationFlowType === 'USER_PASSWORD_AUTH') {\n      return this.authenticateUserPlainUsernamePassword(authDetails, callback);\n    } else if (this.authenticationFlowType === 'USER_SRP_AUTH' || this.authenticationFlowType === 'CUSTOM_AUTH') {\n      return this.authenticateUserDefaultAuth(authDetails, callback);\n    }\n    return callback.onFailure(new Error('Authentication flow type is invalid.'));\n  }\n\n  /**\n   * PRIVATE ONLY: This is an internal only method and should not\n   * be directly called by the consumers.\n   * It calls the AuthenticationHelper for SRP related\n   * stuff\n   * @param {AuthenticationDetails} authDetails Contains the authentication data\n   * @param {object} callback Result callback map.\n   * @param {onFailure} callback.onFailure Called on any error.\n   * @param {newPasswordRequired} callback.newPasswordRequired new\n   *        password and any required attributes are required to continue\n   * @param {mfaRequired} callback.mfaRequired MFA code\n   *        required to continue.\n   * @param {customChallenge} callback.customChallenge Custom challenge\n   *        response required to continue.\n   * @param {authSuccess} callback.onSuccess Called on success with the new session.\n   * @returns {void}\n   */;\n  _proto.authenticateUserDefaultAuth = function authenticateUserDefaultAuth(authDetails, callback) {\n    var _this2 = this;\n    var authenticationHelper = new _AuthenticationHelper[\"default\"](this.pool.getUserPoolName());\n    var dateHelper = new _DateHelper[\"default\"]();\n    var serverBValue;\n    var salt;\n    var authParameters = {};\n    if (this.deviceKey != null) {\n      authParameters.DEVICE_KEY = this.deviceKey;\n    }\n    authParameters.USERNAME = this.username;\n    authenticationHelper.getLargeAValue(function (errOnAValue, aValue) {\n      // getLargeAValue callback start\n      if (errOnAValue) {\n        callback.onFailure(errOnAValue);\n      }\n      authParameters.SRP_A = aValue.toString(16);\n      if (_this2.authenticationFlowType === 'CUSTOM_AUTH') {\n        authParameters.CHALLENGE_NAME = 'SRP_A';\n      }\n      var clientMetaData = Object.keys(authDetails.getValidationData()).length !== 0 ? authDetails.getValidationData() : authDetails.getClientMetadata();\n      var jsonReq = {\n        AuthFlow: _this2.authenticationFlowType,\n        ClientId: _this2.pool.getClientId(),\n        AuthParameters: authParameters,\n        ClientMetadata: clientMetaData\n      };\n      if (_this2.getUserContextData(_this2.username)) {\n        jsonReq.UserContextData = _this2.getUserContextData(_this2.username);\n      }\n      _this2.client.request('InitiateAuth', jsonReq, function (err, data) {\n        if (err) {\n          return callback.onFailure(err);\n        }\n        var challengeParameters = data.ChallengeParameters;\n        _this2.username = challengeParameters.USER_ID_FOR_SRP;\n        _this2.userDataKey = _this2.keyPrefix + \".\" + _this2.username + \".userData\";\n        serverBValue = new _BigInteger[\"default\"](challengeParameters.SRP_B, 16);\n        salt = new _BigInteger[\"default\"](challengeParameters.SALT, 16);\n        _this2.getCachedDeviceKeyAndPassword();\n        authenticationHelper.getPasswordAuthenticationKey(_this2.username, authDetails.getPassword(), serverBValue, salt, function (errOnHkdf, hkdf) {\n          // getPasswordAuthenticationKey callback start\n          if (errOnHkdf) {\n            callback.onFailure(errOnHkdf);\n          }\n          var dateNow = dateHelper.getNowString();\n          var concatBuffer = _buffer.Buffer.concat([_buffer.Buffer.from(_this2.pool.getUserPoolName(), 'utf8'), _buffer.Buffer.from(_this2.username, 'utf8'), _buffer.Buffer.from(challengeParameters.SECRET_BLOCK, 'base64'), _buffer.Buffer.from(dateNow, 'utf8')]);\n          var awsCryptoHash = new _sha256Js.Sha256(hkdf);\n          awsCryptoHash.update(concatBuffer);\n          var resultFromAWSCrypto = awsCryptoHash.digestSync();\n          var signatureString = _buffer.Buffer.from(resultFromAWSCrypto).toString('base64');\n          var challengeResponses = {};\n          challengeResponses.USERNAME = _this2.username;\n          challengeResponses.PASSWORD_CLAIM_SECRET_BLOCK = challengeParameters.SECRET_BLOCK;\n          challengeResponses.TIMESTAMP = dateNow;\n          challengeResponses.PASSWORD_CLAIM_SIGNATURE = signatureString;\n          if (_this2.deviceKey != null) {\n            challengeResponses.DEVICE_KEY = _this2.deviceKey;\n          }\n          var respondToAuthChallenge = function respondToAuthChallenge(challenge, challengeCallback) {\n            return _this2.client.request('RespondToAuthChallenge', challenge, function (errChallenge, dataChallenge) {\n              if (errChallenge && errChallenge.code === 'ResourceNotFoundException' && errChallenge.message.toLowerCase().indexOf('device') !== -1) {\n                challengeResponses.DEVICE_KEY = null;\n                _this2.deviceKey = null;\n                _this2.randomPassword = null;\n                _this2.deviceGroupKey = null;\n                _this2.clearCachedDeviceKeyAndPassword();\n                return respondToAuthChallenge(challenge, challengeCallback);\n              }\n              return challengeCallback(errChallenge, dataChallenge);\n            });\n          };\n          var jsonReqResp = {\n            ChallengeName: 'PASSWORD_VERIFIER',\n            ClientId: _this2.pool.getClientId(),\n            ChallengeResponses: challengeResponses,\n            Session: data.Session,\n            ClientMetadata: clientMetaData\n          };\n          if (_this2.getUserContextData()) {\n            jsonReqResp.UserContextData = _this2.getUserContextData();\n          }\n          respondToAuthChallenge(jsonReqResp, function (errAuthenticate, dataAuthenticate) {\n            if (errAuthenticate) {\n              return callback.onFailure(errAuthenticate);\n            }\n            return _this2.authenticateUserInternal(dataAuthenticate, authenticationHelper, callback);\n          });\n          return undefined;\n          // getPasswordAuthenticationKey callback end\n        });\n\n        return undefined;\n      });\n      // getLargeAValue callback end\n    });\n  }\n\n  /**\n   * PRIVATE ONLY: This is an internal only method and should not\n   * be directly called by the consumers.\n   * @param {AuthenticationDetails} authDetails Contains the authentication data.\n   * @param {object} callback Result callback map.\n   * @param {onFailure} callback.onFailure Called on any error.\n   * @param {mfaRequired} callback.mfaRequired MFA code\n   *        required to continue.\n   * @param {authSuccess} callback.onSuccess Called on success with the new session.\n   * @returns {void}\n   */;\n  _proto.authenticateUserPlainUsernamePassword = function authenticateUserPlainUsernamePassword(authDetails, callback) {\n    var _this3 = this;\n    var authParameters = {};\n    authParameters.USERNAME = this.username;\n    authParameters.PASSWORD = authDetails.getPassword();\n    if (!authParameters.PASSWORD) {\n      callback.onFailure(new Error('PASSWORD parameter is required'));\n      return;\n    }\n    var authenticationHelper = new _AuthenticationHelper[\"default\"](this.pool.getUserPoolName());\n    this.getCachedDeviceKeyAndPassword();\n    if (this.deviceKey != null) {\n      authParameters.DEVICE_KEY = this.deviceKey;\n    }\n    var clientMetaData = Object.keys(authDetails.getValidationData()).length !== 0 ? authDetails.getValidationData() : authDetails.getClientMetadata();\n    var jsonReq = {\n      AuthFlow: 'USER_PASSWORD_AUTH',\n      ClientId: this.pool.getClientId(),\n      AuthParameters: authParameters,\n      ClientMetadata: clientMetaData\n    };\n    if (this.getUserContextData(this.username)) {\n      jsonReq.UserContextData = this.getUserContextData(this.username);\n    }\n    // USER_PASSWORD_AUTH happens in a single round-trip: client sends userName and password,\n    // Cognito UserPools verifies password and returns tokens.\n    this.client.request('InitiateAuth', jsonReq, function (err, authResult) {\n      if (err) {\n        return callback.onFailure(err);\n      }\n      return _this3.authenticateUserInternal(authResult, authenticationHelper, callback);\n    });\n  }\n\n  /**\n   * PRIVATE ONLY: This is an internal only method and should not\n   * be directly called by the consumers.\n   * @param {object} dataAuthenticate authentication data\n   * @param {object} authenticationHelper helper created\n   * @param {callback} callback passed on from caller\n   * @returns {void}\n   */;\n  _proto.authenticateUserInternal = function authenticateUserInternal(dataAuthenticate, authenticationHelper, callback) {\n    var _this4 = this;\n    var challengeName = dataAuthenticate.ChallengeName;\n    var challengeParameters = dataAuthenticate.ChallengeParameters;\n    if (challengeName === 'SMS_MFA') {\n      this.Session = dataAuthenticate.Session;\n      return callback.mfaRequired(challengeName, challengeParameters);\n    }\n    if (challengeName === 'SELECT_MFA_TYPE') {\n      this.Session = dataAuthenticate.Session;\n      return callback.selectMFAType(challengeName, challengeParameters);\n    }\n    if (challengeName === 'MFA_SETUP') {\n      this.Session = dataAuthenticate.Session;\n      return callback.mfaSetup(challengeName, challengeParameters);\n    }\n    if (challengeName === 'SOFTWARE_TOKEN_MFA') {\n      this.Session = dataAuthenticate.Session;\n      return callback.totpRequired(challengeName, challengeParameters);\n    }\n    if (challengeName === 'CUSTOM_CHALLENGE') {\n      this.Session = dataAuthenticate.Session;\n      return callback.customChallenge(challengeParameters);\n    }\n    if (challengeName === 'NEW_PASSWORD_REQUIRED') {\n      this.Session = dataAuthenticate.Session;\n      var userAttributes = null;\n      var rawRequiredAttributes = null;\n      var requiredAttributes = [];\n      var userAttributesPrefix = authenticationHelper.getNewPasswordRequiredChallengeUserAttributePrefix();\n      if (challengeParameters) {\n        userAttributes = JSON.parse(dataAuthenticate.ChallengeParameters.userAttributes);\n        rawRequiredAttributes = JSON.parse(dataAuthenticate.ChallengeParameters.requiredAttributes);\n      }\n      if (rawRequiredAttributes) {\n        for (var i = 0; i < rawRequiredAttributes.length; i++) {\n          requiredAttributes[i] = rawRequiredAttributes[i].substr(userAttributesPrefix.length);\n        }\n      }\n      return callback.newPasswordRequired(userAttributes, requiredAttributes);\n    }\n    if (challengeName === 'DEVICE_SRP_AUTH') {\n      this.Session = dataAuthenticate.Session;\n      this.getDeviceResponse(callback);\n      return undefined;\n    }\n    this.signInUserSession = this.getCognitoUserSession(dataAuthenticate.AuthenticationResult);\n    this.challengeName = challengeName;\n    this.cacheTokens();\n    var newDeviceMetadata = dataAuthenticate.AuthenticationResult.NewDeviceMetadata;\n    if (newDeviceMetadata == null) {\n      return callback.onSuccess(this.signInUserSession);\n    }\n    authenticationHelper.generateHashDevice(dataAuthenticate.AuthenticationResult.NewDeviceMetadata.DeviceGroupKey, dataAuthenticate.AuthenticationResult.NewDeviceMetadata.DeviceKey, function (errGenHash) {\n      if (errGenHash) {\n        return callback.onFailure(errGenHash);\n      }\n      var deviceSecretVerifierConfig = {\n        Salt: _buffer.Buffer.from(authenticationHelper.getSaltDevices(), 'hex').toString('base64'),\n        PasswordVerifier: _buffer.Buffer.from(authenticationHelper.getVerifierDevices(), 'hex').toString('base64')\n      };\n      _this4.verifierDevices = deviceSecretVerifierConfig.PasswordVerifier;\n      _this4.deviceGroupKey = newDeviceMetadata.DeviceGroupKey;\n      _this4.randomPassword = authenticationHelper.getRandomPassword();\n      _this4.client.request('ConfirmDevice', {\n        DeviceKey: newDeviceMetadata.DeviceKey,\n        AccessToken: _this4.signInUserSession.getAccessToken().getJwtToken(),\n        DeviceSecretVerifierConfig: deviceSecretVerifierConfig,\n        DeviceName: userAgent\n      }, function (errConfirm, dataConfirm) {\n        if (errConfirm) {\n          return callback.onFailure(errConfirm);\n        }\n        _this4.deviceKey = dataAuthenticate.AuthenticationResult.NewDeviceMetadata.DeviceKey;\n        _this4.cacheDeviceKeyAndPassword();\n        if (dataConfirm.UserConfirmationNecessary === true) {\n          return callback.onSuccess(_this4.signInUserSession, dataConfirm.UserConfirmationNecessary);\n        }\n        return callback.onSuccess(_this4.signInUserSession);\n      });\n      return undefined;\n    });\n    return undefined;\n  }\n\n  /**\n   * This method is user to complete the NEW_PASSWORD_REQUIRED challenge.\n   * Pass the new password with any new user attributes to be updated.\n   * User attribute keys must be of format userAttributes.<attribute_name>.\n   * @param {string} newPassword new password for this user\n   * @param {object} requiredAttributeData map with values for all required attributes\n   * @param {object} callback Result callback map.\n   * @param {onFailure} callback.onFailure Called on any error.\n   * @param {mfaRequired} callback.mfaRequired MFA code required to continue.\n   * @param {customChallenge} callback.customChallenge Custom challenge\n   *         response required to continue.\n   * @param {authSuccess} callback.onSuccess Called on success with the new session.\n   * @param {ClientMetadata} clientMetadata object which is passed from client to Cognito Lambda trigger\n   * @returns {void}\n   */;\n  _proto.completeNewPasswordChallenge = function completeNewPasswordChallenge(newPassword, requiredAttributeData, callback, clientMetadata) {\n    var _this5 = this;\n    if (!newPassword) {\n      return callback.onFailure(new Error('New password is required.'));\n    }\n    var authenticationHelper = new _AuthenticationHelper[\"default\"](this.pool.getUserPoolName());\n    var userAttributesPrefix = authenticationHelper.getNewPasswordRequiredChallengeUserAttributePrefix();\n    var finalUserAttributes = {};\n    if (requiredAttributeData) {\n      Object.keys(requiredAttributeData).forEach(function (key) {\n        finalUserAttributes[userAttributesPrefix + key] = requiredAttributeData[key];\n      });\n    }\n    finalUserAttributes.NEW_PASSWORD = newPassword;\n    finalUserAttributes.USERNAME = this.username;\n    var jsonReq = {\n      ChallengeName: 'NEW_PASSWORD_REQUIRED',\n      ClientId: this.pool.getClientId(),\n      ChallengeResponses: finalUserAttributes,\n      Session: this.Session,\n      ClientMetadata: clientMetadata\n    };\n    if (this.getUserContextData()) {\n      jsonReq.UserContextData = this.getUserContextData();\n    }\n    this.client.request('RespondToAuthChallenge', jsonReq, function (errAuthenticate, dataAuthenticate) {\n      if (errAuthenticate) {\n        return callback.onFailure(errAuthenticate);\n      }\n      return _this5.authenticateUserInternal(dataAuthenticate, authenticationHelper, callback);\n    });\n    return undefined;\n  }\n\n  /**\n   * This is used to get a session using device authentication. It is called at the end of user\n   * authentication\n   *\n   * @param {object} callback Result callback map.\n   * @param {onFailure} callback.onFailure Called on any error.\n   * @param {authSuccess} callback.onSuccess Called on success with the new session.\n   * @param {ClientMetadata} clientMetadata object which is passed from client to Cognito Lambda trigger\n   * @returns {void}\n   * @private\n   */;\n  _proto.getDeviceResponse = function getDeviceResponse(callback, clientMetadata) {\n    var _this6 = this;\n    var authenticationHelper = new _AuthenticationHelper[\"default\"](this.deviceGroupKey);\n    var dateHelper = new _DateHelper[\"default\"]();\n    var authParameters = {};\n    authParameters.USERNAME = this.username;\n    authParameters.DEVICE_KEY = this.deviceKey;\n    authenticationHelper.getLargeAValue(function (errAValue, aValue) {\n      // getLargeAValue callback start\n      if (errAValue) {\n        callback.onFailure(errAValue);\n      }\n      authParameters.SRP_A = aValue.toString(16);\n      var jsonReq = {\n        ChallengeName: 'DEVICE_SRP_AUTH',\n        ClientId: _this6.pool.getClientId(),\n        ChallengeResponses: authParameters,\n        ClientMetadata: clientMetadata,\n        Session: _this6.Session\n      };\n      if (_this6.getUserContextData()) {\n        jsonReq.UserContextData = _this6.getUserContextData();\n      }\n      _this6.client.request('RespondToAuthChallenge', jsonReq, function (err, data) {\n        if (err) {\n          return callback.onFailure(err);\n        }\n        var challengeParameters = data.ChallengeParameters;\n        var serverBValue = new _BigInteger[\"default\"](challengeParameters.SRP_B, 16);\n        var salt = new _BigInteger[\"default\"](challengeParameters.SALT, 16);\n        authenticationHelper.getPasswordAuthenticationKey(_this6.deviceKey, _this6.randomPassword, serverBValue, salt, function (errHkdf, hkdf) {\n          // getPasswordAuthenticationKey callback start\n          if (errHkdf) {\n            return callback.onFailure(errHkdf);\n          }\n          var dateNow = dateHelper.getNowString();\n          var concatBuffer = _buffer.Buffer.concat([_buffer.Buffer.from(_this6.deviceGroupKey, 'utf8'), _buffer.Buffer.from(_this6.deviceKey, 'utf8'), _buffer.Buffer.from(challengeParameters.SECRET_BLOCK, 'base64'), _buffer.Buffer.from(dateNow, 'utf8')]);\n          var awsCryptoHash = new _sha256Js.Sha256(hkdf);\n          awsCryptoHash.update(concatBuffer);\n          var resultFromAWSCrypto = awsCryptoHash.digestSync();\n          var signatureString = _buffer.Buffer.from(resultFromAWSCrypto).toString('base64');\n          var challengeResponses = {};\n          challengeResponses.USERNAME = _this6.username;\n          challengeResponses.PASSWORD_CLAIM_SECRET_BLOCK = challengeParameters.SECRET_BLOCK;\n          challengeResponses.TIMESTAMP = dateNow;\n          challengeResponses.PASSWORD_CLAIM_SIGNATURE = signatureString;\n          challengeResponses.DEVICE_KEY = _this6.deviceKey;\n          var jsonReqResp = {\n            ChallengeName: 'DEVICE_PASSWORD_VERIFIER',\n            ClientId: _this6.pool.getClientId(),\n            ChallengeResponses: challengeResponses,\n            Session: data.Session\n          };\n          if (_this6.getUserContextData()) {\n            jsonReqResp.UserContextData = _this6.getUserContextData();\n          }\n          _this6.client.request('RespondToAuthChallenge', jsonReqResp, function (errAuthenticate, dataAuthenticate) {\n            if (errAuthenticate) {\n              return callback.onFailure(errAuthenticate);\n            }\n            _this6.signInUserSession = _this6.getCognitoUserSession(dataAuthenticate.AuthenticationResult);\n            _this6.cacheTokens();\n            return callback.onSuccess(_this6.signInUserSession);\n          });\n          return undefined;\n          // getPasswordAuthenticationKey callback end\n        });\n\n        return undefined;\n      });\n      // getLargeAValue callback end\n    });\n  }\n\n  /**\n   * This is used for a certain user to confirm the registration by using a confirmation code\n   * @param {string} confirmationCode Code entered by user.\n   * @param {bool} forceAliasCreation Allow migrating from an existing email / phone number.\n   * @param {nodeCallback<string>} callback Called on success or error.\n   * @param {ClientMetadata} clientMetadata object which is passed from client to Cognito Lambda trigger\n   * @returns {void}\n   */;\n  _proto.confirmRegistration = function confirmRegistration(confirmationCode, forceAliasCreation, callback, clientMetadata) {\n    var jsonReq = {\n      ClientId: this.pool.getClientId(),\n      ConfirmationCode: confirmationCode,\n      Username: this.username,\n      ForceAliasCreation: forceAliasCreation,\n      ClientMetadata: clientMetadata\n    };\n    if (this.getUserContextData()) {\n      jsonReq.UserContextData = this.getUserContextData();\n    }\n    this.client.request('ConfirmSignUp', jsonReq, function (err) {\n      if (err) {\n        return callback(err, null);\n      }\n      return callback(null, 'SUCCESS');\n    });\n  }\n\n  /**\n   * This is used by the user once he has the responses to a custom challenge\n   * @param {string} answerChallenge The custom challenge answer.\n   * @param {object} callback Result callback map.\n   * @param {onFailure} callback.onFailure Called on any error.\n   * @param {customChallenge} callback.customChallenge\n   *    Custom challenge response required to continue.\n   * @param {authSuccess} callback.onSuccess Called on success with the new session.\n   * @param {ClientMetadata} clientMetadata object which is passed from client to Cognito Lambda trigger\n   * @returns {void}\n   */;\n  _proto.sendCustomChallengeAnswer = function sendCustomChallengeAnswer(answerChallenge, callback, clientMetadata) {\n    var _this7 = this;\n    var challengeResponses = {};\n    challengeResponses.USERNAME = this.username;\n    challengeResponses.ANSWER = answerChallenge;\n    var authenticationHelper = new _AuthenticationHelper[\"default\"](this.pool.getUserPoolName());\n    this.getCachedDeviceKeyAndPassword();\n    if (this.deviceKey != null) {\n      challengeResponses.DEVICE_KEY = this.deviceKey;\n    }\n    var jsonReq = {\n      ChallengeName: 'CUSTOM_CHALLENGE',\n      ChallengeResponses: challengeResponses,\n      ClientId: this.pool.getClientId(),\n      Session: this.Session,\n      ClientMetadata: clientMetadata\n    };\n    if (this.getUserContextData()) {\n      jsonReq.UserContextData = this.getUserContextData();\n    }\n    this.client.request('RespondToAuthChallenge', jsonReq, function (err, data) {\n      if (err) {\n        return callback.onFailure(err);\n      }\n      return _this7.authenticateUserInternal(data, authenticationHelper, callback);\n    });\n  }\n\n  /**\n   * This is used by the user once he has an MFA code\n   * @param {string} confirmationCode The MFA code entered by the user.\n   * @param {object} callback Result callback map.\n   * @param {string} mfaType The mfa we are replying to.\n   * @param {onFailure} callback.onFailure Called on any error.\n   * @param {authSuccess} callback.onSuccess Called on success with the new session.\n   * @param {ClientMetadata} clientMetadata object which is passed from client to Cognito Lambda trigger\n   * @returns {void}\n   */;\n  _proto.sendMFACode = function sendMFACode(confirmationCode, callback, mfaType, clientMetadata) {\n    var _this8 = this;\n    var challengeResponses = {};\n    challengeResponses.USERNAME = this.username;\n    challengeResponses.SMS_MFA_CODE = confirmationCode;\n    var mfaTypeSelection = mfaType || 'SMS_MFA';\n    if (mfaTypeSelection === 'SOFTWARE_TOKEN_MFA') {\n      challengeResponses.SOFTWARE_TOKEN_MFA_CODE = confirmationCode;\n    }\n    if (this.deviceKey != null) {\n      challengeResponses.DEVICE_KEY = this.deviceKey;\n    }\n    var jsonReq = {\n      ChallengeName: mfaTypeSelection,\n      ChallengeResponses: challengeResponses,\n      ClientId: this.pool.getClientId(),\n      Session: this.Session,\n      ClientMetadata: clientMetadata\n    };\n    if (this.getUserContextData()) {\n      jsonReq.UserContextData = this.getUserContextData();\n    }\n    this.client.request('RespondToAuthChallenge', jsonReq, function (err, dataAuthenticate) {\n      if (err) {\n        return callback.onFailure(err);\n      }\n      var challengeName = dataAuthenticate.ChallengeName;\n      if (challengeName === 'DEVICE_SRP_AUTH') {\n        _this8.getDeviceResponse(callback);\n        return undefined;\n      }\n      _this8.signInUserSession = _this8.getCognitoUserSession(dataAuthenticate.AuthenticationResult);\n      _this8.cacheTokens();\n      if (dataAuthenticate.AuthenticationResult.NewDeviceMetadata == null) {\n        return callback.onSuccess(_this8.signInUserSession);\n      }\n      var authenticationHelper = new _AuthenticationHelper[\"default\"](_this8.pool.getUserPoolName());\n      authenticationHelper.generateHashDevice(dataAuthenticate.AuthenticationResult.NewDeviceMetadata.DeviceGroupKey, dataAuthenticate.AuthenticationResult.NewDeviceMetadata.DeviceKey, function (errGenHash) {\n        if (errGenHash) {\n          return callback.onFailure(errGenHash);\n        }\n        var deviceSecretVerifierConfig = {\n          Salt: _buffer.Buffer.from(authenticationHelper.getSaltDevices(), 'hex').toString('base64'),\n          PasswordVerifier: _buffer.Buffer.from(authenticationHelper.getVerifierDevices(), 'hex').toString('base64')\n        };\n        _this8.verifierDevices = deviceSecretVerifierConfig.PasswordVerifier;\n        _this8.deviceGroupKey = dataAuthenticate.AuthenticationResult.NewDeviceMetadata.DeviceGroupKey;\n        _this8.randomPassword = authenticationHelper.getRandomPassword();\n        _this8.client.request('ConfirmDevice', {\n          DeviceKey: dataAuthenticate.AuthenticationResult.NewDeviceMetadata.DeviceKey,\n          AccessToken: _this8.signInUserSession.getAccessToken().getJwtToken(),\n          DeviceSecretVerifierConfig: deviceSecretVerifierConfig,\n          DeviceName: userAgent\n        }, function (errConfirm, dataConfirm) {\n          if (errConfirm) {\n            return callback.onFailure(errConfirm);\n          }\n          _this8.deviceKey = dataAuthenticate.AuthenticationResult.NewDeviceMetadata.DeviceKey;\n          _this8.cacheDeviceKeyAndPassword();\n          if (dataConfirm.UserConfirmationNecessary === true) {\n            return callback.onSuccess(_this8.signInUserSession, dataConfirm.UserConfirmationNecessary);\n          }\n          return callback.onSuccess(_this8.signInUserSession);\n        });\n        return undefined;\n      });\n      return undefined;\n    });\n  }\n\n  /**\n   * This is used by an authenticated user to change the current password\n   * @param {string} oldUserPassword The current password.\n   * @param {string} newUserPassword The requested new password.\n   * @param {nodeCallback<string>} callback Called on success or error.\n   * @param {ClientMetadata} clientMetadata object which is passed from client to Cognito Lambda trigger\n   * @returns {void}\n   */;\n  _proto.changePassword = function changePassword(oldUserPassword, newUserPassword, callback, clientMetadata) {\n    if (!(this.signInUserSession != null && this.signInUserSession.isValid())) {\n      return callback(new Error('User is not authenticated'), null);\n    }\n    this.client.request('ChangePassword', {\n      PreviousPassword: oldUserPassword,\n      ProposedPassword: newUserPassword,\n      AccessToken: this.signInUserSession.getAccessToken().getJwtToken(),\n      ClientMetadata: clientMetadata\n    }, function (err) {\n      if (err) {\n        return callback(err, null);\n      }\n      return callback(null, 'SUCCESS');\n    });\n    return undefined;\n  }\n\n  /**\n   * This is used by an authenticated user to enable MFA for itself\n   * @deprecated\n   * @param {nodeCallback<string>} callback Called on success or error.\n   * @returns {void}\n   */;\n  _proto.enableMFA = function enableMFA(callback) {\n    if (this.signInUserSession == null || !this.signInUserSession.isValid()) {\n      return callback(new Error('User is not authenticated'), null);\n    }\n    var mfaOptions = [];\n    var mfaEnabled = {\n      DeliveryMedium: 'SMS',\n      AttributeName: 'phone_number'\n    };\n    mfaOptions.push(mfaEnabled);\n    this.client.request('SetUserSettings', {\n      MFAOptions: mfaOptions,\n      AccessToken: this.signInUserSession.getAccessToken().getJwtToken()\n    }, function (err) {\n      if (err) {\n        return callback(err, null);\n      }\n      return callback(null, 'SUCCESS');\n    });\n    return undefined;\n  }\n\n  /**\n   * This is used by an authenticated user to enable MFA for itself\n   * @param {IMfaSettings} smsMfaSettings the sms mfa settings\n   * @param {IMFASettings} softwareTokenMfaSettings the software token mfa settings\n   * @param {nodeCallback<string>} callback Called on success or error.\n   * @returns {void}\n   */;\n  _proto.setUserMfaPreference = function setUserMfaPreference(smsMfaSettings, softwareTokenMfaSettings, callback) {\n    if (this.signInUserSession == null || !this.signInUserSession.isValid()) {\n      return callback(new Error('User is not authenticated'), null);\n    }\n    this.client.request('SetUserMFAPreference', {\n      SMSMfaSettings: smsMfaSettings,\n      SoftwareTokenMfaSettings: softwareTokenMfaSettings,\n      AccessToken: this.signInUserSession.getAccessToken().getJwtToken()\n    }, function (err) {\n      if (err) {\n        return callback(err, null);\n      }\n      return callback(null, 'SUCCESS');\n    });\n    return undefined;\n  }\n\n  /**\n   * This is used by an authenticated user to disable MFA for itself\n   * @deprecated\n   * @param {nodeCallback<string>} callback Called on success or error.\n   * @returns {void}\n   */;\n  _proto.disableMFA = function disableMFA(callback) {\n    if (this.signInUserSession == null || !this.signInUserSession.isValid()) {\n      return callback(new Error('User is not authenticated'), null);\n    }\n    var mfaOptions = [];\n    this.client.request('SetUserSettings', {\n      MFAOptions: mfaOptions,\n      AccessToken: this.signInUserSession.getAccessToken().getJwtToken()\n    }, function (err) {\n      if (err) {\n        return callback(err, null);\n      }\n      return callback(null, 'SUCCESS');\n    });\n    return undefined;\n  }\n\n  /**\n   * This is used by an authenticated user to delete itself\n   * @param {nodeCallback<string>} callback Called on success or error.\n   * @param {ClientMetadata} clientMetadata object which is passed from client to Cognito Lambda trigger\n   * @returns {void}\n   */;\n  _proto.deleteUser = function deleteUser(callback, clientMetadata) {\n    var _this9 = this;\n    if (this.signInUserSession == null || !this.signInUserSession.isValid()) {\n      return callback(new Error('User is not authenticated'), null);\n    }\n    this.client.request('DeleteUser', {\n      AccessToken: this.signInUserSession.getAccessToken().getJwtToken(),\n      ClientMetadata: clientMetadata\n    }, function (err) {\n      if (err) {\n        return callback(err, null);\n      }\n      _this9.clearCachedUser();\n      return callback(null, 'SUCCESS');\n    });\n    return undefined;\n  }\n\n  /**\n   * @typedef {CognitoUserAttribute | { Name:string, Value:string }} AttributeArg\n   */\n  /**\n   * This is used by an authenticated user to change a list of attributes\n   * @param {AttributeArg[]} attributes A list of the new user attributes.\n   * @param {nodeCallback<string>} callback Called on success or error.\n   * @param {ClientMetadata} clientMetadata object which is passed from client to Cognito Lambda trigger\n   * @returns {void}\n   */;\n  _proto.updateAttributes = function updateAttributes(attributes, callback, clientMetadata) {\n    var _this10 = this;\n    if (this.signInUserSession == null || !this.signInUserSession.isValid()) {\n      return callback(new Error('User is not authenticated'), null);\n    }\n    this.client.request('UpdateUserAttributes', {\n      AccessToken: this.signInUserSession.getAccessToken().getJwtToken(),\n      UserAttributes: attributes,\n      ClientMetadata: clientMetadata\n    }, function (err, result) {\n      if (err) {\n        return callback(err, null);\n      }\n\n      // update cached user\n      return _this10.getUserData(function () {\n        return callback(null, 'SUCCESS', result);\n      }, {\n        bypassCache: true\n      });\n    });\n    return undefined;\n  }\n\n  /**\n   * This is used by an authenticated user to get a list of attributes\n   * @param {nodeCallback<CognitoUserAttribute[]>} callback Called on success or error.\n   * @returns {void}\n   */;\n  _proto.getUserAttributes = function getUserAttributes(callback) {\n    if (!(this.signInUserSession != null && this.signInUserSession.isValid())) {\n      return callback(new Error('User is not authenticated'), null);\n    }\n    this.client.request('GetUser', {\n      AccessToken: this.signInUserSession.getAccessToken().getJwtToken()\n    }, function (err, userData) {\n      if (err) {\n        return callback(err, null);\n      }\n      var attributeList = [];\n      for (var i = 0; i < userData.UserAttributes.length; i++) {\n        var attribute = {\n          Name: userData.UserAttributes[i].Name,\n          Value: userData.UserAttributes[i].Value\n        };\n        var userAttribute = new _CognitoUserAttribute[\"default\"](attribute);\n        attributeList.push(userAttribute);\n      }\n      return callback(null, attributeList);\n    });\n    return undefined;\n  }\n\n  /**\n   * This was previously used by an authenticated user to get MFAOptions,\n   * but no longer returns a meaningful response. Refer to the documentation for\n   * how to setup and use MFA: https://docs.amplify.aws/lib/auth/mfa/q/platform/js\n   * @deprecated\n   * @param {nodeCallback<MFAOptions>} callback Called on success or error.\n   * @returns {void}\n   */;\n  _proto.getMFAOptions = function getMFAOptions(callback) {\n    if (!(this.signInUserSession != null && this.signInUserSession.isValid())) {\n      return callback(new Error('User is not authenticated'), null);\n    }\n    this.client.request('GetUser', {\n      AccessToken: this.signInUserSession.getAccessToken().getJwtToken()\n    }, function (err, userData) {\n      if (err) {\n        return callback(err, null);\n      }\n      return callback(null, userData.MFAOptions);\n    });\n    return undefined;\n  }\n\n  /**\n   * PRIVATE ONLY: This is an internal only method and should not\n   * be directly called by the consumers.\n   */;\n  _proto.createGetUserRequest = function createGetUserRequest() {\n    return this.client.promisifyRequest('GetUser', {\n      AccessToken: this.signInUserSession.getAccessToken().getJwtToken()\n    });\n  }\n\n  /**\n   * PRIVATE ONLY: This is an internal only method and should not\n   * be directly called by the consumers.\n   */;\n  _proto.refreshSessionIfPossible = function refreshSessionIfPossible(options) {\n    var _this11 = this;\n    if (options === void 0) {\n      options = {};\n    }\n    // best effort, if not possible\n    return new Promise(function (resolve) {\n      var refresh = _this11.signInUserSession.getRefreshToken();\n      if (refresh && refresh.getToken()) {\n        _this11.refreshSession(refresh, resolve, options.clientMetadata);\n      } else {\n        resolve();\n      }\n    });\n  }\n\n  /**\n   * @typedef {Object} GetUserDataOptions\n   * @property {boolean} bypassCache - force getting data from Cognito service\n   * @property {Record<string, string>} clientMetadata - clientMetadata for getSession\n   */\n\n  /**\n   * This is used by an authenticated users to get the userData\n   * @param {nodeCallback<UserData>} callback Called on success or error.\n   * @param {GetUserDataOptions} params\n   * @returns {void}\n   */;\n  _proto.getUserData = function getUserData(callback, params) {\n    var _this12 = this;\n    if (!(this.signInUserSession != null && this.signInUserSession.isValid())) {\n      this.clearCachedUserData();\n      return callback(new Error('User is not authenticated'), null);\n    }\n    var userData = this.getUserDataFromCache();\n    if (!userData) {\n      this.fetchUserData().then(function (data) {\n        callback(null, data);\n      })[\"catch\"](callback);\n      return;\n    }\n    if (this.isFetchUserDataAndTokenRequired(params)) {\n      this.fetchUserData().then(function (data) {\n        return _this12.refreshSessionIfPossible(params).then(function () {\n          return data;\n        });\n      }).then(function (data) {\n        return callback(null, data);\n      })[\"catch\"](callback);\n      return;\n    }\n    try {\n      callback(null, JSON.parse(userData));\n      return;\n    } catch (err) {\n      this.clearCachedUserData();\n      callback(err, null);\n      return;\n    }\n  }\n\n  /**\n   *\n   * PRIVATE ONLY: This is an internal only method and should not\n   * be directly called by the consumers.\n   */;\n  _proto.getUserDataFromCache = function getUserDataFromCache() {\n    var userData = this.storage.getItem(this.userDataKey);\n    return userData;\n  }\n\n  /**\n   *\n   * PRIVATE ONLY: This is an internal only method and should not\n   * be directly called by the consumers.\n   */;\n  _proto.isFetchUserDataAndTokenRequired = function isFetchUserDataAndTokenRequired(params) {\n    var _ref = params || {},\n      _ref$bypassCache = _ref.bypassCache,\n      bypassCache = _ref$bypassCache === void 0 ? false : _ref$bypassCache;\n    return bypassCache;\n  }\n  /**\n   *\n   * PRIVATE ONLY: This is an internal only method and should not\n   * be directly called by the consumers.\n   */;\n  _proto.fetchUserData = function fetchUserData() {\n    var _this13 = this;\n    return this.createGetUserRequest().then(function (data) {\n      _this13.cacheUserData(data);\n      return data;\n    });\n  }\n\n  /**\n   * This is used by an authenticated user to delete a list of attributes\n   * @param {string[]} attributeList Names of the attributes to delete.\n   * @param {nodeCallback<string>} callback Called on success or error.\n   * @returns {void}\n   */;\n  _proto.deleteAttributes = function deleteAttributes(attributeList, callback) {\n    var _this14 = this;\n    if (!(this.signInUserSession != null && this.signInUserSession.isValid())) {\n      return callback(new Error('User is not authenticated'), null);\n    }\n    this.client.request('DeleteUserAttributes', {\n      UserAttributeNames: attributeList,\n      AccessToken: this.signInUserSession.getAccessToken().getJwtToken()\n    }, function (err) {\n      if (err) {\n        return callback(err, null);\n      }\n\n      // update cached user\n      return _this14.getUserData(function () {\n        return callback(null, 'SUCCESS');\n      }, {\n        bypassCache: true\n      });\n    });\n    return undefined;\n  }\n\n  /**\n   * This is used by a user to resend a confirmation code\n   * @param {nodeCallback<string>} callback Called on success or error.\n   * @param {ClientMetadata} clientMetadata object which is passed from client to Cognito Lambda trigger\n   * @returns {void}\n   */;\n  _proto.resendConfirmationCode = function resendConfirmationCode(callback, clientMetadata) {\n    var jsonReq = {\n      ClientId: this.pool.getClientId(),\n      Username: this.username,\n      ClientMetadata: clientMetadata\n    };\n    this.client.request('ResendConfirmationCode', jsonReq, function (err, result) {\n      if (err) {\n        return callback(err, null);\n      }\n      return callback(null, result);\n    });\n  }\n\n  /**\n   * @typedef {Object} GetSessionOptions\n   * @property {Record<string, string>} clientMetadata - clientMetadata for getSession\n   */\n\n  /**\n   * This is used to get a session, either from the session object\n   * or from  the local storage, or by using a refresh token\n   *\n   * @param {nodeCallback<CognitoUserSession>} callback Called on success or error.\n   * @param {GetSessionOptions} options\n   * @returns {void}\n   */;\n  _proto.getSession = function getSession(callback, options) {\n    if (options === void 0) {\n      options = {};\n    }\n    if (this.username == null) {\n      return callback(new Error('Username is null. Cannot retrieve a new session'), null);\n    }\n    if (this.signInUserSession != null && this.signInUserSession.isValid()) {\n      return callback(null, this.signInUserSession);\n    }\n    var keyPrefix = \"CognitoIdentityServiceProvider.\" + this.pool.getClientId() + \".\" + this.username;\n    var idTokenKey = keyPrefix + \".idToken\";\n    var accessTokenKey = keyPrefix + \".accessToken\";\n    var refreshTokenKey = keyPrefix + \".refreshToken\";\n    var clockDriftKey = keyPrefix + \".clockDrift\";\n    if (this.storage.getItem(idTokenKey)) {\n      var idToken = new _CognitoIdToken[\"default\"]({\n        IdToken: this.storage.getItem(idTokenKey)\n      });\n      var accessToken = new _CognitoAccessToken[\"default\"]({\n        AccessToken: this.storage.getItem(accessTokenKey)\n      });\n      var refreshToken = new _CognitoRefreshToken[\"default\"]({\n        RefreshToken: this.storage.getItem(refreshTokenKey)\n      });\n      var clockDrift = parseInt(this.storage.getItem(clockDriftKey), 0) || 0;\n      var sessionData = {\n        IdToken: idToken,\n        AccessToken: accessToken,\n        RefreshToken: refreshToken,\n        ClockDrift: clockDrift\n      };\n      var cachedSession = new _CognitoUserSession[\"default\"](sessionData);\n      if (cachedSession.isValid()) {\n        this.signInUserSession = cachedSession;\n        return callback(null, this.signInUserSession);\n      }\n      if (!refreshToken.getToken()) {\n        return callback(new Error('Cannot retrieve a new session. Please authenticate.'), null);\n      }\n      this.refreshSession(refreshToken, callback, options.clientMetadata);\n    } else {\n      callback(new Error('Local storage is missing an ID Token, Please authenticate'), null);\n    }\n    return undefined;\n  }\n\n  /**\n   * This uses the refreshToken to retrieve a new session\n   * @param {CognitoRefreshToken} refreshToken A previous session's refresh token.\n   * @param {nodeCallback<CognitoUserSession>} callback Called on success or error.\n   * @param {ClientMetadata} clientMetadata object which is passed from client to Cognito Lambda trigger\n   * @returns {void}\n   */;\n  _proto.refreshSession = function refreshSession(refreshToken, callback, clientMetadata) {\n    var _this15 = this;\n    var wrappedCallback = this.pool.wrapRefreshSessionCallback ? this.pool.wrapRefreshSessionCallback(callback) : callback;\n    var authParameters = {};\n    authParameters.REFRESH_TOKEN = refreshToken.getToken();\n    var keyPrefix = \"CognitoIdentityServiceProvider.\" + this.pool.getClientId();\n    var lastUserKey = keyPrefix + \".LastAuthUser\";\n    if (this.storage.getItem(lastUserKey)) {\n      this.username = this.storage.getItem(lastUserKey);\n      var deviceKeyKey = keyPrefix + \".\" + this.username + \".deviceKey\";\n      this.deviceKey = this.storage.getItem(deviceKeyKey);\n      authParameters.DEVICE_KEY = this.deviceKey;\n    }\n    var jsonReq = {\n      ClientId: this.pool.getClientId(),\n      AuthFlow: 'REFRESH_TOKEN_AUTH',\n      AuthParameters: authParameters,\n      ClientMetadata: clientMetadata\n    };\n    if (this.getUserContextData()) {\n      jsonReq.UserContextData = this.getUserContextData();\n    }\n    this.client.request('InitiateAuth', jsonReq, function (err, authResult) {\n      if (err) {\n        if (err.code === 'NotAuthorizedException') {\n          _this15.clearCachedUser();\n        }\n        return wrappedCallback(err, null);\n      }\n      if (authResult) {\n        var authenticationResult = authResult.AuthenticationResult;\n        if (!Object.prototype.hasOwnProperty.call(authenticationResult, 'RefreshToken')) {\n          authenticationResult.RefreshToken = refreshToken.getToken();\n        }\n        _this15.signInUserSession = _this15.getCognitoUserSession(authenticationResult);\n        _this15.cacheTokens();\n        return wrappedCallback(null, _this15.signInUserSession);\n      }\n      return undefined;\n    });\n  }\n\n  /**\n   * This is used to save the session tokens to local storage\n   * @returns {void}\n   */;\n  _proto.cacheTokens = function cacheTokens() {\n    var keyPrefix = \"CognitoIdentityServiceProvider.\" + this.pool.getClientId();\n    var idTokenKey = keyPrefix + \".\" + this.username + \".idToken\";\n    var accessTokenKey = keyPrefix + \".\" + this.username + \".accessToken\";\n    var refreshTokenKey = keyPrefix + \".\" + this.username + \".refreshToken\";\n    var clockDriftKey = keyPrefix + \".\" + this.username + \".clockDrift\";\n    var lastUserKey = keyPrefix + \".LastAuthUser\";\n    this.storage.setItem(idTokenKey, this.signInUserSession.getIdToken().getJwtToken());\n    this.storage.setItem(accessTokenKey, this.signInUserSession.getAccessToken().getJwtToken());\n    this.storage.setItem(refreshTokenKey, this.signInUserSession.getRefreshToken().getToken());\n    this.storage.setItem(clockDriftKey, \"\" + this.signInUserSession.getClockDrift());\n    this.storage.setItem(lastUserKey, this.username);\n  }\n\n  /**\n   * This is to cache user data\n   */;\n  _proto.cacheUserData = function cacheUserData(userData) {\n    this.storage.setItem(this.userDataKey, JSON.stringify(userData));\n  }\n\n  /**\n   * This is to remove cached user data\n   */;\n  _proto.clearCachedUserData = function clearCachedUserData() {\n    this.storage.removeItem(this.userDataKey);\n  };\n  _proto.clearCachedUser = function clearCachedUser() {\n    this.clearCachedTokens();\n    this.clearCachedUserData();\n  }\n\n  /**\n   * This is used to cache the device key and device group and device password\n   * @returns {void}\n   */;\n  _proto.cacheDeviceKeyAndPassword = function cacheDeviceKeyAndPassword() {\n    var keyPrefix = \"CognitoIdentityServiceProvider.\" + this.pool.getClientId() + \".\" + this.username;\n    var deviceKeyKey = keyPrefix + \".deviceKey\";\n    var randomPasswordKey = keyPrefix + \".randomPasswordKey\";\n    var deviceGroupKeyKey = keyPrefix + \".deviceGroupKey\";\n    this.storage.setItem(deviceKeyKey, this.deviceKey);\n    this.storage.setItem(randomPasswordKey, this.randomPassword);\n    this.storage.setItem(deviceGroupKeyKey, this.deviceGroupKey);\n  }\n\n  /**\n   * This is used to get current device key and device group and device password\n   * @returns {void}\n   */;\n  _proto.getCachedDeviceKeyAndPassword = function getCachedDeviceKeyAndPassword() {\n    var keyPrefix = \"CognitoIdentityServiceProvider.\" + this.pool.getClientId() + \".\" + this.username;\n    var deviceKeyKey = keyPrefix + \".deviceKey\";\n    var randomPasswordKey = keyPrefix + \".randomPasswordKey\";\n    var deviceGroupKeyKey = keyPrefix + \".deviceGroupKey\";\n    if (this.storage.getItem(deviceKeyKey)) {\n      this.deviceKey = this.storage.getItem(deviceKeyKey);\n      this.randomPassword = this.storage.getItem(randomPasswordKey);\n      this.deviceGroupKey = this.storage.getItem(deviceGroupKeyKey);\n    }\n  }\n\n  /**\n   * This is used to clear the device key info from local storage\n   * @returns {void}\n   */;\n  _proto.clearCachedDeviceKeyAndPassword = function clearCachedDeviceKeyAndPassword() {\n    var keyPrefix = \"CognitoIdentityServiceProvider.\" + this.pool.getClientId() + \".\" + this.username;\n    var deviceKeyKey = keyPrefix + \".deviceKey\";\n    var randomPasswordKey = keyPrefix + \".randomPasswordKey\";\n    var deviceGroupKeyKey = keyPrefix + \".deviceGroupKey\";\n    this.storage.removeItem(deviceKeyKey);\n    this.storage.removeItem(randomPasswordKey);\n    this.storage.removeItem(deviceGroupKeyKey);\n  }\n\n  /**\n   * This is used to clear the session tokens from local storage\n   * @returns {void}\n   */;\n  _proto.clearCachedTokens = function clearCachedTokens() {\n    var keyPrefix = \"CognitoIdentityServiceProvider.\" + this.pool.getClientId();\n    var idTokenKey = keyPrefix + \".\" + this.username + \".idToken\";\n    var accessTokenKey = keyPrefix + \".\" + this.username + \".accessToken\";\n    var refreshTokenKey = keyPrefix + \".\" + this.username + \".refreshToken\";\n    var lastUserKey = keyPrefix + \".LastAuthUser\";\n    var clockDriftKey = keyPrefix + \".\" + this.username + \".clockDrift\";\n    this.storage.removeItem(idTokenKey);\n    this.storage.removeItem(accessTokenKey);\n    this.storage.removeItem(refreshTokenKey);\n    this.storage.removeItem(lastUserKey);\n    this.storage.removeItem(clockDriftKey);\n  }\n\n  /**\n   * This is used to build a user session from tokens retrieved in the authentication result\n   * @param {object} authResult Successful auth response from server.\n   * @returns {CognitoUserSession} The new user session.\n   * @private\n   */;\n  _proto.getCognitoUserSession = function getCognitoUserSession(authResult) {\n    var idToken = new _CognitoIdToken[\"default\"](authResult);\n    var accessToken = new _CognitoAccessToken[\"default\"](authResult);\n    var refreshToken = new _CognitoRefreshToken[\"default\"](authResult);\n    var sessionData = {\n      IdToken: idToken,\n      AccessToken: accessToken,\n      RefreshToken: refreshToken\n    };\n    return new _CognitoUserSession[\"default\"](sessionData);\n  }\n\n  /**\n   * This is used to initiate a forgot password request\n   * @param {object} callback Result callback map.\n   * @param {onFailure} callback.onFailure Called on any error.\n   * @param {inputVerificationCode?} callback.inputVerificationCode\n   *    Optional callback raised instead of onSuccess with response data.\n   * @param {onSuccess} callback.onSuccess Called on success.\n   * @param {ClientMetadata} clientMetadata object which is passed from client to Cognito Lambda trigger\n   * @returns {void}\n   */;\n  _proto.forgotPassword = function forgotPassword(callback, clientMetadata) {\n    var jsonReq = {\n      ClientId: this.pool.getClientId(),\n      Username: this.username,\n      ClientMetadata: clientMetadata\n    };\n    if (this.getUserContextData()) {\n      jsonReq.UserContextData = this.getUserContextData();\n    }\n    this.client.request('ForgotPassword', jsonReq, function (err, data) {\n      if (err) {\n        return callback.onFailure(err);\n      }\n      if (typeof callback.inputVerificationCode === 'function') {\n        return callback.inputVerificationCode(data);\n      }\n      return callback.onSuccess(data);\n    });\n  }\n\n  /**\n   * This is used to confirm a new password using a confirmationCode\n   * @param {string} confirmationCode Code entered by user.\n   * @param {string} newPassword Confirm new password.\n   * @param {object} callback Result callback map.\n   * @param {onFailure} callback.onFailure Called on any error.\n   * @param {onSuccess<void>} callback.onSuccess Called on success.\n   * @param {ClientMetadata} clientMetadata object which is passed from client to Cognito Lambda trigger\n   * @returns {void}\n   */;\n  _proto.confirmPassword = function confirmPassword(confirmationCode, newPassword, callback, clientMetadata) {\n    var jsonReq = {\n      ClientId: this.pool.getClientId(),\n      Username: this.username,\n      ConfirmationCode: confirmationCode,\n      Password: newPassword,\n      ClientMetadata: clientMetadata\n    };\n    if (this.getUserContextData()) {\n      jsonReq.UserContextData = this.getUserContextData();\n    }\n    this.client.request('ConfirmForgotPassword', jsonReq, function (err) {\n      if (err) {\n        return callback.onFailure(err);\n      }\n      return callback.onSuccess('SUCCESS');\n    });\n  }\n\n  /**\n   * This is used to initiate an attribute confirmation request\n   * @param {string} attributeName User attribute that needs confirmation.\n   * @param {object} callback Result callback map.\n   * @param {onFailure} callback.onFailure Called on any error.\n   * @param {inputVerificationCode} callback.inputVerificationCode Called on success.\n   * @param {ClientMetadata} clientMetadata object which is passed from client to Cognito Lambda trigger\n   * @returns {void}\n   */;\n  _proto.getAttributeVerificationCode = function getAttributeVerificationCode(attributeName, callback, clientMetadata) {\n    if (this.signInUserSession == null || !this.signInUserSession.isValid()) {\n      return callback.onFailure(new Error('User is not authenticated'));\n    }\n    this.client.request('GetUserAttributeVerificationCode', {\n      AttributeName: attributeName,\n      AccessToken: this.signInUserSession.getAccessToken().getJwtToken(),\n      ClientMetadata: clientMetadata\n    }, function (err, data) {\n      if (err) {\n        return callback.onFailure(err);\n      }\n      if (typeof callback.inputVerificationCode === 'function') {\n        return callback.inputVerificationCode(data);\n      }\n      return callback.onSuccess('SUCCESS');\n    });\n    return undefined;\n  }\n\n  /**\n   * This is used to confirm an attribute using a confirmation code\n   * @param {string} attributeName Attribute being confirmed.\n   * @param {string} confirmationCode Code entered by user.\n   * @param {object} callback Result callback map.\n   * @param {onFailure} callback.onFailure Called on any error.\n   * @param {onSuccess<string>} callback.onSuccess Called on success.\n   * @returns {void}\n   */;\n  _proto.verifyAttribute = function verifyAttribute(attributeName, confirmationCode, callback) {\n    if (this.signInUserSession == null || !this.signInUserSession.isValid()) {\n      return callback.onFailure(new Error('User is not authenticated'));\n    }\n    this.client.request('VerifyUserAttribute', {\n      AttributeName: attributeName,\n      Code: confirmationCode,\n      AccessToken: this.signInUserSession.getAccessToken().getJwtToken()\n    }, function (err) {\n      if (err) {\n        return callback.onFailure(err);\n      }\n      return callback.onSuccess('SUCCESS');\n    });\n    return undefined;\n  }\n\n  /**\n   * This is used to get the device information using the current device key\n   * @param {object} callback Result callback map.\n   * @param {onFailure} callback.onFailure Called on any error.\n   * @param {onSuccess<*>} callback.onSuccess Called on success with device data.\n   * @returns {void}\n   */;\n  _proto.getDevice = function getDevice(callback) {\n    if (this.signInUserSession == null || !this.signInUserSession.isValid()) {\n      return callback.onFailure(new Error('User is not authenticated'));\n    }\n    this.client.request('GetDevice', {\n      AccessToken: this.signInUserSession.getAccessToken().getJwtToken(),\n      DeviceKey: this.deviceKey\n    }, function (err, data) {\n      if (err) {\n        return callback.onFailure(err);\n      }\n      return callback.onSuccess(data);\n    });\n    return undefined;\n  }\n\n  /**\n   * This is used to forget a specific device\n   * @param {string} deviceKey Device key.\n   * @param {object} callback Result callback map.\n   * @param {onFailure} callback.onFailure Called on any error.\n   * @param {onSuccess<string>} callback.onSuccess Called on success.\n   * @returns {void}\n   */;\n  _proto.forgetSpecificDevice = function forgetSpecificDevice(deviceKey, callback) {\n    if (this.signInUserSession == null || !this.signInUserSession.isValid()) {\n      return callback.onFailure(new Error('User is not authenticated'));\n    }\n    this.client.request('ForgetDevice', {\n      AccessToken: this.signInUserSession.getAccessToken().getJwtToken(),\n      DeviceKey: deviceKey\n    }, function (err) {\n      if (err) {\n        return callback.onFailure(err);\n      }\n      return callback.onSuccess('SUCCESS');\n    });\n    return undefined;\n  }\n\n  /**\n   * This is used to forget the current device\n   * @param {object} callback Result callback map.\n   * @param {onFailure} callback.onFailure Called on any error.\n   * @param {onSuccess<string>} callback.onSuccess Called on success.\n   * @returns {void}\n   */;\n  _proto.forgetDevice = function forgetDevice(callback) {\n    var _this16 = this;\n    this.forgetSpecificDevice(this.deviceKey, {\n      onFailure: callback.onFailure,\n      onSuccess: function onSuccess(result) {\n        _this16.deviceKey = null;\n        _this16.deviceGroupKey = null;\n        _this16.randomPassword = null;\n        _this16.clearCachedDeviceKeyAndPassword();\n        return callback.onSuccess(result);\n      }\n    });\n  }\n\n  /**\n   * This is used to set the device status as remembered\n   * @param {object} callback Result callback map.\n   * @param {onFailure} callback.onFailure Called on any error.\n   * @param {onSuccess<string>} callback.onSuccess Called on success.\n   * @returns {void}\n   */;\n  _proto.setDeviceStatusRemembered = function setDeviceStatusRemembered(callback) {\n    if (this.signInUserSession == null || !this.signInUserSession.isValid()) {\n      return callback.onFailure(new Error('User is not authenticated'));\n    }\n    this.client.request('UpdateDeviceStatus', {\n      AccessToken: this.signInUserSession.getAccessToken().getJwtToken(),\n      DeviceKey: this.deviceKey,\n      DeviceRememberedStatus: 'remembered'\n    }, function (err) {\n      if (err) {\n        return callback.onFailure(err);\n      }\n      return callback.onSuccess('SUCCESS');\n    });\n    return undefined;\n  }\n\n  /**\n   * This is used to set the device status as not remembered\n   * @param {object} callback Result callback map.\n   * @param {onFailure} callback.onFailure Called on any error.\n   * @param {onSuccess<string>} callback.onSuccess Called on success.\n   * @returns {void}\n   */;\n  _proto.setDeviceStatusNotRemembered = function setDeviceStatusNotRemembered(callback) {\n    if (this.signInUserSession == null || !this.signInUserSession.isValid()) {\n      return callback.onFailure(new Error('User is not authenticated'));\n    }\n    this.client.request('UpdateDeviceStatus', {\n      AccessToken: this.signInUserSession.getAccessToken().getJwtToken(),\n      DeviceKey: this.deviceKey,\n      DeviceRememberedStatus: 'not_remembered'\n    }, function (err) {\n      if (err) {\n        return callback.onFailure(err);\n      }\n      return callback.onSuccess('SUCCESS');\n    });\n    return undefined;\n  }\n\n  /**\n   * This is used to list all devices for a user\n   *\n   * @param {int} limit the number of devices returned in a call\n   * @param {string | null} paginationToken the pagination token in case any was returned before\n   * @param {object} callback Result callback map.\n   * @param {onFailure} callback.onFailure Called on any error.\n   * @param {onSuccess<*>} callback.onSuccess Called on success with device list.\n   * @returns {void}\n   */;\n  _proto.listDevices = function listDevices(limit, paginationToken, callback) {\n    if (this.signInUserSession == null || !this.signInUserSession.isValid()) {\n      return callback.onFailure(new Error('User is not authenticated'));\n    }\n    var requestParams = {\n      AccessToken: this.signInUserSession.getAccessToken().getJwtToken(),\n      Limit: limit\n    };\n    if (paginationToken) {\n      requestParams.PaginationToken = paginationToken;\n    }\n    this.client.request('ListDevices', requestParams, function (err, data) {\n      if (err) {\n        return callback.onFailure(err);\n      }\n      return callback.onSuccess(data);\n    });\n    return undefined;\n  }\n\n  /**\n   * This is used to globally revoke all tokens issued to a user\n   * @param {object} callback Result callback map.\n   * @param {onFailure} callback.onFailure Called on any error.\n   * @param {onSuccess<string>} callback.onSuccess Called on success.\n   * @returns {void}\n   */;\n  _proto.globalSignOut = function globalSignOut(callback) {\n    var _this17 = this;\n    if (this.signInUserSession == null || !this.signInUserSession.isValid()) {\n      return callback.onFailure(new Error('User is not authenticated'));\n    }\n    this.client.request('GlobalSignOut', {\n      AccessToken: this.signInUserSession.getAccessToken().getJwtToken()\n    }, function (err) {\n      if (err) {\n        return callback.onFailure(err);\n      }\n      _this17.clearCachedUser();\n      return callback.onSuccess('SUCCESS');\n    });\n    return undefined;\n  }\n\n  /**\n   * This is used for the user to signOut of the application and clear the cached tokens.\n   * @returns {void}\n   */;\n  _proto.signOut = function signOut(revokeTokenCallback) {\n    var _this18 = this;\n    // If tokens won't be revoked, we just clean the client data.\n    if (!revokeTokenCallback || typeof revokeTokenCallback !== 'function') {\n      this.cleanClientData();\n      return;\n    }\n    this.getSession(function (error, _session) {\n      if (error) {\n        return revokeTokenCallback(error);\n      }\n      _this18.revokeTokens(function (err) {\n        _this18.cleanClientData();\n        revokeTokenCallback(err);\n      });\n    });\n  };\n  _proto.revokeTokens = function revokeTokens(revokeTokenCallback) {\n    if (revokeTokenCallback === void 0) {\n      revokeTokenCallback = function revokeTokenCallback() {};\n    }\n    if (typeof revokeTokenCallback !== 'function') {\n      throw new Error('Invalid revokeTokenCallback. It should be a function.');\n    }\n    var tokensToBeRevoked = [];\n    if (!this.signInUserSession) {\n      var error = new Error('User is not authenticated');\n      return revokeTokenCallback(error);\n    }\n    if (!this.signInUserSession.getAccessToken()) {\n      var _error = new Error('No Access token available');\n      return revokeTokenCallback(_error);\n    }\n    var refreshToken = this.signInUserSession.getRefreshToken().getToken();\n    var accessToken = this.signInUserSession.getAccessToken();\n    if (this.isSessionRevocable(accessToken)) {\n      if (refreshToken) {\n        return this.revokeToken({\n          token: refreshToken,\n          callback: revokeTokenCallback\n        });\n      }\n    }\n    revokeTokenCallback();\n  };\n  _proto.isSessionRevocable = function isSessionRevocable(token) {\n    if (token && typeof token.decodePayload === 'function') {\n      try {\n        var _token$decodePayload = token.decodePayload(),\n          origin_jti = _token$decodePayload.origin_jti;\n        return !!origin_jti;\n      } catch (err) {\n        // Nothing to do, token doesnt have origin_jti claim\n      }\n    }\n    return false;\n  };\n  _proto.cleanClientData = function cleanClientData() {\n    this.signInUserSession = null;\n    this.clearCachedUser();\n  };\n  _proto.revokeToken = function revokeToken(_ref2) {\n    var token = _ref2.token,\n      callback = _ref2.callback;\n    this.client.requestWithRetry('RevokeToken', {\n      Token: token,\n      ClientId: this.pool.getClientId()\n    }, function (err) {\n      if (err) {\n        return callback(err);\n      }\n      callback();\n    });\n  }\n\n  /**\n   * This is used by a user trying to select a given MFA\n   * @param {string} answerChallenge the mfa the user wants\n   * @param {nodeCallback<string>} callback Called on success or error.\n   * @returns {void}\n   */;\n  _proto.sendMFASelectionAnswer = function sendMFASelectionAnswer(answerChallenge, callback) {\n    var _this19 = this;\n    var challengeResponses = {};\n    challengeResponses.USERNAME = this.username;\n    challengeResponses.ANSWER = answerChallenge;\n    var jsonReq = {\n      ChallengeName: 'SELECT_MFA_TYPE',\n      ChallengeResponses: challengeResponses,\n      ClientId: this.pool.getClientId(),\n      Session: this.Session\n    };\n    if (this.getUserContextData()) {\n      jsonReq.UserContextData = this.getUserContextData();\n    }\n    this.client.request('RespondToAuthChallenge', jsonReq, function (err, data) {\n      if (err) {\n        return callback.onFailure(err);\n      }\n      _this19.Session = data.Session;\n      if (answerChallenge === 'SMS_MFA') {\n        return callback.mfaRequired(data.ChallengeName, data.ChallengeParameters);\n      }\n      if (answerChallenge === 'SOFTWARE_TOKEN_MFA') {\n        return callback.totpRequired(data.ChallengeName, data.ChallengeParameters);\n      }\n      return undefined;\n    });\n  }\n\n  /**\n   * This returns the user context data for advanced security feature.\n   * @returns {string} the user context data from CognitoUserPool\n   */;\n  _proto.getUserContextData = function getUserContextData() {\n    var pool = this.pool;\n    return pool.getUserContextData(this.username);\n  }\n\n  /**\n   * This is used by an authenticated or a user trying to authenticate to associate a TOTP MFA\n   * @param {nodeCallback<string>} callback Called on success or error.\n   * @returns {void}\n   */;\n  _proto.associateSoftwareToken = function associateSoftwareToken(callback) {\n    var _this20 = this;\n    if (!(this.signInUserSession != null && this.signInUserSession.isValid())) {\n      this.client.request('AssociateSoftwareToken', {\n        Session: this.Session\n      }, function (err, data) {\n        if (err) {\n          return callback.onFailure(err);\n        }\n        _this20.Session = data.Session;\n        return callback.associateSecretCode(data.SecretCode);\n      });\n    } else {\n      this.client.request('AssociateSoftwareToken', {\n        AccessToken: this.signInUserSession.getAccessToken().getJwtToken()\n      }, function (err, data) {\n        if (err) {\n          return callback.onFailure(err);\n        }\n        return callback.associateSecretCode(data.SecretCode);\n      });\n    }\n  }\n\n  /**\n   * This is used by an authenticated or a user trying to authenticate to verify a TOTP MFA\n   * @param {string} totpCode The MFA code entered by the user.\n   * @param {string} friendlyDeviceName The device name we are assigning to the device.\n   * @param {nodeCallback<string>} callback Called on success or error.\n   * @returns {void}\n   */;\n  _proto.verifySoftwareToken = function verifySoftwareToken(totpCode, friendlyDeviceName, callback) {\n    var _this21 = this;\n    if (!(this.signInUserSession != null && this.signInUserSession.isValid())) {\n      this.client.request('VerifySoftwareToken', {\n        Session: this.Session,\n        UserCode: totpCode,\n        FriendlyDeviceName: friendlyDeviceName\n      }, function (err, data) {\n        if (err) {\n          return callback.onFailure(err);\n        }\n        _this21.Session = data.Session;\n        var challengeResponses = {};\n        challengeResponses.USERNAME = _this21.username;\n        var jsonReq = {\n          ChallengeName: 'MFA_SETUP',\n          ClientId: _this21.pool.getClientId(),\n          ChallengeResponses: challengeResponses,\n          Session: _this21.Session\n        };\n        if (_this21.getUserContextData()) {\n          jsonReq.UserContextData = _this21.getUserContextData();\n        }\n        _this21.client.request('RespondToAuthChallenge', jsonReq, function (errRespond, dataRespond) {\n          if (errRespond) {\n            return callback.onFailure(errRespond);\n          }\n          _this21.signInUserSession = _this21.getCognitoUserSession(dataRespond.AuthenticationResult);\n          _this21.cacheTokens();\n          return callback.onSuccess(_this21.signInUserSession);\n        });\n        return undefined;\n      });\n    } else {\n      this.client.request('VerifySoftwareToken', {\n        AccessToken: this.signInUserSession.getAccessToken().getJwtToken(),\n        UserCode: totpCode,\n        FriendlyDeviceName: friendlyDeviceName\n      }, function (err, data) {\n        if (err) {\n          return callback.onFailure(err);\n        }\n        return callback.onSuccess(data);\n      });\n    }\n  };\n  return CognitoUser;\n}();\nexports[\"default\"] = CognitoUser;//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvYW1hem9uLWNvZ25pdG8taWRlbnRpdHktanMvbGliL0NvZ25pdG9Vc2VyLmpzIiwibWFwcGluZ3MiOiJBQUFhOztBQUViLGtCQUFrQjtBQUNsQixrQkFBa0I7QUFDbEIsY0FBYyxtQkFBTyxDQUFDLHNCQUFRO0FBQzlCLGdCQUFnQixtQkFBTyxDQUFDLHdGQUF1QjtBQUMvQyxnQkFBZ0IsbUJBQU8sQ0FBQyx5RkFBWTtBQUNwQyx5Q0FBeUMsbUJBQU8sQ0FBQyx1RkFBYztBQUMvRCxtREFBbUQsbUJBQU8sQ0FBQywyR0FBd0I7QUFDbkYsaURBQWlELG1CQUFPLENBQUMsdUdBQXNCO0FBQy9FLDZDQUE2QyxtQkFBTyxDQUFDLCtGQUFrQjtBQUN2RSxrREFBa0QsbUJBQU8sQ0FBQyx5R0FBdUI7QUFDakYsaURBQWlELG1CQUFPLENBQUMsdUdBQXNCO0FBQy9FLHlDQUF5QyxtQkFBTyxDQUFDLHVGQUFjO0FBQy9ELG1EQUFtRCxtQkFBTyxDQUFDLDJHQUF3QjtBQUNuRiw0Q0FBNEMsbUJBQU8sQ0FBQyw2RkFBaUI7QUFDckUsdUNBQXVDLHVDQUF1QztBQUM5RTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxXQUFXLEdBQUc7QUFDZCxXQUFXLEdBQUc7QUFDZDs7QUFFQTtBQUNBO0FBQ0EsV0FBVyxHQUFHO0FBQ2Q7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsV0FBVyxHQUFHO0FBQ2Q7O0FBRUE7QUFDQTtBQUNBLFdBQVcsR0FBRztBQUNkOztBQUVBO0FBQ0E7QUFDQSxXQUFXLEdBQUc7QUFDZDs7QUFFQTtBQUNBO0FBQ0EsV0FBVyxHQUFHO0FBQ2Q7QUFDQTtBQUNBO0FBQ0EsV0FBVyxvQkFBb0I7QUFDL0IsV0FBVyxPQUFPO0FBQ2xCO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWEsUUFBUTtBQUNyQixhQUFhLFFBQVE7QUFDckIsYUFBYSxpQkFBaUI7QUFDOUIsYUFBYSxRQUFRO0FBQ3JCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsYUFBYSxvQkFBb0I7QUFDakMsZUFBZTtBQUNmO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0EsZUFBZSxvQkFBb0I7QUFDbkM7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxlQUFlLFFBQVE7QUFDdkI7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxlQUFlLFFBQVE7QUFDdkI7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLGFBQWEsUUFBUTtBQUNyQixlQUFlO0FBQ2Y7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLGFBQWEsdUJBQXVCO0FBQ3BDLGFBQWEsUUFBUTtBQUNyQixhQUFhLFdBQVc7QUFDeEIsYUFBYSxpQkFBaUI7QUFDOUI7QUFDQSxhQUFhLGFBQWE7QUFDMUIsZUFBZTtBQUNmO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMOztBQUVBO0FBQ0E7QUFDQTtBQUNBLGFBQWEsdUJBQXVCO0FBQ3BDLGFBQWEsUUFBUTtBQUNyQixhQUFhLFdBQVc7QUFDeEIsYUFBYSxxQkFBcUI7QUFDbEM7QUFDQSxhQUFhLGFBQWE7QUFDMUI7QUFDQSxhQUFhLGlCQUFpQjtBQUM5QjtBQUNBLGFBQWEsYUFBYTtBQUMxQixlQUFlO0FBQ2Y7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWEsdUJBQXVCO0FBQ3BDLGFBQWEsUUFBUTtBQUNyQixhQUFhLFdBQVc7QUFDeEIsYUFBYSxxQkFBcUI7QUFDbEM7QUFDQSxhQUFhLGFBQWE7QUFDMUI7QUFDQSxhQUFhLGlCQUFpQjtBQUM5QjtBQUNBLGFBQWEsYUFBYTtBQUMxQixlQUFlO0FBQ2Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVc7QUFDWDtBQUNBO0FBQ0EsU0FBUzs7QUFFVDtBQUNBLE9BQU87QUFDUDtBQUNBLEtBQUs7QUFDTDs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxhQUFhLHVCQUF1QjtBQUNwQyxhQUFhLFFBQVE7QUFDckIsYUFBYSxXQUFXO0FBQ3hCLGFBQWEsYUFBYTtBQUMxQjtBQUNBLGFBQWEsYUFBYTtBQUMxQixlQUFlO0FBQ2Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxhQUFhLFFBQVE7QUFDckIsYUFBYSxRQUFRO0FBQ3JCLGFBQWEsVUFBVTtBQUN2QixlQUFlO0FBQ2Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esd0JBQXdCLGtDQUFrQztBQUMxRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0EsS0FBSztBQUNMO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhLFFBQVE7QUFDckIsYUFBYSxRQUFRO0FBQ3JCLGFBQWEsUUFBUTtBQUNyQixhQUFhLFdBQVc7QUFDeEIsYUFBYSxhQUFhO0FBQzFCLGFBQWEsaUJBQWlCO0FBQzlCO0FBQ0EsYUFBYSxhQUFhO0FBQzFCLGFBQWEsZ0JBQWdCO0FBQzdCLGVBQWU7QUFDZjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhLFFBQVE7QUFDckIsYUFBYSxXQUFXO0FBQ3hCLGFBQWEsYUFBYTtBQUMxQixhQUFhLGdCQUFnQjtBQUM3QixlQUFlO0FBQ2Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVc7QUFDWDtBQUNBO0FBQ0EsU0FBUzs7QUFFVDtBQUNBLE9BQU87QUFDUDtBQUNBLEtBQUs7QUFDTDs7QUFFQTtBQUNBO0FBQ0EsYUFBYSxRQUFRO0FBQ3JCLGFBQWEsTUFBTTtBQUNuQixhQUFhLHNCQUFzQjtBQUNuQyxhQUFhLGdCQUFnQjtBQUM3QixlQUFlO0FBQ2Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDs7QUFFQTtBQUNBO0FBQ0EsYUFBYSxRQUFRO0FBQ3JCLGFBQWEsUUFBUTtBQUNyQixhQUFhLFdBQVc7QUFDeEIsYUFBYSxpQkFBaUI7QUFDOUI7QUFDQSxhQUFhLGFBQWE7QUFDMUIsYUFBYSxnQkFBZ0I7QUFDN0IsZUFBZTtBQUNmO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7O0FBRUE7QUFDQTtBQUNBLGFBQWEsUUFBUTtBQUNyQixhQUFhLFFBQVE7QUFDckIsYUFBYSxRQUFRO0FBQ3JCLGFBQWEsV0FBVztBQUN4QixhQUFhLGFBQWE7QUFDMUIsYUFBYSxnQkFBZ0I7QUFDN0IsZUFBZTtBQUNmO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQSxPQUFPO0FBQ1A7QUFDQSxLQUFLO0FBQ0w7O0FBRUE7QUFDQTtBQUNBLGFBQWEsUUFBUTtBQUNyQixhQUFhLFFBQVE7QUFDckIsYUFBYSxzQkFBc0I7QUFDbkMsYUFBYSxnQkFBZ0I7QUFDN0IsZUFBZTtBQUNmO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsYUFBYSxzQkFBc0I7QUFDbkMsZUFBZTtBQUNmO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsYUFBYSxjQUFjO0FBQzNCLGFBQWEsY0FBYztBQUMzQixhQUFhLHNCQUFzQjtBQUNuQyxlQUFlO0FBQ2Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsYUFBYSxzQkFBc0I7QUFDbkMsZUFBZTtBQUNmO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBOztBQUVBO0FBQ0E7QUFDQSxhQUFhLHNCQUFzQjtBQUNuQyxhQUFhLGdCQUFnQjtBQUM3QixlQUFlO0FBQ2Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTs7QUFFQTtBQUNBLGVBQWUseUJBQXlCLDZCQUE2QjtBQUNyRTtBQUNBO0FBQ0E7QUFDQSxhQUFhLGdCQUFnQjtBQUM3QixhQUFhLHNCQUFzQjtBQUNuQyxhQUFhLGdCQUFnQjtBQUM3QixlQUFlO0FBQ2Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBLE9BQU87QUFDUCxLQUFLO0FBQ0w7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsYUFBYSxzQ0FBc0M7QUFDbkQsZUFBZTtBQUNmO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esc0JBQXNCLG9DQUFvQztBQUMxRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWEsMEJBQTBCO0FBQ3ZDLGVBQWU7QUFDZjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxRQUFRO0FBQ1I7QUFDQTtBQUNBLEtBQUs7QUFDTDs7QUFFQTtBQUNBLGVBQWUsUUFBUTtBQUN2QixnQkFBZ0IsU0FBUztBQUN6QixnQkFBZ0Isd0JBQXdCO0FBQ3hDOztBQUVBO0FBQ0E7QUFDQSxhQUFhLHdCQUF3QjtBQUNyQyxhQUFhLG9CQUFvQjtBQUNqQyxlQUFlO0FBQ2Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1QsT0FBTztBQUNQO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMkJBQTJCO0FBQzNCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7O0FBRUE7QUFDQTtBQUNBLGFBQWEsVUFBVTtBQUN2QixhQUFhLHNCQUFzQjtBQUNuQyxlQUFlO0FBQ2Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQSxPQUFPO0FBQ1AsS0FBSztBQUNMO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLGFBQWEsc0JBQXNCO0FBQ25DLGFBQWEsZ0JBQWdCO0FBQzdCLGVBQWU7QUFDZjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7O0FBRUE7QUFDQSxlQUFlLFFBQVE7QUFDdkIsZ0JBQWdCLHdCQUF3QjtBQUN4Qzs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWEsa0NBQWtDO0FBQy9DLGFBQWEsbUJBQW1CO0FBQ2hDLGVBQWU7QUFDZjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLGFBQWEscUJBQXFCO0FBQ2xDLGFBQWEsa0NBQWtDO0FBQy9DLGFBQWEsZ0JBQWdCO0FBQzdCLGVBQWU7QUFDZjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDs7QUFFQTtBQUNBO0FBQ0EsZUFBZTtBQUNmO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxlQUFlO0FBQ2Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLGVBQWU7QUFDZjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLGVBQWU7QUFDZjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsZUFBZTtBQUNmO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLGFBQWEsUUFBUTtBQUNyQixlQUFlLG9CQUFvQjtBQUNuQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsYUFBYSxRQUFRO0FBQ3JCLGFBQWEsV0FBVztBQUN4QixhQUFhLHdCQUF3QjtBQUNyQztBQUNBLGFBQWEsV0FBVztBQUN4QixhQUFhLGdCQUFnQjtBQUM3QixlQUFlO0FBQ2Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMOztBQUVBO0FBQ0E7QUFDQSxhQUFhLFFBQVE7QUFDckIsYUFBYSxRQUFRO0FBQ3JCLGFBQWEsUUFBUTtBQUNyQixhQUFhLFdBQVc7QUFDeEIsYUFBYSxpQkFBaUI7QUFDOUIsYUFBYSxnQkFBZ0I7QUFDN0IsZUFBZTtBQUNmO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7O0FBRUE7QUFDQTtBQUNBLGFBQWEsUUFBUTtBQUNyQixhQUFhLFFBQVE7QUFDckIsYUFBYSxXQUFXO0FBQ3hCLGFBQWEsdUJBQXVCO0FBQ3BDLGFBQWEsZ0JBQWdCO0FBQzdCLGVBQWU7QUFDZjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsYUFBYSxRQUFRO0FBQ3JCLGFBQWEsUUFBUTtBQUNyQixhQUFhLFFBQVE7QUFDckIsYUFBYSxXQUFXO0FBQ3hCLGFBQWEsbUJBQW1CO0FBQ2hDLGVBQWU7QUFDZjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsYUFBYSxRQUFRO0FBQ3JCLGFBQWEsV0FBVztBQUN4QixhQUFhLGNBQWM7QUFDM0IsZUFBZTtBQUNmO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsYUFBYSxRQUFRO0FBQ3JCLGFBQWEsUUFBUTtBQUNyQixhQUFhLFdBQVc7QUFDeEIsYUFBYSxtQkFBbUI7QUFDaEMsZUFBZTtBQUNmO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsYUFBYSxRQUFRO0FBQ3JCLGFBQWEsV0FBVztBQUN4QixhQUFhLG1CQUFtQjtBQUNoQyxlQUFlO0FBQ2Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMOztBQUVBO0FBQ0E7QUFDQSxhQUFhLFFBQVE7QUFDckIsYUFBYSxXQUFXO0FBQ3hCLGFBQWEsbUJBQW1CO0FBQ2hDLGVBQWU7QUFDZjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsYUFBYSxRQUFRO0FBQ3JCLGFBQWEsV0FBVztBQUN4QixhQUFhLG1CQUFtQjtBQUNoQyxlQUFlO0FBQ2Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsYUFBYSxLQUFLO0FBQ2xCLGFBQWEsZUFBZTtBQUM1QixhQUFhLFFBQVE7QUFDckIsYUFBYSxXQUFXO0FBQ3hCLGFBQWEsY0FBYztBQUMzQixlQUFlO0FBQ2Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBOztBQUVBO0FBQ0E7QUFDQSxhQUFhLFFBQVE7QUFDckIsYUFBYSxXQUFXO0FBQ3hCLGFBQWEsbUJBQW1CO0FBQ2hDLGVBQWU7QUFDZjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsZUFBZTtBQUNmO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUCxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsUUFBUTtBQUNSO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDs7QUFFQTtBQUNBO0FBQ0EsYUFBYSxRQUFRO0FBQ3JCLGFBQWEsc0JBQXNCO0FBQ25DLGVBQWU7QUFDZjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7O0FBRUE7QUFDQTtBQUNBLGVBQWUsUUFBUTtBQUN2QjtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxhQUFhLHNCQUFzQjtBQUNuQyxlQUFlO0FBQ2Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1AsTUFBTTtBQUNOO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsYUFBYSxRQUFRO0FBQ3JCLGFBQWEsUUFBUTtBQUNyQixhQUFhLHNCQUFzQjtBQUNuQyxlQUFlO0FBQ2Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBLE9BQU87QUFDUCxNQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0EsQ0FBQztBQUNELGtCQUFrQiIsInNvdXJjZXMiOlsid2VicGFjazovL3BheXdpbmQvLi9ub2RlX21vZHVsZXMvYW1hem9uLWNvZ25pdG8taWRlbnRpdHktanMvbGliL0NvZ25pdG9Vc2VyLmpzPzBlYjIiXSwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG5cbmV4cG9ydHMuX19lc01vZHVsZSA9IHRydWU7XG5leHBvcnRzW1wiZGVmYXVsdFwiXSA9IHZvaWQgMDtcbnZhciBfYnVmZmVyID0gcmVxdWlyZShcImJ1ZmZlclwiKTtcbnZhciBfc2hhMjU2SnMgPSByZXF1aXJlKFwiQGF3cy1jcnlwdG8vc2hhMjU2LWpzXCIpO1xudmFyIF9QbGF0Zm9ybSA9IHJlcXVpcmUoXCIuL1BsYXRmb3JtXCIpO1xudmFyIF9CaWdJbnRlZ2VyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlKFwiLi9CaWdJbnRlZ2VyXCIpKTtcbnZhciBfQXV0aGVudGljYXRpb25IZWxwZXIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KHJlcXVpcmUoXCIuL0F1dGhlbnRpY2F0aW9uSGVscGVyXCIpKTtcbnZhciBfQ29nbml0b0FjY2Vzc1Rva2VuID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlKFwiLi9Db2duaXRvQWNjZXNzVG9rZW5cIikpO1xudmFyIF9Db2duaXRvSWRUb2tlbiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQocmVxdWlyZShcIi4vQ29nbml0b0lkVG9rZW5cIikpO1xudmFyIF9Db2duaXRvUmVmcmVzaFRva2VuID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlKFwiLi9Db2duaXRvUmVmcmVzaFRva2VuXCIpKTtcbnZhciBfQ29nbml0b1VzZXJTZXNzaW9uID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlKFwiLi9Db2duaXRvVXNlclNlc3Npb25cIikpO1xudmFyIF9EYXRlSGVscGVyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlKFwiLi9EYXRlSGVscGVyXCIpKTtcbnZhciBfQ29nbml0b1VzZXJBdHRyaWJ1dGUgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KHJlcXVpcmUoXCIuL0NvZ25pdG9Vc2VyQXR0cmlidXRlXCIpKTtcbnZhciBfU3RvcmFnZUhlbHBlciA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQocmVxdWlyZShcIi4vU3RvcmFnZUhlbHBlclwiKSk7XG5mdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBcImRlZmF1bHRcIjogb2JqIH07IH1cbi8qIVxuICogQ29weXJpZ2h0IEFtYXpvbi5jb20sIEluYy4gb3IgaXRzIGFmZmlsaWF0ZXMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG4gKiBTUERYLUxpY2Vuc2UtSWRlbnRpZmllcjogQXBhY2hlLTIuMFxuICovXG5cbi8qKlxuICogQGNhbGxiYWNrIG5vZGVDYWxsYmFja1xuICogQHRlbXBsYXRlIFQgcmVzdWx0XG4gKiBAcGFyYW0geyp9IGVyciBUaGUgb3BlcmF0aW9uIGZhaWx1cmUgcmVhc29uLCBvciBudWxsLlxuICogQHBhcmFtIHtUfSByZXN1bHQgVGhlIG9wZXJhdGlvbiByZXN1bHQuXG4gKi9cblxuLyoqXG4gKiBAY2FsbGJhY2sgb25GYWlsdXJlXG4gKiBAcGFyYW0geyp9IGVyciBGYWlsdXJlIHJlYXNvbi5cbiAqL1xuXG4vKipcbiAqIEBjYWxsYmFjayBvblN1Y2Nlc3NcbiAqIEB0ZW1wbGF0ZSBUIHJlc3VsdFxuICogQHBhcmFtIHtUfSByZXN1bHQgVGhlIG9wZXJhdGlvbiByZXN1bHQuXG4gKi9cblxuLyoqXG4gKiBAY2FsbGJhY2sgbWZhUmVxdWlyZWRcbiAqIEBwYXJhbSB7Kn0gZGV0YWlscyBNRkEgY2hhbGxlbmdlIGRldGFpbHMuXG4gKi9cblxuLyoqXG4gKiBAY2FsbGJhY2sgY3VzdG9tQ2hhbGxlbmdlXG4gKiBAcGFyYW0geyp9IGRldGFpbHMgQ3VzdG9tIGNoYWxsZW5nZSBkZXRhaWxzLlxuICovXG5cbi8qKlxuICogQGNhbGxiYWNrIGlucHV0VmVyaWZpY2F0aW9uQ29kZVxuICogQHBhcmFtIHsqfSBkYXRhIFNlcnZlciByZXNwb25zZS5cbiAqL1xuLyoqXG4gKiBAY2FsbGJhY2sgYXV0aFN1Y2Nlc3NcbiAqIEBwYXJhbSB7Q29nbml0b1VzZXJTZXNzaW9ufSBzZXNzaW9uIFRoZSBuZXcgc2Vzc2lvbi5cbiAqIEBwYXJhbSB7Ym9vbD19IHVzZXJDb25maXJtYXRpb25OZWNlc3NhcnkgVXNlciBtdXN0IGJlIGNvbmZpcm1lZC5cbiAqL1xudmFyIGlzTmF2aWdhdG9yQXZhaWxhYmxlID0gdHlwZW9mIG5hdmlnYXRvciAhPT0gJ3VuZGVmaW5lZCc7XG52YXIgdXNlckFnZW50ID0gaXNOYXZpZ2F0b3JBdmFpbGFibGUgPyBfUGxhdGZvcm0uUGxhdGZvcm0uaXNSZWFjdE5hdGl2ZSA/ICdyZWFjdC1uYXRpdmUnIDogbmF2aWdhdG9yLnVzZXJBZ2VudCA6ICdub2RlanMnO1xuXG4vKiogQGNsYXNzICovXG52YXIgQ29nbml0b1VzZXIgPSAvKiNfX1BVUkVfXyovZnVuY3Rpb24gKCkge1xuICAvKipcbiAgICogQ29uc3RydWN0cyBhIG5ldyBDb2duaXRvVXNlciBvYmplY3RcbiAgICogQHBhcmFtIHtvYmplY3R9IGRhdGEgQ3JlYXRpb24gb3B0aW9uc1xuICAgKiBAcGFyYW0ge3N0cmluZ30gZGF0YS5Vc2VybmFtZSBUaGUgdXNlcidzIHVzZXJuYW1lLlxuICAgKiBAcGFyYW0ge0NvZ25pdG9Vc2VyUG9vbH0gZGF0YS5Qb29sIFBvb2wgY29udGFpbmluZyB0aGUgdXNlci5cbiAgICogQHBhcmFtIHtvYmplY3R9IGRhdGEuU3RvcmFnZSBPcHRpb25hbCBzdG9yYWdlIG9iamVjdC5cbiAgICovXG4gIGZ1bmN0aW9uIENvZ25pdG9Vc2VyKGRhdGEpIHtcbiAgICBpZiAoZGF0YSA9PSBudWxsIHx8IGRhdGEuVXNlcm5hbWUgPT0gbnVsbCB8fCBkYXRhLlBvb2wgPT0gbnVsbCkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdVc2VybmFtZSBhbmQgUG9vbCBpbmZvcm1hdGlvbiBhcmUgcmVxdWlyZWQuJyk7XG4gICAgfVxuICAgIHRoaXMudXNlcm5hbWUgPSBkYXRhLlVzZXJuYW1lIHx8ICcnO1xuICAgIHRoaXMucG9vbCA9IGRhdGEuUG9vbDtcbiAgICB0aGlzLlNlc3Npb24gPSBudWxsO1xuICAgIHRoaXMuY2xpZW50ID0gZGF0YS5Qb29sLmNsaWVudDtcbiAgICB0aGlzLnNpZ25JblVzZXJTZXNzaW9uID0gbnVsbDtcbiAgICB0aGlzLmF1dGhlbnRpY2F0aW9uRmxvd1R5cGUgPSAnVVNFUl9TUlBfQVVUSCc7XG4gICAgdGhpcy5zdG9yYWdlID0gZGF0YS5TdG9yYWdlIHx8IG5ldyBfU3RvcmFnZUhlbHBlcltcImRlZmF1bHRcIl0oKS5nZXRTdG9yYWdlKCk7XG4gICAgdGhpcy5rZXlQcmVmaXggPSBcIkNvZ25pdG9JZGVudGl0eVNlcnZpY2VQcm92aWRlci5cIiArIHRoaXMucG9vbC5nZXRDbGllbnRJZCgpO1xuICAgIHRoaXMudXNlckRhdGFLZXkgPSB0aGlzLmtleVByZWZpeCArIFwiLlwiICsgdGhpcy51c2VybmFtZSArIFwiLnVzZXJEYXRhXCI7XG4gIH1cblxuICAvKipcbiAgICogU2V0cyB0aGUgc2Vzc2lvbiBmb3IgdGhpcyB1c2VyXG4gICAqIEBwYXJhbSB7Q29nbml0b1VzZXJTZXNzaW9ufSBzaWduSW5Vc2VyU2Vzc2lvbiB0aGUgc2Vzc2lvblxuICAgKiBAcmV0dXJucyB7dm9pZH1cbiAgICovXG4gIHZhciBfcHJvdG8gPSBDb2duaXRvVXNlci5wcm90b3R5cGU7XG4gIF9wcm90by5zZXRTaWduSW5Vc2VyU2Vzc2lvbiA9IGZ1bmN0aW9uIHNldFNpZ25JblVzZXJTZXNzaW9uKHNpZ25JblVzZXJTZXNzaW9uKSB7XG4gICAgdGhpcy5jbGVhckNhY2hlZFVzZXJEYXRhKCk7XG4gICAgdGhpcy5zaWduSW5Vc2VyU2Vzc2lvbiA9IHNpZ25JblVzZXJTZXNzaW9uO1xuICAgIHRoaXMuY2FjaGVUb2tlbnMoKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcmV0dXJucyB7Q29nbml0b1VzZXJTZXNzaW9ufSB0aGUgY3VycmVudCBzZXNzaW9uIGZvciB0aGlzIHVzZXJcbiAgICovO1xuICBfcHJvdG8uZ2V0U2lnbkluVXNlclNlc3Npb24gPSBmdW5jdGlvbiBnZXRTaWduSW5Vc2VyU2Vzc2lvbigpIHtcbiAgICByZXR1cm4gdGhpcy5zaWduSW5Vc2VyU2Vzc2lvbjtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcmV0dXJucyB7c3RyaW5nfSB0aGUgdXNlcidzIHVzZXJuYW1lXG4gICAqLztcbiAgX3Byb3RvLmdldFVzZXJuYW1lID0gZnVuY3Rpb24gZ2V0VXNlcm5hbWUoKSB7XG4gICAgcmV0dXJuIHRoaXMudXNlcm5hbWU7XG4gIH1cblxuICAvKipcbiAgICogQHJldHVybnMge1N0cmluZ30gdGhlIGF1dGhlbnRpY2F0aW9uIGZsb3cgdHlwZVxuICAgKi87XG4gIF9wcm90by5nZXRBdXRoZW50aWNhdGlvbkZsb3dUeXBlID0gZnVuY3Rpb24gZ2V0QXV0aGVudGljYXRpb25GbG93VHlwZSgpIHtcbiAgICByZXR1cm4gdGhpcy5hdXRoZW50aWNhdGlvbkZsb3dUeXBlO1xuICB9XG5cbiAgLyoqXG4gICAqIHNldHMgYXV0aGVudGljYXRpb24gZmxvdyB0eXBlXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBhdXRoZW50aWNhdGlvbkZsb3dUeXBlIE5ldyB2YWx1ZS5cbiAgICogQHJldHVybnMge3ZvaWR9XG4gICAqLztcbiAgX3Byb3RvLnNldEF1dGhlbnRpY2F0aW9uRmxvd1R5cGUgPSBmdW5jdGlvbiBzZXRBdXRoZW50aWNhdGlvbkZsb3dUeXBlKGF1dGhlbnRpY2F0aW9uRmxvd1R5cGUpIHtcbiAgICB0aGlzLmF1dGhlbnRpY2F0aW9uRmxvd1R5cGUgPSBhdXRoZW50aWNhdGlvbkZsb3dUeXBlO1xuICB9XG5cbiAgLyoqXG4gICAqIFRoaXMgaXMgdXNlZCBmb3IgYXV0aGVudGljYXRpbmcgdGhlIHVzZXIgdGhyb3VnaCB0aGUgY3VzdG9tIGF1dGhlbnRpY2F0aW9uIGZsb3cuXG4gICAqIEBwYXJhbSB7QXV0aGVudGljYXRpb25EZXRhaWxzfSBhdXRoRGV0YWlscyBDb250YWlucyB0aGUgYXV0aGVudGljYXRpb24gZGF0YVxuICAgKiBAcGFyYW0ge29iamVjdH0gY2FsbGJhY2sgUmVzdWx0IGNhbGxiYWNrIG1hcC5cbiAgICogQHBhcmFtIHtvbkZhaWx1cmV9IGNhbGxiYWNrLm9uRmFpbHVyZSBDYWxsZWQgb24gYW55IGVycm9yLlxuICAgKiBAcGFyYW0ge2N1c3RvbUNoYWxsZW5nZX0gY2FsbGJhY2suY3VzdG9tQ2hhbGxlbmdlIEN1c3RvbSBjaGFsbGVuZ2VcbiAgICogICAgICAgIHJlc3BvbnNlIHJlcXVpcmVkIHRvIGNvbnRpbnVlLlxuICAgKiBAcGFyYW0ge2F1dGhTdWNjZXNzfSBjYWxsYmFjay5vblN1Y2Nlc3MgQ2FsbGVkIG9uIHN1Y2Nlc3Mgd2l0aCB0aGUgbmV3IHNlc3Npb24uXG4gICAqIEByZXR1cm5zIHt2b2lkfVxuICAgKi87XG4gIF9wcm90by5pbml0aWF0ZUF1dGggPSBmdW5jdGlvbiBpbml0aWF0ZUF1dGgoYXV0aERldGFpbHMsIGNhbGxiYWNrKSB7XG4gICAgdmFyIF90aGlzID0gdGhpcztcbiAgICB2YXIgYXV0aFBhcmFtZXRlcnMgPSBhdXRoRGV0YWlscy5nZXRBdXRoUGFyYW1ldGVycygpO1xuICAgIGF1dGhQYXJhbWV0ZXJzLlVTRVJOQU1FID0gdGhpcy51c2VybmFtZTtcbiAgICB2YXIgY2xpZW50TWV0YURhdGEgPSBPYmplY3Qua2V5cyhhdXRoRGV0YWlscy5nZXRWYWxpZGF0aW9uRGF0YSgpKS5sZW5ndGggIT09IDAgPyBhdXRoRGV0YWlscy5nZXRWYWxpZGF0aW9uRGF0YSgpIDogYXV0aERldGFpbHMuZ2V0Q2xpZW50TWV0YWRhdGEoKTtcbiAgICB2YXIganNvblJlcSA9IHtcbiAgICAgIEF1dGhGbG93OiAnQ1VTVE9NX0FVVEgnLFxuICAgICAgQ2xpZW50SWQ6IHRoaXMucG9vbC5nZXRDbGllbnRJZCgpLFxuICAgICAgQXV0aFBhcmFtZXRlcnM6IGF1dGhQYXJhbWV0ZXJzLFxuICAgICAgQ2xpZW50TWV0YWRhdGE6IGNsaWVudE1ldGFEYXRhXG4gICAgfTtcbiAgICBpZiAodGhpcy5nZXRVc2VyQ29udGV4dERhdGEoKSkge1xuICAgICAganNvblJlcS5Vc2VyQ29udGV4dERhdGEgPSB0aGlzLmdldFVzZXJDb250ZXh0RGF0YSgpO1xuICAgIH1cbiAgICB0aGlzLmNsaWVudC5yZXF1ZXN0KCdJbml0aWF0ZUF1dGgnLCBqc29uUmVxLCBmdW5jdGlvbiAoZXJyLCBkYXRhKSB7XG4gICAgICBpZiAoZXJyKSB7XG4gICAgICAgIHJldHVybiBjYWxsYmFjay5vbkZhaWx1cmUoZXJyKTtcbiAgICAgIH1cbiAgICAgIHZhciBjaGFsbGVuZ2VOYW1lID0gZGF0YS5DaGFsbGVuZ2VOYW1lO1xuICAgICAgdmFyIGNoYWxsZW5nZVBhcmFtZXRlcnMgPSBkYXRhLkNoYWxsZW5nZVBhcmFtZXRlcnM7XG4gICAgICBpZiAoY2hhbGxlbmdlTmFtZSA9PT0gJ0NVU1RPTV9DSEFMTEVOR0UnKSB7XG4gICAgICAgIF90aGlzLlNlc3Npb24gPSBkYXRhLlNlc3Npb247XG4gICAgICAgIHJldHVybiBjYWxsYmFjay5jdXN0b21DaGFsbGVuZ2UoY2hhbGxlbmdlUGFyYW1ldGVycyk7XG4gICAgICB9XG4gICAgICBfdGhpcy5zaWduSW5Vc2VyU2Vzc2lvbiA9IF90aGlzLmdldENvZ25pdG9Vc2VyU2Vzc2lvbihkYXRhLkF1dGhlbnRpY2F0aW9uUmVzdWx0KTtcbiAgICAgIF90aGlzLmNhY2hlVG9rZW5zKCk7XG4gICAgICByZXR1cm4gY2FsbGJhY2sub25TdWNjZXNzKF90aGlzLnNpZ25JblVzZXJTZXNzaW9uKTtcbiAgICB9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBUaGlzIGlzIHVzZWQgZm9yIGF1dGhlbnRpY2F0aW5nIHRoZSB1c2VyLlxuICAgKiBzdHVmZlxuICAgKiBAcGFyYW0ge0F1dGhlbnRpY2F0aW9uRGV0YWlsc30gYXV0aERldGFpbHMgQ29udGFpbnMgdGhlIGF1dGhlbnRpY2F0aW9uIGRhdGFcbiAgICogQHBhcmFtIHtvYmplY3R9IGNhbGxiYWNrIFJlc3VsdCBjYWxsYmFjayBtYXAuXG4gICAqIEBwYXJhbSB7b25GYWlsdXJlfSBjYWxsYmFjay5vbkZhaWx1cmUgQ2FsbGVkIG9uIGFueSBlcnJvci5cbiAgICogQHBhcmFtIHtuZXdQYXNzd29yZFJlcXVpcmVkfSBjYWxsYmFjay5uZXdQYXNzd29yZFJlcXVpcmVkIG5ld1xuICAgKiAgICAgICAgcGFzc3dvcmQgYW5kIGFueSByZXF1aXJlZCBhdHRyaWJ1dGVzIGFyZSByZXF1aXJlZCB0byBjb250aW51ZVxuICAgKiBAcGFyYW0ge21mYVJlcXVpcmVkfSBjYWxsYmFjay5tZmFSZXF1aXJlZCBNRkEgY29kZVxuICAgKiAgICAgICAgcmVxdWlyZWQgdG8gY29udGludWUuXG4gICAqIEBwYXJhbSB7Y3VzdG9tQ2hhbGxlbmdlfSBjYWxsYmFjay5jdXN0b21DaGFsbGVuZ2UgQ3VzdG9tIGNoYWxsZW5nZVxuICAgKiAgICAgICAgcmVzcG9uc2UgcmVxdWlyZWQgdG8gY29udGludWUuXG4gICAqIEBwYXJhbSB7YXV0aFN1Y2Nlc3N9IGNhbGxiYWNrLm9uU3VjY2VzcyBDYWxsZWQgb24gc3VjY2VzcyB3aXRoIHRoZSBuZXcgc2Vzc2lvbi5cbiAgICogQHJldHVybnMge3ZvaWR9XG4gICAqLztcbiAgX3Byb3RvLmF1dGhlbnRpY2F0ZVVzZXIgPSBmdW5jdGlvbiBhdXRoZW50aWNhdGVVc2VyKGF1dGhEZXRhaWxzLCBjYWxsYmFjaykge1xuICAgIGlmICh0aGlzLmF1dGhlbnRpY2F0aW9uRmxvd1R5cGUgPT09ICdVU0VSX1BBU1NXT1JEX0FVVEgnKSB7XG4gICAgICByZXR1cm4gdGhpcy5hdXRoZW50aWNhdGVVc2VyUGxhaW5Vc2VybmFtZVBhc3N3b3JkKGF1dGhEZXRhaWxzLCBjYWxsYmFjayk7XG4gICAgfSBlbHNlIGlmICh0aGlzLmF1dGhlbnRpY2F0aW9uRmxvd1R5cGUgPT09ICdVU0VSX1NSUF9BVVRIJyB8fCB0aGlzLmF1dGhlbnRpY2F0aW9uRmxvd1R5cGUgPT09ICdDVVNUT01fQVVUSCcpIHtcbiAgICAgIHJldHVybiB0aGlzLmF1dGhlbnRpY2F0ZVVzZXJEZWZhdWx0QXV0aChhdXRoRGV0YWlscywgY2FsbGJhY2spO1xuICAgIH1cbiAgICByZXR1cm4gY2FsbGJhY2sub25GYWlsdXJlKG5ldyBFcnJvcignQXV0aGVudGljYXRpb24gZmxvdyB0eXBlIGlzIGludmFsaWQuJykpO1xuICB9XG5cbiAgLyoqXG4gICAqIFBSSVZBVEUgT05MWTogVGhpcyBpcyBhbiBpbnRlcm5hbCBvbmx5IG1ldGhvZCBhbmQgc2hvdWxkIG5vdFxuICAgKiBiZSBkaXJlY3RseSBjYWxsZWQgYnkgdGhlIGNvbnN1bWVycy5cbiAgICogSXQgY2FsbHMgdGhlIEF1dGhlbnRpY2F0aW9uSGVscGVyIGZvciBTUlAgcmVsYXRlZFxuICAgKiBzdHVmZlxuICAgKiBAcGFyYW0ge0F1dGhlbnRpY2F0aW9uRGV0YWlsc30gYXV0aERldGFpbHMgQ29udGFpbnMgdGhlIGF1dGhlbnRpY2F0aW9uIGRhdGFcbiAgICogQHBhcmFtIHtvYmplY3R9IGNhbGxiYWNrIFJlc3VsdCBjYWxsYmFjayBtYXAuXG4gICAqIEBwYXJhbSB7b25GYWlsdXJlfSBjYWxsYmFjay5vbkZhaWx1cmUgQ2FsbGVkIG9uIGFueSBlcnJvci5cbiAgICogQHBhcmFtIHtuZXdQYXNzd29yZFJlcXVpcmVkfSBjYWxsYmFjay5uZXdQYXNzd29yZFJlcXVpcmVkIG5ld1xuICAgKiAgICAgICAgcGFzc3dvcmQgYW5kIGFueSByZXF1aXJlZCBhdHRyaWJ1dGVzIGFyZSByZXF1aXJlZCB0byBjb250aW51ZVxuICAgKiBAcGFyYW0ge21mYVJlcXVpcmVkfSBjYWxsYmFjay5tZmFSZXF1aXJlZCBNRkEgY29kZVxuICAgKiAgICAgICAgcmVxdWlyZWQgdG8gY29udGludWUuXG4gICAqIEBwYXJhbSB7Y3VzdG9tQ2hhbGxlbmdlfSBjYWxsYmFjay5jdXN0b21DaGFsbGVuZ2UgQ3VzdG9tIGNoYWxsZW5nZVxuICAgKiAgICAgICAgcmVzcG9uc2UgcmVxdWlyZWQgdG8gY29udGludWUuXG4gICAqIEBwYXJhbSB7YXV0aFN1Y2Nlc3N9IGNhbGxiYWNrLm9uU3VjY2VzcyBDYWxsZWQgb24gc3VjY2VzcyB3aXRoIHRoZSBuZXcgc2Vzc2lvbi5cbiAgICogQHJldHVybnMge3ZvaWR9XG4gICAqLztcbiAgX3Byb3RvLmF1dGhlbnRpY2F0ZVVzZXJEZWZhdWx0QXV0aCA9IGZ1bmN0aW9uIGF1dGhlbnRpY2F0ZVVzZXJEZWZhdWx0QXV0aChhdXRoRGV0YWlscywgY2FsbGJhY2spIHtcbiAgICB2YXIgX3RoaXMyID0gdGhpcztcbiAgICB2YXIgYXV0aGVudGljYXRpb25IZWxwZXIgPSBuZXcgX0F1dGhlbnRpY2F0aW9uSGVscGVyW1wiZGVmYXVsdFwiXSh0aGlzLnBvb2wuZ2V0VXNlclBvb2xOYW1lKCkpO1xuICAgIHZhciBkYXRlSGVscGVyID0gbmV3IF9EYXRlSGVscGVyW1wiZGVmYXVsdFwiXSgpO1xuICAgIHZhciBzZXJ2ZXJCVmFsdWU7XG4gICAgdmFyIHNhbHQ7XG4gICAgdmFyIGF1dGhQYXJhbWV0ZXJzID0ge307XG4gICAgaWYgKHRoaXMuZGV2aWNlS2V5ICE9IG51bGwpIHtcbiAgICAgIGF1dGhQYXJhbWV0ZXJzLkRFVklDRV9LRVkgPSB0aGlzLmRldmljZUtleTtcbiAgICB9XG4gICAgYXV0aFBhcmFtZXRlcnMuVVNFUk5BTUUgPSB0aGlzLnVzZXJuYW1lO1xuICAgIGF1dGhlbnRpY2F0aW9uSGVscGVyLmdldExhcmdlQVZhbHVlKGZ1bmN0aW9uIChlcnJPbkFWYWx1ZSwgYVZhbHVlKSB7XG4gICAgICAvLyBnZXRMYXJnZUFWYWx1ZSBjYWxsYmFjayBzdGFydFxuICAgICAgaWYgKGVyck9uQVZhbHVlKSB7XG4gICAgICAgIGNhbGxiYWNrLm9uRmFpbHVyZShlcnJPbkFWYWx1ZSk7XG4gICAgICB9XG4gICAgICBhdXRoUGFyYW1ldGVycy5TUlBfQSA9IGFWYWx1ZS50b1N0cmluZygxNik7XG4gICAgICBpZiAoX3RoaXMyLmF1dGhlbnRpY2F0aW9uRmxvd1R5cGUgPT09ICdDVVNUT01fQVVUSCcpIHtcbiAgICAgICAgYXV0aFBhcmFtZXRlcnMuQ0hBTExFTkdFX05BTUUgPSAnU1JQX0EnO1xuICAgICAgfVxuICAgICAgdmFyIGNsaWVudE1ldGFEYXRhID0gT2JqZWN0LmtleXMoYXV0aERldGFpbHMuZ2V0VmFsaWRhdGlvbkRhdGEoKSkubGVuZ3RoICE9PSAwID8gYXV0aERldGFpbHMuZ2V0VmFsaWRhdGlvbkRhdGEoKSA6IGF1dGhEZXRhaWxzLmdldENsaWVudE1ldGFkYXRhKCk7XG4gICAgICB2YXIganNvblJlcSA9IHtcbiAgICAgICAgQXV0aEZsb3c6IF90aGlzMi5hdXRoZW50aWNhdGlvbkZsb3dUeXBlLFxuICAgICAgICBDbGllbnRJZDogX3RoaXMyLnBvb2wuZ2V0Q2xpZW50SWQoKSxcbiAgICAgICAgQXV0aFBhcmFtZXRlcnM6IGF1dGhQYXJhbWV0ZXJzLFxuICAgICAgICBDbGllbnRNZXRhZGF0YTogY2xpZW50TWV0YURhdGFcbiAgICAgIH07XG4gICAgICBpZiAoX3RoaXMyLmdldFVzZXJDb250ZXh0RGF0YShfdGhpczIudXNlcm5hbWUpKSB7XG4gICAgICAgIGpzb25SZXEuVXNlckNvbnRleHREYXRhID0gX3RoaXMyLmdldFVzZXJDb250ZXh0RGF0YShfdGhpczIudXNlcm5hbWUpO1xuICAgICAgfVxuICAgICAgX3RoaXMyLmNsaWVudC5yZXF1ZXN0KCdJbml0aWF0ZUF1dGgnLCBqc29uUmVxLCBmdW5jdGlvbiAoZXJyLCBkYXRhKSB7XG4gICAgICAgIGlmIChlcnIpIHtcbiAgICAgICAgICByZXR1cm4gY2FsbGJhY2sub25GYWlsdXJlKGVycik7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIGNoYWxsZW5nZVBhcmFtZXRlcnMgPSBkYXRhLkNoYWxsZW5nZVBhcmFtZXRlcnM7XG4gICAgICAgIF90aGlzMi51c2VybmFtZSA9IGNoYWxsZW5nZVBhcmFtZXRlcnMuVVNFUl9JRF9GT1JfU1JQO1xuICAgICAgICBfdGhpczIudXNlckRhdGFLZXkgPSBfdGhpczIua2V5UHJlZml4ICsgXCIuXCIgKyBfdGhpczIudXNlcm5hbWUgKyBcIi51c2VyRGF0YVwiO1xuICAgICAgICBzZXJ2ZXJCVmFsdWUgPSBuZXcgX0JpZ0ludGVnZXJbXCJkZWZhdWx0XCJdKGNoYWxsZW5nZVBhcmFtZXRlcnMuU1JQX0IsIDE2KTtcbiAgICAgICAgc2FsdCA9IG5ldyBfQmlnSW50ZWdlcltcImRlZmF1bHRcIl0oY2hhbGxlbmdlUGFyYW1ldGVycy5TQUxULCAxNik7XG4gICAgICAgIF90aGlzMi5nZXRDYWNoZWREZXZpY2VLZXlBbmRQYXNzd29yZCgpO1xuICAgICAgICBhdXRoZW50aWNhdGlvbkhlbHBlci5nZXRQYXNzd29yZEF1dGhlbnRpY2F0aW9uS2V5KF90aGlzMi51c2VybmFtZSwgYXV0aERldGFpbHMuZ2V0UGFzc3dvcmQoKSwgc2VydmVyQlZhbHVlLCBzYWx0LCBmdW5jdGlvbiAoZXJyT25Ia2RmLCBoa2RmKSB7XG4gICAgICAgICAgLy8gZ2V0UGFzc3dvcmRBdXRoZW50aWNhdGlvbktleSBjYWxsYmFjayBzdGFydFxuICAgICAgICAgIGlmIChlcnJPbkhrZGYpIHtcbiAgICAgICAgICAgIGNhbGxiYWNrLm9uRmFpbHVyZShlcnJPbkhrZGYpO1xuICAgICAgICAgIH1cbiAgICAgICAgICB2YXIgZGF0ZU5vdyA9IGRhdGVIZWxwZXIuZ2V0Tm93U3RyaW5nKCk7XG4gICAgICAgICAgdmFyIGNvbmNhdEJ1ZmZlciA9IF9idWZmZXIuQnVmZmVyLmNvbmNhdChbX2J1ZmZlci5CdWZmZXIuZnJvbShfdGhpczIucG9vbC5nZXRVc2VyUG9vbE5hbWUoKSwgJ3V0ZjgnKSwgX2J1ZmZlci5CdWZmZXIuZnJvbShfdGhpczIudXNlcm5hbWUsICd1dGY4JyksIF9idWZmZXIuQnVmZmVyLmZyb20oY2hhbGxlbmdlUGFyYW1ldGVycy5TRUNSRVRfQkxPQ0ssICdiYXNlNjQnKSwgX2J1ZmZlci5CdWZmZXIuZnJvbShkYXRlTm93LCAndXRmOCcpXSk7XG4gICAgICAgICAgdmFyIGF3c0NyeXB0b0hhc2ggPSBuZXcgX3NoYTI1NkpzLlNoYTI1Nihoa2RmKTtcbiAgICAgICAgICBhd3NDcnlwdG9IYXNoLnVwZGF0ZShjb25jYXRCdWZmZXIpO1xuICAgICAgICAgIHZhciByZXN1bHRGcm9tQVdTQ3J5cHRvID0gYXdzQ3J5cHRvSGFzaC5kaWdlc3RTeW5jKCk7XG4gICAgICAgICAgdmFyIHNpZ25hdHVyZVN0cmluZyA9IF9idWZmZXIuQnVmZmVyLmZyb20ocmVzdWx0RnJvbUFXU0NyeXB0bykudG9TdHJpbmcoJ2Jhc2U2NCcpO1xuICAgICAgICAgIHZhciBjaGFsbGVuZ2VSZXNwb25zZXMgPSB7fTtcbiAgICAgICAgICBjaGFsbGVuZ2VSZXNwb25zZXMuVVNFUk5BTUUgPSBfdGhpczIudXNlcm5hbWU7XG4gICAgICAgICAgY2hhbGxlbmdlUmVzcG9uc2VzLlBBU1NXT1JEX0NMQUlNX1NFQ1JFVF9CTE9DSyA9IGNoYWxsZW5nZVBhcmFtZXRlcnMuU0VDUkVUX0JMT0NLO1xuICAgICAgICAgIGNoYWxsZW5nZVJlc3BvbnNlcy5USU1FU1RBTVAgPSBkYXRlTm93O1xuICAgICAgICAgIGNoYWxsZW5nZVJlc3BvbnNlcy5QQVNTV09SRF9DTEFJTV9TSUdOQVRVUkUgPSBzaWduYXR1cmVTdHJpbmc7XG4gICAgICAgICAgaWYgKF90aGlzMi5kZXZpY2VLZXkgIT0gbnVsbCkge1xuICAgICAgICAgICAgY2hhbGxlbmdlUmVzcG9uc2VzLkRFVklDRV9LRVkgPSBfdGhpczIuZGV2aWNlS2V5O1xuICAgICAgICAgIH1cbiAgICAgICAgICB2YXIgcmVzcG9uZFRvQXV0aENoYWxsZW5nZSA9IGZ1bmN0aW9uIHJlc3BvbmRUb0F1dGhDaGFsbGVuZ2UoY2hhbGxlbmdlLCBjaGFsbGVuZ2VDYWxsYmFjaykge1xuICAgICAgICAgICAgcmV0dXJuIF90aGlzMi5jbGllbnQucmVxdWVzdCgnUmVzcG9uZFRvQXV0aENoYWxsZW5nZScsIGNoYWxsZW5nZSwgZnVuY3Rpb24gKGVyckNoYWxsZW5nZSwgZGF0YUNoYWxsZW5nZSkge1xuICAgICAgICAgICAgICBpZiAoZXJyQ2hhbGxlbmdlICYmIGVyckNoYWxsZW5nZS5jb2RlID09PSAnUmVzb3VyY2VOb3RGb3VuZEV4Y2VwdGlvbicgJiYgZXJyQ2hhbGxlbmdlLm1lc3NhZ2UudG9Mb3dlckNhc2UoKS5pbmRleE9mKCdkZXZpY2UnKSAhPT0gLTEpIHtcbiAgICAgICAgICAgICAgICBjaGFsbGVuZ2VSZXNwb25zZXMuREVWSUNFX0tFWSA9IG51bGw7XG4gICAgICAgICAgICAgICAgX3RoaXMyLmRldmljZUtleSA9IG51bGw7XG4gICAgICAgICAgICAgICAgX3RoaXMyLnJhbmRvbVBhc3N3b3JkID0gbnVsbDtcbiAgICAgICAgICAgICAgICBfdGhpczIuZGV2aWNlR3JvdXBLZXkgPSBudWxsO1xuICAgICAgICAgICAgICAgIF90aGlzMi5jbGVhckNhY2hlZERldmljZUtleUFuZFBhc3N3b3JkKCk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHJlc3BvbmRUb0F1dGhDaGFsbGVuZ2UoY2hhbGxlbmdlLCBjaGFsbGVuZ2VDYWxsYmFjayk7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgcmV0dXJuIGNoYWxsZW5nZUNhbGxiYWNrKGVyckNoYWxsZW5nZSwgZGF0YUNoYWxsZW5nZSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB9O1xuICAgICAgICAgIHZhciBqc29uUmVxUmVzcCA9IHtcbiAgICAgICAgICAgIENoYWxsZW5nZU5hbWU6ICdQQVNTV09SRF9WRVJJRklFUicsXG4gICAgICAgICAgICBDbGllbnRJZDogX3RoaXMyLnBvb2wuZ2V0Q2xpZW50SWQoKSxcbiAgICAgICAgICAgIENoYWxsZW5nZVJlc3BvbnNlczogY2hhbGxlbmdlUmVzcG9uc2VzLFxuICAgICAgICAgICAgU2Vzc2lvbjogZGF0YS5TZXNzaW9uLFxuICAgICAgICAgICAgQ2xpZW50TWV0YWRhdGE6IGNsaWVudE1ldGFEYXRhXG4gICAgICAgICAgfTtcbiAgICAgICAgICBpZiAoX3RoaXMyLmdldFVzZXJDb250ZXh0RGF0YSgpKSB7XG4gICAgICAgICAgICBqc29uUmVxUmVzcC5Vc2VyQ29udGV4dERhdGEgPSBfdGhpczIuZ2V0VXNlckNvbnRleHREYXRhKCk7XG4gICAgICAgICAgfVxuICAgICAgICAgIHJlc3BvbmRUb0F1dGhDaGFsbGVuZ2UoanNvblJlcVJlc3AsIGZ1bmN0aW9uIChlcnJBdXRoZW50aWNhdGUsIGRhdGFBdXRoZW50aWNhdGUpIHtcbiAgICAgICAgICAgIGlmIChlcnJBdXRoZW50aWNhdGUpIHtcbiAgICAgICAgICAgICAgcmV0dXJuIGNhbGxiYWNrLm9uRmFpbHVyZShlcnJBdXRoZW50aWNhdGUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIF90aGlzMi5hdXRoZW50aWNhdGVVc2VySW50ZXJuYWwoZGF0YUF1dGhlbnRpY2F0ZSwgYXV0aGVudGljYXRpb25IZWxwZXIsIGNhbGxiYWNrKTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgICAgICAgIC8vIGdldFBhc3N3b3JkQXV0aGVudGljYXRpb25LZXkgY2FsbGJhY2sgZW5kXG4gICAgICAgIH0pO1xuXG4gICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgICB9KTtcbiAgICAgIC8vIGdldExhcmdlQVZhbHVlIGNhbGxiYWNrIGVuZFxuICAgIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqIFBSSVZBVEUgT05MWTogVGhpcyBpcyBhbiBpbnRlcm5hbCBvbmx5IG1ldGhvZCBhbmQgc2hvdWxkIG5vdFxuICAgKiBiZSBkaXJlY3RseSBjYWxsZWQgYnkgdGhlIGNvbnN1bWVycy5cbiAgICogQHBhcmFtIHtBdXRoZW50aWNhdGlvbkRldGFpbHN9IGF1dGhEZXRhaWxzIENvbnRhaW5zIHRoZSBhdXRoZW50aWNhdGlvbiBkYXRhLlxuICAgKiBAcGFyYW0ge29iamVjdH0gY2FsbGJhY2sgUmVzdWx0IGNhbGxiYWNrIG1hcC5cbiAgICogQHBhcmFtIHtvbkZhaWx1cmV9IGNhbGxiYWNrLm9uRmFpbHVyZSBDYWxsZWQgb24gYW55IGVycm9yLlxuICAgKiBAcGFyYW0ge21mYVJlcXVpcmVkfSBjYWxsYmFjay5tZmFSZXF1aXJlZCBNRkEgY29kZVxuICAgKiAgICAgICAgcmVxdWlyZWQgdG8gY29udGludWUuXG4gICAqIEBwYXJhbSB7YXV0aFN1Y2Nlc3N9IGNhbGxiYWNrLm9uU3VjY2VzcyBDYWxsZWQgb24gc3VjY2VzcyB3aXRoIHRoZSBuZXcgc2Vzc2lvbi5cbiAgICogQHJldHVybnMge3ZvaWR9XG4gICAqLztcbiAgX3Byb3RvLmF1dGhlbnRpY2F0ZVVzZXJQbGFpblVzZXJuYW1lUGFzc3dvcmQgPSBmdW5jdGlvbiBhdXRoZW50aWNhdGVVc2VyUGxhaW5Vc2VybmFtZVBhc3N3b3JkKGF1dGhEZXRhaWxzLCBjYWxsYmFjaykge1xuICAgIHZhciBfdGhpczMgPSB0aGlzO1xuICAgIHZhciBhdXRoUGFyYW1ldGVycyA9IHt9O1xuICAgIGF1dGhQYXJhbWV0ZXJzLlVTRVJOQU1FID0gdGhpcy51c2VybmFtZTtcbiAgICBhdXRoUGFyYW1ldGVycy5QQVNTV09SRCA9IGF1dGhEZXRhaWxzLmdldFBhc3N3b3JkKCk7XG4gICAgaWYgKCFhdXRoUGFyYW1ldGVycy5QQVNTV09SRCkge1xuICAgICAgY2FsbGJhY2sub25GYWlsdXJlKG5ldyBFcnJvcignUEFTU1dPUkQgcGFyYW1ldGVyIGlzIHJlcXVpcmVkJykpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICB2YXIgYXV0aGVudGljYXRpb25IZWxwZXIgPSBuZXcgX0F1dGhlbnRpY2F0aW9uSGVscGVyW1wiZGVmYXVsdFwiXSh0aGlzLnBvb2wuZ2V0VXNlclBvb2xOYW1lKCkpO1xuICAgIHRoaXMuZ2V0Q2FjaGVkRGV2aWNlS2V5QW5kUGFzc3dvcmQoKTtcbiAgICBpZiAodGhpcy5kZXZpY2VLZXkgIT0gbnVsbCkge1xuICAgICAgYXV0aFBhcmFtZXRlcnMuREVWSUNFX0tFWSA9IHRoaXMuZGV2aWNlS2V5O1xuICAgIH1cbiAgICB2YXIgY2xpZW50TWV0YURhdGEgPSBPYmplY3Qua2V5cyhhdXRoRGV0YWlscy5nZXRWYWxpZGF0aW9uRGF0YSgpKS5sZW5ndGggIT09IDAgPyBhdXRoRGV0YWlscy5nZXRWYWxpZGF0aW9uRGF0YSgpIDogYXV0aERldGFpbHMuZ2V0Q2xpZW50TWV0YWRhdGEoKTtcbiAgICB2YXIganNvblJlcSA9IHtcbiAgICAgIEF1dGhGbG93OiAnVVNFUl9QQVNTV09SRF9BVVRIJyxcbiAgICAgIENsaWVudElkOiB0aGlzLnBvb2wuZ2V0Q2xpZW50SWQoKSxcbiAgICAgIEF1dGhQYXJhbWV0ZXJzOiBhdXRoUGFyYW1ldGVycyxcbiAgICAgIENsaWVudE1ldGFkYXRhOiBjbGllbnRNZXRhRGF0YVxuICAgIH07XG4gICAgaWYgKHRoaXMuZ2V0VXNlckNvbnRleHREYXRhKHRoaXMudXNlcm5hbWUpKSB7XG4gICAgICBqc29uUmVxLlVzZXJDb250ZXh0RGF0YSA9IHRoaXMuZ2V0VXNlckNvbnRleHREYXRhKHRoaXMudXNlcm5hbWUpO1xuICAgIH1cbiAgICAvLyBVU0VSX1BBU1NXT1JEX0FVVEggaGFwcGVucyBpbiBhIHNpbmdsZSByb3VuZC10cmlwOiBjbGllbnQgc2VuZHMgdXNlck5hbWUgYW5kIHBhc3N3b3JkLFxuICAgIC8vIENvZ25pdG8gVXNlclBvb2xzIHZlcmlmaWVzIHBhc3N3b3JkIGFuZCByZXR1cm5zIHRva2Vucy5cbiAgICB0aGlzLmNsaWVudC5yZXF1ZXN0KCdJbml0aWF0ZUF1dGgnLCBqc29uUmVxLCBmdW5jdGlvbiAoZXJyLCBhdXRoUmVzdWx0KSB7XG4gICAgICBpZiAoZXJyKSB7XG4gICAgICAgIHJldHVybiBjYWxsYmFjay5vbkZhaWx1cmUoZXJyKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBfdGhpczMuYXV0aGVudGljYXRlVXNlckludGVybmFsKGF1dGhSZXN1bHQsIGF1dGhlbnRpY2F0aW9uSGVscGVyLCBjYWxsYmFjayk7XG4gICAgfSk7XG4gIH1cblxuICAvKipcbiAgICogUFJJVkFURSBPTkxZOiBUaGlzIGlzIGFuIGludGVybmFsIG9ubHkgbWV0aG9kIGFuZCBzaG91bGQgbm90XG4gICAqIGJlIGRpcmVjdGx5IGNhbGxlZCBieSB0aGUgY29uc3VtZXJzLlxuICAgKiBAcGFyYW0ge29iamVjdH0gZGF0YUF1dGhlbnRpY2F0ZSBhdXRoZW50aWNhdGlvbiBkYXRhXG4gICAqIEBwYXJhbSB7b2JqZWN0fSBhdXRoZW50aWNhdGlvbkhlbHBlciBoZWxwZXIgY3JlYXRlZFxuICAgKiBAcGFyYW0ge2NhbGxiYWNrfSBjYWxsYmFjayBwYXNzZWQgb24gZnJvbSBjYWxsZXJcbiAgICogQHJldHVybnMge3ZvaWR9XG4gICAqLztcbiAgX3Byb3RvLmF1dGhlbnRpY2F0ZVVzZXJJbnRlcm5hbCA9IGZ1bmN0aW9uIGF1dGhlbnRpY2F0ZVVzZXJJbnRlcm5hbChkYXRhQXV0aGVudGljYXRlLCBhdXRoZW50aWNhdGlvbkhlbHBlciwgY2FsbGJhY2spIHtcbiAgICB2YXIgX3RoaXM0ID0gdGhpcztcbiAgICB2YXIgY2hhbGxlbmdlTmFtZSA9IGRhdGFBdXRoZW50aWNhdGUuQ2hhbGxlbmdlTmFtZTtcbiAgICB2YXIgY2hhbGxlbmdlUGFyYW1ldGVycyA9IGRhdGFBdXRoZW50aWNhdGUuQ2hhbGxlbmdlUGFyYW1ldGVycztcbiAgICBpZiAoY2hhbGxlbmdlTmFtZSA9PT0gJ1NNU19NRkEnKSB7XG4gICAgICB0aGlzLlNlc3Npb24gPSBkYXRhQXV0aGVudGljYXRlLlNlc3Npb247XG4gICAgICByZXR1cm4gY2FsbGJhY2subWZhUmVxdWlyZWQoY2hhbGxlbmdlTmFtZSwgY2hhbGxlbmdlUGFyYW1ldGVycyk7XG4gICAgfVxuICAgIGlmIChjaGFsbGVuZ2VOYW1lID09PSAnU0VMRUNUX01GQV9UWVBFJykge1xuICAgICAgdGhpcy5TZXNzaW9uID0gZGF0YUF1dGhlbnRpY2F0ZS5TZXNzaW9uO1xuICAgICAgcmV0dXJuIGNhbGxiYWNrLnNlbGVjdE1GQVR5cGUoY2hhbGxlbmdlTmFtZSwgY2hhbGxlbmdlUGFyYW1ldGVycyk7XG4gICAgfVxuICAgIGlmIChjaGFsbGVuZ2VOYW1lID09PSAnTUZBX1NFVFVQJykge1xuICAgICAgdGhpcy5TZXNzaW9uID0gZGF0YUF1dGhlbnRpY2F0ZS5TZXNzaW9uO1xuICAgICAgcmV0dXJuIGNhbGxiYWNrLm1mYVNldHVwKGNoYWxsZW5nZU5hbWUsIGNoYWxsZW5nZVBhcmFtZXRlcnMpO1xuICAgIH1cbiAgICBpZiAoY2hhbGxlbmdlTmFtZSA9PT0gJ1NPRlRXQVJFX1RPS0VOX01GQScpIHtcbiAgICAgIHRoaXMuU2Vzc2lvbiA9IGRhdGFBdXRoZW50aWNhdGUuU2Vzc2lvbjtcbiAgICAgIHJldHVybiBjYWxsYmFjay50b3RwUmVxdWlyZWQoY2hhbGxlbmdlTmFtZSwgY2hhbGxlbmdlUGFyYW1ldGVycyk7XG4gICAgfVxuICAgIGlmIChjaGFsbGVuZ2VOYW1lID09PSAnQ1VTVE9NX0NIQUxMRU5HRScpIHtcbiAgICAgIHRoaXMuU2Vzc2lvbiA9IGRhdGFBdXRoZW50aWNhdGUuU2Vzc2lvbjtcbiAgICAgIHJldHVybiBjYWxsYmFjay5jdXN0b21DaGFsbGVuZ2UoY2hhbGxlbmdlUGFyYW1ldGVycyk7XG4gICAgfVxuICAgIGlmIChjaGFsbGVuZ2VOYW1lID09PSAnTkVXX1BBU1NXT1JEX1JFUVVJUkVEJykge1xuICAgICAgdGhpcy5TZXNzaW9uID0gZGF0YUF1dGhlbnRpY2F0ZS5TZXNzaW9uO1xuICAgICAgdmFyIHVzZXJBdHRyaWJ1dGVzID0gbnVsbDtcbiAgICAgIHZhciByYXdSZXF1aXJlZEF0dHJpYnV0ZXMgPSBudWxsO1xuICAgICAgdmFyIHJlcXVpcmVkQXR0cmlidXRlcyA9IFtdO1xuICAgICAgdmFyIHVzZXJBdHRyaWJ1dGVzUHJlZml4ID0gYXV0aGVudGljYXRpb25IZWxwZXIuZ2V0TmV3UGFzc3dvcmRSZXF1aXJlZENoYWxsZW5nZVVzZXJBdHRyaWJ1dGVQcmVmaXgoKTtcbiAgICAgIGlmIChjaGFsbGVuZ2VQYXJhbWV0ZXJzKSB7XG4gICAgICAgIHVzZXJBdHRyaWJ1dGVzID0gSlNPTi5wYXJzZShkYXRhQXV0aGVudGljYXRlLkNoYWxsZW5nZVBhcmFtZXRlcnMudXNlckF0dHJpYnV0ZXMpO1xuICAgICAgICByYXdSZXF1aXJlZEF0dHJpYnV0ZXMgPSBKU09OLnBhcnNlKGRhdGFBdXRoZW50aWNhdGUuQ2hhbGxlbmdlUGFyYW1ldGVycy5yZXF1aXJlZEF0dHJpYnV0ZXMpO1xuICAgICAgfVxuICAgICAgaWYgKHJhd1JlcXVpcmVkQXR0cmlidXRlcykge1xuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHJhd1JlcXVpcmVkQXR0cmlidXRlcy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgIHJlcXVpcmVkQXR0cmlidXRlc1tpXSA9IHJhd1JlcXVpcmVkQXR0cmlidXRlc1tpXS5zdWJzdHIodXNlckF0dHJpYnV0ZXNQcmVmaXgubGVuZ3RoKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgcmV0dXJuIGNhbGxiYWNrLm5ld1Bhc3N3b3JkUmVxdWlyZWQodXNlckF0dHJpYnV0ZXMsIHJlcXVpcmVkQXR0cmlidXRlcyk7XG4gICAgfVxuICAgIGlmIChjaGFsbGVuZ2VOYW1lID09PSAnREVWSUNFX1NSUF9BVVRIJykge1xuICAgICAgdGhpcy5TZXNzaW9uID0gZGF0YUF1dGhlbnRpY2F0ZS5TZXNzaW9uO1xuICAgICAgdGhpcy5nZXREZXZpY2VSZXNwb25zZShjYWxsYmFjayk7XG4gICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgIH1cbiAgICB0aGlzLnNpZ25JblVzZXJTZXNzaW9uID0gdGhpcy5nZXRDb2duaXRvVXNlclNlc3Npb24oZGF0YUF1dGhlbnRpY2F0ZS5BdXRoZW50aWNhdGlvblJlc3VsdCk7XG4gICAgdGhpcy5jaGFsbGVuZ2VOYW1lID0gY2hhbGxlbmdlTmFtZTtcbiAgICB0aGlzLmNhY2hlVG9rZW5zKCk7XG4gICAgdmFyIG5ld0RldmljZU1ldGFkYXRhID0gZGF0YUF1dGhlbnRpY2F0ZS5BdXRoZW50aWNhdGlvblJlc3VsdC5OZXdEZXZpY2VNZXRhZGF0YTtcbiAgICBpZiAobmV3RGV2aWNlTWV0YWRhdGEgPT0gbnVsbCkge1xuICAgICAgcmV0dXJuIGNhbGxiYWNrLm9uU3VjY2Vzcyh0aGlzLnNpZ25JblVzZXJTZXNzaW9uKTtcbiAgICB9XG4gICAgYXV0aGVudGljYXRpb25IZWxwZXIuZ2VuZXJhdGVIYXNoRGV2aWNlKGRhdGFBdXRoZW50aWNhdGUuQXV0aGVudGljYXRpb25SZXN1bHQuTmV3RGV2aWNlTWV0YWRhdGEuRGV2aWNlR3JvdXBLZXksIGRhdGFBdXRoZW50aWNhdGUuQXV0aGVudGljYXRpb25SZXN1bHQuTmV3RGV2aWNlTWV0YWRhdGEuRGV2aWNlS2V5LCBmdW5jdGlvbiAoZXJyR2VuSGFzaCkge1xuICAgICAgaWYgKGVyckdlbkhhc2gpIHtcbiAgICAgICAgcmV0dXJuIGNhbGxiYWNrLm9uRmFpbHVyZShlcnJHZW5IYXNoKTtcbiAgICAgIH1cbiAgICAgIHZhciBkZXZpY2VTZWNyZXRWZXJpZmllckNvbmZpZyA9IHtcbiAgICAgICAgU2FsdDogX2J1ZmZlci5CdWZmZXIuZnJvbShhdXRoZW50aWNhdGlvbkhlbHBlci5nZXRTYWx0RGV2aWNlcygpLCAnaGV4JykudG9TdHJpbmcoJ2Jhc2U2NCcpLFxuICAgICAgICBQYXNzd29yZFZlcmlmaWVyOiBfYnVmZmVyLkJ1ZmZlci5mcm9tKGF1dGhlbnRpY2F0aW9uSGVscGVyLmdldFZlcmlmaWVyRGV2aWNlcygpLCAnaGV4JykudG9TdHJpbmcoJ2Jhc2U2NCcpXG4gICAgICB9O1xuICAgICAgX3RoaXM0LnZlcmlmaWVyRGV2aWNlcyA9IGRldmljZVNlY3JldFZlcmlmaWVyQ29uZmlnLlBhc3N3b3JkVmVyaWZpZXI7XG4gICAgICBfdGhpczQuZGV2aWNlR3JvdXBLZXkgPSBuZXdEZXZpY2VNZXRhZGF0YS5EZXZpY2VHcm91cEtleTtcbiAgICAgIF90aGlzNC5yYW5kb21QYXNzd29yZCA9IGF1dGhlbnRpY2F0aW9uSGVscGVyLmdldFJhbmRvbVBhc3N3b3JkKCk7XG4gICAgICBfdGhpczQuY2xpZW50LnJlcXVlc3QoJ0NvbmZpcm1EZXZpY2UnLCB7XG4gICAgICAgIERldmljZUtleTogbmV3RGV2aWNlTWV0YWRhdGEuRGV2aWNlS2V5LFxuICAgICAgICBBY2Nlc3NUb2tlbjogX3RoaXM0LnNpZ25JblVzZXJTZXNzaW9uLmdldEFjY2Vzc1Rva2VuKCkuZ2V0Snd0VG9rZW4oKSxcbiAgICAgICAgRGV2aWNlU2VjcmV0VmVyaWZpZXJDb25maWc6IGRldmljZVNlY3JldFZlcmlmaWVyQ29uZmlnLFxuICAgICAgICBEZXZpY2VOYW1lOiB1c2VyQWdlbnRcbiAgICAgIH0sIGZ1bmN0aW9uIChlcnJDb25maXJtLCBkYXRhQ29uZmlybSkge1xuICAgICAgICBpZiAoZXJyQ29uZmlybSkge1xuICAgICAgICAgIHJldHVybiBjYWxsYmFjay5vbkZhaWx1cmUoZXJyQ29uZmlybSk7XG4gICAgICAgIH1cbiAgICAgICAgX3RoaXM0LmRldmljZUtleSA9IGRhdGFBdXRoZW50aWNhdGUuQXV0aGVudGljYXRpb25SZXN1bHQuTmV3RGV2aWNlTWV0YWRhdGEuRGV2aWNlS2V5O1xuICAgICAgICBfdGhpczQuY2FjaGVEZXZpY2VLZXlBbmRQYXNzd29yZCgpO1xuICAgICAgICBpZiAoZGF0YUNvbmZpcm0uVXNlckNvbmZpcm1hdGlvbk5lY2Vzc2FyeSA9PT0gdHJ1ZSkge1xuICAgICAgICAgIHJldHVybiBjYWxsYmFjay5vblN1Y2Nlc3MoX3RoaXM0LnNpZ25JblVzZXJTZXNzaW9uLCBkYXRhQ29uZmlybS5Vc2VyQ29uZmlybWF0aW9uTmVjZXNzYXJ5KTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gY2FsbGJhY2sub25TdWNjZXNzKF90aGlzNC5zaWduSW5Vc2VyU2Vzc2lvbik7XG4gICAgICB9KTtcbiAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgfSk7XG4gICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgfVxuXG4gIC8qKlxuICAgKiBUaGlzIG1ldGhvZCBpcyB1c2VyIHRvIGNvbXBsZXRlIHRoZSBORVdfUEFTU1dPUkRfUkVRVUlSRUQgY2hhbGxlbmdlLlxuICAgKiBQYXNzIHRoZSBuZXcgcGFzc3dvcmQgd2l0aCBhbnkgbmV3IHVzZXIgYXR0cmlidXRlcyB0byBiZSB1cGRhdGVkLlxuICAgKiBVc2VyIGF0dHJpYnV0ZSBrZXlzIG11c3QgYmUgb2YgZm9ybWF0IHVzZXJBdHRyaWJ1dGVzLjxhdHRyaWJ1dGVfbmFtZT4uXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBuZXdQYXNzd29yZCBuZXcgcGFzc3dvcmQgZm9yIHRoaXMgdXNlclxuICAgKiBAcGFyYW0ge29iamVjdH0gcmVxdWlyZWRBdHRyaWJ1dGVEYXRhIG1hcCB3aXRoIHZhbHVlcyBmb3IgYWxsIHJlcXVpcmVkIGF0dHJpYnV0ZXNcbiAgICogQHBhcmFtIHtvYmplY3R9IGNhbGxiYWNrIFJlc3VsdCBjYWxsYmFjayBtYXAuXG4gICAqIEBwYXJhbSB7b25GYWlsdXJlfSBjYWxsYmFjay5vbkZhaWx1cmUgQ2FsbGVkIG9uIGFueSBlcnJvci5cbiAgICogQHBhcmFtIHttZmFSZXF1aXJlZH0gY2FsbGJhY2subWZhUmVxdWlyZWQgTUZBIGNvZGUgcmVxdWlyZWQgdG8gY29udGludWUuXG4gICAqIEBwYXJhbSB7Y3VzdG9tQ2hhbGxlbmdlfSBjYWxsYmFjay5jdXN0b21DaGFsbGVuZ2UgQ3VzdG9tIGNoYWxsZW5nZVxuICAgKiAgICAgICAgIHJlc3BvbnNlIHJlcXVpcmVkIHRvIGNvbnRpbnVlLlxuICAgKiBAcGFyYW0ge2F1dGhTdWNjZXNzfSBjYWxsYmFjay5vblN1Y2Nlc3MgQ2FsbGVkIG9uIHN1Y2Nlc3Mgd2l0aCB0aGUgbmV3IHNlc3Npb24uXG4gICAqIEBwYXJhbSB7Q2xpZW50TWV0YWRhdGF9IGNsaWVudE1ldGFkYXRhIG9iamVjdCB3aGljaCBpcyBwYXNzZWQgZnJvbSBjbGllbnQgdG8gQ29nbml0byBMYW1iZGEgdHJpZ2dlclxuICAgKiBAcmV0dXJucyB7dm9pZH1cbiAgICovO1xuICBfcHJvdG8uY29tcGxldGVOZXdQYXNzd29yZENoYWxsZW5nZSA9IGZ1bmN0aW9uIGNvbXBsZXRlTmV3UGFzc3dvcmRDaGFsbGVuZ2UobmV3UGFzc3dvcmQsIHJlcXVpcmVkQXR0cmlidXRlRGF0YSwgY2FsbGJhY2ssIGNsaWVudE1ldGFkYXRhKSB7XG4gICAgdmFyIF90aGlzNSA9IHRoaXM7XG4gICAgaWYgKCFuZXdQYXNzd29yZCkge1xuICAgICAgcmV0dXJuIGNhbGxiYWNrLm9uRmFpbHVyZShuZXcgRXJyb3IoJ05ldyBwYXNzd29yZCBpcyByZXF1aXJlZC4nKSk7XG4gICAgfVxuICAgIHZhciBhdXRoZW50aWNhdGlvbkhlbHBlciA9IG5ldyBfQXV0aGVudGljYXRpb25IZWxwZXJbXCJkZWZhdWx0XCJdKHRoaXMucG9vbC5nZXRVc2VyUG9vbE5hbWUoKSk7XG4gICAgdmFyIHVzZXJBdHRyaWJ1dGVzUHJlZml4ID0gYXV0aGVudGljYXRpb25IZWxwZXIuZ2V0TmV3UGFzc3dvcmRSZXF1aXJlZENoYWxsZW5nZVVzZXJBdHRyaWJ1dGVQcmVmaXgoKTtcbiAgICB2YXIgZmluYWxVc2VyQXR0cmlidXRlcyA9IHt9O1xuICAgIGlmIChyZXF1aXJlZEF0dHJpYnV0ZURhdGEpIHtcbiAgICAgIE9iamVjdC5rZXlzKHJlcXVpcmVkQXR0cmlidXRlRGF0YSkuZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7XG4gICAgICAgIGZpbmFsVXNlckF0dHJpYnV0ZXNbdXNlckF0dHJpYnV0ZXNQcmVmaXggKyBrZXldID0gcmVxdWlyZWRBdHRyaWJ1dGVEYXRhW2tleV07XG4gICAgICB9KTtcbiAgICB9XG4gICAgZmluYWxVc2VyQXR0cmlidXRlcy5ORVdfUEFTU1dPUkQgPSBuZXdQYXNzd29yZDtcbiAgICBmaW5hbFVzZXJBdHRyaWJ1dGVzLlVTRVJOQU1FID0gdGhpcy51c2VybmFtZTtcbiAgICB2YXIganNvblJlcSA9IHtcbiAgICAgIENoYWxsZW5nZU5hbWU6ICdORVdfUEFTU1dPUkRfUkVRVUlSRUQnLFxuICAgICAgQ2xpZW50SWQ6IHRoaXMucG9vbC5nZXRDbGllbnRJZCgpLFxuICAgICAgQ2hhbGxlbmdlUmVzcG9uc2VzOiBmaW5hbFVzZXJBdHRyaWJ1dGVzLFxuICAgICAgU2Vzc2lvbjogdGhpcy5TZXNzaW9uLFxuICAgICAgQ2xpZW50TWV0YWRhdGE6IGNsaWVudE1ldGFkYXRhXG4gICAgfTtcbiAgICBpZiAodGhpcy5nZXRVc2VyQ29udGV4dERhdGEoKSkge1xuICAgICAganNvblJlcS5Vc2VyQ29udGV4dERhdGEgPSB0aGlzLmdldFVzZXJDb250ZXh0RGF0YSgpO1xuICAgIH1cbiAgICB0aGlzLmNsaWVudC5yZXF1ZXN0KCdSZXNwb25kVG9BdXRoQ2hhbGxlbmdlJywganNvblJlcSwgZnVuY3Rpb24gKGVyckF1dGhlbnRpY2F0ZSwgZGF0YUF1dGhlbnRpY2F0ZSkge1xuICAgICAgaWYgKGVyckF1dGhlbnRpY2F0ZSkge1xuICAgICAgICByZXR1cm4gY2FsbGJhY2sub25GYWlsdXJlKGVyckF1dGhlbnRpY2F0ZSk7XG4gICAgICB9XG4gICAgICByZXR1cm4gX3RoaXM1LmF1dGhlbnRpY2F0ZVVzZXJJbnRlcm5hbChkYXRhQXV0aGVudGljYXRlLCBhdXRoZW50aWNhdGlvbkhlbHBlciwgY2FsbGJhY2spO1xuICAgIH0pO1xuICAgIHJldHVybiB1bmRlZmluZWQ7XG4gIH1cblxuICAvKipcbiAgICogVGhpcyBpcyB1c2VkIHRvIGdldCBhIHNlc3Npb24gdXNpbmcgZGV2aWNlIGF1dGhlbnRpY2F0aW9uLiBJdCBpcyBjYWxsZWQgYXQgdGhlIGVuZCBvZiB1c2VyXG4gICAqIGF1dGhlbnRpY2F0aW9uXG4gICAqXG4gICAqIEBwYXJhbSB7b2JqZWN0fSBjYWxsYmFjayBSZXN1bHQgY2FsbGJhY2sgbWFwLlxuICAgKiBAcGFyYW0ge29uRmFpbHVyZX0gY2FsbGJhY2sub25GYWlsdXJlIENhbGxlZCBvbiBhbnkgZXJyb3IuXG4gICAqIEBwYXJhbSB7YXV0aFN1Y2Nlc3N9IGNhbGxiYWNrLm9uU3VjY2VzcyBDYWxsZWQgb24gc3VjY2VzcyB3aXRoIHRoZSBuZXcgc2Vzc2lvbi5cbiAgICogQHBhcmFtIHtDbGllbnRNZXRhZGF0YX0gY2xpZW50TWV0YWRhdGEgb2JqZWN0IHdoaWNoIGlzIHBhc3NlZCBmcm9tIGNsaWVudCB0byBDb2duaXRvIExhbWJkYSB0cmlnZ2VyXG4gICAqIEByZXR1cm5zIHt2b2lkfVxuICAgKiBAcHJpdmF0ZVxuICAgKi87XG4gIF9wcm90by5nZXREZXZpY2VSZXNwb25zZSA9IGZ1bmN0aW9uIGdldERldmljZVJlc3BvbnNlKGNhbGxiYWNrLCBjbGllbnRNZXRhZGF0YSkge1xuICAgIHZhciBfdGhpczYgPSB0aGlzO1xuICAgIHZhciBhdXRoZW50aWNhdGlvbkhlbHBlciA9IG5ldyBfQXV0aGVudGljYXRpb25IZWxwZXJbXCJkZWZhdWx0XCJdKHRoaXMuZGV2aWNlR3JvdXBLZXkpO1xuICAgIHZhciBkYXRlSGVscGVyID0gbmV3IF9EYXRlSGVscGVyW1wiZGVmYXVsdFwiXSgpO1xuICAgIHZhciBhdXRoUGFyYW1ldGVycyA9IHt9O1xuICAgIGF1dGhQYXJhbWV0ZXJzLlVTRVJOQU1FID0gdGhpcy51c2VybmFtZTtcbiAgICBhdXRoUGFyYW1ldGVycy5ERVZJQ0VfS0VZID0gdGhpcy5kZXZpY2VLZXk7XG4gICAgYXV0aGVudGljYXRpb25IZWxwZXIuZ2V0TGFyZ2VBVmFsdWUoZnVuY3Rpb24gKGVyckFWYWx1ZSwgYVZhbHVlKSB7XG4gICAgICAvLyBnZXRMYXJnZUFWYWx1ZSBjYWxsYmFjayBzdGFydFxuICAgICAgaWYgKGVyckFWYWx1ZSkge1xuICAgICAgICBjYWxsYmFjay5vbkZhaWx1cmUoZXJyQVZhbHVlKTtcbiAgICAgIH1cbiAgICAgIGF1dGhQYXJhbWV0ZXJzLlNSUF9BID0gYVZhbHVlLnRvU3RyaW5nKDE2KTtcbiAgICAgIHZhciBqc29uUmVxID0ge1xuICAgICAgICBDaGFsbGVuZ2VOYW1lOiAnREVWSUNFX1NSUF9BVVRIJyxcbiAgICAgICAgQ2xpZW50SWQ6IF90aGlzNi5wb29sLmdldENsaWVudElkKCksXG4gICAgICAgIENoYWxsZW5nZVJlc3BvbnNlczogYXV0aFBhcmFtZXRlcnMsXG4gICAgICAgIENsaWVudE1ldGFkYXRhOiBjbGllbnRNZXRhZGF0YSxcbiAgICAgICAgU2Vzc2lvbjogX3RoaXM2LlNlc3Npb25cbiAgICAgIH07XG4gICAgICBpZiAoX3RoaXM2LmdldFVzZXJDb250ZXh0RGF0YSgpKSB7XG4gICAgICAgIGpzb25SZXEuVXNlckNvbnRleHREYXRhID0gX3RoaXM2LmdldFVzZXJDb250ZXh0RGF0YSgpO1xuICAgICAgfVxuICAgICAgX3RoaXM2LmNsaWVudC5yZXF1ZXN0KCdSZXNwb25kVG9BdXRoQ2hhbGxlbmdlJywganNvblJlcSwgZnVuY3Rpb24gKGVyciwgZGF0YSkge1xuICAgICAgICBpZiAoZXJyKSB7XG4gICAgICAgICAgcmV0dXJuIGNhbGxiYWNrLm9uRmFpbHVyZShlcnIpO1xuICAgICAgICB9XG4gICAgICAgIHZhciBjaGFsbGVuZ2VQYXJhbWV0ZXJzID0gZGF0YS5DaGFsbGVuZ2VQYXJhbWV0ZXJzO1xuICAgICAgICB2YXIgc2VydmVyQlZhbHVlID0gbmV3IF9CaWdJbnRlZ2VyW1wiZGVmYXVsdFwiXShjaGFsbGVuZ2VQYXJhbWV0ZXJzLlNSUF9CLCAxNik7XG4gICAgICAgIHZhciBzYWx0ID0gbmV3IF9CaWdJbnRlZ2VyW1wiZGVmYXVsdFwiXShjaGFsbGVuZ2VQYXJhbWV0ZXJzLlNBTFQsIDE2KTtcbiAgICAgICAgYXV0aGVudGljYXRpb25IZWxwZXIuZ2V0UGFzc3dvcmRBdXRoZW50aWNhdGlvbktleShfdGhpczYuZGV2aWNlS2V5LCBfdGhpczYucmFuZG9tUGFzc3dvcmQsIHNlcnZlckJWYWx1ZSwgc2FsdCwgZnVuY3Rpb24gKGVyckhrZGYsIGhrZGYpIHtcbiAgICAgICAgICAvLyBnZXRQYXNzd29yZEF1dGhlbnRpY2F0aW9uS2V5IGNhbGxiYWNrIHN0YXJ0XG4gICAgICAgICAgaWYgKGVyckhrZGYpIHtcbiAgICAgICAgICAgIHJldHVybiBjYWxsYmFjay5vbkZhaWx1cmUoZXJySGtkZik7XG4gICAgICAgICAgfVxuICAgICAgICAgIHZhciBkYXRlTm93ID0gZGF0ZUhlbHBlci5nZXROb3dTdHJpbmcoKTtcbiAgICAgICAgICB2YXIgY29uY2F0QnVmZmVyID0gX2J1ZmZlci5CdWZmZXIuY29uY2F0KFtfYnVmZmVyLkJ1ZmZlci5mcm9tKF90aGlzNi5kZXZpY2VHcm91cEtleSwgJ3V0ZjgnKSwgX2J1ZmZlci5CdWZmZXIuZnJvbShfdGhpczYuZGV2aWNlS2V5LCAndXRmOCcpLCBfYnVmZmVyLkJ1ZmZlci5mcm9tKGNoYWxsZW5nZVBhcmFtZXRlcnMuU0VDUkVUX0JMT0NLLCAnYmFzZTY0JyksIF9idWZmZXIuQnVmZmVyLmZyb20oZGF0ZU5vdywgJ3V0ZjgnKV0pO1xuICAgICAgICAgIHZhciBhd3NDcnlwdG9IYXNoID0gbmV3IF9zaGEyNTZKcy5TaGEyNTYoaGtkZik7XG4gICAgICAgICAgYXdzQ3J5cHRvSGFzaC51cGRhdGUoY29uY2F0QnVmZmVyKTtcbiAgICAgICAgICB2YXIgcmVzdWx0RnJvbUFXU0NyeXB0byA9IGF3c0NyeXB0b0hhc2guZGlnZXN0U3luYygpO1xuICAgICAgICAgIHZhciBzaWduYXR1cmVTdHJpbmcgPSBfYnVmZmVyLkJ1ZmZlci5mcm9tKHJlc3VsdEZyb21BV1NDcnlwdG8pLnRvU3RyaW5nKCdiYXNlNjQnKTtcbiAgICAgICAgICB2YXIgY2hhbGxlbmdlUmVzcG9uc2VzID0ge307XG4gICAgICAgICAgY2hhbGxlbmdlUmVzcG9uc2VzLlVTRVJOQU1FID0gX3RoaXM2LnVzZXJuYW1lO1xuICAgICAgICAgIGNoYWxsZW5nZVJlc3BvbnNlcy5QQVNTV09SRF9DTEFJTV9TRUNSRVRfQkxPQ0sgPSBjaGFsbGVuZ2VQYXJhbWV0ZXJzLlNFQ1JFVF9CTE9DSztcbiAgICAgICAgICBjaGFsbGVuZ2VSZXNwb25zZXMuVElNRVNUQU1QID0gZGF0ZU5vdztcbiAgICAgICAgICBjaGFsbGVuZ2VSZXNwb25zZXMuUEFTU1dPUkRfQ0xBSU1fU0lHTkFUVVJFID0gc2lnbmF0dXJlU3RyaW5nO1xuICAgICAgICAgIGNoYWxsZW5nZVJlc3BvbnNlcy5ERVZJQ0VfS0VZID0gX3RoaXM2LmRldmljZUtleTtcbiAgICAgICAgICB2YXIganNvblJlcVJlc3AgPSB7XG4gICAgICAgICAgICBDaGFsbGVuZ2VOYW1lOiAnREVWSUNFX1BBU1NXT1JEX1ZFUklGSUVSJyxcbiAgICAgICAgICAgIENsaWVudElkOiBfdGhpczYucG9vbC5nZXRDbGllbnRJZCgpLFxuICAgICAgICAgICAgQ2hhbGxlbmdlUmVzcG9uc2VzOiBjaGFsbGVuZ2VSZXNwb25zZXMsXG4gICAgICAgICAgICBTZXNzaW9uOiBkYXRhLlNlc3Npb25cbiAgICAgICAgICB9O1xuICAgICAgICAgIGlmIChfdGhpczYuZ2V0VXNlckNvbnRleHREYXRhKCkpIHtcbiAgICAgICAgICAgIGpzb25SZXFSZXNwLlVzZXJDb250ZXh0RGF0YSA9IF90aGlzNi5nZXRVc2VyQ29udGV4dERhdGEoKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgX3RoaXM2LmNsaWVudC5yZXF1ZXN0KCdSZXNwb25kVG9BdXRoQ2hhbGxlbmdlJywganNvblJlcVJlc3AsIGZ1bmN0aW9uIChlcnJBdXRoZW50aWNhdGUsIGRhdGFBdXRoZW50aWNhdGUpIHtcbiAgICAgICAgICAgIGlmIChlcnJBdXRoZW50aWNhdGUpIHtcbiAgICAgICAgICAgICAgcmV0dXJuIGNhbGxiYWNrLm9uRmFpbHVyZShlcnJBdXRoZW50aWNhdGUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgX3RoaXM2LnNpZ25JblVzZXJTZXNzaW9uID0gX3RoaXM2LmdldENvZ25pdG9Vc2VyU2Vzc2lvbihkYXRhQXV0aGVudGljYXRlLkF1dGhlbnRpY2F0aW9uUmVzdWx0KTtcbiAgICAgICAgICAgIF90aGlzNi5jYWNoZVRva2VucygpO1xuICAgICAgICAgICAgcmV0dXJuIGNhbGxiYWNrLm9uU3VjY2VzcyhfdGhpczYuc2lnbkluVXNlclNlc3Npb24pO1xuICAgICAgICAgIH0pO1xuICAgICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgICAgICAgLy8gZ2V0UGFzc3dvcmRBdXRoZW50aWNhdGlvbktleSBjYWxsYmFjayBlbmRcbiAgICAgICAgfSk7XG5cbiAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICAgIH0pO1xuICAgICAgLy8gZ2V0TGFyZ2VBVmFsdWUgY2FsbGJhY2sgZW5kXG4gICAgfSk7XG4gIH1cblxuICAvKipcbiAgICogVGhpcyBpcyB1c2VkIGZvciBhIGNlcnRhaW4gdXNlciB0byBjb25maXJtIHRoZSByZWdpc3RyYXRpb24gYnkgdXNpbmcgYSBjb25maXJtYXRpb24gY29kZVxuICAgKiBAcGFyYW0ge3N0cmluZ30gY29uZmlybWF0aW9uQ29kZSBDb2RlIGVudGVyZWQgYnkgdXNlci5cbiAgICogQHBhcmFtIHtib29sfSBmb3JjZUFsaWFzQ3JlYXRpb24gQWxsb3cgbWlncmF0aW5nIGZyb20gYW4gZXhpc3RpbmcgZW1haWwgLyBwaG9uZSBudW1iZXIuXG4gICAqIEBwYXJhbSB7bm9kZUNhbGxiYWNrPHN0cmluZz59IGNhbGxiYWNrIENhbGxlZCBvbiBzdWNjZXNzIG9yIGVycm9yLlxuICAgKiBAcGFyYW0ge0NsaWVudE1ldGFkYXRhfSBjbGllbnRNZXRhZGF0YSBvYmplY3Qgd2hpY2ggaXMgcGFzc2VkIGZyb20gY2xpZW50IHRvIENvZ25pdG8gTGFtYmRhIHRyaWdnZXJcbiAgICogQHJldHVybnMge3ZvaWR9XG4gICAqLztcbiAgX3Byb3RvLmNvbmZpcm1SZWdpc3RyYXRpb24gPSBmdW5jdGlvbiBjb25maXJtUmVnaXN0cmF0aW9uKGNvbmZpcm1hdGlvbkNvZGUsIGZvcmNlQWxpYXNDcmVhdGlvbiwgY2FsbGJhY2ssIGNsaWVudE1ldGFkYXRhKSB7XG4gICAgdmFyIGpzb25SZXEgPSB7XG4gICAgICBDbGllbnRJZDogdGhpcy5wb29sLmdldENsaWVudElkKCksXG4gICAgICBDb25maXJtYXRpb25Db2RlOiBjb25maXJtYXRpb25Db2RlLFxuICAgICAgVXNlcm5hbWU6IHRoaXMudXNlcm5hbWUsXG4gICAgICBGb3JjZUFsaWFzQ3JlYXRpb246IGZvcmNlQWxpYXNDcmVhdGlvbixcbiAgICAgIENsaWVudE1ldGFkYXRhOiBjbGllbnRNZXRhZGF0YVxuICAgIH07XG4gICAgaWYgKHRoaXMuZ2V0VXNlckNvbnRleHREYXRhKCkpIHtcbiAgICAgIGpzb25SZXEuVXNlckNvbnRleHREYXRhID0gdGhpcy5nZXRVc2VyQ29udGV4dERhdGEoKTtcbiAgICB9XG4gICAgdGhpcy5jbGllbnQucmVxdWVzdCgnQ29uZmlybVNpZ25VcCcsIGpzb25SZXEsIGZ1bmN0aW9uIChlcnIpIHtcbiAgICAgIGlmIChlcnIpIHtcbiAgICAgICAgcmV0dXJuIGNhbGxiYWNrKGVyciwgbnVsbCk7XG4gICAgICB9XG4gICAgICByZXR1cm4gY2FsbGJhY2sobnVsbCwgJ1NVQ0NFU1MnKTtcbiAgICB9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBUaGlzIGlzIHVzZWQgYnkgdGhlIHVzZXIgb25jZSBoZSBoYXMgdGhlIHJlc3BvbnNlcyB0byBhIGN1c3RvbSBjaGFsbGVuZ2VcbiAgICogQHBhcmFtIHtzdHJpbmd9IGFuc3dlckNoYWxsZW5nZSBUaGUgY3VzdG9tIGNoYWxsZW5nZSBhbnN3ZXIuXG4gICAqIEBwYXJhbSB7b2JqZWN0fSBjYWxsYmFjayBSZXN1bHQgY2FsbGJhY2sgbWFwLlxuICAgKiBAcGFyYW0ge29uRmFpbHVyZX0gY2FsbGJhY2sub25GYWlsdXJlIENhbGxlZCBvbiBhbnkgZXJyb3IuXG4gICAqIEBwYXJhbSB7Y3VzdG9tQ2hhbGxlbmdlfSBjYWxsYmFjay5jdXN0b21DaGFsbGVuZ2VcbiAgICogICAgQ3VzdG9tIGNoYWxsZW5nZSByZXNwb25zZSByZXF1aXJlZCB0byBjb250aW51ZS5cbiAgICogQHBhcmFtIHthdXRoU3VjY2Vzc30gY2FsbGJhY2sub25TdWNjZXNzIENhbGxlZCBvbiBzdWNjZXNzIHdpdGggdGhlIG5ldyBzZXNzaW9uLlxuICAgKiBAcGFyYW0ge0NsaWVudE1ldGFkYXRhfSBjbGllbnRNZXRhZGF0YSBvYmplY3Qgd2hpY2ggaXMgcGFzc2VkIGZyb20gY2xpZW50IHRvIENvZ25pdG8gTGFtYmRhIHRyaWdnZXJcbiAgICogQHJldHVybnMge3ZvaWR9XG4gICAqLztcbiAgX3Byb3RvLnNlbmRDdXN0b21DaGFsbGVuZ2VBbnN3ZXIgPSBmdW5jdGlvbiBzZW5kQ3VzdG9tQ2hhbGxlbmdlQW5zd2VyKGFuc3dlckNoYWxsZW5nZSwgY2FsbGJhY2ssIGNsaWVudE1ldGFkYXRhKSB7XG4gICAgdmFyIF90aGlzNyA9IHRoaXM7XG4gICAgdmFyIGNoYWxsZW5nZVJlc3BvbnNlcyA9IHt9O1xuICAgIGNoYWxsZW5nZVJlc3BvbnNlcy5VU0VSTkFNRSA9IHRoaXMudXNlcm5hbWU7XG4gICAgY2hhbGxlbmdlUmVzcG9uc2VzLkFOU1dFUiA9IGFuc3dlckNoYWxsZW5nZTtcbiAgICB2YXIgYXV0aGVudGljYXRpb25IZWxwZXIgPSBuZXcgX0F1dGhlbnRpY2F0aW9uSGVscGVyW1wiZGVmYXVsdFwiXSh0aGlzLnBvb2wuZ2V0VXNlclBvb2xOYW1lKCkpO1xuICAgIHRoaXMuZ2V0Q2FjaGVkRGV2aWNlS2V5QW5kUGFzc3dvcmQoKTtcbiAgICBpZiAodGhpcy5kZXZpY2VLZXkgIT0gbnVsbCkge1xuICAgICAgY2hhbGxlbmdlUmVzcG9uc2VzLkRFVklDRV9LRVkgPSB0aGlzLmRldmljZUtleTtcbiAgICB9XG4gICAgdmFyIGpzb25SZXEgPSB7XG4gICAgICBDaGFsbGVuZ2VOYW1lOiAnQ1VTVE9NX0NIQUxMRU5HRScsXG4gICAgICBDaGFsbGVuZ2VSZXNwb25zZXM6IGNoYWxsZW5nZVJlc3BvbnNlcyxcbiAgICAgIENsaWVudElkOiB0aGlzLnBvb2wuZ2V0Q2xpZW50SWQoKSxcbiAgICAgIFNlc3Npb246IHRoaXMuU2Vzc2lvbixcbiAgICAgIENsaWVudE1ldGFkYXRhOiBjbGllbnRNZXRhZGF0YVxuICAgIH07XG4gICAgaWYgKHRoaXMuZ2V0VXNlckNvbnRleHREYXRhKCkpIHtcbiAgICAgIGpzb25SZXEuVXNlckNvbnRleHREYXRhID0gdGhpcy5nZXRVc2VyQ29udGV4dERhdGEoKTtcbiAgICB9XG4gICAgdGhpcy5jbGllbnQucmVxdWVzdCgnUmVzcG9uZFRvQXV0aENoYWxsZW5nZScsIGpzb25SZXEsIGZ1bmN0aW9uIChlcnIsIGRhdGEpIHtcbiAgICAgIGlmIChlcnIpIHtcbiAgICAgICAgcmV0dXJuIGNhbGxiYWNrLm9uRmFpbHVyZShlcnIpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIF90aGlzNy5hdXRoZW50aWNhdGVVc2VySW50ZXJuYWwoZGF0YSwgYXV0aGVudGljYXRpb25IZWxwZXIsIGNhbGxiYWNrKTtcbiAgICB9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBUaGlzIGlzIHVzZWQgYnkgdGhlIHVzZXIgb25jZSBoZSBoYXMgYW4gTUZBIGNvZGVcbiAgICogQHBhcmFtIHtzdHJpbmd9IGNvbmZpcm1hdGlvbkNvZGUgVGhlIE1GQSBjb2RlIGVudGVyZWQgYnkgdGhlIHVzZXIuXG4gICAqIEBwYXJhbSB7b2JqZWN0fSBjYWxsYmFjayBSZXN1bHQgY2FsbGJhY2sgbWFwLlxuICAgKiBAcGFyYW0ge3N0cmluZ30gbWZhVHlwZSBUaGUgbWZhIHdlIGFyZSByZXBseWluZyB0by5cbiAgICogQHBhcmFtIHtvbkZhaWx1cmV9IGNhbGxiYWNrLm9uRmFpbHVyZSBDYWxsZWQgb24gYW55IGVycm9yLlxuICAgKiBAcGFyYW0ge2F1dGhTdWNjZXNzfSBjYWxsYmFjay5vblN1Y2Nlc3MgQ2FsbGVkIG9uIHN1Y2Nlc3Mgd2l0aCB0aGUgbmV3IHNlc3Npb24uXG4gICAqIEBwYXJhbSB7Q2xpZW50TWV0YWRhdGF9IGNsaWVudE1ldGFkYXRhIG9iamVjdCB3aGljaCBpcyBwYXNzZWQgZnJvbSBjbGllbnQgdG8gQ29nbml0byBMYW1iZGEgdHJpZ2dlclxuICAgKiBAcmV0dXJucyB7dm9pZH1cbiAgICovO1xuICBfcHJvdG8uc2VuZE1GQUNvZGUgPSBmdW5jdGlvbiBzZW5kTUZBQ29kZShjb25maXJtYXRpb25Db2RlLCBjYWxsYmFjaywgbWZhVHlwZSwgY2xpZW50TWV0YWRhdGEpIHtcbiAgICB2YXIgX3RoaXM4ID0gdGhpcztcbiAgICB2YXIgY2hhbGxlbmdlUmVzcG9uc2VzID0ge307XG4gICAgY2hhbGxlbmdlUmVzcG9uc2VzLlVTRVJOQU1FID0gdGhpcy51c2VybmFtZTtcbiAgICBjaGFsbGVuZ2VSZXNwb25zZXMuU01TX01GQV9DT0RFID0gY29uZmlybWF0aW9uQ29kZTtcbiAgICB2YXIgbWZhVHlwZVNlbGVjdGlvbiA9IG1mYVR5cGUgfHwgJ1NNU19NRkEnO1xuICAgIGlmIChtZmFUeXBlU2VsZWN0aW9uID09PSAnU09GVFdBUkVfVE9LRU5fTUZBJykge1xuICAgICAgY2hhbGxlbmdlUmVzcG9uc2VzLlNPRlRXQVJFX1RPS0VOX01GQV9DT0RFID0gY29uZmlybWF0aW9uQ29kZTtcbiAgICB9XG4gICAgaWYgKHRoaXMuZGV2aWNlS2V5ICE9IG51bGwpIHtcbiAgICAgIGNoYWxsZW5nZVJlc3BvbnNlcy5ERVZJQ0VfS0VZID0gdGhpcy5kZXZpY2VLZXk7XG4gICAgfVxuICAgIHZhciBqc29uUmVxID0ge1xuICAgICAgQ2hhbGxlbmdlTmFtZTogbWZhVHlwZVNlbGVjdGlvbixcbiAgICAgIENoYWxsZW5nZVJlc3BvbnNlczogY2hhbGxlbmdlUmVzcG9uc2VzLFxuICAgICAgQ2xpZW50SWQ6IHRoaXMucG9vbC5nZXRDbGllbnRJZCgpLFxuICAgICAgU2Vzc2lvbjogdGhpcy5TZXNzaW9uLFxuICAgICAgQ2xpZW50TWV0YWRhdGE6IGNsaWVudE1ldGFkYXRhXG4gICAgfTtcbiAgICBpZiAodGhpcy5nZXRVc2VyQ29udGV4dERhdGEoKSkge1xuICAgICAganNvblJlcS5Vc2VyQ29udGV4dERhdGEgPSB0aGlzLmdldFVzZXJDb250ZXh0RGF0YSgpO1xuICAgIH1cbiAgICB0aGlzLmNsaWVudC5yZXF1ZXN0KCdSZXNwb25kVG9BdXRoQ2hhbGxlbmdlJywganNvblJlcSwgZnVuY3Rpb24gKGVyciwgZGF0YUF1dGhlbnRpY2F0ZSkge1xuICAgICAgaWYgKGVycikge1xuICAgICAgICByZXR1cm4gY2FsbGJhY2sub25GYWlsdXJlKGVycik7XG4gICAgICB9XG4gICAgICB2YXIgY2hhbGxlbmdlTmFtZSA9IGRhdGFBdXRoZW50aWNhdGUuQ2hhbGxlbmdlTmFtZTtcbiAgICAgIGlmIChjaGFsbGVuZ2VOYW1lID09PSAnREVWSUNFX1NSUF9BVVRIJykge1xuICAgICAgICBfdGhpczguZ2V0RGV2aWNlUmVzcG9uc2UoY2FsbGJhY2spO1xuICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgICAgfVxuICAgICAgX3RoaXM4LnNpZ25JblVzZXJTZXNzaW9uID0gX3RoaXM4LmdldENvZ25pdG9Vc2VyU2Vzc2lvbihkYXRhQXV0aGVudGljYXRlLkF1dGhlbnRpY2F0aW9uUmVzdWx0KTtcbiAgICAgIF90aGlzOC5jYWNoZVRva2VucygpO1xuICAgICAgaWYgKGRhdGFBdXRoZW50aWNhdGUuQXV0aGVudGljYXRpb25SZXN1bHQuTmV3RGV2aWNlTWV0YWRhdGEgPT0gbnVsbCkge1xuICAgICAgICByZXR1cm4gY2FsbGJhY2sub25TdWNjZXNzKF90aGlzOC5zaWduSW5Vc2VyU2Vzc2lvbik7XG4gICAgICB9XG4gICAgICB2YXIgYXV0aGVudGljYXRpb25IZWxwZXIgPSBuZXcgX0F1dGhlbnRpY2F0aW9uSGVscGVyW1wiZGVmYXVsdFwiXShfdGhpczgucG9vbC5nZXRVc2VyUG9vbE5hbWUoKSk7XG4gICAgICBhdXRoZW50aWNhdGlvbkhlbHBlci5nZW5lcmF0ZUhhc2hEZXZpY2UoZGF0YUF1dGhlbnRpY2F0ZS5BdXRoZW50aWNhdGlvblJlc3VsdC5OZXdEZXZpY2VNZXRhZGF0YS5EZXZpY2VHcm91cEtleSwgZGF0YUF1dGhlbnRpY2F0ZS5BdXRoZW50aWNhdGlvblJlc3VsdC5OZXdEZXZpY2VNZXRhZGF0YS5EZXZpY2VLZXksIGZ1bmN0aW9uIChlcnJHZW5IYXNoKSB7XG4gICAgICAgIGlmIChlcnJHZW5IYXNoKSB7XG4gICAgICAgICAgcmV0dXJuIGNhbGxiYWNrLm9uRmFpbHVyZShlcnJHZW5IYXNoKTtcbiAgICAgICAgfVxuICAgICAgICB2YXIgZGV2aWNlU2VjcmV0VmVyaWZpZXJDb25maWcgPSB7XG4gICAgICAgICAgU2FsdDogX2J1ZmZlci5CdWZmZXIuZnJvbShhdXRoZW50aWNhdGlvbkhlbHBlci5nZXRTYWx0RGV2aWNlcygpLCAnaGV4JykudG9TdHJpbmcoJ2Jhc2U2NCcpLFxuICAgICAgICAgIFBhc3N3b3JkVmVyaWZpZXI6IF9idWZmZXIuQnVmZmVyLmZyb20oYXV0aGVudGljYXRpb25IZWxwZXIuZ2V0VmVyaWZpZXJEZXZpY2VzKCksICdoZXgnKS50b1N0cmluZygnYmFzZTY0JylcbiAgICAgICAgfTtcbiAgICAgICAgX3RoaXM4LnZlcmlmaWVyRGV2aWNlcyA9IGRldmljZVNlY3JldFZlcmlmaWVyQ29uZmlnLlBhc3N3b3JkVmVyaWZpZXI7XG4gICAgICAgIF90aGlzOC5kZXZpY2VHcm91cEtleSA9IGRhdGFBdXRoZW50aWNhdGUuQXV0aGVudGljYXRpb25SZXN1bHQuTmV3RGV2aWNlTWV0YWRhdGEuRGV2aWNlR3JvdXBLZXk7XG4gICAgICAgIF90aGlzOC5yYW5kb21QYXNzd29yZCA9IGF1dGhlbnRpY2F0aW9uSGVscGVyLmdldFJhbmRvbVBhc3N3b3JkKCk7XG4gICAgICAgIF90aGlzOC5jbGllbnQucmVxdWVzdCgnQ29uZmlybURldmljZScsIHtcbiAgICAgICAgICBEZXZpY2VLZXk6IGRhdGFBdXRoZW50aWNhdGUuQXV0aGVudGljYXRpb25SZXN1bHQuTmV3RGV2aWNlTWV0YWRhdGEuRGV2aWNlS2V5LFxuICAgICAgICAgIEFjY2Vzc1Rva2VuOiBfdGhpczguc2lnbkluVXNlclNlc3Npb24uZ2V0QWNjZXNzVG9rZW4oKS5nZXRKd3RUb2tlbigpLFxuICAgICAgICAgIERldmljZVNlY3JldFZlcmlmaWVyQ29uZmlnOiBkZXZpY2VTZWNyZXRWZXJpZmllckNvbmZpZyxcbiAgICAgICAgICBEZXZpY2VOYW1lOiB1c2VyQWdlbnRcbiAgICAgICAgfSwgZnVuY3Rpb24gKGVyckNvbmZpcm0sIGRhdGFDb25maXJtKSB7XG4gICAgICAgICAgaWYgKGVyckNvbmZpcm0pIHtcbiAgICAgICAgICAgIHJldHVybiBjYWxsYmFjay5vbkZhaWx1cmUoZXJyQ29uZmlybSk7XG4gICAgICAgICAgfVxuICAgICAgICAgIF90aGlzOC5kZXZpY2VLZXkgPSBkYXRhQXV0aGVudGljYXRlLkF1dGhlbnRpY2F0aW9uUmVzdWx0Lk5ld0RldmljZU1ldGFkYXRhLkRldmljZUtleTtcbiAgICAgICAgICBfdGhpczguY2FjaGVEZXZpY2VLZXlBbmRQYXNzd29yZCgpO1xuICAgICAgICAgIGlmIChkYXRhQ29uZmlybS5Vc2VyQ29uZmlybWF0aW9uTmVjZXNzYXJ5ID09PSB0cnVlKSB7XG4gICAgICAgICAgICByZXR1cm4gY2FsbGJhY2sub25TdWNjZXNzKF90aGlzOC5zaWduSW5Vc2VyU2Vzc2lvbiwgZGF0YUNvbmZpcm0uVXNlckNvbmZpcm1hdGlvbk5lY2Vzc2FyeSk7XG4gICAgICAgICAgfVxuICAgICAgICAgIHJldHVybiBjYWxsYmFjay5vblN1Y2Nlc3MoX3RoaXM4LnNpZ25JblVzZXJTZXNzaW9uKTtcbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgICB9KTtcbiAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgfSk7XG4gIH1cblxuICAvKipcbiAgICogVGhpcyBpcyB1c2VkIGJ5IGFuIGF1dGhlbnRpY2F0ZWQgdXNlciB0byBjaGFuZ2UgdGhlIGN1cnJlbnQgcGFzc3dvcmRcbiAgICogQHBhcmFtIHtzdHJpbmd9IG9sZFVzZXJQYXNzd29yZCBUaGUgY3VycmVudCBwYXNzd29yZC5cbiAgICogQHBhcmFtIHtzdHJpbmd9IG5ld1VzZXJQYXNzd29yZCBUaGUgcmVxdWVzdGVkIG5ldyBwYXNzd29yZC5cbiAgICogQHBhcmFtIHtub2RlQ2FsbGJhY2s8c3RyaW5nPn0gY2FsbGJhY2sgQ2FsbGVkIG9uIHN1Y2Nlc3Mgb3IgZXJyb3IuXG4gICAqIEBwYXJhbSB7Q2xpZW50TWV0YWRhdGF9IGNsaWVudE1ldGFkYXRhIG9iamVjdCB3aGljaCBpcyBwYXNzZWQgZnJvbSBjbGllbnQgdG8gQ29nbml0byBMYW1iZGEgdHJpZ2dlclxuICAgKiBAcmV0dXJucyB7dm9pZH1cbiAgICovO1xuICBfcHJvdG8uY2hhbmdlUGFzc3dvcmQgPSBmdW5jdGlvbiBjaGFuZ2VQYXNzd29yZChvbGRVc2VyUGFzc3dvcmQsIG5ld1VzZXJQYXNzd29yZCwgY2FsbGJhY2ssIGNsaWVudE1ldGFkYXRhKSB7XG4gICAgaWYgKCEodGhpcy5zaWduSW5Vc2VyU2Vzc2lvbiAhPSBudWxsICYmIHRoaXMuc2lnbkluVXNlclNlc3Npb24uaXNWYWxpZCgpKSkge1xuICAgICAgcmV0dXJuIGNhbGxiYWNrKG5ldyBFcnJvcignVXNlciBpcyBub3QgYXV0aGVudGljYXRlZCcpLCBudWxsKTtcbiAgICB9XG4gICAgdGhpcy5jbGllbnQucmVxdWVzdCgnQ2hhbmdlUGFzc3dvcmQnLCB7XG4gICAgICBQcmV2aW91c1Bhc3N3b3JkOiBvbGRVc2VyUGFzc3dvcmQsXG4gICAgICBQcm9wb3NlZFBhc3N3b3JkOiBuZXdVc2VyUGFzc3dvcmQsXG4gICAgICBBY2Nlc3NUb2tlbjogdGhpcy5zaWduSW5Vc2VyU2Vzc2lvbi5nZXRBY2Nlc3NUb2tlbigpLmdldEp3dFRva2VuKCksXG4gICAgICBDbGllbnRNZXRhZGF0YTogY2xpZW50TWV0YWRhdGFcbiAgICB9LCBmdW5jdGlvbiAoZXJyKSB7XG4gICAgICBpZiAoZXJyKSB7XG4gICAgICAgIHJldHVybiBjYWxsYmFjayhlcnIsIG51bGwpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIGNhbGxiYWNrKG51bGwsICdTVUNDRVNTJyk7XG4gICAgfSk7XG4gICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgfVxuXG4gIC8qKlxuICAgKiBUaGlzIGlzIHVzZWQgYnkgYW4gYXV0aGVudGljYXRlZCB1c2VyIHRvIGVuYWJsZSBNRkEgZm9yIGl0c2VsZlxuICAgKiBAZGVwcmVjYXRlZFxuICAgKiBAcGFyYW0ge25vZGVDYWxsYmFjazxzdHJpbmc+fSBjYWxsYmFjayBDYWxsZWQgb24gc3VjY2VzcyBvciBlcnJvci5cbiAgICogQHJldHVybnMge3ZvaWR9XG4gICAqLztcbiAgX3Byb3RvLmVuYWJsZU1GQSA9IGZ1bmN0aW9uIGVuYWJsZU1GQShjYWxsYmFjaykge1xuICAgIGlmICh0aGlzLnNpZ25JblVzZXJTZXNzaW9uID09IG51bGwgfHwgIXRoaXMuc2lnbkluVXNlclNlc3Npb24uaXNWYWxpZCgpKSB7XG4gICAgICByZXR1cm4gY2FsbGJhY2sobmV3IEVycm9yKCdVc2VyIGlzIG5vdCBhdXRoZW50aWNhdGVkJyksIG51bGwpO1xuICAgIH1cbiAgICB2YXIgbWZhT3B0aW9ucyA9IFtdO1xuICAgIHZhciBtZmFFbmFibGVkID0ge1xuICAgICAgRGVsaXZlcnlNZWRpdW06ICdTTVMnLFxuICAgICAgQXR0cmlidXRlTmFtZTogJ3Bob25lX251bWJlcidcbiAgICB9O1xuICAgIG1mYU9wdGlvbnMucHVzaChtZmFFbmFibGVkKTtcbiAgICB0aGlzLmNsaWVudC5yZXF1ZXN0KCdTZXRVc2VyU2V0dGluZ3MnLCB7XG4gICAgICBNRkFPcHRpb25zOiBtZmFPcHRpb25zLFxuICAgICAgQWNjZXNzVG9rZW46IHRoaXMuc2lnbkluVXNlclNlc3Npb24uZ2V0QWNjZXNzVG9rZW4oKS5nZXRKd3RUb2tlbigpXG4gICAgfSwgZnVuY3Rpb24gKGVycikge1xuICAgICAgaWYgKGVycikge1xuICAgICAgICByZXR1cm4gY2FsbGJhY2soZXJyLCBudWxsKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBjYWxsYmFjayhudWxsLCAnU1VDQ0VTUycpO1xuICAgIH0pO1xuICAgIHJldHVybiB1bmRlZmluZWQ7XG4gIH1cblxuICAvKipcbiAgICogVGhpcyBpcyB1c2VkIGJ5IGFuIGF1dGhlbnRpY2F0ZWQgdXNlciB0byBlbmFibGUgTUZBIGZvciBpdHNlbGZcbiAgICogQHBhcmFtIHtJTWZhU2V0dGluZ3N9IHNtc01mYVNldHRpbmdzIHRoZSBzbXMgbWZhIHNldHRpbmdzXG4gICAqIEBwYXJhbSB7SU1GQVNldHRpbmdzfSBzb2Z0d2FyZVRva2VuTWZhU2V0dGluZ3MgdGhlIHNvZnR3YXJlIHRva2VuIG1mYSBzZXR0aW5nc1xuICAgKiBAcGFyYW0ge25vZGVDYWxsYmFjazxzdHJpbmc+fSBjYWxsYmFjayBDYWxsZWQgb24gc3VjY2VzcyBvciBlcnJvci5cbiAgICogQHJldHVybnMge3ZvaWR9XG4gICAqLztcbiAgX3Byb3RvLnNldFVzZXJNZmFQcmVmZXJlbmNlID0gZnVuY3Rpb24gc2V0VXNlck1mYVByZWZlcmVuY2Uoc21zTWZhU2V0dGluZ3MsIHNvZnR3YXJlVG9rZW5NZmFTZXR0aW5ncywgY2FsbGJhY2spIHtcbiAgICBpZiAodGhpcy5zaWduSW5Vc2VyU2Vzc2lvbiA9PSBudWxsIHx8ICF0aGlzLnNpZ25JblVzZXJTZXNzaW9uLmlzVmFsaWQoKSkge1xuICAgICAgcmV0dXJuIGNhbGxiYWNrKG5ldyBFcnJvcignVXNlciBpcyBub3QgYXV0aGVudGljYXRlZCcpLCBudWxsKTtcbiAgICB9XG4gICAgdGhpcy5jbGllbnQucmVxdWVzdCgnU2V0VXNlck1GQVByZWZlcmVuY2UnLCB7XG4gICAgICBTTVNNZmFTZXR0aW5nczogc21zTWZhU2V0dGluZ3MsXG4gICAgICBTb2Z0d2FyZVRva2VuTWZhU2V0dGluZ3M6IHNvZnR3YXJlVG9rZW5NZmFTZXR0aW5ncyxcbiAgICAgIEFjY2Vzc1Rva2VuOiB0aGlzLnNpZ25JblVzZXJTZXNzaW9uLmdldEFjY2Vzc1Rva2VuKCkuZ2V0Snd0VG9rZW4oKVxuICAgIH0sIGZ1bmN0aW9uIChlcnIpIHtcbiAgICAgIGlmIChlcnIpIHtcbiAgICAgICAgcmV0dXJuIGNhbGxiYWNrKGVyciwgbnVsbCk7XG4gICAgICB9XG4gICAgICByZXR1cm4gY2FsbGJhY2sobnVsbCwgJ1NVQ0NFU1MnKTtcbiAgICB9KTtcbiAgICByZXR1cm4gdW5kZWZpbmVkO1xuICB9XG5cbiAgLyoqXG4gICAqIFRoaXMgaXMgdXNlZCBieSBhbiBhdXRoZW50aWNhdGVkIHVzZXIgdG8gZGlzYWJsZSBNRkEgZm9yIGl0c2VsZlxuICAgKiBAZGVwcmVjYXRlZFxuICAgKiBAcGFyYW0ge25vZGVDYWxsYmFjazxzdHJpbmc+fSBjYWxsYmFjayBDYWxsZWQgb24gc3VjY2VzcyBvciBlcnJvci5cbiAgICogQHJldHVybnMge3ZvaWR9XG4gICAqLztcbiAgX3Byb3RvLmRpc2FibGVNRkEgPSBmdW5jdGlvbiBkaXNhYmxlTUZBKGNhbGxiYWNrKSB7XG4gICAgaWYgKHRoaXMuc2lnbkluVXNlclNlc3Npb24gPT0gbnVsbCB8fCAhdGhpcy5zaWduSW5Vc2VyU2Vzc2lvbi5pc1ZhbGlkKCkpIHtcbiAgICAgIHJldHVybiBjYWxsYmFjayhuZXcgRXJyb3IoJ1VzZXIgaXMgbm90IGF1dGhlbnRpY2F0ZWQnKSwgbnVsbCk7XG4gICAgfVxuICAgIHZhciBtZmFPcHRpb25zID0gW107XG4gICAgdGhpcy5jbGllbnQucmVxdWVzdCgnU2V0VXNlclNldHRpbmdzJywge1xuICAgICAgTUZBT3B0aW9uczogbWZhT3B0aW9ucyxcbiAgICAgIEFjY2Vzc1Rva2VuOiB0aGlzLnNpZ25JblVzZXJTZXNzaW9uLmdldEFjY2Vzc1Rva2VuKCkuZ2V0Snd0VG9rZW4oKVxuICAgIH0sIGZ1bmN0aW9uIChlcnIpIHtcbiAgICAgIGlmIChlcnIpIHtcbiAgICAgICAgcmV0dXJuIGNhbGxiYWNrKGVyciwgbnVsbCk7XG4gICAgICB9XG4gICAgICByZXR1cm4gY2FsbGJhY2sobnVsbCwgJ1NVQ0NFU1MnKTtcbiAgICB9KTtcbiAgICByZXR1cm4gdW5kZWZpbmVkO1xuICB9XG5cbiAgLyoqXG4gICAqIFRoaXMgaXMgdXNlZCBieSBhbiBhdXRoZW50aWNhdGVkIHVzZXIgdG8gZGVsZXRlIGl0c2VsZlxuICAgKiBAcGFyYW0ge25vZGVDYWxsYmFjazxzdHJpbmc+fSBjYWxsYmFjayBDYWxsZWQgb24gc3VjY2VzcyBvciBlcnJvci5cbiAgICogQHBhcmFtIHtDbGllbnRNZXRhZGF0YX0gY2xpZW50TWV0YWRhdGEgb2JqZWN0IHdoaWNoIGlzIHBhc3NlZCBmcm9tIGNsaWVudCB0byBDb2duaXRvIExhbWJkYSB0cmlnZ2VyXG4gICAqIEByZXR1cm5zIHt2b2lkfVxuICAgKi87XG4gIF9wcm90by5kZWxldGVVc2VyID0gZnVuY3Rpb24gZGVsZXRlVXNlcihjYWxsYmFjaywgY2xpZW50TWV0YWRhdGEpIHtcbiAgICB2YXIgX3RoaXM5ID0gdGhpcztcbiAgICBpZiAodGhpcy5zaWduSW5Vc2VyU2Vzc2lvbiA9PSBudWxsIHx8ICF0aGlzLnNpZ25JblVzZXJTZXNzaW9uLmlzVmFsaWQoKSkge1xuICAgICAgcmV0dXJuIGNhbGxiYWNrKG5ldyBFcnJvcignVXNlciBpcyBub3QgYXV0aGVudGljYXRlZCcpLCBudWxsKTtcbiAgICB9XG4gICAgdGhpcy5jbGllbnQucmVxdWVzdCgnRGVsZXRlVXNlcicsIHtcbiAgICAgIEFjY2Vzc1Rva2VuOiB0aGlzLnNpZ25JblVzZXJTZXNzaW9uLmdldEFjY2Vzc1Rva2VuKCkuZ2V0Snd0VG9rZW4oKSxcbiAgICAgIENsaWVudE1ldGFkYXRhOiBjbGllbnRNZXRhZGF0YVxuICAgIH0sIGZ1bmN0aW9uIChlcnIpIHtcbiAgICAgIGlmIChlcnIpIHtcbiAgICAgICAgcmV0dXJuIGNhbGxiYWNrKGVyciwgbnVsbCk7XG4gICAgICB9XG4gICAgICBfdGhpczkuY2xlYXJDYWNoZWRVc2VyKCk7XG4gICAgICByZXR1cm4gY2FsbGJhY2sobnVsbCwgJ1NVQ0NFU1MnKTtcbiAgICB9KTtcbiAgICByZXR1cm4gdW5kZWZpbmVkO1xuICB9XG5cbiAgLyoqXG4gICAqIEB0eXBlZGVmIHtDb2duaXRvVXNlckF0dHJpYnV0ZSB8IHsgTmFtZTpzdHJpbmcsIFZhbHVlOnN0cmluZyB9fSBBdHRyaWJ1dGVBcmdcbiAgICovXG4gIC8qKlxuICAgKiBUaGlzIGlzIHVzZWQgYnkgYW4gYXV0aGVudGljYXRlZCB1c2VyIHRvIGNoYW5nZSBhIGxpc3Qgb2YgYXR0cmlidXRlc1xuICAgKiBAcGFyYW0ge0F0dHJpYnV0ZUFyZ1tdfSBhdHRyaWJ1dGVzIEEgbGlzdCBvZiB0aGUgbmV3IHVzZXIgYXR0cmlidXRlcy5cbiAgICogQHBhcmFtIHtub2RlQ2FsbGJhY2s8c3RyaW5nPn0gY2FsbGJhY2sgQ2FsbGVkIG9uIHN1Y2Nlc3Mgb3IgZXJyb3IuXG4gICAqIEBwYXJhbSB7Q2xpZW50TWV0YWRhdGF9IGNsaWVudE1ldGFkYXRhIG9iamVjdCB3aGljaCBpcyBwYXNzZWQgZnJvbSBjbGllbnQgdG8gQ29nbml0byBMYW1iZGEgdHJpZ2dlclxuICAgKiBAcmV0dXJucyB7dm9pZH1cbiAgICovO1xuICBfcHJvdG8udXBkYXRlQXR0cmlidXRlcyA9IGZ1bmN0aW9uIHVwZGF0ZUF0dHJpYnV0ZXMoYXR0cmlidXRlcywgY2FsbGJhY2ssIGNsaWVudE1ldGFkYXRhKSB7XG4gICAgdmFyIF90aGlzMTAgPSB0aGlzO1xuICAgIGlmICh0aGlzLnNpZ25JblVzZXJTZXNzaW9uID09IG51bGwgfHwgIXRoaXMuc2lnbkluVXNlclNlc3Npb24uaXNWYWxpZCgpKSB7XG4gICAgICByZXR1cm4gY2FsbGJhY2sobmV3IEVycm9yKCdVc2VyIGlzIG5vdCBhdXRoZW50aWNhdGVkJyksIG51bGwpO1xuICAgIH1cbiAgICB0aGlzLmNsaWVudC5yZXF1ZXN0KCdVcGRhdGVVc2VyQXR0cmlidXRlcycsIHtcbiAgICAgIEFjY2Vzc1Rva2VuOiB0aGlzLnNpZ25JblVzZXJTZXNzaW9uLmdldEFjY2Vzc1Rva2VuKCkuZ2V0Snd0VG9rZW4oKSxcbiAgICAgIFVzZXJBdHRyaWJ1dGVzOiBhdHRyaWJ1dGVzLFxuICAgICAgQ2xpZW50TWV0YWRhdGE6IGNsaWVudE1ldGFkYXRhXG4gICAgfSwgZnVuY3Rpb24gKGVyciwgcmVzdWx0KSB7XG4gICAgICBpZiAoZXJyKSB7XG4gICAgICAgIHJldHVybiBjYWxsYmFjayhlcnIsIG51bGwpO1xuICAgICAgfVxuXG4gICAgICAvLyB1cGRhdGUgY2FjaGVkIHVzZXJcbiAgICAgIHJldHVybiBfdGhpczEwLmdldFVzZXJEYXRhKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIGNhbGxiYWNrKG51bGwsICdTVUNDRVNTJywgcmVzdWx0KTtcbiAgICAgIH0sIHtcbiAgICAgICAgYnlwYXNzQ2FjaGU6IHRydWVcbiAgICAgIH0pO1xuICAgIH0pO1xuICAgIHJldHVybiB1bmRlZmluZWQ7XG4gIH1cblxuICAvKipcbiAgICogVGhpcyBpcyB1c2VkIGJ5IGFuIGF1dGhlbnRpY2F0ZWQgdXNlciB0byBnZXQgYSBsaXN0IG9mIGF0dHJpYnV0ZXNcbiAgICogQHBhcmFtIHtub2RlQ2FsbGJhY2s8Q29nbml0b1VzZXJBdHRyaWJ1dGVbXT59IGNhbGxiYWNrIENhbGxlZCBvbiBzdWNjZXNzIG9yIGVycm9yLlxuICAgKiBAcmV0dXJucyB7dm9pZH1cbiAgICovO1xuICBfcHJvdG8uZ2V0VXNlckF0dHJpYnV0ZXMgPSBmdW5jdGlvbiBnZXRVc2VyQXR0cmlidXRlcyhjYWxsYmFjaykge1xuICAgIGlmICghKHRoaXMuc2lnbkluVXNlclNlc3Npb24gIT0gbnVsbCAmJiB0aGlzLnNpZ25JblVzZXJTZXNzaW9uLmlzVmFsaWQoKSkpIHtcbiAgICAgIHJldHVybiBjYWxsYmFjayhuZXcgRXJyb3IoJ1VzZXIgaXMgbm90IGF1dGhlbnRpY2F0ZWQnKSwgbnVsbCk7XG4gICAgfVxuICAgIHRoaXMuY2xpZW50LnJlcXVlc3QoJ0dldFVzZXInLCB7XG4gICAgICBBY2Nlc3NUb2tlbjogdGhpcy5zaWduSW5Vc2VyU2Vzc2lvbi5nZXRBY2Nlc3NUb2tlbigpLmdldEp3dFRva2VuKClcbiAgICB9LCBmdW5jdGlvbiAoZXJyLCB1c2VyRGF0YSkge1xuICAgICAgaWYgKGVycikge1xuICAgICAgICByZXR1cm4gY2FsbGJhY2soZXJyLCBudWxsKTtcbiAgICAgIH1cbiAgICAgIHZhciBhdHRyaWJ1dGVMaXN0ID0gW107XG4gICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHVzZXJEYXRhLlVzZXJBdHRyaWJ1dGVzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIHZhciBhdHRyaWJ1dGUgPSB7XG4gICAgICAgICAgTmFtZTogdXNlckRhdGEuVXNlckF0dHJpYnV0ZXNbaV0uTmFtZSxcbiAgICAgICAgICBWYWx1ZTogdXNlckRhdGEuVXNlckF0dHJpYnV0ZXNbaV0uVmFsdWVcbiAgICAgICAgfTtcbiAgICAgICAgdmFyIHVzZXJBdHRyaWJ1dGUgPSBuZXcgX0NvZ25pdG9Vc2VyQXR0cmlidXRlW1wiZGVmYXVsdFwiXShhdHRyaWJ1dGUpO1xuICAgICAgICBhdHRyaWJ1dGVMaXN0LnB1c2godXNlckF0dHJpYnV0ZSk7XG4gICAgICB9XG4gICAgICByZXR1cm4gY2FsbGJhY2sobnVsbCwgYXR0cmlidXRlTGlzdCk7XG4gICAgfSk7XG4gICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgfVxuXG4gIC8qKlxuICAgKiBUaGlzIHdhcyBwcmV2aW91c2x5IHVzZWQgYnkgYW4gYXV0aGVudGljYXRlZCB1c2VyIHRvIGdldCBNRkFPcHRpb25zLFxuICAgKiBidXQgbm8gbG9uZ2VyIHJldHVybnMgYSBtZWFuaW5nZnVsIHJlc3BvbnNlLiBSZWZlciB0byB0aGUgZG9jdW1lbnRhdGlvbiBmb3JcbiAgICogaG93IHRvIHNldHVwIGFuZCB1c2UgTUZBOiBodHRwczovL2RvY3MuYW1wbGlmeS5hd3MvbGliL2F1dGgvbWZhL3EvcGxhdGZvcm0vanNcbiAgICogQGRlcHJlY2F0ZWRcbiAgICogQHBhcmFtIHtub2RlQ2FsbGJhY2s8TUZBT3B0aW9ucz59IGNhbGxiYWNrIENhbGxlZCBvbiBzdWNjZXNzIG9yIGVycm9yLlxuICAgKiBAcmV0dXJucyB7dm9pZH1cbiAgICovO1xuICBfcHJvdG8uZ2V0TUZBT3B0aW9ucyA9IGZ1bmN0aW9uIGdldE1GQU9wdGlvbnMoY2FsbGJhY2spIHtcbiAgICBpZiAoISh0aGlzLnNpZ25JblVzZXJTZXNzaW9uICE9IG51bGwgJiYgdGhpcy5zaWduSW5Vc2VyU2Vzc2lvbi5pc1ZhbGlkKCkpKSB7XG4gICAgICByZXR1cm4gY2FsbGJhY2sobmV3IEVycm9yKCdVc2VyIGlzIG5vdCBhdXRoZW50aWNhdGVkJyksIG51bGwpO1xuICAgIH1cbiAgICB0aGlzLmNsaWVudC5yZXF1ZXN0KCdHZXRVc2VyJywge1xuICAgICAgQWNjZXNzVG9rZW46IHRoaXMuc2lnbkluVXNlclNlc3Npb24uZ2V0QWNjZXNzVG9rZW4oKS5nZXRKd3RUb2tlbigpXG4gICAgfSwgZnVuY3Rpb24gKGVyciwgdXNlckRhdGEpIHtcbiAgICAgIGlmIChlcnIpIHtcbiAgICAgICAgcmV0dXJuIGNhbGxiYWNrKGVyciwgbnVsbCk7XG4gICAgICB9XG4gICAgICByZXR1cm4gY2FsbGJhY2sobnVsbCwgdXNlckRhdGEuTUZBT3B0aW9ucyk7XG4gICAgfSk7XG4gICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgfVxuXG4gIC8qKlxuICAgKiBQUklWQVRFIE9OTFk6IFRoaXMgaXMgYW4gaW50ZXJuYWwgb25seSBtZXRob2QgYW5kIHNob3VsZCBub3RcbiAgICogYmUgZGlyZWN0bHkgY2FsbGVkIGJ5IHRoZSBjb25zdW1lcnMuXG4gICAqLztcbiAgX3Byb3RvLmNyZWF0ZUdldFVzZXJSZXF1ZXN0ID0gZnVuY3Rpb24gY3JlYXRlR2V0VXNlclJlcXVlc3QoKSB7XG4gICAgcmV0dXJuIHRoaXMuY2xpZW50LnByb21pc2lmeVJlcXVlc3QoJ0dldFVzZXInLCB7XG4gICAgICBBY2Nlc3NUb2tlbjogdGhpcy5zaWduSW5Vc2VyU2Vzc2lvbi5nZXRBY2Nlc3NUb2tlbigpLmdldEp3dFRva2VuKClcbiAgICB9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBQUklWQVRFIE9OTFk6IFRoaXMgaXMgYW4gaW50ZXJuYWwgb25seSBtZXRob2QgYW5kIHNob3VsZCBub3RcbiAgICogYmUgZGlyZWN0bHkgY2FsbGVkIGJ5IHRoZSBjb25zdW1lcnMuXG4gICAqLztcbiAgX3Byb3RvLnJlZnJlc2hTZXNzaW9uSWZQb3NzaWJsZSA9IGZ1bmN0aW9uIHJlZnJlc2hTZXNzaW9uSWZQb3NzaWJsZShvcHRpb25zKSB7XG4gICAgdmFyIF90aGlzMTEgPSB0aGlzO1xuICAgIGlmIChvcHRpb25zID09PSB2b2lkIDApIHtcbiAgICAgIG9wdGlvbnMgPSB7fTtcbiAgICB9XG4gICAgLy8gYmVzdCBlZmZvcnQsIGlmIG5vdCBwb3NzaWJsZVxuICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSkge1xuICAgICAgdmFyIHJlZnJlc2ggPSBfdGhpczExLnNpZ25JblVzZXJTZXNzaW9uLmdldFJlZnJlc2hUb2tlbigpO1xuICAgICAgaWYgKHJlZnJlc2ggJiYgcmVmcmVzaC5nZXRUb2tlbigpKSB7XG4gICAgICAgIF90aGlzMTEucmVmcmVzaFNlc3Npb24ocmVmcmVzaCwgcmVzb2x2ZSwgb3B0aW9ucy5jbGllbnRNZXRhZGF0YSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXNvbHZlKCk7XG4gICAgICB9XG4gICAgfSk7XG4gIH1cblxuICAvKipcbiAgICogQHR5cGVkZWYge09iamVjdH0gR2V0VXNlckRhdGFPcHRpb25zXG4gICAqIEBwcm9wZXJ0eSB7Ym9vbGVhbn0gYnlwYXNzQ2FjaGUgLSBmb3JjZSBnZXR0aW5nIGRhdGEgZnJvbSBDb2duaXRvIHNlcnZpY2VcbiAgICogQHByb3BlcnR5IHtSZWNvcmQ8c3RyaW5nLCBzdHJpbmc+fSBjbGllbnRNZXRhZGF0YSAtIGNsaWVudE1ldGFkYXRhIGZvciBnZXRTZXNzaW9uXG4gICAqL1xuXG4gIC8qKlxuICAgKiBUaGlzIGlzIHVzZWQgYnkgYW4gYXV0aGVudGljYXRlZCB1c2VycyB0byBnZXQgdGhlIHVzZXJEYXRhXG4gICAqIEBwYXJhbSB7bm9kZUNhbGxiYWNrPFVzZXJEYXRhPn0gY2FsbGJhY2sgQ2FsbGVkIG9uIHN1Y2Nlc3Mgb3IgZXJyb3IuXG4gICAqIEBwYXJhbSB7R2V0VXNlckRhdGFPcHRpb25zfSBwYXJhbXNcbiAgICogQHJldHVybnMge3ZvaWR9XG4gICAqLztcbiAgX3Byb3RvLmdldFVzZXJEYXRhID0gZnVuY3Rpb24gZ2V0VXNlckRhdGEoY2FsbGJhY2ssIHBhcmFtcykge1xuICAgIHZhciBfdGhpczEyID0gdGhpcztcbiAgICBpZiAoISh0aGlzLnNpZ25JblVzZXJTZXNzaW9uICE9IG51bGwgJiYgdGhpcy5zaWduSW5Vc2VyU2Vzc2lvbi5pc1ZhbGlkKCkpKSB7XG4gICAgICB0aGlzLmNsZWFyQ2FjaGVkVXNlckRhdGEoKTtcbiAgICAgIHJldHVybiBjYWxsYmFjayhuZXcgRXJyb3IoJ1VzZXIgaXMgbm90IGF1dGhlbnRpY2F0ZWQnKSwgbnVsbCk7XG4gICAgfVxuICAgIHZhciB1c2VyRGF0YSA9IHRoaXMuZ2V0VXNlckRhdGFGcm9tQ2FjaGUoKTtcbiAgICBpZiAoIXVzZXJEYXRhKSB7XG4gICAgICB0aGlzLmZldGNoVXNlckRhdGEoKS50aGVuKGZ1bmN0aW9uIChkYXRhKSB7XG4gICAgICAgIGNhbGxiYWNrKG51bGwsIGRhdGEpO1xuICAgICAgfSlbXCJjYXRjaFwiXShjYWxsYmFjayk7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGlmICh0aGlzLmlzRmV0Y2hVc2VyRGF0YUFuZFRva2VuUmVxdWlyZWQocGFyYW1zKSkge1xuICAgICAgdGhpcy5mZXRjaFVzZXJEYXRhKCkudGhlbihmdW5jdGlvbiAoZGF0YSkge1xuICAgICAgICByZXR1cm4gX3RoaXMxMi5yZWZyZXNoU2Vzc2lvbklmUG9zc2libGUocGFyYW1zKS50aGVuKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICByZXR1cm4gZGF0YTtcbiAgICAgICAgfSk7XG4gICAgICB9KS50aGVuKGZ1bmN0aW9uIChkYXRhKSB7XG4gICAgICAgIHJldHVybiBjYWxsYmFjayhudWxsLCBkYXRhKTtcbiAgICAgIH0pW1wiY2F0Y2hcIl0oY2FsbGJhY2spO1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICB0cnkge1xuICAgICAgY2FsbGJhY2sobnVsbCwgSlNPTi5wYXJzZSh1c2VyRGF0YSkpO1xuICAgICAgcmV0dXJuO1xuICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgdGhpcy5jbGVhckNhY2hlZFVzZXJEYXRhKCk7XG4gICAgICBjYWxsYmFjayhlcnIsIG51bGwpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKlxuICAgKiBQUklWQVRFIE9OTFk6IFRoaXMgaXMgYW4gaW50ZXJuYWwgb25seSBtZXRob2QgYW5kIHNob3VsZCBub3RcbiAgICogYmUgZGlyZWN0bHkgY2FsbGVkIGJ5IHRoZSBjb25zdW1lcnMuXG4gICAqLztcbiAgX3Byb3RvLmdldFVzZXJEYXRhRnJvbUNhY2hlID0gZnVuY3Rpb24gZ2V0VXNlckRhdGFGcm9tQ2FjaGUoKSB7XG4gICAgdmFyIHVzZXJEYXRhID0gdGhpcy5zdG9yYWdlLmdldEl0ZW0odGhpcy51c2VyRGF0YUtleSk7XG4gICAgcmV0dXJuIHVzZXJEYXRhO1xuICB9XG5cbiAgLyoqXG4gICAqXG4gICAqIFBSSVZBVEUgT05MWTogVGhpcyBpcyBhbiBpbnRlcm5hbCBvbmx5IG1ldGhvZCBhbmQgc2hvdWxkIG5vdFxuICAgKiBiZSBkaXJlY3RseSBjYWxsZWQgYnkgdGhlIGNvbnN1bWVycy5cbiAgICovO1xuICBfcHJvdG8uaXNGZXRjaFVzZXJEYXRhQW5kVG9rZW5SZXF1aXJlZCA9IGZ1bmN0aW9uIGlzRmV0Y2hVc2VyRGF0YUFuZFRva2VuUmVxdWlyZWQocGFyYW1zKSB7XG4gICAgdmFyIF9yZWYgPSBwYXJhbXMgfHwge30sXG4gICAgICBfcmVmJGJ5cGFzc0NhY2hlID0gX3JlZi5ieXBhc3NDYWNoZSxcbiAgICAgIGJ5cGFzc0NhY2hlID0gX3JlZiRieXBhc3NDYWNoZSA9PT0gdm9pZCAwID8gZmFsc2UgOiBfcmVmJGJ5cGFzc0NhY2hlO1xuICAgIHJldHVybiBieXBhc3NDYWNoZTtcbiAgfVxuICAvKipcbiAgICpcbiAgICogUFJJVkFURSBPTkxZOiBUaGlzIGlzIGFuIGludGVybmFsIG9ubHkgbWV0aG9kIGFuZCBzaG91bGQgbm90XG4gICAqIGJlIGRpcmVjdGx5IGNhbGxlZCBieSB0aGUgY29uc3VtZXJzLlxuICAgKi87XG4gIF9wcm90by5mZXRjaFVzZXJEYXRhID0gZnVuY3Rpb24gZmV0Y2hVc2VyRGF0YSgpIHtcbiAgICB2YXIgX3RoaXMxMyA9IHRoaXM7XG4gICAgcmV0dXJuIHRoaXMuY3JlYXRlR2V0VXNlclJlcXVlc3QoKS50aGVuKGZ1bmN0aW9uIChkYXRhKSB7XG4gICAgICBfdGhpczEzLmNhY2hlVXNlckRhdGEoZGF0YSk7XG4gICAgICByZXR1cm4gZGF0YTtcbiAgICB9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBUaGlzIGlzIHVzZWQgYnkgYW4gYXV0aGVudGljYXRlZCB1c2VyIHRvIGRlbGV0ZSBhIGxpc3Qgb2YgYXR0cmlidXRlc1xuICAgKiBAcGFyYW0ge3N0cmluZ1tdfSBhdHRyaWJ1dGVMaXN0IE5hbWVzIG9mIHRoZSBhdHRyaWJ1dGVzIHRvIGRlbGV0ZS5cbiAgICogQHBhcmFtIHtub2RlQ2FsbGJhY2s8c3RyaW5nPn0gY2FsbGJhY2sgQ2FsbGVkIG9uIHN1Y2Nlc3Mgb3IgZXJyb3IuXG4gICAqIEByZXR1cm5zIHt2b2lkfVxuICAgKi87XG4gIF9wcm90by5kZWxldGVBdHRyaWJ1dGVzID0gZnVuY3Rpb24gZGVsZXRlQXR0cmlidXRlcyhhdHRyaWJ1dGVMaXN0LCBjYWxsYmFjaykge1xuICAgIHZhciBfdGhpczE0ID0gdGhpcztcbiAgICBpZiAoISh0aGlzLnNpZ25JblVzZXJTZXNzaW9uICE9IG51bGwgJiYgdGhpcy5zaWduSW5Vc2VyU2Vzc2lvbi5pc1ZhbGlkKCkpKSB7XG4gICAgICByZXR1cm4gY2FsbGJhY2sobmV3IEVycm9yKCdVc2VyIGlzIG5vdCBhdXRoZW50aWNhdGVkJyksIG51bGwpO1xuICAgIH1cbiAgICB0aGlzLmNsaWVudC5yZXF1ZXN0KCdEZWxldGVVc2VyQXR0cmlidXRlcycsIHtcbiAgICAgIFVzZXJBdHRyaWJ1dGVOYW1lczogYXR0cmlidXRlTGlzdCxcbiAgICAgIEFjY2Vzc1Rva2VuOiB0aGlzLnNpZ25JblVzZXJTZXNzaW9uLmdldEFjY2Vzc1Rva2VuKCkuZ2V0Snd0VG9rZW4oKVxuICAgIH0sIGZ1bmN0aW9uIChlcnIpIHtcbiAgICAgIGlmIChlcnIpIHtcbiAgICAgICAgcmV0dXJuIGNhbGxiYWNrKGVyciwgbnVsbCk7XG4gICAgICB9XG5cbiAgICAgIC8vIHVwZGF0ZSBjYWNoZWQgdXNlclxuICAgICAgcmV0dXJuIF90aGlzMTQuZ2V0VXNlckRhdGEoZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gY2FsbGJhY2sobnVsbCwgJ1NVQ0NFU1MnKTtcbiAgICAgIH0sIHtcbiAgICAgICAgYnlwYXNzQ2FjaGU6IHRydWVcbiAgICAgIH0pO1xuICAgIH0pO1xuICAgIHJldHVybiB1bmRlZmluZWQ7XG4gIH1cblxuICAvKipcbiAgICogVGhpcyBpcyB1c2VkIGJ5IGEgdXNlciB0byByZXNlbmQgYSBjb25maXJtYXRpb24gY29kZVxuICAgKiBAcGFyYW0ge25vZGVDYWxsYmFjazxzdHJpbmc+fSBjYWxsYmFjayBDYWxsZWQgb24gc3VjY2VzcyBvciBlcnJvci5cbiAgICogQHBhcmFtIHtDbGllbnRNZXRhZGF0YX0gY2xpZW50TWV0YWRhdGEgb2JqZWN0IHdoaWNoIGlzIHBhc3NlZCBmcm9tIGNsaWVudCB0byBDb2duaXRvIExhbWJkYSB0cmlnZ2VyXG4gICAqIEByZXR1cm5zIHt2b2lkfVxuICAgKi87XG4gIF9wcm90by5yZXNlbmRDb25maXJtYXRpb25Db2RlID0gZnVuY3Rpb24gcmVzZW5kQ29uZmlybWF0aW9uQ29kZShjYWxsYmFjaywgY2xpZW50TWV0YWRhdGEpIHtcbiAgICB2YXIganNvblJlcSA9IHtcbiAgICAgIENsaWVudElkOiB0aGlzLnBvb2wuZ2V0Q2xpZW50SWQoKSxcbiAgICAgIFVzZXJuYW1lOiB0aGlzLnVzZXJuYW1lLFxuICAgICAgQ2xpZW50TWV0YWRhdGE6IGNsaWVudE1ldGFkYXRhXG4gICAgfTtcbiAgICB0aGlzLmNsaWVudC5yZXF1ZXN0KCdSZXNlbmRDb25maXJtYXRpb25Db2RlJywganNvblJlcSwgZnVuY3Rpb24gKGVyciwgcmVzdWx0KSB7XG4gICAgICBpZiAoZXJyKSB7XG4gICAgICAgIHJldHVybiBjYWxsYmFjayhlcnIsIG51bGwpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIGNhbGxiYWNrKG51bGwsIHJlc3VsdCk7XG4gICAgfSk7XG4gIH1cblxuICAvKipcbiAgICogQHR5cGVkZWYge09iamVjdH0gR2V0U2Vzc2lvbk9wdGlvbnNcbiAgICogQHByb3BlcnR5IHtSZWNvcmQ8c3RyaW5nLCBzdHJpbmc+fSBjbGllbnRNZXRhZGF0YSAtIGNsaWVudE1ldGFkYXRhIGZvciBnZXRTZXNzaW9uXG4gICAqL1xuXG4gIC8qKlxuICAgKiBUaGlzIGlzIHVzZWQgdG8gZ2V0IGEgc2Vzc2lvbiwgZWl0aGVyIGZyb20gdGhlIHNlc3Npb24gb2JqZWN0XG4gICAqIG9yIGZyb20gIHRoZSBsb2NhbCBzdG9yYWdlLCBvciBieSB1c2luZyBhIHJlZnJlc2ggdG9rZW5cbiAgICpcbiAgICogQHBhcmFtIHtub2RlQ2FsbGJhY2s8Q29nbml0b1VzZXJTZXNzaW9uPn0gY2FsbGJhY2sgQ2FsbGVkIG9uIHN1Y2Nlc3Mgb3IgZXJyb3IuXG4gICAqIEBwYXJhbSB7R2V0U2Vzc2lvbk9wdGlvbnN9IG9wdGlvbnNcbiAgICogQHJldHVybnMge3ZvaWR9XG4gICAqLztcbiAgX3Byb3RvLmdldFNlc3Npb24gPSBmdW5jdGlvbiBnZXRTZXNzaW9uKGNhbGxiYWNrLCBvcHRpb25zKSB7XG4gICAgaWYgKG9wdGlvbnMgPT09IHZvaWQgMCkge1xuICAgICAgb3B0aW9ucyA9IHt9O1xuICAgIH1cbiAgICBpZiAodGhpcy51c2VybmFtZSA9PSBudWxsKSB7XG4gICAgICByZXR1cm4gY2FsbGJhY2sobmV3IEVycm9yKCdVc2VybmFtZSBpcyBudWxsLiBDYW5ub3QgcmV0cmlldmUgYSBuZXcgc2Vzc2lvbicpLCBudWxsKTtcbiAgICB9XG4gICAgaWYgKHRoaXMuc2lnbkluVXNlclNlc3Npb24gIT0gbnVsbCAmJiB0aGlzLnNpZ25JblVzZXJTZXNzaW9uLmlzVmFsaWQoKSkge1xuICAgICAgcmV0dXJuIGNhbGxiYWNrKG51bGwsIHRoaXMuc2lnbkluVXNlclNlc3Npb24pO1xuICAgIH1cbiAgICB2YXIga2V5UHJlZml4ID0gXCJDb2duaXRvSWRlbnRpdHlTZXJ2aWNlUHJvdmlkZXIuXCIgKyB0aGlzLnBvb2wuZ2V0Q2xpZW50SWQoKSArIFwiLlwiICsgdGhpcy51c2VybmFtZTtcbiAgICB2YXIgaWRUb2tlbktleSA9IGtleVByZWZpeCArIFwiLmlkVG9rZW5cIjtcbiAgICB2YXIgYWNjZXNzVG9rZW5LZXkgPSBrZXlQcmVmaXggKyBcIi5hY2Nlc3NUb2tlblwiO1xuICAgIHZhciByZWZyZXNoVG9rZW5LZXkgPSBrZXlQcmVmaXggKyBcIi5yZWZyZXNoVG9rZW5cIjtcbiAgICB2YXIgY2xvY2tEcmlmdEtleSA9IGtleVByZWZpeCArIFwiLmNsb2NrRHJpZnRcIjtcbiAgICBpZiAodGhpcy5zdG9yYWdlLmdldEl0ZW0oaWRUb2tlbktleSkpIHtcbiAgICAgIHZhciBpZFRva2VuID0gbmV3IF9Db2duaXRvSWRUb2tlbltcImRlZmF1bHRcIl0oe1xuICAgICAgICBJZFRva2VuOiB0aGlzLnN0b3JhZ2UuZ2V0SXRlbShpZFRva2VuS2V5KVxuICAgICAgfSk7XG4gICAgICB2YXIgYWNjZXNzVG9rZW4gPSBuZXcgX0NvZ25pdG9BY2Nlc3NUb2tlbltcImRlZmF1bHRcIl0oe1xuICAgICAgICBBY2Nlc3NUb2tlbjogdGhpcy5zdG9yYWdlLmdldEl0ZW0oYWNjZXNzVG9rZW5LZXkpXG4gICAgICB9KTtcbiAgICAgIHZhciByZWZyZXNoVG9rZW4gPSBuZXcgX0NvZ25pdG9SZWZyZXNoVG9rZW5bXCJkZWZhdWx0XCJdKHtcbiAgICAgICAgUmVmcmVzaFRva2VuOiB0aGlzLnN0b3JhZ2UuZ2V0SXRlbShyZWZyZXNoVG9rZW5LZXkpXG4gICAgICB9KTtcbiAgICAgIHZhciBjbG9ja0RyaWZ0ID0gcGFyc2VJbnQodGhpcy5zdG9yYWdlLmdldEl0ZW0oY2xvY2tEcmlmdEtleSksIDApIHx8IDA7XG4gICAgICB2YXIgc2Vzc2lvbkRhdGEgPSB7XG4gICAgICAgIElkVG9rZW46IGlkVG9rZW4sXG4gICAgICAgIEFjY2Vzc1Rva2VuOiBhY2Nlc3NUb2tlbixcbiAgICAgICAgUmVmcmVzaFRva2VuOiByZWZyZXNoVG9rZW4sXG4gICAgICAgIENsb2NrRHJpZnQ6IGNsb2NrRHJpZnRcbiAgICAgIH07XG4gICAgICB2YXIgY2FjaGVkU2Vzc2lvbiA9IG5ldyBfQ29nbml0b1VzZXJTZXNzaW9uW1wiZGVmYXVsdFwiXShzZXNzaW9uRGF0YSk7XG4gICAgICBpZiAoY2FjaGVkU2Vzc2lvbi5pc1ZhbGlkKCkpIHtcbiAgICAgICAgdGhpcy5zaWduSW5Vc2VyU2Vzc2lvbiA9IGNhY2hlZFNlc3Npb247XG4gICAgICAgIHJldHVybiBjYWxsYmFjayhudWxsLCB0aGlzLnNpZ25JblVzZXJTZXNzaW9uKTtcbiAgICAgIH1cbiAgICAgIGlmICghcmVmcmVzaFRva2VuLmdldFRva2VuKCkpIHtcbiAgICAgICAgcmV0dXJuIGNhbGxiYWNrKG5ldyBFcnJvcignQ2Fubm90IHJldHJpZXZlIGEgbmV3IHNlc3Npb24uIFBsZWFzZSBhdXRoZW50aWNhdGUuJyksIG51bGwpO1xuICAgICAgfVxuICAgICAgdGhpcy5yZWZyZXNoU2Vzc2lvbihyZWZyZXNoVG9rZW4sIGNhbGxiYWNrLCBvcHRpb25zLmNsaWVudE1ldGFkYXRhKTtcbiAgICB9IGVsc2Uge1xuICAgICAgY2FsbGJhY2sobmV3IEVycm9yKCdMb2NhbCBzdG9yYWdlIGlzIG1pc3NpbmcgYW4gSUQgVG9rZW4sIFBsZWFzZSBhdXRoZW50aWNhdGUnKSwgbnVsbCk7XG4gICAgfVxuICAgIHJldHVybiB1bmRlZmluZWQ7XG4gIH1cblxuICAvKipcbiAgICogVGhpcyB1c2VzIHRoZSByZWZyZXNoVG9rZW4gdG8gcmV0cmlldmUgYSBuZXcgc2Vzc2lvblxuICAgKiBAcGFyYW0ge0NvZ25pdG9SZWZyZXNoVG9rZW59IHJlZnJlc2hUb2tlbiBBIHByZXZpb3VzIHNlc3Npb24ncyByZWZyZXNoIHRva2VuLlxuICAgKiBAcGFyYW0ge25vZGVDYWxsYmFjazxDb2duaXRvVXNlclNlc3Npb24+fSBjYWxsYmFjayBDYWxsZWQgb24gc3VjY2VzcyBvciBlcnJvci5cbiAgICogQHBhcmFtIHtDbGllbnRNZXRhZGF0YX0gY2xpZW50TWV0YWRhdGEgb2JqZWN0IHdoaWNoIGlzIHBhc3NlZCBmcm9tIGNsaWVudCB0byBDb2duaXRvIExhbWJkYSB0cmlnZ2VyXG4gICAqIEByZXR1cm5zIHt2b2lkfVxuICAgKi87XG4gIF9wcm90by5yZWZyZXNoU2Vzc2lvbiA9IGZ1bmN0aW9uIHJlZnJlc2hTZXNzaW9uKHJlZnJlc2hUb2tlbiwgY2FsbGJhY2ssIGNsaWVudE1ldGFkYXRhKSB7XG4gICAgdmFyIF90aGlzMTUgPSB0aGlzO1xuICAgIHZhciB3cmFwcGVkQ2FsbGJhY2sgPSB0aGlzLnBvb2wud3JhcFJlZnJlc2hTZXNzaW9uQ2FsbGJhY2sgPyB0aGlzLnBvb2wud3JhcFJlZnJlc2hTZXNzaW9uQ2FsbGJhY2soY2FsbGJhY2spIDogY2FsbGJhY2s7XG4gICAgdmFyIGF1dGhQYXJhbWV0ZXJzID0ge307XG4gICAgYXV0aFBhcmFtZXRlcnMuUkVGUkVTSF9UT0tFTiA9IHJlZnJlc2hUb2tlbi5nZXRUb2tlbigpO1xuICAgIHZhciBrZXlQcmVmaXggPSBcIkNvZ25pdG9JZGVudGl0eVNlcnZpY2VQcm92aWRlci5cIiArIHRoaXMucG9vbC5nZXRDbGllbnRJZCgpO1xuICAgIHZhciBsYXN0VXNlcktleSA9IGtleVByZWZpeCArIFwiLkxhc3RBdXRoVXNlclwiO1xuICAgIGlmICh0aGlzLnN0b3JhZ2UuZ2V0SXRlbShsYXN0VXNlcktleSkpIHtcbiAgICAgIHRoaXMudXNlcm5hbWUgPSB0aGlzLnN0b3JhZ2UuZ2V0SXRlbShsYXN0VXNlcktleSk7XG4gICAgICB2YXIgZGV2aWNlS2V5S2V5ID0ga2V5UHJlZml4ICsgXCIuXCIgKyB0aGlzLnVzZXJuYW1lICsgXCIuZGV2aWNlS2V5XCI7XG4gICAgICB0aGlzLmRldmljZUtleSA9IHRoaXMuc3RvcmFnZS5nZXRJdGVtKGRldmljZUtleUtleSk7XG4gICAgICBhdXRoUGFyYW1ldGVycy5ERVZJQ0VfS0VZID0gdGhpcy5kZXZpY2VLZXk7XG4gICAgfVxuICAgIHZhciBqc29uUmVxID0ge1xuICAgICAgQ2xpZW50SWQ6IHRoaXMucG9vbC5nZXRDbGllbnRJZCgpLFxuICAgICAgQXV0aEZsb3c6ICdSRUZSRVNIX1RPS0VOX0FVVEgnLFxuICAgICAgQXV0aFBhcmFtZXRlcnM6IGF1dGhQYXJhbWV0ZXJzLFxuICAgICAgQ2xpZW50TWV0YWRhdGE6IGNsaWVudE1ldGFkYXRhXG4gICAgfTtcbiAgICBpZiAodGhpcy5nZXRVc2VyQ29udGV4dERhdGEoKSkge1xuICAgICAganNvblJlcS5Vc2VyQ29udGV4dERhdGEgPSB0aGlzLmdldFVzZXJDb250ZXh0RGF0YSgpO1xuICAgIH1cbiAgICB0aGlzLmNsaWVudC5yZXF1ZXN0KCdJbml0aWF0ZUF1dGgnLCBqc29uUmVxLCBmdW5jdGlvbiAoZXJyLCBhdXRoUmVzdWx0KSB7XG4gICAgICBpZiAoZXJyKSB7XG4gICAgICAgIGlmIChlcnIuY29kZSA9PT0gJ05vdEF1dGhvcml6ZWRFeGNlcHRpb24nKSB7XG4gICAgICAgICAgX3RoaXMxNS5jbGVhckNhY2hlZFVzZXIoKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gd3JhcHBlZENhbGxiYWNrKGVyciwgbnVsbCk7XG4gICAgICB9XG4gICAgICBpZiAoYXV0aFJlc3VsdCkge1xuICAgICAgICB2YXIgYXV0aGVudGljYXRpb25SZXN1bHQgPSBhdXRoUmVzdWx0LkF1dGhlbnRpY2F0aW9uUmVzdWx0O1xuICAgICAgICBpZiAoIU9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChhdXRoZW50aWNhdGlvblJlc3VsdCwgJ1JlZnJlc2hUb2tlbicpKSB7XG4gICAgICAgICAgYXV0aGVudGljYXRpb25SZXN1bHQuUmVmcmVzaFRva2VuID0gcmVmcmVzaFRva2VuLmdldFRva2VuKCk7XG4gICAgICAgIH1cbiAgICAgICAgX3RoaXMxNS5zaWduSW5Vc2VyU2Vzc2lvbiA9IF90aGlzMTUuZ2V0Q29nbml0b1VzZXJTZXNzaW9uKGF1dGhlbnRpY2F0aW9uUmVzdWx0KTtcbiAgICAgICAgX3RoaXMxNS5jYWNoZVRva2VucygpO1xuICAgICAgICByZXR1cm4gd3JhcHBlZENhbGxiYWNrKG51bGwsIF90aGlzMTUuc2lnbkluVXNlclNlc3Npb24pO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICB9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBUaGlzIGlzIHVzZWQgdG8gc2F2ZSB0aGUgc2Vzc2lvbiB0b2tlbnMgdG8gbG9jYWwgc3RvcmFnZVxuICAgKiBAcmV0dXJucyB7dm9pZH1cbiAgICovO1xuICBfcHJvdG8uY2FjaGVUb2tlbnMgPSBmdW5jdGlvbiBjYWNoZVRva2VucygpIHtcbiAgICB2YXIga2V5UHJlZml4ID0gXCJDb2duaXRvSWRlbnRpdHlTZXJ2aWNlUHJvdmlkZXIuXCIgKyB0aGlzLnBvb2wuZ2V0Q2xpZW50SWQoKTtcbiAgICB2YXIgaWRUb2tlbktleSA9IGtleVByZWZpeCArIFwiLlwiICsgdGhpcy51c2VybmFtZSArIFwiLmlkVG9rZW5cIjtcbiAgICB2YXIgYWNjZXNzVG9rZW5LZXkgPSBrZXlQcmVmaXggKyBcIi5cIiArIHRoaXMudXNlcm5hbWUgKyBcIi5hY2Nlc3NUb2tlblwiO1xuICAgIHZhciByZWZyZXNoVG9rZW5LZXkgPSBrZXlQcmVmaXggKyBcIi5cIiArIHRoaXMudXNlcm5hbWUgKyBcIi5yZWZyZXNoVG9rZW5cIjtcbiAgICB2YXIgY2xvY2tEcmlmdEtleSA9IGtleVByZWZpeCArIFwiLlwiICsgdGhpcy51c2VybmFtZSArIFwiLmNsb2NrRHJpZnRcIjtcbiAgICB2YXIgbGFzdFVzZXJLZXkgPSBrZXlQcmVmaXggKyBcIi5MYXN0QXV0aFVzZXJcIjtcbiAgICB0aGlzLnN0b3JhZ2Uuc2V0SXRlbShpZFRva2VuS2V5LCB0aGlzLnNpZ25JblVzZXJTZXNzaW9uLmdldElkVG9rZW4oKS5nZXRKd3RUb2tlbigpKTtcbiAgICB0aGlzLnN0b3JhZ2Uuc2V0SXRlbShhY2Nlc3NUb2tlbktleSwgdGhpcy5zaWduSW5Vc2VyU2Vzc2lvbi5nZXRBY2Nlc3NUb2tlbigpLmdldEp3dFRva2VuKCkpO1xuICAgIHRoaXMuc3RvcmFnZS5zZXRJdGVtKHJlZnJlc2hUb2tlbktleSwgdGhpcy5zaWduSW5Vc2VyU2Vzc2lvbi5nZXRSZWZyZXNoVG9rZW4oKS5nZXRUb2tlbigpKTtcbiAgICB0aGlzLnN0b3JhZ2Uuc2V0SXRlbShjbG9ja0RyaWZ0S2V5LCBcIlwiICsgdGhpcy5zaWduSW5Vc2VyU2Vzc2lvbi5nZXRDbG9ja0RyaWZ0KCkpO1xuICAgIHRoaXMuc3RvcmFnZS5zZXRJdGVtKGxhc3RVc2VyS2V5LCB0aGlzLnVzZXJuYW1lKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBUaGlzIGlzIHRvIGNhY2hlIHVzZXIgZGF0YVxuICAgKi87XG4gIF9wcm90by5jYWNoZVVzZXJEYXRhID0gZnVuY3Rpb24gY2FjaGVVc2VyRGF0YSh1c2VyRGF0YSkge1xuICAgIHRoaXMuc3RvcmFnZS5zZXRJdGVtKHRoaXMudXNlckRhdGFLZXksIEpTT04uc3RyaW5naWZ5KHVzZXJEYXRhKSk7XG4gIH1cblxuICAvKipcbiAgICogVGhpcyBpcyB0byByZW1vdmUgY2FjaGVkIHVzZXIgZGF0YVxuICAgKi87XG4gIF9wcm90by5jbGVhckNhY2hlZFVzZXJEYXRhID0gZnVuY3Rpb24gY2xlYXJDYWNoZWRVc2VyRGF0YSgpIHtcbiAgICB0aGlzLnN0b3JhZ2UucmVtb3ZlSXRlbSh0aGlzLnVzZXJEYXRhS2V5KTtcbiAgfTtcbiAgX3Byb3RvLmNsZWFyQ2FjaGVkVXNlciA9IGZ1bmN0aW9uIGNsZWFyQ2FjaGVkVXNlcigpIHtcbiAgICB0aGlzLmNsZWFyQ2FjaGVkVG9rZW5zKCk7XG4gICAgdGhpcy5jbGVhckNhY2hlZFVzZXJEYXRhKCk7XG4gIH1cblxuICAvKipcbiAgICogVGhpcyBpcyB1c2VkIHRvIGNhY2hlIHRoZSBkZXZpY2Uga2V5IGFuZCBkZXZpY2UgZ3JvdXAgYW5kIGRldmljZSBwYXNzd29yZFxuICAgKiBAcmV0dXJucyB7dm9pZH1cbiAgICovO1xuICBfcHJvdG8uY2FjaGVEZXZpY2VLZXlBbmRQYXNzd29yZCA9IGZ1bmN0aW9uIGNhY2hlRGV2aWNlS2V5QW5kUGFzc3dvcmQoKSB7XG4gICAgdmFyIGtleVByZWZpeCA9IFwiQ29nbml0b0lkZW50aXR5U2VydmljZVByb3ZpZGVyLlwiICsgdGhpcy5wb29sLmdldENsaWVudElkKCkgKyBcIi5cIiArIHRoaXMudXNlcm5hbWU7XG4gICAgdmFyIGRldmljZUtleUtleSA9IGtleVByZWZpeCArIFwiLmRldmljZUtleVwiO1xuICAgIHZhciByYW5kb21QYXNzd29yZEtleSA9IGtleVByZWZpeCArIFwiLnJhbmRvbVBhc3N3b3JkS2V5XCI7XG4gICAgdmFyIGRldmljZUdyb3VwS2V5S2V5ID0ga2V5UHJlZml4ICsgXCIuZGV2aWNlR3JvdXBLZXlcIjtcbiAgICB0aGlzLnN0b3JhZ2Uuc2V0SXRlbShkZXZpY2VLZXlLZXksIHRoaXMuZGV2aWNlS2V5KTtcbiAgICB0aGlzLnN0b3JhZ2Uuc2V0SXRlbShyYW5kb21QYXNzd29yZEtleSwgdGhpcy5yYW5kb21QYXNzd29yZCk7XG4gICAgdGhpcy5zdG9yYWdlLnNldEl0ZW0oZGV2aWNlR3JvdXBLZXlLZXksIHRoaXMuZGV2aWNlR3JvdXBLZXkpO1xuICB9XG5cbiAgLyoqXG4gICAqIFRoaXMgaXMgdXNlZCB0byBnZXQgY3VycmVudCBkZXZpY2Uga2V5IGFuZCBkZXZpY2UgZ3JvdXAgYW5kIGRldmljZSBwYXNzd29yZFxuICAgKiBAcmV0dXJucyB7dm9pZH1cbiAgICovO1xuICBfcHJvdG8uZ2V0Q2FjaGVkRGV2aWNlS2V5QW5kUGFzc3dvcmQgPSBmdW5jdGlvbiBnZXRDYWNoZWREZXZpY2VLZXlBbmRQYXNzd29yZCgpIHtcbiAgICB2YXIga2V5UHJlZml4ID0gXCJDb2duaXRvSWRlbnRpdHlTZXJ2aWNlUHJvdmlkZXIuXCIgKyB0aGlzLnBvb2wuZ2V0Q2xpZW50SWQoKSArIFwiLlwiICsgdGhpcy51c2VybmFtZTtcbiAgICB2YXIgZGV2aWNlS2V5S2V5ID0ga2V5UHJlZml4ICsgXCIuZGV2aWNlS2V5XCI7XG4gICAgdmFyIHJhbmRvbVBhc3N3b3JkS2V5ID0ga2V5UHJlZml4ICsgXCIucmFuZG9tUGFzc3dvcmRLZXlcIjtcbiAgICB2YXIgZGV2aWNlR3JvdXBLZXlLZXkgPSBrZXlQcmVmaXggKyBcIi5kZXZpY2VHcm91cEtleVwiO1xuICAgIGlmICh0aGlzLnN0b3JhZ2UuZ2V0SXRlbShkZXZpY2VLZXlLZXkpKSB7XG4gICAgICB0aGlzLmRldmljZUtleSA9IHRoaXMuc3RvcmFnZS5nZXRJdGVtKGRldmljZUtleUtleSk7XG4gICAgICB0aGlzLnJhbmRvbVBhc3N3b3JkID0gdGhpcy5zdG9yYWdlLmdldEl0ZW0ocmFuZG9tUGFzc3dvcmRLZXkpO1xuICAgICAgdGhpcy5kZXZpY2VHcm91cEtleSA9IHRoaXMuc3RvcmFnZS5nZXRJdGVtKGRldmljZUdyb3VwS2V5S2V5KTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogVGhpcyBpcyB1c2VkIHRvIGNsZWFyIHRoZSBkZXZpY2Uga2V5IGluZm8gZnJvbSBsb2NhbCBzdG9yYWdlXG4gICAqIEByZXR1cm5zIHt2b2lkfVxuICAgKi87XG4gIF9wcm90by5jbGVhckNhY2hlZERldmljZUtleUFuZFBhc3N3b3JkID0gZnVuY3Rpb24gY2xlYXJDYWNoZWREZXZpY2VLZXlBbmRQYXNzd29yZCgpIHtcbiAgICB2YXIga2V5UHJlZml4ID0gXCJDb2duaXRvSWRlbnRpdHlTZXJ2aWNlUHJvdmlkZXIuXCIgKyB0aGlzLnBvb2wuZ2V0Q2xpZW50SWQoKSArIFwiLlwiICsgdGhpcy51c2VybmFtZTtcbiAgICB2YXIgZGV2aWNlS2V5S2V5ID0ga2V5UHJlZml4ICsgXCIuZGV2aWNlS2V5XCI7XG4gICAgdmFyIHJhbmRvbVBhc3N3b3JkS2V5ID0ga2V5UHJlZml4ICsgXCIucmFuZG9tUGFzc3dvcmRLZXlcIjtcbiAgICB2YXIgZGV2aWNlR3JvdXBLZXlLZXkgPSBrZXlQcmVmaXggKyBcIi5kZXZpY2VHcm91cEtleVwiO1xuICAgIHRoaXMuc3RvcmFnZS5yZW1vdmVJdGVtKGRldmljZUtleUtleSk7XG4gICAgdGhpcy5zdG9yYWdlLnJlbW92ZUl0ZW0ocmFuZG9tUGFzc3dvcmRLZXkpO1xuICAgIHRoaXMuc3RvcmFnZS5yZW1vdmVJdGVtKGRldmljZUdyb3VwS2V5S2V5KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBUaGlzIGlzIHVzZWQgdG8gY2xlYXIgdGhlIHNlc3Npb24gdG9rZW5zIGZyb20gbG9jYWwgc3RvcmFnZVxuICAgKiBAcmV0dXJucyB7dm9pZH1cbiAgICovO1xuICBfcHJvdG8uY2xlYXJDYWNoZWRUb2tlbnMgPSBmdW5jdGlvbiBjbGVhckNhY2hlZFRva2VucygpIHtcbiAgICB2YXIga2V5UHJlZml4ID0gXCJDb2duaXRvSWRlbnRpdHlTZXJ2aWNlUHJvdmlkZXIuXCIgKyB0aGlzLnBvb2wuZ2V0Q2xpZW50SWQoKTtcbiAgICB2YXIgaWRUb2tlbktleSA9IGtleVByZWZpeCArIFwiLlwiICsgdGhpcy51c2VybmFtZSArIFwiLmlkVG9rZW5cIjtcbiAgICB2YXIgYWNjZXNzVG9rZW5LZXkgPSBrZXlQcmVmaXggKyBcIi5cIiArIHRoaXMudXNlcm5hbWUgKyBcIi5hY2Nlc3NUb2tlblwiO1xuICAgIHZhciByZWZyZXNoVG9rZW5LZXkgPSBrZXlQcmVmaXggKyBcIi5cIiArIHRoaXMudXNlcm5hbWUgKyBcIi5yZWZyZXNoVG9rZW5cIjtcbiAgICB2YXIgbGFzdFVzZXJLZXkgPSBrZXlQcmVmaXggKyBcIi5MYXN0QXV0aFVzZXJcIjtcbiAgICB2YXIgY2xvY2tEcmlmdEtleSA9IGtleVByZWZpeCArIFwiLlwiICsgdGhpcy51c2VybmFtZSArIFwiLmNsb2NrRHJpZnRcIjtcbiAgICB0aGlzLnN0b3JhZ2UucmVtb3ZlSXRlbShpZFRva2VuS2V5KTtcbiAgICB0aGlzLnN0b3JhZ2UucmVtb3ZlSXRlbShhY2Nlc3NUb2tlbktleSk7XG4gICAgdGhpcy5zdG9yYWdlLnJlbW92ZUl0ZW0ocmVmcmVzaFRva2VuS2V5KTtcbiAgICB0aGlzLnN0b3JhZ2UucmVtb3ZlSXRlbShsYXN0VXNlcktleSk7XG4gICAgdGhpcy5zdG9yYWdlLnJlbW92ZUl0ZW0oY2xvY2tEcmlmdEtleSk7XG4gIH1cblxuICAvKipcbiAgICogVGhpcyBpcyB1c2VkIHRvIGJ1aWxkIGEgdXNlciBzZXNzaW9uIGZyb20gdG9rZW5zIHJldHJpZXZlZCBpbiB0aGUgYXV0aGVudGljYXRpb24gcmVzdWx0XG4gICAqIEBwYXJhbSB7b2JqZWN0fSBhdXRoUmVzdWx0IFN1Y2Nlc3NmdWwgYXV0aCByZXNwb25zZSBmcm9tIHNlcnZlci5cbiAgICogQHJldHVybnMge0NvZ25pdG9Vc2VyU2Vzc2lvbn0gVGhlIG5ldyB1c2VyIHNlc3Npb24uXG4gICAqIEBwcml2YXRlXG4gICAqLztcbiAgX3Byb3RvLmdldENvZ25pdG9Vc2VyU2Vzc2lvbiA9IGZ1bmN0aW9uIGdldENvZ25pdG9Vc2VyU2Vzc2lvbihhdXRoUmVzdWx0KSB7XG4gICAgdmFyIGlkVG9rZW4gPSBuZXcgX0NvZ25pdG9JZFRva2VuW1wiZGVmYXVsdFwiXShhdXRoUmVzdWx0KTtcbiAgICB2YXIgYWNjZXNzVG9rZW4gPSBuZXcgX0NvZ25pdG9BY2Nlc3NUb2tlbltcImRlZmF1bHRcIl0oYXV0aFJlc3VsdCk7XG4gICAgdmFyIHJlZnJlc2hUb2tlbiA9IG5ldyBfQ29nbml0b1JlZnJlc2hUb2tlbltcImRlZmF1bHRcIl0oYXV0aFJlc3VsdCk7XG4gICAgdmFyIHNlc3Npb25EYXRhID0ge1xuICAgICAgSWRUb2tlbjogaWRUb2tlbixcbiAgICAgIEFjY2Vzc1Rva2VuOiBhY2Nlc3NUb2tlbixcbiAgICAgIFJlZnJlc2hUb2tlbjogcmVmcmVzaFRva2VuXG4gICAgfTtcbiAgICByZXR1cm4gbmV3IF9Db2duaXRvVXNlclNlc3Npb25bXCJkZWZhdWx0XCJdKHNlc3Npb25EYXRhKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBUaGlzIGlzIHVzZWQgdG8gaW5pdGlhdGUgYSBmb3Jnb3QgcGFzc3dvcmQgcmVxdWVzdFxuICAgKiBAcGFyYW0ge29iamVjdH0gY2FsbGJhY2sgUmVzdWx0IGNhbGxiYWNrIG1hcC5cbiAgICogQHBhcmFtIHtvbkZhaWx1cmV9IGNhbGxiYWNrLm9uRmFpbHVyZSBDYWxsZWQgb24gYW55IGVycm9yLlxuICAgKiBAcGFyYW0ge2lucHV0VmVyaWZpY2F0aW9uQ29kZT99IGNhbGxiYWNrLmlucHV0VmVyaWZpY2F0aW9uQ29kZVxuICAgKiAgICBPcHRpb25hbCBjYWxsYmFjayByYWlzZWQgaW5zdGVhZCBvZiBvblN1Y2Nlc3Mgd2l0aCByZXNwb25zZSBkYXRhLlxuICAgKiBAcGFyYW0ge29uU3VjY2Vzc30gY2FsbGJhY2sub25TdWNjZXNzIENhbGxlZCBvbiBzdWNjZXNzLlxuICAgKiBAcGFyYW0ge0NsaWVudE1ldGFkYXRhfSBjbGllbnRNZXRhZGF0YSBvYmplY3Qgd2hpY2ggaXMgcGFzc2VkIGZyb20gY2xpZW50IHRvIENvZ25pdG8gTGFtYmRhIHRyaWdnZXJcbiAgICogQHJldHVybnMge3ZvaWR9XG4gICAqLztcbiAgX3Byb3RvLmZvcmdvdFBhc3N3b3JkID0gZnVuY3Rpb24gZm9yZ290UGFzc3dvcmQoY2FsbGJhY2ssIGNsaWVudE1ldGFkYXRhKSB7XG4gICAgdmFyIGpzb25SZXEgPSB7XG4gICAgICBDbGllbnRJZDogdGhpcy5wb29sLmdldENsaWVudElkKCksXG4gICAgICBVc2VybmFtZTogdGhpcy51c2VybmFtZSxcbiAgICAgIENsaWVudE1ldGFkYXRhOiBjbGllbnRNZXRhZGF0YVxuICAgIH07XG4gICAgaWYgKHRoaXMuZ2V0VXNlckNvbnRleHREYXRhKCkpIHtcbiAgICAgIGpzb25SZXEuVXNlckNvbnRleHREYXRhID0gdGhpcy5nZXRVc2VyQ29udGV4dERhdGEoKTtcbiAgICB9XG4gICAgdGhpcy5jbGllbnQucmVxdWVzdCgnRm9yZ290UGFzc3dvcmQnLCBqc29uUmVxLCBmdW5jdGlvbiAoZXJyLCBkYXRhKSB7XG4gICAgICBpZiAoZXJyKSB7XG4gICAgICAgIHJldHVybiBjYWxsYmFjay5vbkZhaWx1cmUoZXJyKTtcbiAgICAgIH1cbiAgICAgIGlmICh0eXBlb2YgY2FsbGJhY2suaW5wdXRWZXJpZmljYXRpb25Db2RlID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgIHJldHVybiBjYWxsYmFjay5pbnB1dFZlcmlmaWNhdGlvbkNvZGUoZGF0YSk7XG4gICAgICB9XG4gICAgICByZXR1cm4gY2FsbGJhY2sub25TdWNjZXNzKGRhdGEpO1xuICAgIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqIFRoaXMgaXMgdXNlZCB0byBjb25maXJtIGEgbmV3IHBhc3N3b3JkIHVzaW5nIGEgY29uZmlybWF0aW9uQ29kZVxuICAgKiBAcGFyYW0ge3N0cmluZ30gY29uZmlybWF0aW9uQ29kZSBDb2RlIGVudGVyZWQgYnkgdXNlci5cbiAgICogQHBhcmFtIHtzdHJpbmd9IG5ld1Bhc3N3b3JkIENvbmZpcm0gbmV3IHBhc3N3b3JkLlxuICAgKiBAcGFyYW0ge29iamVjdH0gY2FsbGJhY2sgUmVzdWx0IGNhbGxiYWNrIG1hcC5cbiAgICogQHBhcmFtIHtvbkZhaWx1cmV9IGNhbGxiYWNrLm9uRmFpbHVyZSBDYWxsZWQgb24gYW55IGVycm9yLlxuICAgKiBAcGFyYW0ge29uU3VjY2Vzczx2b2lkPn0gY2FsbGJhY2sub25TdWNjZXNzIENhbGxlZCBvbiBzdWNjZXNzLlxuICAgKiBAcGFyYW0ge0NsaWVudE1ldGFkYXRhfSBjbGllbnRNZXRhZGF0YSBvYmplY3Qgd2hpY2ggaXMgcGFzc2VkIGZyb20gY2xpZW50IHRvIENvZ25pdG8gTGFtYmRhIHRyaWdnZXJcbiAgICogQHJldHVybnMge3ZvaWR9XG4gICAqLztcbiAgX3Byb3RvLmNvbmZpcm1QYXNzd29yZCA9IGZ1bmN0aW9uIGNvbmZpcm1QYXNzd29yZChjb25maXJtYXRpb25Db2RlLCBuZXdQYXNzd29yZCwgY2FsbGJhY2ssIGNsaWVudE1ldGFkYXRhKSB7XG4gICAgdmFyIGpzb25SZXEgPSB7XG4gICAgICBDbGllbnRJZDogdGhpcy5wb29sLmdldENsaWVudElkKCksXG4gICAgICBVc2VybmFtZTogdGhpcy51c2VybmFtZSxcbiAgICAgIENvbmZpcm1hdGlvbkNvZGU6IGNvbmZpcm1hdGlvbkNvZGUsXG4gICAgICBQYXNzd29yZDogbmV3UGFzc3dvcmQsXG4gICAgICBDbGllbnRNZXRhZGF0YTogY2xpZW50TWV0YWRhdGFcbiAgICB9O1xuICAgIGlmICh0aGlzLmdldFVzZXJDb250ZXh0RGF0YSgpKSB7XG4gICAgICBqc29uUmVxLlVzZXJDb250ZXh0RGF0YSA9IHRoaXMuZ2V0VXNlckNvbnRleHREYXRhKCk7XG4gICAgfVxuICAgIHRoaXMuY2xpZW50LnJlcXVlc3QoJ0NvbmZpcm1Gb3Jnb3RQYXNzd29yZCcsIGpzb25SZXEsIGZ1bmN0aW9uIChlcnIpIHtcbiAgICAgIGlmIChlcnIpIHtcbiAgICAgICAgcmV0dXJuIGNhbGxiYWNrLm9uRmFpbHVyZShlcnIpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIGNhbGxiYWNrLm9uU3VjY2VzcygnU1VDQ0VTUycpO1xuICAgIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqIFRoaXMgaXMgdXNlZCB0byBpbml0aWF0ZSBhbiBhdHRyaWJ1dGUgY29uZmlybWF0aW9uIHJlcXVlc3RcbiAgICogQHBhcmFtIHtzdHJpbmd9IGF0dHJpYnV0ZU5hbWUgVXNlciBhdHRyaWJ1dGUgdGhhdCBuZWVkcyBjb25maXJtYXRpb24uXG4gICAqIEBwYXJhbSB7b2JqZWN0fSBjYWxsYmFjayBSZXN1bHQgY2FsbGJhY2sgbWFwLlxuICAgKiBAcGFyYW0ge29uRmFpbHVyZX0gY2FsbGJhY2sub25GYWlsdXJlIENhbGxlZCBvbiBhbnkgZXJyb3IuXG4gICAqIEBwYXJhbSB7aW5wdXRWZXJpZmljYXRpb25Db2RlfSBjYWxsYmFjay5pbnB1dFZlcmlmaWNhdGlvbkNvZGUgQ2FsbGVkIG9uIHN1Y2Nlc3MuXG4gICAqIEBwYXJhbSB7Q2xpZW50TWV0YWRhdGF9IGNsaWVudE1ldGFkYXRhIG9iamVjdCB3aGljaCBpcyBwYXNzZWQgZnJvbSBjbGllbnQgdG8gQ29nbml0byBMYW1iZGEgdHJpZ2dlclxuICAgKiBAcmV0dXJucyB7dm9pZH1cbiAgICovO1xuICBfcHJvdG8uZ2V0QXR0cmlidXRlVmVyaWZpY2F0aW9uQ29kZSA9IGZ1bmN0aW9uIGdldEF0dHJpYnV0ZVZlcmlmaWNhdGlvbkNvZGUoYXR0cmlidXRlTmFtZSwgY2FsbGJhY2ssIGNsaWVudE1ldGFkYXRhKSB7XG4gICAgaWYgKHRoaXMuc2lnbkluVXNlclNlc3Npb24gPT0gbnVsbCB8fCAhdGhpcy5zaWduSW5Vc2VyU2Vzc2lvbi5pc1ZhbGlkKCkpIHtcbiAgICAgIHJldHVybiBjYWxsYmFjay5vbkZhaWx1cmUobmV3IEVycm9yKCdVc2VyIGlzIG5vdCBhdXRoZW50aWNhdGVkJykpO1xuICAgIH1cbiAgICB0aGlzLmNsaWVudC5yZXF1ZXN0KCdHZXRVc2VyQXR0cmlidXRlVmVyaWZpY2F0aW9uQ29kZScsIHtcbiAgICAgIEF0dHJpYnV0ZU5hbWU6IGF0dHJpYnV0ZU5hbWUsXG4gICAgICBBY2Nlc3NUb2tlbjogdGhpcy5zaWduSW5Vc2VyU2Vzc2lvbi5nZXRBY2Nlc3NUb2tlbigpLmdldEp3dFRva2VuKCksXG4gICAgICBDbGllbnRNZXRhZGF0YTogY2xpZW50TWV0YWRhdGFcbiAgICB9LCBmdW5jdGlvbiAoZXJyLCBkYXRhKSB7XG4gICAgICBpZiAoZXJyKSB7XG4gICAgICAgIHJldHVybiBjYWxsYmFjay5vbkZhaWx1cmUoZXJyKTtcbiAgICAgIH1cbiAgICAgIGlmICh0eXBlb2YgY2FsbGJhY2suaW5wdXRWZXJpZmljYXRpb25Db2RlID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgIHJldHVybiBjYWxsYmFjay5pbnB1dFZlcmlmaWNhdGlvbkNvZGUoZGF0YSk7XG4gICAgICB9XG4gICAgICByZXR1cm4gY2FsbGJhY2sub25TdWNjZXNzKCdTVUNDRVNTJyk7XG4gICAgfSk7XG4gICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgfVxuXG4gIC8qKlxuICAgKiBUaGlzIGlzIHVzZWQgdG8gY29uZmlybSBhbiBhdHRyaWJ1dGUgdXNpbmcgYSBjb25maXJtYXRpb24gY29kZVxuICAgKiBAcGFyYW0ge3N0cmluZ30gYXR0cmlidXRlTmFtZSBBdHRyaWJ1dGUgYmVpbmcgY29uZmlybWVkLlxuICAgKiBAcGFyYW0ge3N0cmluZ30gY29uZmlybWF0aW9uQ29kZSBDb2RlIGVudGVyZWQgYnkgdXNlci5cbiAgICogQHBhcmFtIHtvYmplY3R9IGNhbGxiYWNrIFJlc3VsdCBjYWxsYmFjayBtYXAuXG4gICAqIEBwYXJhbSB7b25GYWlsdXJlfSBjYWxsYmFjay5vbkZhaWx1cmUgQ2FsbGVkIG9uIGFueSBlcnJvci5cbiAgICogQHBhcmFtIHtvblN1Y2Nlc3M8c3RyaW5nPn0gY2FsbGJhY2sub25TdWNjZXNzIENhbGxlZCBvbiBzdWNjZXNzLlxuICAgKiBAcmV0dXJucyB7dm9pZH1cbiAgICovO1xuICBfcHJvdG8udmVyaWZ5QXR0cmlidXRlID0gZnVuY3Rpb24gdmVyaWZ5QXR0cmlidXRlKGF0dHJpYnV0ZU5hbWUsIGNvbmZpcm1hdGlvbkNvZGUsIGNhbGxiYWNrKSB7XG4gICAgaWYgKHRoaXMuc2lnbkluVXNlclNlc3Npb24gPT0gbnVsbCB8fCAhdGhpcy5zaWduSW5Vc2VyU2Vzc2lvbi5pc1ZhbGlkKCkpIHtcbiAgICAgIHJldHVybiBjYWxsYmFjay5vbkZhaWx1cmUobmV3IEVycm9yKCdVc2VyIGlzIG5vdCBhdXRoZW50aWNhdGVkJykpO1xuICAgIH1cbiAgICB0aGlzLmNsaWVudC5yZXF1ZXN0KCdWZXJpZnlVc2VyQXR0cmlidXRlJywge1xuICAgICAgQXR0cmlidXRlTmFtZTogYXR0cmlidXRlTmFtZSxcbiAgICAgIENvZGU6IGNvbmZpcm1hdGlvbkNvZGUsXG4gICAgICBBY2Nlc3NUb2tlbjogdGhpcy5zaWduSW5Vc2VyU2Vzc2lvbi5nZXRBY2Nlc3NUb2tlbigpLmdldEp3dFRva2VuKClcbiAgICB9LCBmdW5jdGlvbiAoZXJyKSB7XG4gICAgICBpZiAoZXJyKSB7XG4gICAgICAgIHJldHVybiBjYWxsYmFjay5vbkZhaWx1cmUoZXJyKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBjYWxsYmFjay5vblN1Y2Nlc3MoJ1NVQ0NFU1MnKTtcbiAgICB9KTtcbiAgICByZXR1cm4gdW5kZWZpbmVkO1xuICB9XG5cbiAgLyoqXG4gICAqIFRoaXMgaXMgdXNlZCB0byBnZXQgdGhlIGRldmljZSBpbmZvcm1hdGlvbiB1c2luZyB0aGUgY3VycmVudCBkZXZpY2Uga2V5XG4gICAqIEBwYXJhbSB7b2JqZWN0fSBjYWxsYmFjayBSZXN1bHQgY2FsbGJhY2sgbWFwLlxuICAgKiBAcGFyYW0ge29uRmFpbHVyZX0gY2FsbGJhY2sub25GYWlsdXJlIENhbGxlZCBvbiBhbnkgZXJyb3IuXG4gICAqIEBwYXJhbSB7b25TdWNjZXNzPCo+fSBjYWxsYmFjay5vblN1Y2Nlc3MgQ2FsbGVkIG9uIHN1Y2Nlc3Mgd2l0aCBkZXZpY2UgZGF0YS5cbiAgICogQHJldHVybnMge3ZvaWR9XG4gICAqLztcbiAgX3Byb3RvLmdldERldmljZSA9IGZ1bmN0aW9uIGdldERldmljZShjYWxsYmFjaykge1xuICAgIGlmICh0aGlzLnNpZ25JblVzZXJTZXNzaW9uID09IG51bGwgfHwgIXRoaXMuc2lnbkluVXNlclNlc3Npb24uaXNWYWxpZCgpKSB7XG4gICAgICByZXR1cm4gY2FsbGJhY2sub25GYWlsdXJlKG5ldyBFcnJvcignVXNlciBpcyBub3QgYXV0aGVudGljYXRlZCcpKTtcbiAgICB9XG4gICAgdGhpcy5jbGllbnQucmVxdWVzdCgnR2V0RGV2aWNlJywge1xuICAgICAgQWNjZXNzVG9rZW46IHRoaXMuc2lnbkluVXNlclNlc3Npb24uZ2V0QWNjZXNzVG9rZW4oKS5nZXRKd3RUb2tlbigpLFxuICAgICAgRGV2aWNlS2V5OiB0aGlzLmRldmljZUtleVxuICAgIH0sIGZ1bmN0aW9uIChlcnIsIGRhdGEpIHtcbiAgICAgIGlmIChlcnIpIHtcbiAgICAgICAgcmV0dXJuIGNhbGxiYWNrLm9uRmFpbHVyZShlcnIpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIGNhbGxiYWNrLm9uU3VjY2VzcyhkYXRhKTtcbiAgICB9KTtcbiAgICByZXR1cm4gdW5kZWZpbmVkO1xuICB9XG5cbiAgLyoqXG4gICAqIFRoaXMgaXMgdXNlZCB0byBmb3JnZXQgYSBzcGVjaWZpYyBkZXZpY2VcbiAgICogQHBhcmFtIHtzdHJpbmd9IGRldmljZUtleSBEZXZpY2Uga2V5LlxuICAgKiBAcGFyYW0ge29iamVjdH0gY2FsbGJhY2sgUmVzdWx0IGNhbGxiYWNrIG1hcC5cbiAgICogQHBhcmFtIHtvbkZhaWx1cmV9IGNhbGxiYWNrLm9uRmFpbHVyZSBDYWxsZWQgb24gYW55IGVycm9yLlxuICAgKiBAcGFyYW0ge29uU3VjY2VzczxzdHJpbmc+fSBjYWxsYmFjay5vblN1Y2Nlc3MgQ2FsbGVkIG9uIHN1Y2Nlc3MuXG4gICAqIEByZXR1cm5zIHt2b2lkfVxuICAgKi87XG4gIF9wcm90by5mb3JnZXRTcGVjaWZpY0RldmljZSA9IGZ1bmN0aW9uIGZvcmdldFNwZWNpZmljRGV2aWNlKGRldmljZUtleSwgY2FsbGJhY2spIHtcbiAgICBpZiAodGhpcy5zaWduSW5Vc2VyU2Vzc2lvbiA9PSBudWxsIHx8ICF0aGlzLnNpZ25JblVzZXJTZXNzaW9uLmlzVmFsaWQoKSkge1xuICAgICAgcmV0dXJuIGNhbGxiYWNrLm9uRmFpbHVyZShuZXcgRXJyb3IoJ1VzZXIgaXMgbm90IGF1dGhlbnRpY2F0ZWQnKSk7XG4gICAgfVxuICAgIHRoaXMuY2xpZW50LnJlcXVlc3QoJ0ZvcmdldERldmljZScsIHtcbiAgICAgIEFjY2Vzc1Rva2VuOiB0aGlzLnNpZ25JblVzZXJTZXNzaW9uLmdldEFjY2Vzc1Rva2VuKCkuZ2V0Snd0VG9rZW4oKSxcbiAgICAgIERldmljZUtleTogZGV2aWNlS2V5XG4gICAgfSwgZnVuY3Rpb24gKGVycikge1xuICAgICAgaWYgKGVycikge1xuICAgICAgICByZXR1cm4gY2FsbGJhY2sub25GYWlsdXJlKGVycik7XG4gICAgICB9XG4gICAgICByZXR1cm4gY2FsbGJhY2sub25TdWNjZXNzKCdTVUNDRVNTJyk7XG4gICAgfSk7XG4gICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgfVxuXG4gIC8qKlxuICAgKiBUaGlzIGlzIHVzZWQgdG8gZm9yZ2V0IHRoZSBjdXJyZW50IGRldmljZVxuICAgKiBAcGFyYW0ge29iamVjdH0gY2FsbGJhY2sgUmVzdWx0IGNhbGxiYWNrIG1hcC5cbiAgICogQHBhcmFtIHtvbkZhaWx1cmV9IGNhbGxiYWNrLm9uRmFpbHVyZSBDYWxsZWQgb24gYW55IGVycm9yLlxuICAgKiBAcGFyYW0ge29uU3VjY2VzczxzdHJpbmc+fSBjYWxsYmFjay5vblN1Y2Nlc3MgQ2FsbGVkIG9uIHN1Y2Nlc3MuXG4gICAqIEByZXR1cm5zIHt2b2lkfVxuICAgKi87XG4gIF9wcm90by5mb3JnZXREZXZpY2UgPSBmdW5jdGlvbiBmb3JnZXREZXZpY2UoY2FsbGJhY2spIHtcbiAgICB2YXIgX3RoaXMxNiA9IHRoaXM7XG4gICAgdGhpcy5mb3JnZXRTcGVjaWZpY0RldmljZSh0aGlzLmRldmljZUtleSwge1xuICAgICAgb25GYWlsdXJlOiBjYWxsYmFjay5vbkZhaWx1cmUsXG4gICAgICBvblN1Y2Nlc3M6IGZ1bmN0aW9uIG9uU3VjY2VzcyhyZXN1bHQpIHtcbiAgICAgICAgX3RoaXMxNi5kZXZpY2VLZXkgPSBudWxsO1xuICAgICAgICBfdGhpczE2LmRldmljZUdyb3VwS2V5ID0gbnVsbDtcbiAgICAgICAgX3RoaXMxNi5yYW5kb21QYXNzd29yZCA9IG51bGw7XG4gICAgICAgIF90aGlzMTYuY2xlYXJDYWNoZWREZXZpY2VLZXlBbmRQYXNzd29yZCgpO1xuICAgICAgICByZXR1cm4gY2FsbGJhY2sub25TdWNjZXNzKHJlc3VsdCk7XG4gICAgICB9XG4gICAgfSk7XG4gIH1cblxuICAvKipcbiAgICogVGhpcyBpcyB1c2VkIHRvIHNldCB0aGUgZGV2aWNlIHN0YXR1cyBhcyByZW1lbWJlcmVkXG4gICAqIEBwYXJhbSB7b2JqZWN0fSBjYWxsYmFjayBSZXN1bHQgY2FsbGJhY2sgbWFwLlxuICAgKiBAcGFyYW0ge29uRmFpbHVyZX0gY2FsbGJhY2sub25GYWlsdXJlIENhbGxlZCBvbiBhbnkgZXJyb3IuXG4gICAqIEBwYXJhbSB7b25TdWNjZXNzPHN0cmluZz59IGNhbGxiYWNrLm9uU3VjY2VzcyBDYWxsZWQgb24gc3VjY2Vzcy5cbiAgICogQHJldHVybnMge3ZvaWR9XG4gICAqLztcbiAgX3Byb3RvLnNldERldmljZVN0YXR1c1JlbWVtYmVyZWQgPSBmdW5jdGlvbiBzZXREZXZpY2VTdGF0dXNSZW1lbWJlcmVkKGNhbGxiYWNrKSB7XG4gICAgaWYgKHRoaXMuc2lnbkluVXNlclNlc3Npb24gPT0gbnVsbCB8fCAhdGhpcy5zaWduSW5Vc2VyU2Vzc2lvbi5pc1ZhbGlkKCkpIHtcbiAgICAgIHJldHVybiBjYWxsYmFjay5vbkZhaWx1cmUobmV3IEVycm9yKCdVc2VyIGlzIG5vdCBhdXRoZW50aWNhdGVkJykpO1xuICAgIH1cbiAgICB0aGlzLmNsaWVudC5yZXF1ZXN0KCdVcGRhdGVEZXZpY2VTdGF0dXMnLCB7XG4gICAgICBBY2Nlc3NUb2tlbjogdGhpcy5zaWduSW5Vc2VyU2Vzc2lvbi5nZXRBY2Nlc3NUb2tlbigpLmdldEp3dFRva2VuKCksXG4gICAgICBEZXZpY2VLZXk6IHRoaXMuZGV2aWNlS2V5LFxuICAgICAgRGV2aWNlUmVtZW1iZXJlZFN0YXR1czogJ3JlbWVtYmVyZWQnXG4gICAgfSwgZnVuY3Rpb24gKGVycikge1xuICAgICAgaWYgKGVycikge1xuICAgICAgICByZXR1cm4gY2FsbGJhY2sub25GYWlsdXJlKGVycik7XG4gICAgICB9XG4gICAgICByZXR1cm4gY2FsbGJhY2sub25TdWNjZXNzKCdTVUNDRVNTJyk7XG4gICAgfSk7XG4gICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgfVxuXG4gIC8qKlxuICAgKiBUaGlzIGlzIHVzZWQgdG8gc2V0IHRoZSBkZXZpY2Ugc3RhdHVzIGFzIG5vdCByZW1lbWJlcmVkXG4gICAqIEBwYXJhbSB7b2JqZWN0fSBjYWxsYmFjayBSZXN1bHQgY2FsbGJhY2sgbWFwLlxuICAgKiBAcGFyYW0ge29uRmFpbHVyZX0gY2FsbGJhY2sub25GYWlsdXJlIENhbGxlZCBvbiBhbnkgZXJyb3IuXG4gICAqIEBwYXJhbSB7b25TdWNjZXNzPHN0cmluZz59IGNhbGxiYWNrLm9uU3VjY2VzcyBDYWxsZWQgb24gc3VjY2Vzcy5cbiAgICogQHJldHVybnMge3ZvaWR9XG4gICAqLztcbiAgX3Byb3RvLnNldERldmljZVN0YXR1c05vdFJlbWVtYmVyZWQgPSBmdW5jdGlvbiBzZXREZXZpY2VTdGF0dXNOb3RSZW1lbWJlcmVkKGNhbGxiYWNrKSB7XG4gICAgaWYgKHRoaXMuc2lnbkluVXNlclNlc3Npb24gPT0gbnVsbCB8fCAhdGhpcy5zaWduSW5Vc2VyU2Vzc2lvbi5pc1ZhbGlkKCkpIHtcbiAgICAgIHJldHVybiBjYWxsYmFjay5vbkZhaWx1cmUobmV3IEVycm9yKCdVc2VyIGlzIG5vdCBhdXRoZW50aWNhdGVkJykpO1xuICAgIH1cbiAgICB0aGlzLmNsaWVudC5yZXF1ZXN0KCdVcGRhdGVEZXZpY2VTdGF0dXMnLCB7XG4gICAgICBBY2Nlc3NUb2tlbjogdGhpcy5zaWduSW5Vc2VyU2Vzc2lvbi5nZXRBY2Nlc3NUb2tlbigpLmdldEp3dFRva2VuKCksXG4gICAgICBEZXZpY2VLZXk6IHRoaXMuZGV2aWNlS2V5LFxuICAgICAgRGV2aWNlUmVtZW1iZXJlZFN0YXR1czogJ25vdF9yZW1lbWJlcmVkJ1xuICAgIH0sIGZ1bmN0aW9uIChlcnIpIHtcbiAgICAgIGlmIChlcnIpIHtcbiAgICAgICAgcmV0dXJuIGNhbGxiYWNrLm9uRmFpbHVyZShlcnIpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIGNhbGxiYWNrLm9uU3VjY2VzcygnU1VDQ0VTUycpO1xuICAgIH0pO1xuICAgIHJldHVybiB1bmRlZmluZWQ7XG4gIH1cblxuICAvKipcbiAgICogVGhpcyBpcyB1c2VkIHRvIGxpc3QgYWxsIGRldmljZXMgZm9yIGEgdXNlclxuICAgKlxuICAgKiBAcGFyYW0ge2ludH0gbGltaXQgdGhlIG51bWJlciBvZiBkZXZpY2VzIHJldHVybmVkIGluIGEgY2FsbFxuICAgKiBAcGFyYW0ge3N0cmluZyB8IG51bGx9IHBhZ2luYXRpb25Ub2tlbiB0aGUgcGFnaW5hdGlvbiB0b2tlbiBpbiBjYXNlIGFueSB3YXMgcmV0dXJuZWQgYmVmb3JlXG4gICAqIEBwYXJhbSB7b2JqZWN0fSBjYWxsYmFjayBSZXN1bHQgY2FsbGJhY2sgbWFwLlxuICAgKiBAcGFyYW0ge29uRmFpbHVyZX0gY2FsbGJhY2sub25GYWlsdXJlIENhbGxlZCBvbiBhbnkgZXJyb3IuXG4gICAqIEBwYXJhbSB7b25TdWNjZXNzPCo+fSBjYWxsYmFjay5vblN1Y2Nlc3MgQ2FsbGVkIG9uIHN1Y2Nlc3Mgd2l0aCBkZXZpY2UgbGlzdC5cbiAgICogQHJldHVybnMge3ZvaWR9XG4gICAqLztcbiAgX3Byb3RvLmxpc3REZXZpY2VzID0gZnVuY3Rpb24gbGlzdERldmljZXMobGltaXQsIHBhZ2luYXRpb25Ub2tlbiwgY2FsbGJhY2spIHtcbiAgICBpZiAodGhpcy5zaWduSW5Vc2VyU2Vzc2lvbiA9PSBudWxsIHx8ICF0aGlzLnNpZ25JblVzZXJTZXNzaW9uLmlzVmFsaWQoKSkge1xuICAgICAgcmV0dXJuIGNhbGxiYWNrLm9uRmFpbHVyZShuZXcgRXJyb3IoJ1VzZXIgaXMgbm90IGF1dGhlbnRpY2F0ZWQnKSk7XG4gICAgfVxuICAgIHZhciByZXF1ZXN0UGFyYW1zID0ge1xuICAgICAgQWNjZXNzVG9rZW46IHRoaXMuc2lnbkluVXNlclNlc3Npb24uZ2V0QWNjZXNzVG9rZW4oKS5nZXRKd3RUb2tlbigpLFxuICAgICAgTGltaXQ6IGxpbWl0XG4gICAgfTtcbiAgICBpZiAocGFnaW5hdGlvblRva2VuKSB7XG4gICAgICByZXF1ZXN0UGFyYW1zLlBhZ2luYXRpb25Ub2tlbiA9IHBhZ2luYXRpb25Ub2tlbjtcbiAgICB9XG4gICAgdGhpcy5jbGllbnQucmVxdWVzdCgnTGlzdERldmljZXMnLCByZXF1ZXN0UGFyYW1zLCBmdW5jdGlvbiAoZXJyLCBkYXRhKSB7XG4gICAgICBpZiAoZXJyKSB7XG4gICAgICAgIHJldHVybiBjYWxsYmFjay5vbkZhaWx1cmUoZXJyKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBjYWxsYmFjay5vblN1Y2Nlc3MoZGF0YSk7XG4gICAgfSk7XG4gICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgfVxuXG4gIC8qKlxuICAgKiBUaGlzIGlzIHVzZWQgdG8gZ2xvYmFsbHkgcmV2b2tlIGFsbCB0b2tlbnMgaXNzdWVkIHRvIGEgdXNlclxuICAgKiBAcGFyYW0ge29iamVjdH0gY2FsbGJhY2sgUmVzdWx0IGNhbGxiYWNrIG1hcC5cbiAgICogQHBhcmFtIHtvbkZhaWx1cmV9IGNhbGxiYWNrLm9uRmFpbHVyZSBDYWxsZWQgb24gYW55IGVycm9yLlxuICAgKiBAcGFyYW0ge29uU3VjY2VzczxzdHJpbmc+fSBjYWxsYmFjay5vblN1Y2Nlc3MgQ2FsbGVkIG9uIHN1Y2Nlc3MuXG4gICAqIEByZXR1cm5zIHt2b2lkfVxuICAgKi87XG4gIF9wcm90by5nbG9iYWxTaWduT3V0ID0gZnVuY3Rpb24gZ2xvYmFsU2lnbk91dChjYWxsYmFjaykge1xuICAgIHZhciBfdGhpczE3ID0gdGhpcztcbiAgICBpZiAodGhpcy5zaWduSW5Vc2VyU2Vzc2lvbiA9PSBudWxsIHx8ICF0aGlzLnNpZ25JblVzZXJTZXNzaW9uLmlzVmFsaWQoKSkge1xuICAgICAgcmV0dXJuIGNhbGxiYWNrLm9uRmFpbHVyZShuZXcgRXJyb3IoJ1VzZXIgaXMgbm90IGF1dGhlbnRpY2F0ZWQnKSk7XG4gICAgfVxuICAgIHRoaXMuY2xpZW50LnJlcXVlc3QoJ0dsb2JhbFNpZ25PdXQnLCB7XG4gICAgICBBY2Nlc3NUb2tlbjogdGhpcy5zaWduSW5Vc2VyU2Vzc2lvbi5nZXRBY2Nlc3NUb2tlbigpLmdldEp3dFRva2VuKClcbiAgICB9LCBmdW5jdGlvbiAoZXJyKSB7XG4gICAgICBpZiAoZXJyKSB7XG4gICAgICAgIHJldHVybiBjYWxsYmFjay5vbkZhaWx1cmUoZXJyKTtcbiAgICAgIH1cbiAgICAgIF90aGlzMTcuY2xlYXJDYWNoZWRVc2VyKCk7XG4gICAgICByZXR1cm4gY2FsbGJhY2sub25TdWNjZXNzKCdTVUNDRVNTJyk7XG4gICAgfSk7XG4gICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgfVxuXG4gIC8qKlxuICAgKiBUaGlzIGlzIHVzZWQgZm9yIHRoZSB1c2VyIHRvIHNpZ25PdXQgb2YgdGhlIGFwcGxpY2F0aW9uIGFuZCBjbGVhciB0aGUgY2FjaGVkIHRva2Vucy5cbiAgICogQHJldHVybnMge3ZvaWR9XG4gICAqLztcbiAgX3Byb3RvLnNpZ25PdXQgPSBmdW5jdGlvbiBzaWduT3V0KHJldm9rZVRva2VuQ2FsbGJhY2spIHtcbiAgICB2YXIgX3RoaXMxOCA9IHRoaXM7XG4gICAgLy8gSWYgdG9rZW5zIHdvbid0IGJlIHJldm9rZWQsIHdlIGp1c3QgY2xlYW4gdGhlIGNsaWVudCBkYXRhLlxuICAgIGlmICghcmV2b2tlVG9rZW5DYWxsYmFjayB8fCB0eXBlb2YgcmV2b2tlVG9rZW5DYWxsYmFjayAhPT0gJ2Z1bmN0aW9uJykge1xuICAgICAgdGhpcy5jbGVhbkNsaWVudERhdGEoKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgdGhpcy5nZXRTZXNzaW9uKGZ1bmN0aW9uIChlcnJvciwgX3Nlc3Npb24pIHtcbiAgICAgIGlmIChlcnJvcikge1xuICAgICAgICByZXR1cm4gcmV2b2tlVG9rZW5DYWxsYmFjayhlcnJvcik7XG4gICAgICB9XG4gICAgICBfdGhpczE4LnJldm9rZVRva2VucyhmdW5jdGlvbiAoZXJyKSB7XG4gICAgICAgIF90aGlzMTguY2xlYW5DbGllbnREYXRhKCk7XG4gICAgICAgIHJldm9rZVRva2VuQ2FsbGJhY2soZXJyKTtcbiAgICAgIH0pO1xuICAgIH0pO1xuICB9O1xuICBfcHJvdG8ucmV2b2tlVG9rZW5zID0gZnVuY3Rpb24gcmV2b2tlVG9rZW5zKHJldm9rZVRva2VuQ2FsbGJhY2spIHtcbiAgICBpZiAocmV2b2tlVG9rZW5DYWxsYmFjayA9PT0gdm9pZCAwKSB7XG4gICAgICByZXZva2VUb2tlbkNhbGxiYWNrID0gZnVuY3Rpb24gcmV2b2tlVG9rZW5DYWxsYmFjaygpIHt9O1xuICAgIH1cbiAgICBpZiAodHlwZW9mIHJldm9rZVRva2VuQ2FsbGJhY2sgIT09ICdmdW5jdGlvbicpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignSW52YWxpZCByZXZva2VUb2tlbkNhbGxiYWNrLiBJdCBzaG91bGQgYmUgYSBmdW5jdGlvbi4nKTtcbiAgICB9XG4gICAgdmFyIHRva2Vuc1RvQmVSZXZva2VkID0gW107XG4gICAgaWYgKCF0aGlzLnNpZ25JblVzZXJTZXNzaW9uKSB7XG4gICAgICB2YXIgZXJyb3IgPSBuZXcgRXJyb3IoJ1VzZXIgaXMgbm90IGF1dGhlbnRpY2F0ZWQnKTtcbiAgICAgIHJldHVybiByZXZva2VUb2tlbkNhbGxiYWNrKGVycm9yKTtcbiAgICB9XG4gICAgaWYgKCF0aGlzLnNpZ25JblVzZXJTZXNzaW9uLmdldEFjY2Vzc1Rva2VuKCkpIHtcbiAgICAgIHZhciBfZXJyb3IgPSBuZXcgRXJyb3IoJ05vIEFjY2VzcyB0b2tlbiBhdmFpbGFibGUnKTtcbiAgICAgIHJldHVybiByZXZva2VUb2tlbkNhbGxiYWNrKF9lcnJvcik7XG4gICAgfVxuICAgIHZhciByZWZyZXNoVG9rZW4gPSB0aGlzLnNpZ25JblVzZXJTZXNzaW9uLmdldFJlZnJlc2hUb2tlbigpLmdldFRva2VuKCk7XG4gICAgdmFyIGFjY2Vzc1Rva2VuID0gdGhpcy5zaWduSW5Vc2VyU2Vzc2lvbi5nZXRBY2Nlc3NUb2tlbigpO1xuICAgIGlmICh0aGlzLmlzU2Vzc2lvblJldm9jYWJsZShhY2Nlc3NUb2tlbikpIHtcbiAgICAgIGlmIChyZWZyZXNoVG9rZW4pIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucmV2b2tlVG9rZW4oe1xuICAgICAgICAgIHRva2VuOiByZWZyZXNoVG9rZW4sXG4gICAgICAgICAgY2FsbGJhY2s6IHJldm9rZVRva2VuQ2FsbGJhY2tcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfVxuICAgIHJldm9rZVRva2VuQ2FsbGJhY2soKTtcbiAgfTtcbiAgX3Byb3RvLmlzU2Vzc2lvblJldm9jYWJsZSA9IGZ1bmN0aW9uIGlzU2Vzc2lvblJldm9jYWJsZSh0b2tlbikge1xuICAgIGlmICh0b2tlbiAmJiB0eXBlb2YgdG9rZW4uZGVjb2RlUGF5bG9hZCA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgdHJ5IHtcbiAgICAgICAgdmFyIF90b2tlbiRkZWNvZGVQYXlsb2FkID0gdG9rZW4uZGVjb2RlUGF5bG9hZCgpLFxuICAgICAgICAgIG9yaWdpbl9qdGkgPSBfdG9rZW4kZGVjb2RlUGF5bG9hZC5vcmlnaW5fanRpO1xuICAgICAgICByZXR1cm4gISFvcmlnaW5fanRpO1xuICAgICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICAgIC8vIE5vdGhpbmcgdG8gZG8sIHRva2VuIGRvZXNudCBoYXZlIG9yaWdpbl9qdGkgY2xhaW1cbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9O1xuICBfcHJvdG8uY2xlYW5DbGllbnREYXRhID0gZnVuY3Rpb24gY2xlYW5DbGllbnREYXRhKCkge1xuICAgIHRoaXMuc2lnbkluVXNlclNlc3Npb24gPSBudWxsO1xuICAgIHRoaXMuY2xlYXJDYWNoZWRVc2VyKCk7XG4gIH07XG4gIF9wcm90by5yZXZva2VUb2tlbiA9IGZ1bmN0aW9uIHJldm9rZVRva2VuKF9yZWYyKSB7XG4gICAgdmFyIHRva2VuID0gX3JlZjIudG9rZW4sXG4gICAgICBjYWxsYmFjayA9IF9yZWYyLmNhbGxiYWNrO1xuICAgIHRoaXMuY2xpZW50LnJlcXVlc3RXaXRoUmV0cnkoJ1Jldm9rZVRva2VuJywge1xuICAgICAgVG9rZW46IHRva2VuLFxuICAgICAgQ2xpZW50SWQ6IHRoaXMucG9vbC5nZXRDbGllbnRJZCgpXG4gICAgfSwgZnVuY3Rpb24gKGVycikge1xuICAgICAgaWYgKGVycikge1xuICAgICAgICByZXR1cm4gY2FsbGJhY2soZXJyKTtcbiAgICAgIH1cbiAgICAgIGNhbGxiYWNrKCk7XG4gICAgfSk7XG4gIH1cblxuICAvKipcbiAgICogVGhpcyBpcyB1c2VkIGJ5IGEgdXNlciB0cnlpbmcgdG8gc2VsZWN0IGEgZ2l2ZW4gTUZBXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBhbnN3ZXJDaGFsbGVuZ2UgdGhlIG1mYSB0aGUgdXNlciB3YW50c1xuICAgKiBAcGFyYW0ge25vZGVDYWxsYmFjazxzdHJpbmc+fSBjYWxsYmFjayBDYWxsZWQgb24gc3VjY2VzcyBvciBlcnJvci5cbiAgICogQHJldHVybnMge3ZvaWR9XG4gICAqLztcbiAgX3Byb3RvLnNlbmRNRkFTZWxlY3Rpb25BbnN3ZXIgPSBmdW5jdGlvbiBzZW5kTUZBU2VsZWN0aW9uQW5zd2VyKGFuc3dlckNoYWxsZW5nZSwgY2FsbGJhY2spIHtcbiAgICB2YXIgX3RoaXMxOSA9IHRoaXM7XG4gICAgdmFyIGNoYWxsZW5nZVJlc3BvbnNlcyA9IHt9O1xuICAgIGNoYWxsZW5nZVJlc3BvbnNlcy5VU0VSTkFNRSA9IHRoaXMudXNlcm5hbWU7XG4gICAgY2hhbGxlbmdlUmVzcG9uc2VzLkFOU1dFUiA9IGFuc3dlckNoYWxsZW5nZTtcbiAgICB2YXIganNvblJlcSA9IHtcbiAgICAgIENoYWxsZW5nZU5hbWU6ICdTRUxFQ1RfTUZBX1RZUEUnLFxuICAgICAgQ2hhbGxlbmdlUmVzcG9uc2VzOiBjaGFsbGVuZ2VSZXNwb25zZXMsXG4gICAgICBDbGllbnRJZDogdGhpcy5wb29sLmdldENsaWVudElkKCksXG4gICAgICBTZXNzaW9uOiB0aGlzLlNlc3Npb25cbiAgICB9O1xuICAgIGlmICh0aGlzLmdldFVzZXJDb250ZXh0RGF0YSgpKSB7XG4gICAgICBqc29uUmVxLlVzZXJDb250ZXh0RGF0YSA9IHRoaXMuZ2V0VXNlckNvbnRleHREYXRhKCk7XG4gICAgfVxuICAgIHRoaXMuY2xpZW50LnJlcXVlc3QoJ1Jlc3BvbmRUb0F1dGhDaGFsbGVuZ2UnLCBqc29uUmVxLCBmdW5jdGlvbiAoZXJyLCBkYXRhKSB7XG4gICAgICBpZiAoZXJyKSB7XG4gICAgICAgIHJldHVybiBjYWxsYmFjay5vbkZhaWx1cmUoZXJyKTtcbiAgICAgIH1cbiAgICAgIF90aGlzMTkuU2Vzc2lvbiA9IGRhdGEuU2Vzc2lvbjtcbiAgICAgIGlmIChhbnN3ZXJDaGFsbGVuZ2UgPT09ICdTTVNfTUZBJykge1xuICAgICAgICByZXR1cm4gY2FsbGJhY2subWZhUmVxdWlyZWQoZGF0YS5DaGFsbGVuZ2VOYW1lLCBkYXRhLkNoYWxsZW5nZVBhcmFtZXRlcnMpO1xuICAgICAgfVxuICAgICAgaWYgKGFuc3dlckNoYWxsZW5nZSA9PT0gJ1NPRlRXQVJFX1RPS0VOX01GQScpIHtcbiAgICAgICAgcmV0dXJuIGNhbGxiYWNrLnRvdHBSZXF1aXJlZChkYXRhLkNoYWxsZW5nZU5hbWUsIGRhdGEuQ2hhbGxlbmdlUGFyYW1ldGVycyk7XG4gICAgICB9XG4gICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqIFRoaXMgcmV0dXJucyB0aGUgdXNlciBjb250ZXh0IGRhdGEgZm9yIGFkdmFuY2VkIHNlY3VyaXR5IGZlYXR1cmUuXG4gICAqIEByZXR1cm5zIHtzdHJpbmd9IHRoZSB1c2VyIGNvbnRleHQgZGF0YSBmcm9tIENvZ25pdG9Vc2VyUG9vbFxuICAgKi87XG4gIF9wcm90by5nZXRVc2VyQ29udGV4dERhdGEgPSBmdW5jdGlvbiBnZXRVc2VyQ29udGV4dERhdGEoKSB7XG4gICAgdmFyIHBvb2wgPSB0aGlzLnBvb2w7XG4gICAgcmV0dXJuIHBvb2wuZ2V0VXNlckNvbnRleHREYXRhKHRoaXMudXNlcm5hbWUpO1xuICB9XG5cbiAgLyoqXG4gICAqIFRoaXMgaXMgdXNlZCBieSBhbiBhdXRoZW50aWNhdGVkIG9yIGEgdXNlciB0cnlpbmcgdG8gYXV0aGVudGljYXRlIHRvIGFzc29jaWF0ZSBhIFRPVFAgTUZBXG4gICAqIEBwYXJhbSB7bm9kZUNhbGxiYWNrPHN0cmluZz59IGNhbGxiYWNrIENhbGxlZCBvbiBzdWNjZXNzIG9yIGVycm9yLlxuICAgKiBAcmV0dXJucyB7dm9pZH1cbiAgICovO1xuICBfcHJvdG8uYXNzb2NpYXRlU29mdHdhcmVUb2tlbiA9IGZ1bmN0aW9uIGFzc29jaWF0ZVNvZnR3YXJlVG9rZW4oY2FsbGJhY2spIHtcbiAgICB2YXIgX3RoaXMyMCA9IHRoaXM7XG4gICAgaWYgKCEodGhpcy5zaWduSW5Vc2VyU2Vzc2lvbiAhPSBudWxsICYmIHRoaXMuc2lnbkluVXNlclNlc3Npb24uaXNWYWxpZCgpKSkge1xuICAgICAgdGhpcy5jbGllbnQucmVxdWVzdCgnQXNzb2NpYXRlU29mdHdhcmVUb2tlbicsIHtcbiAgICAgICAgU2Vzc2lvbjogdGhpcy5TZXNzaW9uXG4gICAgICB9LCBmdW5jdGlvbiAoZXJyLCBkYXRhKSB7XG4gICAgICAgIGlmIChlcnIpIHtcbiAgICAgICAgICByZXR1cm4gY2FsbGJhY2sub25GYWlsdXJlKGVycik7XG4gICAgICAgIH1cbiAgICAgICAgX3RoaXMyMC5TZXNzaW9uID0gZGF0YS5TZXNzaW9uO1xuICAgICAgICByZXR1cm4gY2FsbGJhY2suYXNzb2NpYXRlU2VjcmV0Q29kZShkYXRhLlNlY3JldENvZGUpO1xuICAgICAgfSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuY2xpZW50LnJlcXVlc3QoJ0Fzc29jaWF0ZVNvZnR3YXJlVG9rZW4nLCB7XG4gICAgICAgIEFjY2Vzc1Rva2VuOiB0aGlzLnNpZ25JblVzZXJTZXNzaW9uLmdldEFjY2Vzc1Rva2VuKCkuZ2V0Snd0VG9rZW4oKVxuICAgICAgfSwgZnVuY3Rpb24gKGVyciwgZGF0YSkge1xuICAgICAgICBpZiAoZXJyKSB7XG4gICAgICAgICAgcmV0dXJuIGNhbGxiYWNrLm9uRmFpbHVyZShlcnIpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBjYWxsYmFjay5hc3NvY2lhdGVTZWNyZXRDb2RlKGRhdGEuU2VjcmV0Q29kZSk7XG4gICAgICB9KTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogVGhpcyBpcyB1c2VkIGJ5IGFuIGF1dGhlbnRpY2F0ZWQgb3IgYSB1c2VyIHRyeWluZyB0byBhdXRoZW50aWNhdGUgdG8gdmVyaWZ5IGEgVE9UUCBNRkFcbiAgICogQHBhcmFtIHtzdHJpbmd9IHRvdHBDb2RlIFRoZSBNRkEgY29kZSBlbnRlcmVkIGJ5IHRoZSB1c2VyLlxuICAgKiBAcGFyYW0ge3N0cmluZ30gZnJpZW5kbHlEZXZpY2VOYW1lIFRoZSBkZXZpY2UgbmFtZSB3ZSBhcmUgYXNzaWduaW5nIHRvIHRoZSBkZXZpY2UuXG4gICAqIEBwYXJhbSB7bm9kZUNhbGxiYWNrPHN0cmluZz59IGNhbGxiYWNrIENhbGxlZCBvbiBzdWNjZXNzIG9yIGVycm9yLlxuICAgKiBAcmV0dXJucyB7dm9pZH1cbiAgICovO1xuICBfcHJvdG8udmVyaWZ5U29mdHdhcmVUb2tlbiA9IGZ1bmN0aW9uIHZlcmlmeVNvZnR3YXJlVG9rZW4odG90cENvZGUsIGZyaWVuZGx5RGV2aWNlTmFtZSwgY2FsbGJhY2spIHtcbiAgICB2YXIgX3RoaXMyMSA9IHRoaXM7XG4gICAgaWYgKCEodGhpcy5zaWduSW5Vc2VyU2Vzc2lvbiAhPSBudWxsICYmIHRoaXMuc2lnbkluVXNlclNlc3Npb24uaXNWYWxpZCgpKSkge1xuICAgICAgdGhpcy5jbGllbnQucmVxdWVzdCgnVmVyaWZ5U29mdHdhcmVUb2tlbicsIHtcbiAgICAgICAgU2Vzc2lvbjogdGhpcy5TZXNzaW9uLFxuICAgICAgICBVc2VyQ29kZTogdG90cENvZGUsXG4gICAgICAgIEZyaWVuZGx5RGV2aWNlTmFtZTogZnJpZW5kbHlEZXZpY2VOYW1lXG4gICAgICB9LCBmdW5jdGlvbiAoZXJyLCBkYXRhKSB7XG4gICAgICAgIGlmIChlcnIpIHtcbiAgICAgICAgICByZXR1cm4gY2FsbGJhY2sub25GYWlsdXJlKGVycik7XG4gICAgICAgIH1cbiAgICAgICAgX3RoaXMyMS5TZXNzaW9uID0gZGF0YS5TZXNzaW9uO1xuICAgICAgICB2YXIgY2hhbGxlbmdlUmVzcG9uc2VzID0ge307XG4gICAgICAgIGNoYWxsZW5nZVJlc3BvbnNlcy5VU0VSTkFNRSA9IF90aGlzMjEudXNlcm5hbWU7XG4gICAgICAgIHZhciBqc29uUmVxID0ge1xuICAgICAgICAgIENoYWxsZW5nZU5hbWU6ICdNRkFfU0VUVVAnLFxuICAgICAgICAgIENsaWVudElkOiBfdGhpczIxLnBvb2wuZ2V0Q2xpZW50SWQoKSxcbiAgICAgICAgICBDaGFsbGVuZ2VSZXNwb25zZXM6IGNoYWxsZW5nZVJlc3BvbnNlcyxcbiAgICAgICAgICBTZXNzaW9uOiBfdGhpczIxLlNlc3Npb25cbiAgICAgICAgfTtcbiAgICAgICAgaWYgKF90aGlzMjEuZ2V0VXNlckNvbnRleHREYXRhKCkpIHtcbiAgICAgICAgICBqc29uUmVxLlVzZXJDb250ZXh0RGF0YSA9IF90aGlzMjEuZ2V0VXNlckNvbnRleHREYXRhKCk7XG4gICAgICAgIH1cbiAgICAgICAgX3RoaXMyMS5jbGllbnQucmVxdWVzdCgnUmVzcG9uZFRvQXV0aENoYWxsZW5nZScsIGpzb25SZXEsIGZ1bmN0aW9uIChlcnJSZXNwb25kLCBkYXRhUmVzcG9uZCkge1xuICAgICAgICAgIGlmIChlcnJSZXNwb25kKSB7XG4gICAgICAgICAgICByZXR1cm4gY2FsbGJhY2sub25GYWlsdXJlKGVyclJlc3BvbmQpO1xuICAgICAgICAgIH1cbiAgICAgICAgICBfdGhpczIxLnNpZ25JblVzZXJTZXNzaW9uID0gX3RoaXMyMS5nZXRDb2duaXRvVXNlclNlc3Npb24oZGF0YVJlc3BvbmQuQXV0aGVudGljYXRpb25SZXN1bHQpO1xuICAgICAgICAgIF90aGlzMjEuY2FjaGVUb2tlbnMoKTtcbiAgICAgICAgICByZXR1cm4gY2FsbGJhY2sub25TdWNjZXNzKF90aGlzMjEuc2lnbkluVXNlclNlc3Npb24pO1xuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICAgIH0pO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLmNsaWVudC5yZXF1ZXN0KCdWZXJpZnlTb2Z0d2FyZVRva2VuJywge1xuICAgICAgICBBY2Nlc3NUb2tlbjogdGhpcy5zaWduSW5Vc2VyU2Vzc2lvbi5nZXRBY2Nlc3NUb2tlbigpLmdldEp3dFRva2VuKCksXG4gICAgICAgIFVzZXJDb2RlOiB0b3RwQ29kZSxcbiAgICAgICAgRnJpZW5kbHlEZXZpY2VOYW1lOiBmcmllbmRseURldmljZU5hbWVcbiAgICAgIH0sIGZ1bmN0aW9uIChlcnIsIGRhdGEpIHtcbiAgICAgICAgaWYgKGVycikge1xuICAgICAgICAgIHJldHVybiBjYWxsYmFjay5vbkZhaWx1cmUoZXJyKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gY2FsbGJhY2sub25TdWNjZXNzKGRhdGEpO1xuICAgICAgfSk7XG4gICAgfVxuICB9O1xuICByZXR1cm4gQ29nbml0b1VzZXI7XG59KCk7XG5leHBvcnRzW1wiZGVmYXVsdFwiXSA9IENvZ25pdG9Vc2VyOyJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/amazon-cognito-identity-js/lib/CognitoUser.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/amazon-cognito-identity-js/lib/CognitoUserAttribute.js":
/*!*****************************************************************************!*\
  !*** ./node_modules/amazon-cognito-identity-js/lib/CognitoUserAttribute.js ***!
  \*****************************************************************************/
/***/ ((__unused_webpack_module, exports) => {

eval("\n\nexports.__esModule = true;\nexports[\"default\"] = void 0;\n/*!\n * Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n * SPDX-License-Identifier: Apache-2.0\n */\n/** @class */\nvar CognitoUserAttribute = /*#__PURE__*/function () {\n  /**\n   * Constructs a new CognitoUserAttribute object\n   * @param {string=} Name The record's name\n   * @param {string=} Value The record's value\n   */\n  function CognitoUserAttribute(_temp) {\n    var _ref = _temp === void 0 ? {} : _temp,\n      Name = _ref.Name,\n      Value = _ref.Value;\n    this.Name = Name || '';\n    this.Value = Value || '';\n  }\n\n  /**\n   * @returns {string} the record's value.\n   */\n  var _proto = CognitoUserAttribute.prototype;\n  _proto.getValue = function getValue() {\n    return this.Value;\n  }\n\n  /**\n   * Sets the record's value.\n   * @param {string} value The new value.\n   * @returns {CognitoUserAttribute} The record for method chaining.\n   */;\n  _proto.setValue = function setValue(value) {\n    this.Value = value;\n    return this;\n  }\n\n  /**\n   * @returns {string} the record's name.\n   */;\n  _proto.getName = function getName() {\n    return this.Name;\n  }\n\n  /**\n   * Sets the record's name\n   * @param {string} name The new name.\n   * @returns {CognitoUserAttribute} The record for method chaining.\n   */;\n  _proto.setName = function setName(name) {\n    this.Name = name;\n    return this;\n  }\n\n  /**\n   * @returns {string} a string representation of the record.\n   */;\n  _proto.toString = function toString() {\n    return JSON.stringify(this);\n  }\n\n  /**\n   * @returns {object} a flat object representing the record.\n   */;\n  _proto.toJSON = function toJSON() {\n    return {\n      Name: this.Name,\n      Value: this.Value\n    };\n  };\n  return CognitoUserAttribute;\n}();\nexports[\"default\"] = CognitoUserAttribute;//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvYW1hem9uLWNvZ25pdG8taWRlbnRpdHktanMvbGliL0NvZ25pdG9Vc2VyQXR0cmlidXRlLmpzIiwibWFwcGluZ3MiOiJBQUFhOztBQUViLGtCQUFrQjtBQUNsQixrQkFBa0I7QUFDbEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWEsU0FBUztBQUN0QixhQUFhLFNBQVM7QUFDdEI7QUFDQTtBQUNBLHFDQUFxQztBQUNyQztBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0EsZUFBZSxRQUFRO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLGFBQWEsUUFBUTtBQUNyQixlQUFlLHNCQUFzQjtBQUNyQztBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0EsZUFBZSxRQUFRO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxhQUFhLFFBQVE7QUFDckIsZUFBZSxzQkFBc0I7QUFDckM7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLGVBQWUsUUFBUTtBQUN2QjtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLGVBQWUsUUFBUTtBQUN2QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQztBQUNELGtCQUFrQiIsInNvdXJjZXMiOlsid2VicGFjazovL3BheXdpbmQvLi9ub2RlX21vZHVsZXMvYW1hem9uLWNvZ25pdG8taWRlbnRpdHktanMvbGliL0NvZ25pdG9Vc2VyQXR0cmlidXRlLmpzPzMzZmEiXSwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG5cbmV4cG9ydHMuX19lc01vZHVsZSA9IHRydWU7XG5leHBvcnRzW1wiZGVmYXVsdFwiXSA9IHZvaWQgMDtcbi8qIVxuICogQ29weXJpZ2h0IEFtYXpvbi5jb20sIEluYy4gb3IgaXRzIGFmZmlsaWF0ZXMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG4gKiBTUERYLUxpY2Vuc2UtSWRlbnRpZmllcjogQXBhY2hlLTIuMFxuICovXG4vKiogQGNsYXNzICovXG52YXIgQ29nbml0b1VzZXJBdHRyaWJ1dGUgPSAvKiNfX1BVUkVfXyovZnVuY3Rpb24gKCkge1xuICAvKipcbiAgICogQ29uc3RydWN0cyBhIG5ldyBDb2duaXRvVXNlckF0dHJpYnV0ZSBvYmplY3RcbiAgICogQHBhcmFtIHtzdHJpbmc9fSBOYW1lIFRoZSByZWNvcmQncyBuYW1lXG4gICAqIEBwYXJhbSB7c3RyaW5nPX0gVmFsdWUgVGhlIHJlY29yZCdzIHZhbHVlXG4gICAqL1xuICBmdW5jdGlvbiBDb2duaXRvVXNlckF0dHJpYnV0ZShfdGVtcCkge1xuICAgIHZhciBfcmVmID0gX3RlbXAgPT09IHZvaWQgMCA/IHt9IDogX3RlbXAsXG4gICAgICBOYW1lID0gX3JlZi5OYW1lLFxuICAgICAgVmFsdWUgPSBfcmVmLlZhbHVlO1xuICAgIHRoaXMuTmFtZSA9IE5hbWUgfHwgJyc7XG4gICAgdGhpcy5WYWx1ZSA9IFZhbHVlIHx8ICcnO1xuICB9XG5cbiAgLyoqXG4gICAqIEByZXR1cm5zIHtzdHJpbmd9IHRoZSByZWNvcmQncyB2YWx1ZS5cbiAgICovXG4gIHZhciBfcHJvdG8gPSBDb2duaXRvVXNlckF0dHJpYnV0ZS5wcm90b3R5cGU7XG4gIF9wcm90by5nZXRWYWx1ZSA9IGZ1bmN0aW9uIGdldFZhbHVlKCkge1xuICAgIHJldHVybiB0aGlzLlZhbHVlO1xuICB9XG5cbiAgLyoqXG4gICAqIFNldHMgdGhlIHJlY29yZCdzIHZhbHVlLlxuICAgKiBAcGFyYW0ge3N0cmluZ30gdmFsdWUgVGhlIG5ldyB2YWx1ZS5cbiAgICogQHJldHVybnMge0NvZ25pdG9Vc2VyQXR0cmlidXRlfSBUaGUgcmVjb3JkIGZvciBtZXRob2QgY2hhaW5pbmcuXG4gICAqLztcbiAgX3Byb3RvLnNldFZhbHVlID0gZnVuY3Rpb24gc2V0VmFsdWUodmFsdWUpIHtcbiAgICB0aGlzLlZhbHVlID0gdmFsdWU7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cblxuICAvKipcbiAgICogQHJldHVybnMge3N0cmluZ30gdGhlIHJlY29yZCdzIG5hbWUuXG4gICAqLztcbiAgX3Byb3RvLmdldE5hbWUgPSBmdW5jdGlvbiBnZXROYW1lKCkge1xuICAgIHJldHVybiB0aGlzLk5hbWU7XG4gIH1cblxuICAvKipcbiAgICogU2V0cyB0aGUgcmVjb3JkJ3MgbmFtZVxuICAgKiBAcGFyYW0ge3N0cmluZ30gbmFtZSBUaGUgbmV3IG5hbWUuXG4gICAqIEByZXR1cm5zIHtDb2duaXRvVXNlckF0dHJpYnV0ZX0gVGhlIHJlY29yZCBmb3IgbWV0aG9kIGNoYWluaW5nLlxuICAgKi87XG4gIF9wcm90by5zZXROYW1lID0gZnVuY3Rpb24gc2V0TmFtZShuYW1lKSB7XG4gICAgdGhpcy5OYW1lID0gbmFtZTtcbiAgICByZXR1cm4gdGhpcztcbiAgfVxuXG4gIC8qKlxuICAgKiBAcmV0dXJucyB7c3RyaW5nfSBhIHN0cmluZyByZXByZXNlbnRhdGlvbiBvZiB0aGUgcmVjb3JkLlxuICAgKi87XG4gIF9wcm90by50b1N0cmluZyA9IGZ1bmN0aW9uIHRvU3RyaW5nKCkge1xuICAgIHJldHVybiBKU09OLnN0cmluZ2lmeSh0aGlzKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcmV0dXJucyB7b2JqZWN0fSBhIGZsYXQgb2JqZWN0IHJlcHJlc2VudGluZyB0aGUgcmVjb3JkLlxuICAgKi87XG4gIF9wcm90by50b0pTT04gPSBmdW5jdGlvbiB0b0pTT04oKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIE5hbWU6IHRoaXMuTmFtZSxcbiAgICAgIFZhbHVlOiB0aGlzLlZhbHVlXG4gICAgfTtcbiAgfTtcbiAgcmV0dXJuIENvZ25pdG9Vc2VyQXR0cmlidXRlO1xufSgpO1xuZXhwb3J0c1tcImRlZmF1bHRcIl0gPSBDb2duaXRvVXNlckF0dHJpYnV0ZTsiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/amazon-cognito-identity-js/lib/CognitoUserAttribute.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/amazon-cognito-identity-js/lib/CognitoUserPool.js":
/*!************************************************************************!*\
  !*** ./node_modules/amazon-cognito-identity-js/lib/CognitoUserPool.js ***!
  \************************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

eval("\n\nexports.__esModule = true;\nexports[\"default\"] = void 0;\nvar _Client = _interopRequireDefault(__webpack_require__(/*! ./Client */ \"(ssr)/./node_modules/amazon-cognito-identity-js/lib/Client.js\"));\nvar _CognitoUser = _interopRequireDefault(__webpack_require__(/*! ./CognitoUser */ \"(ssr)/./node_modules/amazon-cognito-identity-js/lib/CognitoUser.js\"));\nvar _StorageHelper = _interopRequireDefault(__webpack_require__(/*! ./StorageHelper */ \"(ssr)/./node_modules/amazon-cognito-identity-js/lib/StorageHelper.js\"));\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { \"default\": obj }; }\n/*!\n * Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n * SPDX-License-Identifier: Apache-2.0\n */\n\nvar USER_POOL_ID_MAX_LENGTH = 55;\n\n/** @class */\nvar CognitoUserPool = /*#__PURE__*/function () {\n  /**\n   * Constructs a new CognitoUserPool object\n   * @param {object} data Creation options.\n   * @param {string} data.UserPoolId Cognito user pool id.\n   * @param {string} data.ClientId User pool application client id.\n   * @param {string} data.endpoint Optional custom service endpoint.\n   * @param {object} data.fetchOptions Optional options for fetch API.\n   *        (only credentials option is supported)\n   * @param {object} data.Storage Optional storage object.\n   * @param {boolean} data.AdvancedSecurityDataCollectionFlag Optional:\n   *        boolean flag indicating if the data collection is enabled\n   *        to support cognito advanced security features. By default, this\n   *        flag is set to true.\n   */\n  function CognitoUserPool(data, wrapRefreshSessionCallback) {\n    var _ref = data || {},\n      UserPoolId = _ref.UserPoolId,\n      ClientId = _ref.ClientId,\n      endpoint = _ref.endpoint,\n      fetchOptions = _ref.fetchOptions,\n      AdvancedSecurityDataCollectionFlag = _ref.AdvancedSecurityDataCollectionFlag;\n    if (!UserPoolId || !ClientId) {\n      throw new Error('Both UserPoolId and ClientId are required.');\n    }\n    if (UserPoolId.length > USER_POOL_ID_MAX_LENGTH || !/^[\\w-]+_[0-9a-zA-Z]+$/.test(UserPoolId)) {\n      throw new Error('Invalid UserPoolId format.');\n    }\n    var region = UserPoolId.split('_')[0];\n    this.userPoolId = UserPoolId;\n    this.clientId = ClientId;\n    this.client = new _Client[\"default\"](region, endpoint, fetchOptions);\n\n    /**\n     * By default, AdvancedSecurityDataCollectionFlag is set to true,\n     * if no input value is provided.\n     */\n    this.advancedSecurityDataCollectionFlag = AdvancedSecurityDataCollectionFlag !== false;\n    this.storage = data.Storage || new _StorageHelper[\"default\"]().getStorage();\n    if (wrapRefreshSessionCallback) {\n      this.wrapRefreshSessionCallback = wrapRefreshSessionCallback;\n    }\n  }\n\n  /**\n   * @returns {string} the user pool id\n   */\n  var _proto = CognitoUserPool.prototype;\n  _proto.getUserPoolId = function getUserPoolId() {\n    return this.userPoolId;\n  }\n\n  /**\n   * @returns {string} the user pool name\n   */;\n  _proto.getUserPoolName = function getUserPoolName() {\n    return this.getUserPoolId().split('_')[1];\n  }\n\n  /**\n   * @returns {string} the client id\n   */;\n  _proto.getClientId = function getClientId() {\n    return this.clientId;\n  }\n\n  /**\n   * @typedef {object} SignUpResult\n   * @property {CognitoUser} user New user.\n   * @property {bool} userConfirmed If the user is already confirmed.\n   */\n  /**\n   * method for signing up a user\n   * @param {string} username User's username.\n   * @param {string} password Plain-text initial password entered by user.\n   * @param {(AttributeArg[])=} userAttributes New user attributes.\n   * @param {(AttributeArg[])=} validationData Application metadata.\n   * @param {(AttributeArg[])=} clientMetadata Client metadata.\n   * @param {nodeCallback<SignUpResult>} callback Called on error or with the new user.\n   * @param {ClientMetadata} clientMetadata object which is passed from client to Cognito Lambda trigger\n   * @returns {void}\n   */;\n  _proto.signUp = function signUp(username, password, userAttributes, validationData, callback, clientMetadata) {\n    var _this = this;\n    var jsonReq = {\n      ClientId: this.clientId,\n      Username: username,\n      Password: password,\n      UserAttributes: userAttributes,\n      ValidationData: validationData,\n      ClientMetadata: clientMetadata\n    };\n    if (this.getUserContextData(username)) {\n      jsonReq.UserContextData = this.getUserContextData(username);\n    }\n    this.client.request('SignUp', jsonReq, function (err, data) {\n      if (err) {\n        return callback(err, null);\n      }\n      var cognitoUser = {\n        Username: username,\n        Pool: _this,\n        Storage: _this.storage\n      };\n      var returnData = {\n        user: new _CognitoUser[\"default\"](cognitoUser),\n        userConfirmed: data.UserConfirmed,\n        userSub: data.UserSub,\n        codeDeliveryDetails: data.CodeDeliveryDetails\n      };\n      return callback(null, returnData);\n    });\n  }\n\n  /**\n   * method for getting the current user of the application from the local storage\n   *\n   * @returns {CognitoUser} the user retrieved from storage\n   */;\n  _proto.getCurrentUser = function getCurrentUser() {\n    var lastUserKey = \"CognitoIdentityServiceProvider.\" + this.clientId + \".LastAuthUser\";\n    var lastAuthUser = this.storage.getItem(lastUserKey);\n    if (lastAuthUser) {\n      var cognitoUser = {\n        Username: lastAuthUser,\n        Pool: this,\n        Storage: this.storage\n      };\n      return new _CognitoUser[\"default\"](cognitoUser);\n    }\n    return null;\n  }\n\n  /**\n   * This method returns the encoded data string used for cognito advanced security feature.\n   * This would be generated only when developer has included the JS used for collecting the\n   * data on their client. Please refer to documentation to know more about using AdvancedSecurity\n   * features\n   * @param {string} username the username for the context data\n   * @returns {string} the user context data\n   **/;\n  _proto.getUserContextData = function getUserContextData(username) {\n    if (typeof AmazonCognitoAdvancedSecurityData === 'undefined') {\n      return undefined;\n    }\n    /* eslint-disable */\n    var amazonCognitoAdvancedSecurityDataConst = AmazonCognitoAdvancedSecurityData;\n    /* eslint-enable */\n\n    if (this.advancedSecurityDataCollectionFlag) {\n      var advancedSecurityData = amazonCognitoAdvancedSecurityDataConst.getData(username, this.userPoolId, this.clientId);\n      if (advancedSecurityData) {\n        var userContextData = {\n          EncodedData: advancedSecurityData\n        };\n        return userContextData;\n      }\n    }\n    return {};\n  };\n  return CognitoUserPool;\n}();\nexports[\"default\"] = CognitoUserPool;//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvYW1hem9uLWNvZ25pdG8taWRlbnRpdHktanMvbGliL0NvZ25pdG9Vc2VyUG9vbC5qcyIsIm1hcHBpbmdzIjoiQUFBYTs7QUFFYixrQkFBa0I7QUFDbEIsa0JBQWtCO0FBQ2xCLHFDQUFxQyxtQkFBTyxDQUFDLCtFQUFVO0FBQ3ZELDBDQUEwQyxtQkFBTyxDQUFDLHlGQUFlO0FBQ2pFLDRDQUE0QyxtQkFBTyxDQUFDLDZGQUFpQjtBQUNyRSx1Q0FBdUMsdUNBQXVDO0FBQzlFO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYSxRQUFRO0FBQ3JCLGFBQWEsUUFBUTtBQUNyQixhQUFhLFFBQVE7QUFDckIsYUFBYSxRQUFRO0FBQ3JCLGFBQWEsUUFBUTtBQUNyQjtBQUNBLGFBQWEsUUFBUTtBQUNyQixhQUFhLFNBQVM7QUFDdEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHlCQUF5QjtBQUN6QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxlQUFlLFFBQVE7QUFDdkI7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLGVBQWUsUUFBUTtBQUN2QjtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLGVBQWUsUUFBUTtBQUN2QjtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLGVBQWUsUUFBUTtBQUN2QixnQkFBZ0IsYUFBYTtBQUM3QixnQkFBZ0IsTUFBTTtBQUN0QjtBQUNBO0FBQ0E7QUFDQSxhQUFhLFFBQVE7QUFDckIsYUFBYSxRQUFRO0FBQ3JCLGFBQWEsbUJBQW1CO0FBQ2hDLGFBQWEsbUJBQW1CO0FBQ2hDLGFBQWEsbUJBQW1CO0FBQ2hDLGFBQWEsNEJBQTRCO0FBQ3pDLGFBQWEsZ0JBQWdCO0FBQzdCLGVBQWU7QUFDZjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsZUFBZSxhQUFhO0FBQzVCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWEsUUFBUTtBQUNyQixlQUFlLFFBQVE7QUFDdkI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDO0FBQ0Qsa0JBQWtCIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vcGF5d2luZC8uL25vZGVfbW9kdWxlcy9hbWF6b24tY29nbml0by1pZGVudGl0eS1qcy9saWIvQ29nbml0b1VzZXJQb29sLmpzPzRiY2YiXSwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG5cbmV4cG9ydHMuX19lc01vZHVsZSA9IHRydWU7XG5leHBvcnRzW1wiZGVmYXVsdFwiXSA9IHZvaWQgMDtcbnZhciBfQ2xpZW50ID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlKFwiLi9DbGllbnRcIikpO1xudmFyIF9Db2duaXRvVXNlciA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQocmVxdWlyZShcIi4vQ29nbml0b1VzZXJcIikpO1xudmFyIF9TdG9yYWdlSGVscGVyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlKFwiLi9TdG9yYWdlSGVscGVyXCIpKTtcbmZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IFwiZGVmYXVsdFwiOiBvYmogfTsgfVxuLyohXG4gKiBDb3B5cmlnaHQgQW1hem9uLmNvbSwgSW5jLiBvciBpdHMgYWZmaWxpYXRlcy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbiAqIFNQRFgtTGljZW5zZS1JZGVudGlmaWVyOiBBcGFjaGUtMi4wXG4gKi9cblxudmFyIFVTRVJfUE9PTF9JRF9NQVhfTEVOR1RIID0gNTU7XG5cbi8qKiBAY2xhc3MgKi9cbnZhciBDb2duaXRvVXNlclBvb2wgPSAvKiNfX1BVUkVfXyovZnVuY3Rpb24gKCkge1xuICAvKipcbiAgICogQ29uc3RydWN0cyBhIG5ldyBDb2duaXRvVXNlclBvb2wgb2JqZWN0XG4gICAqIEBwYXJhbSB7b2JqZWN0fSBkYXRhIENyZWF0aW9uIG9wdGlvbnMuXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBkYXRhLlVzZXJQb29sSWQgQ29nbml0byB1c2VyIHBvb2wgaWQuXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBkYXRhLkNsaWVudElkIFVzZXIgcG9vbCBhcHBsaWNhdGlvbiBjbGllbnQgaWQuXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBkYXRhLmVuZHBvaW50IE9wdGlvbmFsIGN1c3RvbSBzZXJ2aWNlIGVuZHBvaW50LlxuICAgKiBAcGFyYW0ge29iamVjdH0gZGF0YS5mZXRjaE9wdGlvbnMgT3B0aW9uYWwgb3B0aW9ucyBmb3IgZmV0Y2ggQVBJLlxuICAgKiAgICAgICAgKG9ubHkgY3JlZGVudGlhbHMgb3B0aW9uIGlzIHN1cHBvcnRlZClcbiAgICogQHBhcmFtIHtvYmplY3R9IGRhdGEuU3RvcmFnZSBPcHRpb25hbCBzdG9yYWdlIG9iamVjdC5cbiAgICogQHBhcmFtIHtib29sZWFufSBkYXRhLkFkdmFuY2VkU2VjdXJpdHlEYXRhQ29sbGVjdGlvbkZsYWcgT3B0aW9uYWw6XG4gICAqICAgICAgICBib29sZWFuIGZsYWcgaW5kaWNhdGluZyBpZiB0aGUgZGF0YSBjb2xsZWN0aW9uIGlzIGVuYWJsZWRcbiAgICogICAgICAgIHRvIHN1cHBvcnQgY29nbml0byBhZHZhbmNlZCBzZWN1cml0eSBmZWF0dXJlcy4gQnkgZGVmYXVsdCwgdGhpc1xuICAgKiAgICAgICAgZmxhZyBpcyBzZXQgdG8gdHJ1ZS5cbiAgICovXG4gIGZ1bmN0aW9uIENvZ25pdG9Vc2VyUG9vbChkYXRhLCB3cmFwUmVmcmVzaFNlc3Npb25DYWxsYmFjaykge1xuICAgIHZhciBfcmVmID0gZGF0YSB8fCB7fSxcbiAgICAgIFVzZXJQb29sSWQgPSBfcmVmLlVzZXJQb29sSWQsXG4gICAgICBDbGllbnRJZCA9IF9yZWYuQ2xpZW50SWQsXG4gICAgICBlbmRwb2ludCA9IF9yZWYuZW5kcG9pbnQsXG4gICAgICBmZXRjaE9wdGlvbnMgPSBfcmVmLmZldGNoT3B0aW9ucyxcbiAgICAgIEFkdmFuY2VkU2VjdXJpdHlEYXRhQ29sbGVjdGlvbkZsYWcgPSBfcmVmLkFkdmFuY2VkU2VjdXJpdHlEYXRhQ29sbGVjdGlvbkZsYWc7XG4gICAgaWYgKCFVc2VyUG9vbElkIHx8ICFDbGllbnRJZCkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdCb3RoIFVzZXJQb29sSWQgYW5kIENsaWVudElkIGFyZSByZXF1aXJlZC4nKTtcbiAgICB9XG4gICAgaWYgKFVzZXJQb29sSWQubGVuZ3RoID4gVVNFUl9QT09MX0lEX01BWF9MRU5HVEggfHwgIS9eW1xcdy1dK19bMC05YS16QS1aXSskLy50ZXN0KFVzZXJQb29sSWQpKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ0ludmFsaWQgVXNlclBvb2xJZCBmb3JtYXQuJyk7XG4gICAgfVxuICAgIHZhciByZWdpb24gPSBVc2VyUG9vbElkLnNwbGl0KCdfJylbMF07XG4gICAgdGhpcy51c2VyUG9vbElkID0gVXNlclBvb2xJZDtcbiAgICB0aGlzLmNsaWVudElkID0gQ2xpZW50SWQ7XG4gICAgdGhpcy5jbGllbnQgPSBuZXcgX0NsaWVudFtcImRlZmF1bHRcIl0ocmVnaW9uLCBlbmRwb2ludCwgZmV0Y2hPcHRpb25zKTtcblxuICAgIC8qKlxuICAgICAqIEJ5IGRlZmF1bHQsIEFkdmFuY2VkU2VjdXJpdHlEYXRhQ29sbGVjdGlvbkZsYWcgaXMgc2V0IHRvIHRydWUsXG4gICAgICogaWYgbm8gaW5wdXQgdmFsdWUgaXMgcHJvdmlkZWQuXG4gICAgICovXG4gICAgdGhpcy5hZHZhbmNlZFNlY3VyaXR5RGF0YUNvbGxlY3Rpb25GbGFnID0gQWR2YW5jZWRTZWN1cml0eURhdGFDb2xsZWN0aW9uRmxhZyAhPT0gZmFsc2U7XG4gICAgdGhpcy5zdG9yYWdlID0gZGF0YS5TdG9yYWdlIHx8IG5ldyBfU3RvcmFnZUhlbHBlcltcImRlZmF1bHRcIl0oKS5nZXRTdG9yYWdlKCk7XG4gICAgaWYgKHdyYXBSZWZyZXNoU2Vzc2lvbkNhbGxiYWNrKSB7XG4gICAgICB0aGlzLndyYXBSZWZyZXNoU2Vzc2lvbkNhbGxiYWNrID0gd3JhcFJlZnJlc2hTZXNzaW9uQ2FsbGJhY2s7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEByZXR1cm5zIHtzdHJpbmd9IHRoZSB1c2VyIHBvb2wgaWRcbiAgICovXG4gIHZhciBfcHJvdG8gPSBDb2duaXRvVXNlclBvb2wucHJvdG90eXBlO1xuICBfcHJvdG8uZ2V0VXNlclBvb2xJZCA9IGZ1bmN0aW9uIGdldFVzZXJQb29sSWQoKSB7XG4gICAgcmV0dXJuIHRoaXMudXNlclBvb2xJZDtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcmV0dXJucyB7c3RyaW5nfSB0aGUgdXNlciBwb29sIG5hbWVcbiAgICovO1xuICBfcHJvdG8uZ2V0VXNlclBvb2xOYW1lID0gZnVuY3Rpb24gZ2V0VXNlclBvb2xOYW1lKCkge1xuICAgIHJldHVybiB0aGlzLmdldFVzZXJQb29sSWQoKS5zcGxpdCgnXycpWzFdO1xuICB9XG5cbiAgLyoqXG4gICAqIEByZXR1cm5zIHtzdHJpbmd9IHRoZSBjbGllbnQgaWRcbiAgICovO1xuICBfcHJvdG8uZ2V0Q2xpZW50SWQgPSBmdW5jdGlvbiBnZXRDbGllbnRJZCgpIHtcbiAgICByZXR1cm4gdGhpcy5jbGllbnRJZDtcbiAgfVxuXG4gIC8qKlxuICAgKiBAdHlwZWRlZiB7b2JqZWN0fSBTaWduVXBSZXN1bHRcbiAgICogQHByb3BlcnR5IHtDb2duaXRvVXNlcn0gdXNlciBOZXcgdXNlci5cbiAgICogQHByb3BlcnR5IHtib29sfSB1c2VyQ29uZmlybWVkIElmIHRoZSB1c2VyIGlzIGFscmVhZHkgY29uZmlybWVkLlxuICAgKi9cbiAgLyoqXG4gICAqIG1ldGhvZCBmb3Igc2lnbmluZyB1cCBhIHVzZXJcbiAgICogQHBhcmFtIHtzdHJpbmd9IHVzZXJuYW1lIFVzZXIncyB1c2VybmFtZS5cbiAgICogQHBhcmFtIHtzdHJpbmd9IHBhc3N3b3JkIFBsYWluLXRleHQgaW5pdGlhbCBwYXNzd29yZCBlbnRlcmVkIGJ5IHVzZXIuXG4gICAqIEBwYXJhbSB7KEF0dHJpYnV0ZUFyZ1tdKT19IHVzZXJBdHRyaWJ1dGVzIE5ldyB1c2VyIGF0dHJpYnV0ZXMuXG4gICAqIEBwYXJhbSB7KEF0dHJpYnV0ZUFyZ1tdKT19IHZhbGlkYXRpb25EYXRhIEFwcGxpY2F0aW9uIG1ldGFkYXRhLlxuICAgKiBAcGFyYW0geyhBdHRyaWJ1dGVBcmdbXSk9fSBjbGllbnRNZXRhZGF0YSBDbGllbnQgbWV0YWRhdGEuXG4gICAqIEBwYXJhbSB7bm9kZUNhbGxiYWNrPFNpZ25VcFJlc3VsdD59IGNhbGxiYWNrIENhbGxlZCBvbiBlcnJvciBvciB3aXRoIHRoZSBuZXcgdXNlci5cbiAgICogQHBhcmFtIHtDbGllbnRNZXRhZGF0YX0gY2xpZW50TWV0YWRhdGEgb2JqZWN0IHdoaWNoIGlzIHBhc3NlZCBmcm9tIGNsaWVudCB0byBDb2duaXRvIExhbWJkYSB0cmlnZ2VyXG4gICAqIEByZXR1cm5zIHt2b2lkfVxuICAgKi87XG4gIF9wcm90by5zaWduVXAgPSBmdW5jdGlvbiBzaWduVXAodXNlcm5hbWUsIHBhc3N3b3JkLCB1c2VyQXR0cmlidXRlcywgdmFsaWRhdGlvbkRhdGEsIGNhbGxiYWNrLCBjbGllbnRNZXRhZGF0YSkge1xuICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgdmFyIGpzb25SZXEgPSB7XG4gICAgICBDbGllbnRJZDogdGhpcy5jbGllbnRJZCxcbiAgICAgIFVzZXJuYW1lOiB1c2VybmFtZSxcbiAgICAgIFBhc3N3b3JkOiBwYXNzd29yZCxcbiAgICAgIFVzZXJBdHRyaWJ1dGVzOiB1c2VyQXR0cmlidXRlcyxcbiAgICAgIFZhbGlkYXRpb25EYXRhOiB2YWxpZGF0aW9uRGF0YSxcbiAgICAgIENsaWVudE1ldGFkYXRhOiBjbGllbnRNZXRhZGF0YVxuICAgIH07XG4gICAgaWYgKHRoaXMuZ2V0VXNlckNvbnRleHREYXRhKHVzZXJuYW1lKSkge1xuICAgICAganNvblJlcS5Vc2VyQ29udGV4dERhdGEgPSB0aGlzLmdldFVzZXJDb250ZXh0RGF0YSh1c2VybmFtZSk7XG4gICAgfVxuICAgIHRoaXMuY2xpZW50LnJlcXVlc3QoJ1NpZ25VcCcsIGpzb25SZXEsIGZ1bmN0aW9uIChlcnIsIGRhdGEpIHtcbiAgICAgIGlmIChlcnIpIHtcbiAgICAgICAgcmV0dXJuIGNhbGxiYWNrKGVyciwgbnVsbCk7XG4gICAgICB9XG4gICAgICB2YXIgY29nbml0b1VzZXIgPSB7XG4gICAgICAgIFVzZXJuYW1lOiB1c2VybmFtZSxcbiAgICAgICAgUG9vbDogX3RoaXMsXG4gICAgICAgIFN0b3JhZ2U6IF90aGlzLnN0b3JhZ2VcbiAgICAgIH07XG4gICAgICB2YXIgcmV0dXJuRGF0YSA9IHtcbiAgICAgICAgdXNlcjogbmV3IF9Db2duaXRvVXNlcltcImRlZmF1bHRcIl0oY29nbml0b1VzZXIpLFxuICAgICAgICB1c2VyQ29uZmlybWVkOiBkYXRhLlVzZXJDb25maXJtZWQsXG4gICAgICAgIHVzZXJTdWI6IGRhdGEuVXNlclN1YixcbiAgICAgICAgY29kZURlbGl2ZXJ5RGV0YWlsczogZGF0YS5Db2RlRGVsaXZlcnlEZXRhaWxzXG4gICAgICB9O1xuICAgICAgcmV0dXJuIGNhbGxiYWNrKG51bGwsIHJldHVybkRhdGEpO1xuICAgIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqIG1ldGhvZCBmb3IgZ2V0dGluZyB0aGUgY3VycmVudCB1c2VyIG9mIHRoZSBhcHBsaWNhdGlvbiBmcm9tIHRoZSBsb2NhbCBzdG9yYWdlXG4gICAqXG4gICAqIEByZXR1cm5zIHtDb2duaXRvVXNlcn0gdGhlIHVzZXIgcmV0cmlldmVkIGZyb20gc3RvcmFnZVxuICAgKi87XG4gIF9wcm90by5nZXRDdXJyZW50VXNlciA9IGZ1bmN0aW9uIGdldEN1cnJlbnRVc2VyKCkge1xuICAgIHZhciBsYXN0VXNlcktleSA9IFwiQ29nbml0b0lkZW50aXR5U2VydmljZVByb3ZpZGVyLlwiICsgdGhpcy5jbGllbnRJZCArIFwiLkxhc3RBdXRoVXNlclwiO1xuICAgIHZhciBsYXN0QXV0aFVzZXIgPSB0aGlzLnN0b3JhZ2UuZ2V0SXRlbShsYXN0VXNlcktleSk7XG4gICAgaWYgKGxhc3RBdXRoVXNlcikge1xuICAgICAgdmFyIGNvZ25pdG9Vc2VyID0ge1xuICAgICAgICBVc2VybmFtZTogbGFzdEF1dGhVc2VyLFxuICAgICAgICBQb29sOiB0aGlzLFxuICAgICAgICBTdG9yYWdlOiB0aGlzLnN0b3JhZ2VcbiAgICAgIH07XG4gICAgICByZXR1cm4gbmV3IF9Db2duaXRvVXNlcltcImRlZmF1bHRcIl0oY29nbml0b1VzZXIpO1xuICAgIH1cbiAgICByZXR1cm4gbnVsbDtcbiAgfVxuXG4gIC8qKlxuICAgKiBUaGlzIG1ldGhvZCByZXR1cm5zIHRoZSBlbmNvZGVkIGRhdGEgc3RyaW5nIHVzZWQgZm9yIGNvZ25pdG8gYWR2YW5jZWQgc2VjdXJpdHkgZmVhdHVyZS5cbiAgICogVGhpcyB3b3VsZCBiZSBnZW5lcmF0ZWQgb25seSB3aGVuIGRldmVsb3BlciBoYXMgaW5jbHVkZWQgdGhlIEpTIHVzZWQgZm9yIGNvbGxlY3RpbmcgdGhlXG4gICAqIGRhdGEgb24gdGhlaXIgY2xpZW50LiBQbGVhc2UgcmVmZXIgdG8gZG9jdW1lbnRhdGlvbiB0byBrbm93IG1vcmUgYWJvdXQgdXNpbmcgQWR2YW5jZWRTZWN1cml0eVxuICAgKiBmZWF0dXJlc1xuICAgKiBAcGFyYW0ge3N0cmluZ30gdXNlcm5hbWUgdGhlIHVzZXJuYW1lIGZvciB0aGUgY29udGV4dCBkYXRhXG4gICAqIEByZXR1cm5zIHtzdHJpbmd9IHRoZSB1c2VyIGNvbnRleHQgZGF0YVxuICAgKiovO1xuICBfcHJvdG8uZ2V0VXNlckNvbnRleHREYXRhID0gZnVuY3Rpb24gZ2V0VXNlckNvbnRleHREYXRhKHVzZXJuYW1lKSB7XG4gICAgaWYgKHR5cGVvZiBBbWF6b25Db2duaXRvQWR2YW5jZWRTZWN1cml0eURhdGEgPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgIH1cbiAgICAvKiBlc2xpbnQtZGlzYWJsZSAqL1xuICAgIHZhciBhbWF6b25Db2duaXRvQWR2YW5jZWRTZWN1cml0eURhdGFDb25zdCA9IEFtYXpvbkNvZ25pdG9BZHZhbmNlZFNlY3VyaXR5RGF0YTtcbiAgICAvKiBlc2xpbnQtZW5hYmxlICovXG5cbiAgICBpZiAodGhpcy5hZHZhbmNlZFNlY3VyaXR5RGF0YUNvbGxlY3Rpb25GbGFnKSB7XG4gICAgICB2YXIgYWR2YW5jZWRTZWN1cml0eURhdGEgPSBhbWF6b25Db2duaXRvQWR2YW5jZWRTZWN1cml0eURhdGFDb25zdC5nZXREYXRhKHVzZXJuYW1lLCB0aGlzLnVzZXJQb29sSWQsIHRoaXMuY2xpZW50SWQpO1xuICAgICAgaWYgKGFkdmFuY2VkU2VjdXJpdHlEYXRhKSB7XG4gICAgICAgIHZhciB1c2VyQ29udGV4dERhdGEgPSB7XG4gICAgICAgICAgRW5jb2RlZERhdGE6IGFkdmFuY2VkU2VjdXJpdHlEYXRhXG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiB1c2VyQ29udGV4dERhdGE7XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiB7fTtcbiAgfTtcbiAgcmV0dXJuIENvZ25pdG9Vc2VyUG9vbDtcbn0oKTtcbmV4cG9ydHNbXCJkZWZhdWx0XCJdID0gQ29nbml0b1VzZXJQb29sOyJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/amazon-cognito-identity-js/lib/CognitoUserPool.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/amazon-cognito-identity-js/lib/CognitoUserSession.js":
/*!***************************************************************************!*\
  !*** ./node_modules/amazon-cognito-identity-js/lib/CognitoUserSession.js ***!
  \***************************************************************************/
/***/ ((__unused_webpack_module, exports) => {

eval("\n\nexports.__esModule = true;\nexports[\"default\"] = void 0;\n/*!\n * Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n * SPDX-License-Identifier: Apache-2.0\n */\n/** @class */\nvar CognitoUserSession = /*#__PURE__*/function () {\n  /**\n   * Constructs a new CognitoUserSession object\n   * @param {CognitoIdToken} IdToken The session's Id token.\n   * @param {CognitoRefreshToken=} RefreshToken The session's refresh token.\n   * @param {CognitoAccessToken} AccessToken The session's access token.\n   * @param {int} ClockDrift The saved computer's clock drift or undefined to force calculation.\n   */\n  function CognitoUserSession(_temp) {\n    var _ref = _temp === void 0 ? {} : _temp,\n      IdToken = _ref.IdToken,\n      RefreshToken = _ref.RefreshToken,\n      AccessToken = _ref.AccessToken,\n      ClockDrift = _ref.ClockDrift;\n    if (AccessToken == null || IdToken == null) {\n      throw new Error('Id token and Access Token must be present.');\n    }\n    this.idToken = IdToken;\n    this.refreshToken = RefreshToken;\n    this.accessToken = AccessToken;\n    this.clockDrift = ClockDrift === undefined ? this.calculateClockDrift() : ClockDrift;\n  }\n\n  /**\n   * @returns {CognitoIdToken} the session's Id token\n   */\n  var _proto = CognitoUserSession.prototype;\n  _proto.getIdToken = function getIdToken() {\n    return this.idToken;\n  }\n\n  /**\n   * @returns {CognitoRefreshToken} the session's refresh token\n   */;\n  _proto.getRefreshToken = function getRefreshToken() {\n    return this.refreshToken;\n  }\n\n  /**\n   * @returns {CognitoAccessToken} the session's access token\n   */;\n  _proto.getAccessToken = function getAccessToken() {\n    return this.accessToken;\n  }\n\n  /**\n   * @returns {int} the session's clock drift\n   */;\n  _proto.getClockDrift = function getClockDrift() {\n    return this.clockDrift;\n  }\n\n  /**\n   * @returns {int} the computer's clock drift\n   */;\n  _proto.calculateClockDrift = function calculateClockDrift() {\n    var now = Math.floor(new Date() / 1000);\n    var iat = Math.min(this.accessToken.getIssuedAt(), this.idToken.getIssuedAt());\n    return now - iat;\n  }\n\n  /**\n   * Checks to see if the session is still valid based on session expiry information found\n   * in tokens and the current time (adjusted with clock drift)\n   * @returns {boolean} if the session is still valid\n   */;\n  _proto.isValid = function isValid() {\n    var now = Math.floor(new Date() / 1000);\n    var adjusted = now - this.clockDrift;\n    return adjusted < this.accessToken.getExpiration() && adjusted < this.idToken.getExpiration();\n  };\n  return CognitoUserSession;\n}();\nexports[\"default\"] = CognitoUserSession;//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvYW1hem9uLWNvZ25pdG8taWRlbnRpdHktanMvbGliL0NvZ25pdG9Vc2VyU2Vzc2lvbi5qcyIsIm1hcHBpbmdzIjoiQUFBYTs7QUFFYixrQkFBa0I7QUFDbEIsa0JBQWtCO0FBQ2xCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhLGdCQUFnQjtBQUM3QixhQUFhLHNCQUFzQjtBQUNuQyxhQUFhLG9CQUFvQjtBQUNqQyxhQUFhLEtBQUs7QUFDbEI7QUFDQTtBQUNBLHFDQUFxQztBQUNyQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxlQUFlLGdCQUFnQjtBQUMvQjtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0EsZUFBZSxxQkFBcUI7QUFDcEM7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxlQUFlLG9CQUFvQjtBQUNuQztBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLGVBQWUsS0FBSztBQUNwQjtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLGVBQWUsS0FBSztBQUNwQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsZUFBZSxTQUFTO0FBQ3hCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQztBQUNELGtCQUFrQiIsInNvdXJjZXMiOlsid2VicGFjazovL3BheXdpbmQvLi9ub2RlX21vZHVsZXMvYW1hem9uLWNvZ25pdG8taWRlbnRpdHktanMvbGliL0NvZ25pdG9Vc2VyU2Vzc2lvbi5qcz8wNWM4Il0sInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO1xuXG5leHBvcnRzLl9fZXNNb2R1bGUgPSB0cnVlO1xuZXhwb3J0c1tcImRlZmF1bHRcIl0gPSB2b2lkIDA7XG4vKiFcbiAqIENvcHlyaWdodCBBbWF6b24uY29tLCBJbmMuIG9yIGl0cyBhZmZpbGlhdGVzLiBBbGwgUmlnaHRzIFJlc2VydmVkLlxuICogU1BEWC1MaWNlbnNlLUlkZW50aWZpZXI6IEFwYWNoZS0yLjBcbiAqL1xuLyoqIEBjbGFzcyAqL1xudmFyIENvZ25pdG9Vc2VyU2Vzc2lvbiA9IC8qI19fUFVSRV9fKi9mdW5jdGlvbiAoKSB7XG4gIC8qKlxuICAgKiBDb25zdHJ1Y3RzIGEgbmV3IENvZ25pdG9Vc2VyU2Vzc2lvbiBvYmplY3RcbiAgICogQHBhcmFtIHtDb2duaXRvSWRUb2tlbn0gSWRUb2tlbiBUaGUgc2Vzc2lvbidzIElkIHRva2VuLlxuICAgKiBAcGFyYW0ge0NvZ25pdG9SZWZyZXNoVG9rZW49fSBSZWZyZXNoVG9rZW4gVGhlIHNlc3Npb24ncyByZWZyZXNoIHRva2VuLlxuICAgKiBAcGFyYW0ge0NvZ25pdG9BY2Nlc3NUb2tlbn0gQWNjZXNzVG9rZW4gVGhlIHNlc3Npb24ncyBhY2Nlc3MgdG9rZW4uXG4gICAqIEBwYXJhbSB7aW50fSBDbG9ja0RyaWZ0IFRoZSBzYXZlZCBjb21wdXRlcidzIGNsb2NrIGRyaWZ0IG9yIHVuZGVmaW5lZCB0byBmb3JjZSBjYWxjdWxhdGlvbi5cbiAgICovXG4gIGZ1bmN0aW9uIENvZ25pdG9Vc2VyU2Vzc2lvbihfdGVtcCkge1xuICAgIHZhciBfcmVmID0gX3RlbXAgPT09IHZvaWQgMCA/IHt9IDogX3RlbXAsXG4gICAgICBJZFRva2VuID0gX3JlZi5JZFRva2VuLFxuICAgICAgUmVmcmVzaFRva2VuID0gX3JlZi5SZWZyZXNoVG9rZW4sXG4gICAgICBBY2Nlc3NUb2tlbiA9IF9yZWYuQWNjZXNzVG9rZW4sXG4gICAgICBDbG9ja0RyaWZ0ID0gX3JlZi5DbG9ja0RyaWZ0O1xuICAgIGlmIChBY2Nlc3NUb2tlbiA9PSBudWxsIHx8IElkVG9rZW4gPT0gbnVsbCkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdJZCB0b2tlbiBhbmQgQWNjZXNzIFRva2VuIG11c3QgYmUgcHJlc2VudC4nKTtcbiAgICB9XG4gICAgdGhpcy5pZFRva2VuID0gSWRUb2tlbjtcbiAgICB0aGlzLnJlZnJlc2hUb2tlbiA9IFJlZnJlc2hUb2tlbjtcbiAgICB0aGlzLmFjY2Vzc1Rva2VuID0gQWNjZXNzVG9rZW47XG4gICAgdGhpcy5jbG9ja0RyaWZ0ID0gQ2xvY2tEcmlmdCA9PT0gdW5kZWZpbmVkID8gdGhpcy5jYWxjdWxhdGVDbG9ja0RyaWZ0KCkgOiBDbG9ja0RyaWZ0O1xuICB9XG5cbiAgLyoqXG4gICAqIEByZXR1cm5zIHtDb2duaXRvSWRUb2tlbn0gdGhlIHNlc3Npb24ncyBJZCB0b2tlblxuICAgKi9cbiAgdmFyIF9wcm90byA9IENvZ25pdG9Vc2VyU2Vzc2lvbi5wcm90b3R5cGU7XG4gIF9wcm90by5nZXRJZFRva2VuID0gZnVuY3Rpb24gZ2V0SWRUb2tlbigpIHtcbiAgICByZXR1cm4gdGhpcy5pZFRva2VuO1xuICB9XG5cbiAgLyoqXG4gICAqIEByZXR1cm5zIHtDb2duaXRvUmVmcmVzaFRva2VufSB0aGUgc2Vzc2lvbidzIHJlZnJlc2ggdG9rZW5cbiAgICovO1xuICBfcHJvdG8uZ2V0UmVmcmVzaFRva2VuID0gZnVuY3Rpb24gZ2V0UmVmcmVzaFRva2VuKCkge1xuICAgIHJldHVybiB0aGlzLnJlZnJlc2hUb2tlbjtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcmV0dXJucyB7Q29nbml0b0FjY2Vzc1Rva2VufSB0aGUgc2Vzc2lvbidzIGFjY2VzcyB0b2tlblxuICAgKi87XG4gIF9wcm90by5nZXRBY2Nlc3NUb2tlbiA9IGZ1bmN0aW9uIGdldEFjY2Vzc1Rva2VuKCkge1xuICAgIHJldHVybiB0aGlzLmFjY2Vzc1Rva2VuO1xuICB9XG5cbiAgLyoqXG4gICAqIEByZXR1cm5zIHtpbnR9IHRoZSBzZXNzaW9uJ3MgY2xvY2sgZHJpZnRcbiAgICovO1xuICBfcHJvdG8uZ2V0Q2xvY2tEcmlmdCA9IGZ1bmN0aW9uIGdldENsb2NrRHJpZnQoKSB7XG4gICAgcmV0dXJuIHRoaXMuY2xvY2tEcmlmdDtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcmV0dXJucyB7aW50fSB0aGUgY29tcHV0ZXIncyBjbG9jayBkcmlmdFxuICAgKi87XG4gIF9wcm90by5jYWxjdWxhdGVDbG9ja0RyaWZ0ID0gZnVuY3Rpb24gY2FsY3VsYXRlQ2xvY2tEcmlmdCgpIHtcbiAgICB2YXIgbm93ID0gTWF0aC5mbG9vcihuZXcgRGF0ZSgpIC8gMTAwMCk7XG4gICAgdmFyIGlhdCA9IE1hdGgubWluKHRoaXMuYWNjZXNzVG9rZW4uZ2V0SXNzdWVkQXQoKSwgdGhpcy5pZFRva2VuLmdldElzc3VlZEF0KCkpO1xuICAgIHJldHVybiBub3cgLSBpYXQ7XG4gIH1cblxuICAvKipcbiAgICogQ2hlY2tzIHRvIHNlZSBpZiB0aGUgc2Vzc2lvbiBpcyBzdGlsbCB2YWxpZCBiYXNlZCBvbiBzZXNzaW9uIGV4cGlyeSBpbmZvcm1hdGlvbiBmb3VuZFxuICAgKiBpbiB0b2tlbnMgYW5kIHRoZSBjdXJyZW50IHRpbWUgKGFkanVzdGVkIHdpdGggY2xvY2sgZHJpZnQpXG4gICAqIEByZXR1cm5zIHtib29sZWFufSBpZiB0aGUgc2Vzc2lvbiBpcyBzdGlsbCB2YWxpZFxuICAgKi87XG4gIF9wcm90by5pc1ZhbGlkID0gZnVuY3Rpb24gaXNWYWxpZCgpIHtcbiAgICB2YXIgbm93ID0gTWF0aC5mbG9vcihuZXcgRGF0ZSgpIC8gMTAwMCk7XG4gICAgdmFyIGFkanVzdGVkID0gbm93IC0gdGhpcy5jbG9ja0RyaWZ0O1xuICAgIHJldHVybiBhZGp1c3RlZCA8IHRoaXMuYWNjZXNzVG9rZW4uZ2V0RXhwaXJhdGlvbigpICYmIGFkanVzdGVkIDwgdGhpcy5pZFRva2VuLmdldEV4cGlyYXRpb24oKTtcbiAgfTtcbiAgcmV0dXJuIENvZ25pdG9Vc2VyU2Vzc2lvbjtcbn0oKTtcbmV4cG9ydHNbXCJkZWZhdWx0XCJdID0gQ29nbml0b1VzZXJTZXNzaW9uOyJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/amazon-cognito-identity-js/lib/CognitoUserSession.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/amazon-cognito-identity-js/lib/CookieStorage.js":
/*!**********************************************************************!*\
  !*** ./node_modules/amazon-cognito-identity-js/lib/CookieStorage.js ***!
  \**********************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

eval("\n\nexports.__esModule = true;\nexports[\"default\"] = void 0;\nvar Cookies = _interopRequireWildcard(__webpack_require__(/*! js-cookie */ \"(ssr)/./node_modules/js-cookie/src/js.cookie.js\"));\nfunction _getRequireWildcardCache(nodeInterop) { if (typeof WeakMap !== \"function\") return null; var cacheBabelInterop = new WeakMap(); var cacheNodeInterop = new WeakMap(); return (_getRequireWildcardCache = function _getRequireWildcardCache(nodeInterop) { return nodeInterop ? cacheNodeInterop : cacheBabelInterop; })(nodeInterop); }\nfunction _interopRequireWildcard(obj, nodeInterop) { if (!nodeInterop && obj && obj.__esModule) { return obj; } if (obj === null || typeof obj !== \"object\" && typeof obj !== \"function\") { return { \"default\": obj }; } var cache = _getRequireWildcardCache(nodeInterop); if (cache && cache.has(obj)) { return cache.get(obj); } var newObj = {}; var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor; for (var key in obj) { if (key !== \"default\" && Object.prototype.hasOwnProperty.call(obj, key)) { var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null; if (desc && (desc.get || desc.set)) { Object.defineProperty(newObj, key, desc); } else { newObj[key] = obj[key]; } } } newObj[\"default\"] = obj; if (cache) { cache.set(obj, newObj); } return newObj; }\n/** @class */\nvar CookieStorage = /*#__PURE__*/function () {\n  /**\n   * Constructs a new CookieStorage object\n   * @param {object} data Creation options.\n   * @param {string} data.domain Cookies domain (default: domain of the page\n   * \t\t\t\twhere the cookie was created, excluding subdomains)\n   * @param {string} data.path Cookies path (default: '/')\n   * @param {integer} data.expires Cookie expiration (in days, default: 365)\n   * @param {boolean} data.secure Cookie secure flag (default: true)\n   * @param {string} data.sameSite Cookie request behavior (default: null)\n   */\n  function CookieStorage(data) {\n    if (data === void 0) {\n      data = {};\n    }\n    if (data.domain) {\n      this.domain = data.domain;\n    }\n    if (data.path) {\n      this.path = data.path;\n    } else {\n      this.path = '/';\n    }\n    if (Object.prototype.hasOwnProperty.call(data, 'expires')) {\n      this.expires = data.expires;\n    } else {\n      this.expires = 365;\n    }\n    if (Object.prototype.hasOwnProperty.call(data, 'secure')) {\n      this.secure = data.secure;\n    } else {\n      this.secure = true;\n    }\n    if (Object.prototype.hasOwnProperty.call(data, 'sameSite')) {\n      if (!['strict', 'lax', 'none'].includes(data.sameSite)) {\n        throw new Error('The sameSite value of cookieStorage must be \"lax\", \"strict\" or \"none\".');\n      }\n      if (data.sameSite === 'none' && !this.secure) {\n        throw new Error('sameSite = None requires the Secure attribute in latest browser versions.');\n      }\n      this.sameSite = data.sameSite;\n    } else {\n      this.sameSite = null;\n    }\n  }\n\n  /**\n   * This is used to set a specific item in storage\n   * @param {string} key - the key for the item\n   * @param {object} value - the value\n   * @returns {string} value that was set\n   */\n  var _proto = CookieStorage.prototype;\n  _proto.setItem = function setItem(key, value) {\n    var options = {\n      path: this.path,\n      expires: this.expires,\n      domain: this.domain,\n      secure: this.secure\n    };\n    if (this.sameSite) {\n      options.sameSite = this.sameSite;\n    }\n    Cookies.set(key, value, options);\n    return Cookies.get(key);\n  }\n\n  /**\n   * This is used to get a specific key from storage\n   * @param {string} key - the key for the item\n   * This is used to clear the storage\n   * @returns {string} the data item\n   */;\n  _proto.getItem = function getItem(key) {\n    return Cookies.get(key);\n  }\n\n  /**\n   * This is used to remove an item from storage\n   * @param {string} key - the key being set\n   * @returns {string} value - value that was deleted\n   */;\n  _proto.removeItem = function removeItem(key) {\n    var options = {\n      path: this.path,\n      expires: this.expires,\n      domain: this.domain,\n      secure: this.secure\n    };\n    if (this.sameSite) {\n      options.sameSite = this.sameSite;\n    }\n    return Cookies.remove(key, options);\n  }\n\n  /**\n   * This is used to clear the storage of optional\n   * items that were previously set\n   * @returns {} an empty object\n   */;\n  _proto.clear = function clear() {\n    var cookies = Cookies.get();\n    var numKeys = Object.keys(cookies).length;\n    for (var index = 0; index < numKeys; ++index) {\n      this.removeItem(Object.keys(cookies)[index]);\n    }\n    return {};\n  };\n  return CookieStorage;\n}();\nexports[\"default\"] = CookieStorage;//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvYW1hem9uLWNvZ25pdG8taWRlbnRpdHktanMvbGliL0Nvb2tpZVN0b3JhZ2UuanMiLCJtYXBwaW5ncyI6IkFBQWE7O0FBRWIsa0JBQWtCO0FBQ2xCLGtCQUFrQjtBQUNsQixzQ0FBc0MsbUJBQU8sQ0FBQyxrRUFBVztBQUN6RCxpREFBaUQsZ0RBQWdELHVDQUF1QyxzQ0FBc0Msb0ZBQW9GLDREQUE0RDtBQUM5VCxxREFBcUQsNkNBQTZDLGNBQWMsNEVBQTRFLFNBQVMsb0JBQW9CLG1EQUFtRCwrQkFBK0IseUJBQXlCLGlCQUFpQixzRkFBc0YsdUJBQXVCLDJFQUEyRSxxRkFBcUYsc0NBQXNDLDRDQUE0QyxPQUFPLDhCQUE4Qix5QkFBeUIsYUFBYSwwQkFBMEI7QUFDenhCO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYSxRQUFRO0FBQ3JCLGFBQWEsUUFBUTtBQUNyQjtBQUNBLGFBQWEsUUFBUTtBQUNyQixhQUFhLFNBQVM7QUFDdEIsYUFBYSxTQUFTO0FBQ3RCLGFBQWEsUUFBUTtBQUNyQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLGFBQWEsUUFBUTtBQUNyQixhQUFhLFFBQVE7QUFDckIsZUFBZSxRQUFRO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsYUFBYSxRQUFRO0FBQ3JCO0FBQ0EsZUFBZSxRQUFRO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxhQUFhLFFBQVE7QUFDckIsZUFBZSxRQUFRO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQjtBQUNBO0FBQ0E7QUFDQTtBQUNBLHdCQUF3QixpQkFBaUI7QUFDekM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7QUFDRCxrQkFBa0IiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9wYXl3aW5kLy4vbm9kZV9tb2R1bGVzL2FtYXpvbi1jb2duaXRvLWlkZW50aXR5LWpzL2xpYi9Db29raWVTdG9yYWdlLmpzPzlhZWYiXSwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG5cbmV4cG9ydHMuX19lc01vZHVsZSA9IHRydWU7XG5leHBvcnRzW1wiZGVmYXVsdFwiXSA9IHZvaWQgMDtcbnZhciBDb29raWVzID0gX2ludGVyb3BSZXF1aXJlV2lsZGNhcmQocmVxdWlyZShcImpzLWNvb2tpZVwiKSk7XG5mdW5jdGlvbiBfZ2V0UmVxdWlyZVdpbGRjYXJkQ2FjaGUobm9kZUludGVyb3ApIHsgaWYgKHR5cGVvZiBXZWFrTWFwICE9PSBcImZ1bmN0aW9uXCIpIHJldHVybiBudWxsOyB2YXIgY2FjaGVCYWJlbEludGVyb3AgPSBuZXcgV2Vha01hcCgpOyB2YXIgY2FjaGVOb2RlSW50ZXJvcCA9IG5ldyBXZWFrTWFwKCk7IHJldHVybiAoX2dldFJlcXVpcmVXaWxkY2FyZENhY2hlID0gZnVuY3Rpb24gX2dldFJlcXVpcmVXaWxkY2FyZENhY2hlKG5vZGVJbnRlcm9wKSB7IHJldHVybiBub2RlSW50ZXJvcCA/IGNhY2hlTm9kZUludGVyb3AgOiBjYWNoZUJhYmVsSW50ZXJvcDsgfSkobm9kZUludGVyb3ApOyB9XG5mdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVXaWxkY2FyZChvYmosIG5vZGVJbnRlcm9wKSB7IGlmICghbm9kZUludGVyb3AgJiYgb2JqICYmIG9iai5fX2VzTW9kdWxlKSB7IHJldHVybiBvYmo7IH0gaWYgKG9iaiA9PT0gbnVsbCB8fCB0eXBlb2Ygb2JqICE9PSBcIm9iamVjdFwiICYmIHR5cGVvZiBvYmogIT09IFwiZnVuY3Rpb25cIikgeyByZXR1cm4geyBcImRlZmF1bHRcIjogb2JqIH07IH0gdmFyIGNhY2hlID0gX2dldFJlcXVpcmVXaWxkY2FyZENhY2hlKG5vZGVJbnRlcm9wKTsgaWYgKGNhY2hlICYmIGNhY2hlLmhhcyhvYmopKSB7IHJldHVybiBjYWNoZS5nZXQob2JqKTsgfSB2YXIgbmV3T2JqID0ge307IHZhciBoYXNQcm9wZXJ0eURlc2NyaXB0b3IgPSBPYmplY3QuZGVmaW5lUHJvcGVydHkgJiYgT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcjsgZm9yICh2YXIga2V5IGluIG9iaikgeyBpZiAoa2V5ICE9PSBcImRlZmF1bHRcIiAmJiBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqLCBrZXkpKSB7IHZhciBkZXNjID0gaGFzUHJvcGVydHlEZXNjcmlwdG9yID8gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihvYmosIGtleSkgOiBudWxsOyBpZiAoZGVzYyAmJiAoZGVzYy5nZXQgfHwgZGVzYy5zZXQpKSB7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eShuZXdPYmosIGtleSwgZGVzYyk7IH0gZWxzZSB7IG5ld09ialtrZXldID0gb2JqW2tleV07IH0gfSB9IG5ld09ialtcImRlZmF1bHRcIl0gPSBvYmo7IGlmIChjYWNoZSkgeyBjYWNoZS5zZXQob2JqLCBuZXdPYmopOyB9IHJldHVybiBuZXdPYmo7IH1cbi8qKiBAY2xhc3MgKi9cbnZhciBDb29raWVTdG9yYWdlID0gLyojX19QVVJFX18qL2Z1bmN0aW9uICgpIHtcbiAgLyoqXG4gICAqIENvbnN0cnVjdHMgYSBuZXcgQ29va2llU3RvcmFnZSBvYmplY3RcbiAgICogQHBhcmFtIHtvYmplY3R9IGRhdGEgQ3JlYXRpb24gb3B0aW9ucy5cbiAgICogQHBhcmFtIHtzdHJpbmd9IGRhdGEuZG9tYWluIENvb2tpZXMgZG9tYWluIChkZWZhdWx0OiBkb21haW4gb2YgdGhlIHBhZ2VcbiAgICogXHRcdFx0XHR3aGVyZSB0aGUgY29va2llIHdhcyBjcmVhdGVkLCBleGNsdWRpbmcgc3ViZG9tYWlucylcbiAgICogQHBhcmFtIHtzdHJpbmd9IGRhdGEucGF0aCBDb29raWVzIHBhdGggKGRlZmF1bHQ6ICcvJylcbiAgICogQHBhcmFtIHtpbnRlZ2VyfSBkYXRhLmV4cGlyZXMgQ29va2llIGV4cGlyYXRpb24gKGluIGRheXMsIGRlZmF1bHQ6IDM2NSlcbiAgICogQHBhcmFtIHtib29sZWFufSBkYXRhLnNlY3VyZSBDb29raWUgc2VjdXJlIGZsYWcgKGRlZmF1bHQ6IHRydWUpXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBkYXRhLnNhbWVTaXRlIENvb2tpZSByZXF1ZXN0IGJlaGF2aW9yIChkZWZhdWx0OiBudWxsKVxuICAgKi9cbiAgZnVuY3Rpb24gQ29va2llU3RvcmFnZShkYXRhKSB7XG4gICAgaWYgKGRhdGEgPT09IHZvaWQgMCkge1xuICAgICAgZGF0YSA9IHt9O1xuICAgIH1cbiAgICBpZiAoZGF0YS5kb21haW4pIHtcbiAgICAgIHRoaXMuZG9tYWluID0gZGF0YS5kb21haW47XG4gICAgfVxuICAgIGlmIChkYXRhLnBhdGgpIHtcbiAgICAgIHRoaXMucGF0aCA9IGRhdGEucGF0aDtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5wYXRoID0gJy8nO1xuICAgIH1cbiAgICBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGRhdGEsICdleHBpcmVzJykpIHtcbiAgICAgIHRoaXMuZXhwaXJlcyA9IGRhdGEuZXhwaXJlcztcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5leHBpcmVzID0gMzY1O1xuICAgIH1cbiAgICBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGRhdGEsICdzZWN1cmUnKSkge1xuICAgICAgdGhpcy5zZWN1cmUgPSBkYXRhLnNlY3VyZTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5zZWN1cmUgPSB0cnVlO1xuICAgIH1cbiAgICBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGRhdGEsICdzYW1lU2l0ZScpKSB7XG4gICAgICBpZiAoIVsnc3RyaWN0JywgJ2xheCcsICdub25lJ10uaW5jbHVkZXMoZGF0YS5zYW1lU2l0ZSkpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdUaGUgc2FtZVNpdGUgdmFsdWUgb2YgY29va2llU3RvcmFnZSBtdXN0IGJlIFwibGF4XCIsIFwic3RyaWN0XCIgb3IgXCJub25lXCIuJyk7XG4gICAgICB9XG4gICAgICBpZiAoZGF0YS5zYW1lU2l0ZSA9PT0gJ25vbmUnICYmICF0aGlzLnNlY3VyZSkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ3NhbWVTaXRlID0gTm9uZSByZXF1aXJlcyB0aGUgU2VjdXJlIGF0dHJpYnV0ZSBpbiBsYXRlc3QgYnJvd3NlciB2ZXJzaW9ucy4nKTtcbiAgICAgIH1cbiAgICAgIHRoaXMuc2FtZVNpdGUgPSBkYXRhLnNhbWVTaXRlO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLnNhbWVTaXRlID0gbnVsbDtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogVGhpcyBpcyB1c2VkIHRvIHNldCBhIHNwZWNpZmljIGl0ZW0gaW4gc3RvcmFnZVxuICAgKiBAcGFyYW0ge3N0cmluZ30ga2V5IC0gdGhlIGtleSBmb3IgdGhlIGl0ZW1cbiAgICogQHBhcmFtIHtvYmplY3R9IHZhbHVlIC0gdGhlIHZhbHVlXG4gICAqIEByZXR1cm5zIHtzdHJpbmd9IHZhbHVlIHRoYXQgd2FzIHNldFxuICAgKi9cbiAgdmFyIF9wcm90byA9IENvb2tpZVN0b3JhZ2UucHJvdG90eXBlO1xuICBfcHJvdG8uc2V0SXRlbSA9IGZ1bmN0aW9uIHNldEl0ZW0oa2V5LCB2YWx1ZSkge1xuICAgIHZhciBvcHRpb25zID0ge1xuICAgICAgcGF0aDogdGhpcy5wYXRoLFxuICAgICAgZXhwaXJlczogdGhpcy5leHBpcmVzLFxuICAgICAgZG9tYWluOiB0aGlzLmRvbWFpbixcbiAgICAgIHNlY3VyZTogdGhpcy5zZWN1cmVcbiAgICB9O1xuICAgIGlmICh0aGlzLnNhbWVTaXRlKSB7XG4gICAgICBvcHRpb25zLnNhbWVTaXRlID0gdGhpcy5zYW1lU2l0ZTtcbiAgICB9XG4gICAgQ29va2llcy5zZXQoa2V5LCB2YWx1ZSwgb3B0aW9ucyk7XG4gICAgcmV0dXJuIENvb2tpZXMuZ2V0KGtleSk7XG4gIH1cblxuICAvKipcbiAgICogVGhpcyBpcyB1c2VkIHRvIGdldCBhIHNwZWNpZmljIGtleSBmcm9tIHN0b3JhZ2VcbiAgICogQHBhcmFtIHtzdHJpbmd9IGtleSAtIHRoZSBrZXkgZm9yIHRoZSBpdGVtXG4gICAqIFRoaXMgaXMgdXNlZCB0byBjbGVhciB0aGUgc3RvcmFnZVxuICAgKiBAcmV0dXJucyB7c3RyaW5nfSB0aGUgZGF0YSBpdGVtXG4gICAqLztcbiAgX3Byb3RvLmdldEl0ZW0gPSBmdW5jdGlvbiBnZXRJdGVtKGtleSkge1xuICAgIHJldHVybiBDb29raWVzLmdldChrZXkpO1xuICB9XG5cbiAgLyoqXG4gICAqIFRoaXMgaXMgdXNlZCB0byByZW1vdmUgYW4gaXRlbSBmcm9tIHN0b3JhZ2VcbiAgICogQHBhcmFtIHtzdHJpbmd9IGtleSAtIHRoZSBrZXkgYmVpbmcgc2V0XG4gICAqIEByZXR1cm5zIHtzdHJpbmd9IHZhbHVlIC0gdmFsdWUgdGhhdCB3YXMgZGVsZXRlZFxuICAgKi87XG4gIF9wcm90by5yZW1vdmVJdGVtID0gZnVuY3Rpb24gcmVtb3ZlSXRlbShrZXkpIHtcbiAgICB2YXIgb3B0aW9ucyA9IHtcbiAgICAgIHBhdGg6IHRoaXMucGF0aCxcbiAgICAgIGV4cGlyZXM6IHRoaXMuZXhwaXJlcyxcbiAgICAgIGRvbWFpbjogdGhpcy5kb21haW4sXG4gICAgICBzZWN1cmU6IHRoaXMuc2VjdXJlXG4gICAgfTtcbiAgICBpZiAodGhpcy5zYW1lU2l0ZSkge1xuICAgICAgb3B0aW9ucy5zYW1lU2l0ZSA9IHRoaXMuc2FtZVNpdGU7XG4gICAgfVxuICAgIHJldHVybiBDb29raWVzLnJlbW92ZShrZXksIG9wdGlvbnMpO1xuICB9XG5cbiAgLyoqXG4gICAqIFRoaXMgaXMgdXNlZCB0byBjbGVhciB0aGUgc3RvcmFnZSBvZiBvcHRpb25hbFxuICAgKiBpdGVtcyB0aGF0IHdlcmUgcHJldmlvdXNseSBzZXRcbiAgICogQHJldHVybnMge30gYW4gZW1wdHkgb2JqZWN0XG4gICAqLztcbiAgX3Byb3RvLmNsZWFyID0gZnVuY3Rpb24gY2xlYXIoKSB7XG4gICAgdmFyIGNvb2tpZXMgPSBDb29raWVzLmdldCgpO1xuICAgIHZhciBudW1LZXlzID0gT2JqZWN0LmtleXMoY29va2llcykubGVuZ3RoO1xuICAgIGZvciAodmFyIGluZGV4ID0gMDsgaW5kZXggPCBudW1LZXlzOyArK2luZGV4KSB7XG4gICAgICB0aGlzLnJlbW92ZUl0ZW0oT2JqZWN0LmtleXMoY29va2llcylbaW5kZXhdKTtcbiAgICB9XG4gICAgcmV0dXJuIHt9O1xuICB9O1xuICByZXR1cm4gQ29va2llU3RvcmFnZTtcbn0oKTtcbmV4cG9ydHNbXCJkZWZhdWx0XCJdID0gQ29va2llU3RvcmFnZTsiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/amazon-cognito-identity-js/lib/CookieStorage.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/amazon-cognito-identity-js/lib/DateHelper.js":
/*!*******************************************************************!*\
  !*** ./node_modules/amazon-cognito-identity-js/lib/DateHelper.js ***!
  \*******************************************************************/
/***/ ((__unused_webpack_module, exports) => {

eval("\n\nexports.__esModule = true;\nexports[\"default\"] = void 0;\n/*!\n * Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n * SPDX-License-Identifier: Apache-2.0\n */\n\nvar monthNames = ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec'];\nvar weekNames = ['Sun', 'Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat'];\n\n/** @class */\nvar DateHelper = /*#__PURE__*/function () {\n  function DateHelper() {}\n  var _proto = DateHelper.prototype;\n  /**\n   * @returns {string} The current time in \"ddd MMM D HH:mm:ss UTC YYYY\" format.\n   */\n  _proto.getNowString = function getNowString() {\n    var now = new Date();\n    var weekDay = weekNames[now.getUTCDay()];\n    var month = monthNames[now.getUTCMonth()];\n    var day = now.getUTCDate();\n    var hours = now.getUTCHours();\n    if (hours < 10) {\n      hours = \"0\" + hours;\n    }\n    var minutes = now.getUTCMinutes();\n    if (minutes < 10) {\n      minutes = \"0\" + minutes;\n    }\n    var seconds = now.getUTCSeconds();\n    if (seconds < 10) {\n      seconds = \"0\" + seconds;\n    }\n    var year = now.getUTCFullYear();\n\n    // ddd MMM D HH:mm:ss UTC YYYY\n    var dateNow = weekDay + \" \" + month + \" \" + day + \" \" + hours + \":\" + minutes + \":\" + seconds + \" UTC \" + year;\n    return dateNow;\n  };\n  return DateHelper;\n}();\nexports[\"default\"] = DateHelper;//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvYW1hem9uLWNvZ25pdG8taWRlbnRpdHktanMvbGliL0RhdGVIZWxwZXIuanMiLCJtYXBwaW5ncyI6IkFBQWE7O0FBRWIsa0JBQWtCO0FBQ2xCLGtCQUFrQjtBQUNsQjtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxlQUFlLFFBQVE7QUFDdkI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7QUFDRCxrQkFBa0IiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9wYXl3aW5kLy4vbm9kZV9tb2R1bGVzL2FtYXpvbi1jb2duaXRvLWlkZW50aXR5LWpzL2xpYi9EYXRlSGVscGVyLmpzPzRjYzciXSwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG5cbmV4cG9ydHMuX19lc01vZHVsZSA9IHRydWU7XG5leHBvcnRzW1wiZGVmYXVsdFwiXSA9IHZvaWQgMDtcbi8qIVxuICogQ29weXJpZ2h0IEFtYXpvbi5jb20sIEluYy4gb3IgaXRzIGFmZmlsaWF0ZXMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG4gKiBTUERYLUxpY2Vuc2UtSWRlbnRpZmllcjogQXBhY2hlLTIuMFxuICovXG5cbnZhciBtb250aE5hbWVzID0gWydKYW4nLCAnRmViJywgJ01hcicsICdBcHInLCAnTWF5JywgJ0p1bicsICdKdWwnLCAnQXVnJywgJ1NlcCcsICdPY3QnLCAnTm92JywgJ0RlYyddO1xudmFyIHdlZWtOYW1lcyA9IFsnU3VuJywgJ01vbicsICdUdWUnLCAnV2VkJywgJ1RodScsICdGcmknLCAnU2F0J107XG5cbi8qKiBAY2xhc3MgKi9cbnZhciBEYXRlSGVscGVyID0gLyojX19QVVJFX18qL2Z1bmN0aW9uICgpIHtcbiAgZnVuY3Rpb24gRGF0ZUhlbHBlcigpIHt9XG4gIHZhciBfcHJvdG8gPSBEYXRlSGVscGVyLnByb3RvdHlwZTtcbiAgLyoqXG4gICAqIEByZXR1cm5zIHtzdHJpbmd9IFRoZSBjdXJyZW50IHRpbWUgaW4gXCJkZGQgTU1NIEQgSEg6bW06c3MgVVRDIFlZWVlcIiBmb3JtYXQuXG4gICAqL1xuICBfcHJvdG8uZ2V0Tm93U3RyaW5nID0gZnVuY3Rpb24gZ2V0Tm93U3RyaW5nKCkge1xuICAgIHZhciBub3cgPSBuZXcgRGF0ZSgpO1xuICAgIHZhciB3ZWVrRGF5ID0gd2Vla05hbWVzW25vdy5nZXRVVENEYXkoKV07XG4gICAgdmFyIG1vbnRoID0gbW9udGhOYW1lc1tub3cuZ2V0VVRDTW9udGgoKV07XG4gICAgdmFyIGRheSA9IG5vdy5nZXRVVENEYXRlKCk7XG4gICAgdmFyIGhvdXJzID0gbm93LmdldFVUQ0hvdXJzKCk7XG4gICAgaWYgKGhvdXJzIDwgMTApIHtcbiAgICAgIGhvdXJzID0gXCIwXCIgKyBob3VycztcbiAgICB9XG4gICAgdmFyIG1pbnV0ZXMgPSBub3cuZ2V0VVRDTWludXRlcygpO1xuICAgIGlmIChtaW51dGVzIDwgMTApIHtcbiAgICAgIG1pbnV0ZXMgPSBcIjBcIiArIG1pbnV0ZXM7XG4gICAgfVxuICAgIHZhciBzZWNvbmRzID0gbm93LmdldFVUQ1NlY29uZHMoKTtcbiAgICBpZiAoc2Vjb25kcyA8IDEwKSB7XG4gICAgICBzZWNvbmRzID0gXCIwXCIgKyBzZWNvbmRzO1xuICAgIH1cbiAgICB2YXIgeWVhciA9IG5vdy5nZXRVVENGdWxsWWVhcigpO1xuXG4gICAgLy8gZGRkIE1NTSBEIEhIOm1tOnNzIFVUQyBZWVlZXG4gICAgdmFyIGRhdGVOb3cgPSB3ZWVrRGF5ICsgXCIgXCIgKyBtb250aCArIFwiIFwiICsgZGF5ICsgXCIgXCIgKyBob3VycyArIFwiOlwiICsgbWludXRlcyArIFwiOlwiICsgc2Vjb25kcyArIFwiIFVUQyBcIiArIHllYXI7XG4gICAgcmV0dXJuIGRhdGVOb3c7XG4gIH07XG4gIHJldHVybiBEYXRlSGVscGVyO1xufSgpO1xuZXhwb3J0c1tcImRlZmF1bHRcIl0gPSBEYXRlSGVscGVyOyJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/amazon-cognito-identity-js/lib/DateHelper.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/amazon-cognito-identity-js/lib/Platform/constants.js":
/*!***************************************************************************!*\
  !*** ./node_modules/amazon-cognito-identity-js/lib/Platform/constants.js ***!
  \***************************************************************************/
/***/ ((__unused_webpack_module, exports) => {

eval("\n\nexports.__esModule = true;\nexports.FRAMEWORK = exports.AUTH_CATEGORY = void 0;\nvar FRAMEWORK = {\n  None: '0',\n  ReactNative: '1'\n};\nexports.FRAMEWORK = FRAMEWORK;\nvar AUTH_CATEGORY = 'auth';\nexports.AUTH_CATEGORY = AUTH_CATEGORY;//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvYW1hem9uLWNvZ25pdG8taWRlbnRpdHktanMvbGliL1BsYXRmb3JtL2NvbnN0YW50cy5qcyIsIm1hcHBpbmdzIjoiQUFBYTs7QUFFYixrQkFBa0I7QUFDbEIsaUJBQWlCLEdBQUcscUJBQXFCO0FBQ3pDO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCO0FBQ0EscUJBQXFCIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vcGF5d2luZC8uL25vZGVfbW9kdWxlcy9hbWF6b24tY29nbml0by1pZGVudGl0eS1qcy9saWIvUGxhdGZvcm0vY29uc3RhbnRzLmpzP2I5ZGQiXSwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG5cbmV4cG9ydHMuX19lc01vZHVsZSA9IHRydWU7XG5leHBvcnRzLkZSQU1FV09SSyA9IGV4cG9ydHMuQVVUSF9DQVRFR09SWSA9IHZvaWQgMDtcbnZhciBGUkFNRVdPUksgPSB7XG4gIE5vbmU6ICcwJyxcbiAgUmVhY3ROYXRpdmU6ICcxJ1xufTtcbmV4cG9ydHMuRlJBTUVXT1JLID0gRlJBTUVXT1JLO1xudmFyIEFVVEhfQ0FURUdPUlkgPSAnYXV0aCc7XG5leHBvcnRzLkFVVEhfQ0FURUdPUlkgPSBBVVRIX0NBVEVHT1JZOyJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/amazon-cognito-identity-js/lib/Platform/constants.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/amazon-cognito-identity-js/lib/Platform/index.js":
/*!***********************************************************************!*\
  !*** ./node_modules/amazon-cognito-identity-js/lib/Platform/index.js ***!
  \***********************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

eval("\n\nexports.__esModule = true;\nexports.getUserAgent = exports[\"default\"] = exports.Platform = void 0;\nvar _version = __webpack_require__(/*! ./version */ \"(ssr)/./node_modules/amazon-cognito-identity-js/lib/Platform/version.js\");\n/*!\n * Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n * SPDX-License-Identifier: Apache-2.0\n */\n\nvar BASE_USER_AGENT = \"aws-amplify/\" + _version.version;\nvar Platform = {\n  userAgent: BASE_USER_AGENT,\n  isReactNative: typeof navigator !== 'undefined' && navigator.product === 'ReactNative'\n};\nexports.Platform = Platform;\nvar getUserAgent = function getUserAgent() {\n  return Platform.userAgent;\n};\n\n/**\n * @deprecated use named import\n */\nexports.getUserAgent = getUserAgent;\nvar _default = Platform;\nexports[\"default\"] = _default;//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvYW1hem9uLWNvZ25pdG8taWRlbnRpdHktanMvbGliL1BsYXRmb3JtL2luZGV4LmpzIiwibWFwcGluZ3MiOiJBQUFhOztBQUViLGtCQUFrQjtBQUNsQixvQkFBb0IsR0FBRyxrQkFBa0IsR0FBRyxnQkFBZ0I7QUFDNUQsZUFBZSxtQkFBTyxDQUFDLDBGQUFXO0FBQ2xDO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnQkFBZ0I7QUFDaEI7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLG9CQUFvQjtBQUNwQjtBQUNBLGtCQUFrQiIsInNvdXJjZXMiOlsid2VicGFjazovL3BheXdpbmQvLi9ub2RlX21vZHVsZXMvYW1hem9uLWNvZ25pdG8taWRlbnRpdHktanMvbGliL1BsYXRmb3JtL2luZGV4LmpzP2VhNDIiXSwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG5cbmV4cG9ydHMuX19lc01vZHVsZSA9IHRydWU7XG5leHBvcnRzLmdldFVzZXJBZ2VudCA9IGV4cG9ydHNbXCJkZWZhdWx0XCJdID0gZXhwb3J0cy5QbGF0Zm9ybSA9IHZvaWQgMDtcbnZhciBfdmVyc2lvbiA9IHJlcXVpcmUoXCIuL3ZlcnNpb25cIik7XG4vKiFcbiAqIENvcHlyaWdodCBBbWF6b24uY29tLCBJbmMuIG9yIGl0cyBhZmZpbGlhdGVzLiBBbGwgUmlnaHRzIFJlc2VydmVkLlxuICogU1BEWC1MaWNlbnNlLUlkZW50aWZpZXI6IEFwYWNoZS0yLjBcbiAqL1xuXG52YXIgQkFTRV9VU0VSX0FHRU5UID0gXCJhd3MtYW1wbGlmeS9cIiArIF92ZXJzaW9uLnZlcnNpb247XG52YXIgUGxhdGZvcm0gPSB7XG4gIHVzZXJBZ2VudDogQkFTRV9VU0VSX0FHRU5ULFxuICBpc1JlYWN0TmF0aXZlOiB0eXBlb2YgbmF2aWdhdG9yICE9PSAndW5kZWZpbmVkJyAmJiBuYXZpZ2F0b3IucHJvZHVjdCA9PT0gJ1JlYWN0TmF0aXZlJ1xufTtcbmV4cG9ydHMuUGxhdGZvcm0gPSBQbGF0Zm9ybTtcbnZhciBnZXRVc2VyQWdlbnQgPSBmdW5jdGlvbiBnZXRVc2VyQWdlbnQoKSB7XG4gIHJldHVybiBQbGF0Zm9ybS51c2VyQWdlbnQ7XG59O1xuXG4vKipcbiAqIEBkZXByZWNhdGVkIHVzZSBuYW1lZCBpbXBvcnRcbiAqL1xuZXhwb3J0cy5nZXRVc2VyQWdlbnQgPSBnZXRVc2VyQWdlbnQ7XG52YXIgX2RlZmF1bHQgPSBQbGF0Zm9ybTtcbmV4cG9ydHNbXCJkZWZhdWx0XCJdID0gX2RlZmF1bHQ7Il0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/amazon-cognito-identity-js/lib/Platform/index.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/amazon-cognito-identity-js/lib/Platform/version.js":
/*!*************************************************************************!*\
  !*** ./node_modules/amazon-cognito-identity-js/lib/Platform/version.js ***!
  \*************************************************************************/
/***/ ((__unused_webpack_module, exports) => {

eval("\n\nexports.__esModule = true;\nexports.version = void 0;\n// generated by genversion\nvar version = '5.0.4';\nexports.version = version;//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvYW1hem9uLWNvZ25pdG8taWRlbnRpdHktanMvbGliL1BsYXRmb3JtL3ZlcnNpb24uanMiLCJtYXBwaW5ncyI6IkFBQWE7O0FBRWIsa0JBQWtCO0FBQ2xCLGVBQWU7QUFDZjtBQUNBO0FBQ0EsZUFBZSIsInNvdXJjZXMiOlsid2VicGFjazovL3BheXdpbmQvLi9ub2RlX21vZHVsZXMvYW1hem9uLWNvZ25pdG8taWRlbnRpdHktanMvbGliL1BsYXRmb3JtL3ZlcnNpb24uanM/NDc2YiJdLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcblxuZXhwb3J0cy5fX2VzTW9kdWxlID0gdHJ1ZTtcbmV4cG9ydHMudmVyc2lvbiA9IHZvaWQgMDtcbi8vIGdlbmVyYXRlZCBieSBnZW52ZXJzaW9uXG52YXIgdmVyc2lvbiA9ICc1LjAuNCc7XG5leHBvcnRzLnZlcnNpb24gPSB2ZXJzaW9uOyJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/amazon-cognito-identity-js/lib/Platform/version.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/amazon-cognito-identity-js/lib/StorageHelper.js":
/*!**********************************************************************!*\
  !*** ./node_modules/amazon-cognito-identity-js/lib/StorageHelper.js ***!
  \**********************************************************************/
/***/ ((__unused_webpack_module, exports) => {

eval("\n\nexports.__esModule = true;\nexports[\"default\"] = exports.MemoryStorage = void 0;\n/*!\n * Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n * SPDX-License-Identifier: Apache-2.0\n */\n\nvar dataMemory = {};\n\n/** @class */\nvar MemoryStorage = /*#__PURE__*/function () {\n  function MemoryStorage() {}\n  /**\n   * This is used to set a specific item in storage\n   * @param {string} key - the key for the item\n   * @param {object} value - the value\n   * @returns {string} value that was set\n   */\n  MemoryStorage.setItem = function setItem(key, value) {\n    dataMemory[key] = value;\n    return dataMemory[key];\n  }\n\n  /**\n   * This is used to get a specific key from storage\n   * @param {string} key - the key for the item\n   * This is used to clear the storage\n   * @returns {string} the data item\n   */;\n  MemoryStorage.getItem = function getItem(key) {\n    return Object.prototype.hasOwnProperty.call(dataMemory, key) ? dataMemory[key] : undefined;\n  }\n\n  /**\n   * This is used to remove an item from storage\n   * @param {string} key - the key being set\n   * @returns {boolean} return true\n   */;\n  MemoryStorage.removeItem = function removeItem(key) {\n    return delete dataMemory[key];\n  }\n\n  /**\n   * This is used to clear the storage\n   * @returns {string} nothing\n   */;\n  MemoryStorage.clear = function clear() {\n    dataMemory = {};\n    return dataMemory;\n  };\n  return MemoryStorage;\n}();\n/** @class */\nexports.MemoryStorage = MemoryStorage;\nvar StorageHelper = /*#__PURE__*/function () {\n  /**\n   * This is used to get a storage object\n   * @returns {object} the storage\n   */\n  function StorageHelper() {\n    try {\n      this.storageWindow = window.localStorage;\n      this.storageWindow.setItem('aws.cognito.test-ls', 1);\n      this.storageWindow.removeItem('aws.cognito.test-ls');\n    } catch (exception) {\n      this.storageWindow = MemoryStorage;\n    }\n  }\n\n  /**\n   * This is used to return the storage\n   * @returns {object} the storage\n   */\n  var _proto = StorageHelper.prototype;\n  _proto.getStorage = function getStorage() {\n    return this.storageWindow;\n  };\n  return StorageHelper;\n}();\nexports[\"default\"] = StorageHelper;//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvYW1hem9uLWNvZ25pdG8taWRlbnRpdHktanMvbGliL1N0b3JhZ2VIZWxwZXIuanMiLCJtYXBwaW5ncyI6IkFBQWE7O0FBRWIsa0JBQWtCO0FBQ2xCLGtCQUFrQixHQUFHLHFCQUFxQjtBQUMxQztBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYSxRQUFRO0FBQ3JCLGFBQWEsUUFBUTtBQUNyQixlQUFlLFFBQVE7QUFDdkI7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsYUFBYSxRQUFRO0FBQ3JCO0FBQ0EsZUFBZSxRQUFRO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxhQUFhLFFBQVE7QUFDckIsZUFBZSxTQUFTO0FBQ3hCO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxlQUFlLFFBQVE7QUFDdkI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQztBQUNEO0FBQ0EscUJBQXFCO0FBQ3JCO0FBQ0E7QUFDQTtBQUNBLGVBQWUsUUFBUTtBQUN2QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxlQUFlLFFBQVE7QUFDdkI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQztBQUNELGtCQUFrQiIsInNvdXJjZXMiOlsid2VicGFjazovL3BheXdpbmQvLi9ub2RlX21vZHVsZXMvYW1hem9uLWNvZ25pdG8taWRlbnRpdHktanMvbGliL1N0b3JhZ2VIZWxwZXIuanM/ZTdkYyJdLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcblxuZXhwb3J0cy5fX2VzTW9kdWxlID0gdHJ1ZTtcbmV4cG9ydHNbXCJkZWZhdWx0XCJdID0gZXhwb3J0cy5NZW1vcnlTdG9yYWdlID0gdm9pZCAwO1xuLyohXG4gKiBDb3B5cmlnaHQgQW1hem9uLmNvbSwgSW5jLiBvciBpdHMgYWZmaWxpYXRlcy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbiAqIFNQRFgtTGljZW5zZS1JZGVudGlmaWVyOiBBcGFjaGUtMi4wXG4gKi9cblxudmFyIGRhdGFNZW1vcnkgPSB7fTtcblxuLyoqIEBjbGFzcyAqL1xudmFyIE1lbW9yeVN0b3JhZ2UgPSAvKiNfX1BVUkVfXyovZnVuY3Rpb24gKCkge1xuICBmdW5jdGlvbiBNZW1vcnlTdG9yYWdlKCkge31cbiAgLyoqXG4gICAqIFRoaXMgaXMgdXNlZCB0byBzZXQgYSBzcGVjaWZpYyBpdGVtIGluIHN0b3JhZ2VcbiAgICogQHBhcmFtIHtzdHJpbmd9IGtleSAtIHRoZSBrZXkgZm9yIHRoZSBpdGVtXG4gICAqIEBwYXJhbSB7b2JqZWN0fSB2YWx1ZSAtIHRoZSB2YWx1ZVxuICAgKiBAcmV0dXJucyB7c3RyaW5nfSB2YWx1ZSB0aGF0IHdhcyBzZXRcbiAgICovXG4gIE1lbW9yeVN0b3JhZ2Uuc2V0SXRlbSA9IGZ1bmN0aW9uIHNldEl0ZW0oa2V5LCB2YWx1ZSkge1xuICAgIGRhdGFNZW1vcnlba2V5XSA9IHZhbHVlO1xuICAgIHJldHVybiBkYXRhTWVtb3J5W2tleV07XG4gIH1cblxuICAvKipcbiAgICogVGhpcyBpcyB1c2VkIHRvIGdldCBhIHNwZWNpZmljIGtleSBmcm9tIHN0b3JhZ2VcbiAgICogQHBhcmFtIHtzdHJpbmd9IGtleSAtIHRoZSBrZXkgZm9yIHRoZSBpdGVtXG4gICAqIFRoaXMgaXMgdXNlZCB0byBjbGVhciB0aGUgc3RvcmFnZVxuICAgKiBAcmV0dXJucyB7c3RyaW5nfSB0aGUgZGF0YSBpdGVtXG4gICAqLztcbiAgTWVtb3J5U3RvcmFnZS5nZXRJdGVtID0gZnVuY3Rpb24gZ2V0SXRlbShrZXkpIHtcbiAgICByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGRhdGFNZW1vcnksIGtleSkgPyBkYXRhTWVtb3J5W2tleV0gOiB1bmRlZmluZWQ7XG4gIH1cblxuICAvKipcbiAgICogVGhpcyBpcyB1c2VkIHRvIHJlbW92ZSBhbiBpdGVtIGZyb20gc3RvcmFnZVxuICAgKiBAcGFyYW0ge3N0cmluZ30ga2V5IC0gdGhlIGtleSBiZWluZyBzZXRcbiAgICogQHJldHVybnMge2Jvb2xlYW59IHJldHVybiB0cnVlXG4gICAqLztcbiAgTWVtb3J5U3RvcmFnZS5yZW1vdmVJdGVtID0gZnVuY3Rpb24gcmVtb3ZlSXRlbShrZXkpIHtcbiAgICByZXR1cm4gZGVsZXRlIGRhdGFNZW1vcnlba2V5XTtcbiAgfVxuXG4gIC8qKlxuICAgKiBUaGlzIGlzIHVzZWQgdG8gY2xlYXIgdGhlIHN0b3JhZ2VcbiAgICogQHJldHVybnMge3N0cmluZ30gbm90aGluZ1xuICAgKi87XG4gIE1lbW9yeVN0b3JhZ2UuY2xlYXIgPSBmdW5jdGlvbiBjbGVhcigpIHtcbiAgICBkYXRhTWVtb3J5ID0ge307XG4gICAgcmV0dXJuIGRhdGFNZW1vcnk7XG4gIH07XG4gIHJldHVybiBNZW1vcnlTdG9yYWdlO1xufSgpO1xuLyoqIEBjbGFzcyAqL1xuZXhwb3J0cy5NZW1vcnlTdG9yYWdlID0gTWVtb3J5U3RvcmFnZTtcbnZhciBTdG9yYWdlSGVscGVyID0gLyojX19QVVJFX18qL2Z1bmN0aW9uICgpIHtcbiAgLyoqXG4gICAqIFRoaXMgaXMgdXNlZCB0byBnZXQgYSBzdG9yYWdlIG9iamVjdFxuICAgKiBAcmV0dXJucyB7b2JqZWN0fSB0aGUgc3RvcmFnZVxuICAgKi9cbiAgZnVuY3Rpb24gU3RvcmFnZUhlbHBlcigpIHtcbiAgICB0cnkge1xuICAgICAgdGhpcy5zdG9yYWdlV2luZG93ID0gd2luZG93LmxvY2FsU3RvcmFnZTtcbiAgICAgIHRoaXMuc3RvcmFnZVdpbmRvdy5zZXRJdGVtKCdhd3MuY29nbml0by50ZXN0LWxzJywgMSk7XG4gICAgICB0aGlzLnN0b3JhZ2VXaW5kb3cucmVtb3ZlSXRlbSgnYXdzLmNvZ25pdG8udGVzdC1scycpO1xuICAgIH0gY2F0Y2ggKGV4Y2VwdGlvbikge1xuICAgICAgdGhpcy5zdG9yYWdlV2luZG93ID0gTWVtb3J5U3RvcmFnZTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogVGhpcyBpcyB1c2VkIHRvIHJldHVybiB0aGUgc3RvcmFnZVxuICAgKiBAcmV0dXJucyB7b2JqZWN0fSB0aGUgc3RvcmFnZVxuICAgKi9cbiAgdmFyIF9wcm90byA9IFN0b3JhZ2VIZWxwZXIucHJvdG90eXBlO1xuICBfcHJvdG8uZ2V0U3RvcmFnZSA9IGZ1bmN0aW9uIGdldFN0b3JhZ2UoKSB7XG4gICAgcmV0dXJuIHRoaXMuc3RvcmFnZVdpbmRvdztcbiAgfTtcbiAgcmV0dXJuIFN0b3JhZ2VIZWxwZXI7XG59KCk7XG5leHBvcnRzW1wiZGVmYXVsdFwiXSA9IFN0b3JhZ2VIZWxwZXI7Il0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/amazon-cognito-identity-js/lib/StorageHelper.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/amazon-cognito-identity-js/lib/UserAgent.js":
/*!******************************************************************!*\
  !*** ./node_modules/amazon-cognito-identity-js/lib/UserAgent.js ***!
  \******************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

eval("\n\nexports.__esModule = true;\nexports.getAmplifyUserAgent = exports[\"default\"] = exports.appendToCognitoUserAgent = exports.addFrameworkToCognitoUserAgent = exports.addAuthCategoryToCognitoUserAgent = void 0;\nvar _Platform = __webpack_require__(/*! ./Platform */ \"(ssr)/./node_modules/amazon-cognito-identity-js/lib/Platform/index.js\");\nvar _constants = __webpack_require__(/*! ./Platform/constants */ \"(ssr)/./node_modules/amazon-cognito-identity-js/lib/Platform/constants.js\");\n// constructor\nfunction UserAgent() {}\n// public\nUserAgent.prototype.userAgent = (0, _Platform.getUserAgent)();\nvar appendToCognitoUserAgent = function appendToCognitoUserAgent(content) {\n  if (!content) {\n    return;\n  }\n  if (UserAgent.prototype.userAgent && !UserAgent.prototype.userAgent.includes(content)) {\n    UserAgent.prototype.userAgent = UserAgent.prototype.userAgent.concat(' ', content);\n  }\n  if (!UserAgent.prototype.userAgent || UserAgent.prototype.userAgent === '') {\n    UserAgent.prototype.userAgent = content;\n  }\n};\nexports.appendToCognitoUserAgent = appendToCognitoUserAgent;\nvar addAuthCategoryToCognitoUserAgent = function addAuthCategoryToCognitoUserAgent() {\n  UserAgent.category = _constants.AUTH_CATEGORY;\n};\nexports.addAuthCategoryToCognitoUserAgent = addAuthCategoryToCognitoUserAgent;\nvar addFrameworkToCognitoUserAgent = function addFrameworkToCognitoUserAgent(framework) {\n  UserAgent.framework = framework;\n};\nexports.addFrameworkToCognitoUserAgent = addFrameworkToCognitoUserAgent;\nvar getAmplifyUserAgent = function getAmplifyUserAgent(action) {\n  var uaCategoryAction = UserAgent.category ? \" \" + UserAgent.category : '';\n  var uaFramework = UserAgent.framework ? \" framework/\" + UserAgent.framework : '';\n  var userAgent = \"\" + UserAgent.prototype.userAgent + uaCategoryAction + uaFramework;\n  return userAgent;\n};\n\n// class for defining the amzn user-agent\nexports.getAmplifyUserAgent = getAmplifyUserAgent;\nvar _default = UserAgent;\nexports[\"default\"] = _default;//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvYW1hem9uLWNvZ25pdG8taWRlbnRpdHktanMvbGliL1VzZXJBZ2VudC5qcyIsIm1hcHBpbmdzIjoiQUFBYTs7QUFFYixrQkFBa0I7QUFDbEIsMkJBQTJCLEdBQUcsa0JBQWtCLEdBQUcsZ0NBQWdDLEdBQUcsc0NBQXNDLEdBQUcseUNBQXlDO0FBQ3hLLGdCQUFnQixtQkFBTyxDQUFDLHlGQUFZO0FBQ3BDLGlCQUFpQixtQkFBTyxDQUFDLHVHQUFzQjtBQUMvQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnQ0FBZ0M7QUFDaEM7QUFDQTtBQUNBO0FBQ0EseUNBQXlDO0FBQ3pDO0FBQ0E7QUFDQTtBQUNBLHNDQUFzQztBQUN0QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSwyQkFBMkI7QUFDM0I7QUFDQSxrQkFBa0IiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9wYXl3aW5kLy4vbm9kZV9tb2R1bGVzL2FtYXpvbi1jb2duaXRvLWlkZW50aXR5LWpzL2xpYi9Vc2VyQWdlbnQuanM/NzBkNiJdLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcblxuZXhwb3J0cy5fX2VzTW9kdWxlID0gdHJ1ZTtcbmV4cG9ydHMuZ2V0QW1wbGlmeVVzZXJBZ2VudCA9IGV4cG9ydHNbXCJkZWZhdWx0XCJdID0gZXhwb3J0cy5hcHBlbmRUb0NvZ25pdG9Vc2VyQWdlbnQgPSBleHBvcnRzLmFkZEZyYW1ld29ya1RvQ29nbml0b1VzZXJBZ2VudCA9IGV4cG9ydHMuYWRkQXV0aENhdGVnb3J5VG9Db2duaXRvVXNlckFnZW50ID0gdm9pZCAwO1xudmFyIF9QbGF0Zm9ybSA9IHJlcXVpcmUoXCIuL1BsYXRmb3JtXCIpO1xudmFyIF9jb25zdGFudHMgPSByZXF1aXJlKFwiLi9QbGF0Zm9ybS9jb25zdGFudHNcIik7XG4vLyBjb25zdHJ1Y3RvclxuZnVuY3Rpb24gVXNlckFnZW50KCkge31cbi8vIHB1YmxpY1xuVXNlckFnZW50LnByb3RvdHlwZS51c2VyQWdlbnQgPSAoMCwgX1BsYXRmb3JtLmdldFVzZXJBZ2VudCkoKTtcbnZhciBhcHBlbmRUb0NvZ25pdG9Vc2VyQWdlbnQgPSBmdW5jdGlvbiBhcHBlbmRUb0NvZ25pdG9Vc2VyQWdlbnQoY29udGVudCkge1xuICBpZiAoIWNvbnRlbnQpIHtcbiAgICByZXR1cm47XG4gIH1cbiAgaWYgKFVzZXJBZ2VudC5wcm90b3R5cGUudXNlckFnZW50ICYmICFVc2VyQWdlbnQucHJvdG90eXBlLnVzZXJBZ2VudC5pbmNsdWRlcyhjb250ZW50KSkge1xuICAgIFVzZXJBZ2VudC5wcm90b3R5cGUudXNlckFnZW50ID0gVXNlckFnZW50LnByb3RvdHlwZS51c2VyQWdlbnQuY29uY2F0KCcgJywgY29udGVudCk7XG4gIH1cbiAgaWYgKCFVc2VyQWdlbnQucHJvdG90eXBlLnVzZXJBZ2VudCB8fCBVc2VyQWdlbnQucHJvdG90eXBlLnVzZXJBZ2VudCA9PT0gJycpIHtcbiAgICBVc2VyQWdlbnQucHJvdG90eXBlLnVzZXJBZ2VudCA9IGNvbnRlbnQ7XG4gIH1cbn07XG5leHBvcnRzLmFwcGVuZFRvQ29nbml0b1VzZXJBZ2VudCA9IGFwcGVuZFRvQ29nbml0b1VzZXJBZ2VudDtcbnZhciBhZGRBdXRoQ2F0ZWdvcnlUb0NvZ25pdG9Vc2VyQWdlbnQgPSBmdW5jdGlvbiBhZGRBdXRoQ2F0ZWdvcnlUb0NvZ25pdG9Vc2VyQWdlbnQoKSB7XG4gIFVzZXJBZ2VudC5jYXRlZ29yeSA9IF9jb25zdGFudHMuQVVUSF9DQVRFR09SWTtcbn07XG5leHBvcnRzLmFkZEF1dGhDYXRlZ29yeVRvQ29nbml0b1VzZXJBZ2VudCA9IGFkZEF1dGhDYXRlZ29yeVRvQ29nbml0b1VzZXJBZ2VudDtcbnZhciBhZGRGcmFtZXdvcmtUb0NvZ25pdG9Vc2VyQWdlbnQgPSBmdW5jdGlvbiBhZGRGcmFtZXdvcmtUb0NvZ25pdG9Vc2VyQWdlbnQoZnJhbWV3b3JrKSB7XG4gIFVzZXJBZ2VudC5mcmFtZXdvcmsgPSBmcmFtZXdvcms7XG59O1xuZXhwb3J0cy5hZGRGcmFtZXdvcmtUb0NvZ25pdG9Vc2VyQWdlbnQgPSBhZGRGcmFtZXdvcmtUb0NvZ25pdG9Vc2VyQWdlbnQ7XG52YXIgZ2V0QW1wbGlmeVVzZXJBZ2VudCA9IGZ1bmN0aW9uIGdldEFtcGxpZnlVc2VyQWdlbnQoYWN0aW9uKSB7XG4gIHZhciB1YUNhdGVnb3J5QWN0aW9uID0gVXNlckFnZW50LmNhdGVnb3J5ID8gXCIgXCIgKyBVc2VyQWdlbnQuY2F0ZWdvcnkgOiAnJztcbiAgdmFyIHVhRnJhbWV3b3JrID0gVXNlckFnZW50LmZyYW1ld29yayA/IFwiIGZyYW1ld29yay9cIiArIFVzZXJBZ2VudC5mcmFtZXdvcmsgOiAnJztcbiAgdmFyIHVzZXJBZ2VudCA9IFwiXCIgKyBVc2VyQWdlbnQucHJvdG90eXBlLnVzZXJBZ2VudCArIHVhQ2F0ZWdvcnlBY3Rpb24gKyB1YUZyYW1ld29yaztcbiAgcmV0dXJuIHVzZXJBZ2VudDtcbn07XG5cbi8vIGNsYXNzIGZvciBkZWZpbmluZyB0aGUgYW16biB1c2VyLWFnZW50XG5leHBvcnRzLmdldEFtcGxpZnlVc2VyQWdlbnQgPSBnZXRBbXBsaWZ5VXNlckFnZW50O1xudmFyIF9kZWZhdWx0ID0gVXNlckFnZW50O1xuZXhwb3J0c1tcImRlZmF1bHRcIl0gPSBfZGVmYXVsdDsiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/amazon-cognito-identity-js/lib/UserAgent.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/amazon-cognito-identity-js/lib/index.js":
/*!**************************************************************!*\
  !*** ./node_modules/amazon-cognito-identity-js/lib/index.js ***!
  \**************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

eval("\n\nexports.__esModule = true;\nexports.appendToCognitoUserAgent = exports.WordArray = exports.DateHelper = exports.CookieStorage = exports.CognitoUserSession = exports.CognitoUserPool = exports.CognitoUserAttribute = exports.CognitoUser = exports.CognitoRefreshToken = exports.CognitoIdToken = exports.CognitoAccessToken = exports.AuthenticationHelper = exports.AuthenticationDetails = void 0;\nvar _AuthenticationDetails = _interopRequireDefault(__webpack_require__(/*! ./AuthenticationDetails */ \"(ssr)/./node_modules/amazon-cognito-identity-js/lib/AuthenticationDetails.js\"));\nexports.AuthenticationDetails = _AuthenticationDetails[\"default\"];\nvar _AuthenticationHelper = _interopRequireDefault(__webpack_require__(/*! ./AuthenticationHelper */ \"(ssr)/./node_modules/amazon-cognito-identity-js/lib/AuthenticationHelper.js\"));\nexports.AuthenticationHelper = _AuthenticationHelper[\"default\"];\nvar _CognitoAccessToken = _interopRequireDefault(__webpack_require__(/*! ./CognitoAccessToken */ \"(ssr)/./node_modules/amazon-cognito-identity-js/lib/CognitoAccessToken.js\"));\nexports.CognitoAccessToken = _CognitoAccessToken[\"default\"];\nvar _CognitoIdToken = _interopRequireDefault(__webpack_require__(/*! ./CognitoIdToken */ \"(ssr)/./node_modules/amazon-cognito-identity-js/lib/CognitoIdToken.js\"));\nexports.CognitoIdToken = _CognitoIdToken[\"default\"];\nvar _CognitoRefreshToken = _interopRequireDefault(__webpack_require__(/*! ./CognitoRefreshToken */ \"(ssr)/./node_modules/amazon-cognito-identity-js/lib/CognitoRefreshToken.js\"));\nexports.CognitoRefreshToken = _CognitoRefreshToken[\"default\"];\nvar _CognitoUser = _interopRequireDefault(__webpack_require__(/*! ./CognitoUser */ \"(ssr)/./node_modules/amazon-cognito-identity-js/lib/CognitoUser.js\"));\nexports.CognitoUser = _CognitoUser[\"default\"];\nvar _CognitoUserAttribute = _interopRequireDefault(__webpack_require__(/*! ./CognitoUserAttribute */ \"(ssr)/./node_modules/amazon-cognito-identity-js/lib/CognitoUserAttribute.js\"));\nexports.CognitoUserAttribute = _CognitoUserAttribute[\"default\"];\nvar _CognitoUserPool = _interopRequireDefault(__webpack_require__(/*! ./CognitoUserPool */ \"(ssr)/./node_modules/amazon-cognito-identity-js/lib/CognitoUserPool.js\"));\nexports.CognitoUserPool = _CognitoUserPool[\"default\"];\nvar _CognitoUserSession = _interopRequireDefault(__webpack_require__(/*! ./CognitoUserSession */ \"(ssr)/./node_modules/amazon-cognito-identity-js/lib/CognitoUserSession.js\"));\nexports.CognitoUserSession = _CognitoUserSession[\"default\"];\nvar _CookieStorage = _interopRequireDefault(__webpack_require__(/*! ./CookieStorage */ \"(ssr)/./node_modules/amazon-cognito-identity-js/lib/CookieStorage.js\"));\nexports.CookieStorage = _CookieStorage[\"default\"];\nvar _DateHelper = _interopRequireDefault(__webpack_require__(/*! ./DateHelper */ \"(ssr)/./node_modules/amazon-cognito-identity-js/lib/DateHelper.js\"));\nexports.DateHelper = _DateHelper[\"default\"];\nvar _UserAgent = __webpack_require__(/*! ./UserAgent */ \"(ssr)/./node_modules/amazon-cognito-identity-js/lib/UserAgent.js\");\nexports.appendToCognitoUserAgent = _UserAgent.appendToCognitoUserAgent;\nvar _WordArray = _interopRequireDefault(__webpack_require__(/*! ./utils/WordArray */ \"(ssr)/./node_modules/amazon-cognito-identity-js/lib/utils/WordArray.js\"));\nexports.WordArray = _WordArray[\"default\"];\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { \"default\": obj }; }//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvYW1hem9uLWNvZ25pdG8taWRlbnRpdHktanMvbGliL2luZGV4LmpzIiwibWFwcGluZ3MiOiJBQUFhOztBQUViLGtCQUFrQjtBQUNsQixnQ0FBZ0MsR0FBRyxpQkFBaUIsR0FBRyxrQkFBa0IsR0FBRyxxQkFBcUIsR0FBRywwQkFBMEIsR0FBRyx1QkFBdUIsR0FBRyw0QkFBNEIsR0FBRyxtQkFBbUIsR0FBRywyQkFBMkIsR0FBRyxzQkFBc0IsR0FBRywwQkFBMEIsR0FBRyw0QkFBNEIsR0FBRyw2QkFBNkI7QUFDaFcsb0RBQW9ELG1CQUFPLENBQUMsNkdBQXlCO0FBQ3JGLDZCQUE2QjtBQUM3QixtREFBbUQsbUJBQU8sQ0FBQywyR0FBd0I7QUFDbkYsNEJBQTRCO0FBQzVCLGlEQUFpRCxtQkFBTyxDQUFDLHVHQUFzQjtBQUMvRSwwQkFBMEI7QUFDMUIsNkNBQTZDLG1CQUFPLENBQUMsK0ZBQWtCO0FBQ3ZFLHNCQUFzQjtBQUN0QixrREFBa0QsbUJBQU8sQ0FBQyx5R0FBdUI7QUFDakYsMkJBQTJCO0FBQzNCLDBDQUEwQyxtQkFBTyxDQUFDLHlGQUFlO0FBQ2pFLG1CQUFtQjtBQUNuQixtREFBbUQsbUJBQU8sQ0FBQywyR0FBd0I7QUFDbkYsNEJBQTRCO0FBQzVCLDhDQUE4QyxtQkFBTyxDQUFDLGlHQUFtQjtBQUN6RSx1QkFBdUI7QUFDdkIsaURBQWlELG1CQUFPLENBQUMsdUdBQXNCO0FBQy9FLDBCQUEwQjtBQUMxQiw0Q0FBNEMsbUJBQU8sQ0FBQyw2RkFBaUI7QUFDckUscUJBQXFCO0FBQ3JCLHlDQUF5QyxtQkFBTyxDQUFDLHVGQUFjO0FBQy9ELGtCQUFrQjtBQUNsQixpQkFBaUIsbUJBQU8sQ0FBQyxxRkFBYTtBQUN0QyxnQ0FBZ0M7QUFDaEMsd0NBQXdDLG1CQUFPLENBQUMsaUdBQW1CO0FBQ25FLGlCQUFpQjtBQUNqQix1Q0FBdUMsdUNBQXVDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vcGF5d2luZC8uL25vZGVfbW9kdWxlcy9hbWF6b24tY29nbml0by1pZGVudGl0eS1qcy9saWIvaW5kZXguanM/ZTQ5ZSJdLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcblxuZXhwb3J0cy5fX2VzTW9kdWxlID0gdHJ1ZTtcbmV4cG9ydHMuYXBwZW5kVG9Db2duaXRvVXNlckFnZW50ID0gZXhwb3J0cy5Xb3JkQXJyYXkgPSBleHBvcnRzLkRhdGVIZWxwZXIgPSBleHBvcnRzLkNvb2tpZVN0b3JhZ2UgPSBleHBvcnRzLkNvZ25pdG9Vc2VyU2Vzc2lvbiA9IGV4cG9ydHMuQ29nbml0b1VzZXJQb29sID0gZXhwb3J0cy5Db2duaXRvVXNlckF0dHJpYnV0ZSA9IGV4cG9ydHMuQ29nbml0b1VzZXIgPSBleHBvcnRzLkNvZ25pdG9SZWZyZXNoVG9rZW4gPSBleHBvcnRzLkNvZ25pdG9JZFRva2VuID0gZXhwb3J0cy5Db2duaXRvQWNjZXNzVG9rZW4gPSBleHBvcnRzLkF1dGhlbnRpY2F0aW9uSGVscGVyID0gZXhwb3J0cy5BdXRoZW50aWNhdGlvbkRldGFpbHMgPSB2b2lkIDA7XG52YXIgX0F1dGhlbnRpY2F0aW9uRGV0YWlscyA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQocmVxdWlyZShcIi4vQXV0aGVudGljYXRpb25EZXRhaWxzXCIpKTtcbmV4cG9ydHMuQXV0aGVudGljYXRpb25EZXRhaWxzID0gX0F1dGhlbnRpY2F0aW9uRGV0YWlsc1tcImRlZmF1bHRcIl07XG52YXIgX0F1dGhlbnRpY2F0aW9uSGVscGVyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlKFwiLi9BdXRoZW50aWNhdGlvbkhlbHBlclwiKSk7XG5leHBvcnRzLkF1dGhlbnRpY2F0aW9uSGVscGVyID0gX0F1dGhlbnRpY2F0aW9uSGVscGVyW1wiZGVmYXVsdFwiXTtcbnZhciBfQ29nbml0b0FjY2Vzc1Rva2VuID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlKFwiLi9Db2duaXRvQWNjZXNzVG9rZW5cIikpO1xuZXhwb3J0cy5Db2duaXRvQWNjZXNzVG9rZW4gPSBfQ29nbml0b0FjY2Vzc1Rva2VuW1wiZGVmYXVsdFwiXTtcbnZhciBfQ29nbml0b0lkVG9rZW4gPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KHJlcXVpcmUoXCIuL0NvZ25pdG9JZFRva2VuXCIpKTtcbmV4cG9ydHMuQ29nbml0b0lkVG9rZW4gPSBfQ29nbml0b0lkVG9rZW5bXCJkZWZhdWx0XCJdO1xudmFyIF9Db2duaXRvUmVmcmVzaFRva2VuID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlKFwiLi9Db2duaXRvUmVmcmVzaFRva2VuXCIpKTtcbmV4cG9ydHMuQ29nbml0b1JlZnJlc2hUb2tlbiA9IF9Db2duaXRvUmVmcmVzaFRva2VuW1wiZGVmYXVsdFwiXTtcbnZhciBfQ29nbml0b1VzZXIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KHJlcXVpcmUoXCIuL0NvZ25pdG9Vc2VyXCIpKTtcbmV4cG9ydHMuQ29nbml0b1VzZXIgPSBfQ29nbml0b1VzZXJbXCJkZWZhdWx0XCJdO1xudmFyIF9Db2duaXRvVXNlckF0dHJpYnV0ZSA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQocmVxdWlyZShcIi4vQ29nbml0b1VzZXJBdHRyaWJ1dGVcIikpO1xuZXhwb3J0cy5Db2duaXRvVXNlckF0dHJpYnV0ZSA9IF9Db2duaXRvVXNlckF0dHJpYnV0ZVtcImRlZmF1bHRcIl07XG52YXIgX0NvZ25pdG9Vc2VyUG9vbCA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQocmVxdWlyZShcIi4vQ29nbml0b1VzZXJQb29sXCIpKTtcbmV4cG9ydHMuQ29nbml0b1VzZXJQb29sID0gX0NvZ25pdG9Vc2VyUG9vbFtcImRlZmF1bHRcIl07XG52YXIgX0NvZ25pdG9Vc2VyU2Vzc2lvbiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQocmVxdWlyZShcIi4vQ29nbml0b1VzZXJTZXNzaW9uXCIpKTtcbmV4cG9ydHMuQ29nbml0b1VzZXJTZXNzaW9uID0gX0NvZ25pdG9Vc2VyU2Vzc2lvbltcImRlZmF1bHRcIl07XG52YXIgX0Nvb2tpZVN0b3JhZ2UgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KHJlcXVpcmUoXCIuL0Nvb2tpZVN0b3JhZ2VcIikpO1xuZXhwb3J0cy5Db29raWVTdG9yYWdlID0gX0Nvb2tpZVN0b3JhZ2VbXCJkZWZhdWx0XCJdO1xudmFyIF9EYXRlSGVscGVyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlKFwiLi9EYXRlSGVscGVyXCIpKTtcbmV4cG9ydHMuRGF0ZUhlbHBlciA9IF9EYXRlSGVscGVyW1wiZGVmYXVsdFwiXTtcbnZhciBfVXNlckFnZW50ID0gcmVxdWlyZShcIi4vVXNlckFnZW50XCIpO1xuZXhwb3J0cy5hcHBlbmRUb0NvZ25pdG9Vc2VyQWdlbnQgPSBfVXNlckFnZW50LmFwcGVuZFRvQ29nbml0b1VzZXJBZ2VudDtcbnZhciBfV29yZEFycmF5ID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlKFwiLi91dGlscy9Xb3JkQXJyYXlcIikpO1xuZXhwb3J0cy5Xb3JkQXJyYXkgPSBfV29yZEFycmF5W1wiZGVmYXVsdFwiXTtcbmZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IFwiZGVmYXVsdFwiOiBvYmogfTsgfSJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/amazon-cognito-identity-js/lib/index.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/amazon-cognito-identity-js/lib/internals/index.js":
/*!************************************************************************!*\
  !*** ./node_modules/amazon-cognito-identity-js/lib/internals/index.js ***!
  \************************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

eval("\n\nexports.__esModule = true;\nexports.addFrameworkToCognitoUserAgent = exports.addAuthCategoryToCognitoUserAgent = void 0;\nvar _UserAgent = __webpack_require__(/*! ../UserAgent */ \"(ssr)/./node_modules/amazon-cognito-identity-js/lib/UserAgent.js\");\nexports.addAuthCategoryToCognitoUserAgent = _UserAgent.addAuthCategoryToCognitoUserAgent;\nexports.addFrameworkToCognitoUserAgent = _UserAgent.addFrameworkToCognitoUserAgent;//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvYW1hem9uLWNvZ25pdG8taWRlbnRpdHktanMvbGliL2ludGVybmFscy9pbmRleC5qcyIsIm1hcHBpbmdzIjoiQUFBYTs7QUFFYixrQkFBa0I7QUFDbEIsc0NBQXNDLEdBQUcseUNBQXlDO0FBQ2xGLGlCQUFpQixtQkFBTyxDQUFDLHNGQUFjO0FBQ3ZDLHlDQUF5QztBQUN6QyxzQ0FBc0MiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9wYXl3aW5kLy4vbm9kZV9tb2R1bGVzL2FtYXpvbi1jb2duaXRvLWlkZW50aXR5LWpzL2xpYi9pbnRlcm5hbHMvaW5kZXguanM/NWYwZSJdLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcblxuZXhwb3J0cy5fX2VzTW9kdWxlID0gdHJ1ZTtcbmV4cG9ydHMuYWRkRnJhbWV3b3JrVG9Db2duaXRvVXNlckFnZW50ID0gZXhwb3J0cy5hZGRBdXRoQ2F0ZWdvcnlUb0NvZ25pdG9Vc2VyQWdlbnQgPSB2b2lkIDA7XG52YXIgX1VzZXJBZ2VudCA9IHJlcXVpcmUoXCIuLi9Vc2VyQWdlbnRcIik7XG5leHBvcnRzLmFkZEF1dGhDYXRlZ29yeVRvQ29nbml0b1VzZXJBZ2VudCA9IF9Vc2VyQWdlbnQuYWRkQXV0aENhdGVnb3J5VG9Db2duaXRvVXNlckFnZW50O1xuZXhwb3J0cy5hZGRGcmFtZXdvcmtUb0NvZ25pdG9Vc2VyQWdlbnQgPSBfVXNlckFnZW50LmFkZEZyYW1ld29ya1RvQ29nbml0b1VzZXJBZ2VudDsiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/amazon-cognito-identity-js/lib/internals/index.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/amazon-cognito-identity-js/lib/utils/WordArray.js":
/*!************************************************************************!*\
  !*** ./node_modules/amazon-cognito-identity-js/lib/utils/WordArray.js ***!
  \************************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

eval("\n\nexports.__esModule = true;\nexports[\"default\"] = void 0;\nvar _cryptoSecureRandomInt = _interopRequireDefault(__webpack_require__(/*! ./cryptoSecureRandomInt */ \"(ssr)/./node_modules/amazon-cognito-identity-js/lib/utils/cryptoSecureRandomInt.js\"));\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { \"default\": obj }; }\n/**\n * Hex encoding strategy.\n * Converts a word array to a hex string.\n * @param {WordArray} wordArray The word array.\n * @return {string} The hex string.\n * @static\n */\nfunction hexStringify(wordArray) {\n  // Shortcuts\n  var words = wordArray.words;\n  var sigBytes = wordArray.sigBytes;\n\n  // Convert\n  var hexChars = [];\n  for (var i = 0; i < sigBytes; i++) {\n    var bite = words[i >>> 2] >>> 24 - i % 4 * 8 & 0xff;\n    hexChars.push((bite >>> 4).toString(16));\n    hexChars.push((bite & 0x0f).toString(16));\n  }\n  return hexChars.join('');\n}\nvar WordArray = /*#__PURE__*/function () {\n  function WordArray(words, sigBytes) {\n    words = this.words = words || [];\n    if (sigBytes != undefined) {\n      this.sigBytes = sigBytes;\n    } else {\n      this.sigBytes = words.length * 4;\n    }\n  }\n  var _proto = WordArray.prototype;\n  _proto.random = function random(nBytes) {\n    var words = [];\n    for (var i = 0; i < nBytes; i += 4) {\n      words.push((0, _cryptoSecureRandomInt[\"default\"])());\n    }\n    return new WordArray(words, nBytes);\n  };\n  _proto.toString = function toString() {\n    return hexStringify(this);\n  };\n  return WordArray;\n}();\nexports[\"default\"] = WordArray;//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvYW1hem9uLWNvZ25pdG8taWRlbnRpdHktanMvbGliL3V0aWxzL1dvcmRBcnJheS5qcyIsIm1hcHBpbmdzIjoiQUFBYTs7QUFFYixrQkFBa0I7QUFDbEIsa0JBQWtCO0FBQ2xCLG9EQUFvRCxtQkFBTyxDQUFDLG1IQUF5QjtBQUNyRix1Q0FBdUMsdUNBQXVDO0FBQzlFO0FBQ0E7QUFDQTtBQUNBLFdBQVcsV0FBVztBQUN0QixZQUFZLFFBQVE7QUFDcEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxrQkFBa0IsY0FBYztBQUNoQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG9CQUFvQixZQUFZO0FBQ2hDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDO0FBQ0Qsa0JBQWtCIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vcGF5d2luZC8uL25vZGVfbW9kdWxlcy9hbWF6b24tY29nbml0by1pZGVudGl0eS1qcy9saWIvdXRpbHMvV29yZEFycmF5LmpzPzNjNzUiXSwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG5cbmV4cG9ydHMuX19lc01vZHVsZSA9IHRydWU7XG5leHBvcnRzW1wiZGVmYXVsdFwiXSA9IHZvaWQgMDtcbnZhciBfY3J5cHRvU2VjdXJlUmFuZG9tSW50ID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlKFwiLi9jcnlwdG9TZWN1cmVSYW5kb21JbnRcIikpO1xuZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgXCJkZWZhdWx0XCI6IG9iaiB9OyB9XG4vKipcbiAqIEhleCBlbmNvZGluZyBzdHJhdGVneS5cbiAqIENvbnZlcnRzIGEgd29yZCBhcnJheSB0byBhIGhleCBzdHJpbmcuXG4gKiBAcGFyYW0ge1dvcmRBcnJheX0gd29yZEFycmF5IFRoZSB3b3JkIGFycmF5LlxuICogQHJldHVybiB7c3RyaW5nfSBUaGUgaGV4IHN0cmluZy5cbiAqIEBzdGF0aWNcbiAqL1xuZnVuY3Rpb24gaGV4U3RyaW5naWZ5KHdvcmRBcnJheSkge1xuICAvLyBTaG9ydGN1dHNcbiAgdmFyIHdvcmRzID0gd29yZEFycmF5LndvcmRzO1xuICB2YXIgc2lnQnl0ZXMgPSB3b3JkQXJyYXkuc2lnQnl0ZXM7XG5cbiAgLy8gQ29udmVydFxuICB2YXIgaGV4Q2hhcnMgPSBbXTtcbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBzaWdCeXRlczsgaSsrKSB7XG4gICAgdmFyIGJpdGUgPSB3b3Jkc1tpID4+PiAyXSA+Pj4gMjQgLSBpICUgNCAqIDggJiAweGZmO1xuICAgIGhleENoYXJzLnB1c2goKGJpdGUgPj4+IDQpLnRvU3RyaW5nKDE2KSk7XG4gICAgaGV4Q2hhcnMucHVzaCgoYml0ZSAmIDB4MGYpLnRvU3RyaW5nKDE2KSk7XG4gIH1cbiAgcmV0dXJuIGhleENoYXJzLmpvaW4oJycpO1xufVxudmFyIFdvcmRBcnJheSA9IC8qI19fUFVSRV9fKi9mdW5jdGlvbiAoKSB7XG4gIGZ1bmN0aW9uIFdvcmRBcnJheSh3b3Jkcywgc2lnQnl0ZXMpIHtcbiAgICB3b3JkcyA9IHRoaXMud29yZHMgPSB3b3JkcyB8fCBbXTtcbiAgICBpZiAoc2lnQnl0ZXMgIT0gdW5kZWZpbmVkKSB7XG4gICAgICB0aGlzLnNpZ0J5dGVzID0gc2lnQnl0ZXM7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuc2lnQnl0ZXMgPSB3b3Jkcy5sZW5ndGggKiA0O1xuICAgIH1cbiAgfVxuICB2YXIgX3Byb3RvID0gV29yZEFycmF5LnByb3RvdHlwZTtcbiAgX3Byb3RvLnJhbmRvbSA9IGZ1bmN0aW9uIHJhbmRvbShuQnl0ZXMpIHtcbiAgICB2YXIgd29yZHMgPSBbXTtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IG5CeXRlczsgaSArPSA0KSB7XG4gICAgICB3b3Jkcy5wdXNoKCgwLCBfY3J5cHRvU2VjdXJlUmFuZG9tSW50W1wiZGVmYXVsdFwiXSkoKSk7XG4gICAgfVxuICAgIHJldHVybiBuZXcgV29yZEFycmF5KHdvcmRzLCBuQnl0ZXMpO1xuICB9O1xuICBfcHJvdG8udG9TdHJpbmcgPSBmdW5jdGlvbiB0b1N0cmluZygpIHtcbiAgICByZXR1cm4gaGV4U3RyaW5naWZ5KHRoaXMpO1xuICB9O1xuICByZXR1cm4gV29yZEFycmF5O1xufSgpO1xuZXhwb3J0c1tcImRlZmF1bHRcIl0gPSBXb3JkQXJyYXk7Il0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/amazon-cognito-identity-js/lib/utils/WordArray.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/amazon-cognito-identity-js/lib/utils/cryptoSecureRandomInt.js":
/*!************************************************************************************!*\
  !*** ./node_modules/amazon-cognito-identity-js/lib/utils/cryptoSecureRandomInt.js ***!
  \************************************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

eval("\n\nexports.__esModule = true;\nexports[\"default\"] = cryptoSecureRandomInt;\nvar crypto;\n\n// Native crypto from window (Browser)\nif (typeof window !== 'undefined' && window.crypto) {\n  crypto = window.crypto;\n}\n\n// Native (experimental IE 11) crypto from window (Browser)\nif (!crypto && typeof window !== 'undefined' && window.msCrypto) {\n  crypto = window.msCrypto;\n}\n\n// Native crypto from global (NodeJS)\nif (!crypto && typeof global !== 'undefined' && global.crypto) {\n  crypto = global.crypto;\n}\n\n// Native crypto import via require (NodeJS)\nif (!crypto && \"function\" === 'function') {\n  try {\n    crypto = __webpack_require__(/*! crypto */ \"crypto\");\n  } catch (err) {}\n}\n\n/*\n * Cryptographically secure pseudorandom number generator\n * As Math.random() is cryptographically not safe to use\n */\nfunction cryptoSecureRandomInt() {\n  if (crypto) {\n    // Use getRandomValues method (Browser)\n    if (typeof crypto.getRandomValues === 'function') {\n      try {\n        return crypto.getRandomValues(new Uint32Array(1))[0];\n      } catch (err) {}\n    }\n\n    // Use randomBytes method (NodeJS)\n    if (typeof crypto.randomBytes === 'function') {\n      try {\n        return crypto.randomBytes(4).readInt32LE();\n      } catch (err) {}\n    }\n  }\n  throw new Error('Native crypto module could not be used to get secure random number.');\n}//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvYW1hem9uLWNvZ25pdG8taWRlbnRpdHktanMvbGliL3V0aWxzL2NyeXB0b1NlY3VyZVJhbmRvbUludC5qcyIsIm1hcHBpbmdzIjoiQUFBYTs7QUFFYixrQkFBa0I7QUFDbEIsa0JBQWtCO0FBQ2xCOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0EsZUFBZSxVQUFjO0FBQzdCO0FBQ0EsYUFBYSxtQkFBTyxDQUFDLHNCQUFRO0FBQzdCLElBQUk7QUFDSjs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFFBQVE7QUFDUjs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFFBQVE7QUFDUjtBQUNBO0FBQ0E7QUFDQSIsInNvdXJjZXMiOlsid2VicGFjazovL3BheXdpbmQvLi9ub2RlX21vZHVsZXMvYW1hem9uLWNvZ25pdG8taWRlbnRpdHktanMvbGliL3V0aWxzL2NyeXB0b1NlY3VyZVJhbmRvbUludC5qcz9mZTg2Il0sInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO1xuXG5leHBvcnRzLl9fZXNNb2R1bGUgPSB0cnVlO1xuZXhwb3J0c1tcImRlZmF1bHRcIl0gPSBjcnlwdG9TZWN1cmVSYW5kb21JbnQ7XG52YXIgY3J5cHRvO1xuXG4vLyBOYXRpdmUgY3J5cHRvIGZyb20gd2luZG93IChCcm93c2VyKVxuaWYgKHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnICYmIHdpbmRvdy5jcnlwdG8pIHtcbiAgY3J5cHRvID0gd2luZG93LmNyeXB0bztcbn1cblxuLy8gTmF0aXZlIChleHBlcmltZW50YWwgSUUgMTEpIGNyeXB0byBmcm9tIHdpbmRvdyAoQnJvd3NlcilcbmlmICghY3J5cHRvICYmIHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnICYmIHdpbmRvdy5tc0NyeXB0bykge1xuICBjcnlwdG8gPSB3aW5kb3cubXNDcnlwdG87XG59XG5cbi8vIE5hdGl2ZSBjcnlwdG8gZnJvbSBnbG9iYWwgKE5vZGVKUylcbmlmICghY3J5cHRvICYmIHR5cGVvZiBnbG9iYWwgIT09ICd1bmRlZmluZWQnICYmIGdsb2JhbC5jcnlwdG8pIHtcbiAgY3J5cHRvID0gZ2xvYmFsLmNyeXB0bztcbn1cblxuLy8gTmF0aXZlIGNyeXB0byBpbXBvcnQgdmlhIHJlcXVpcmUgKE5vZGVKUylcbmlmICghY3J5cHRvICYmIHR5cGVvZiByZXF1aXJlID09PSAnZnVuY3Rpb24nKSB7XG4gIHRyeSB7XG4gICAgY3J5cHRvID0gcmVxdWlyZSgnY3J5cHRvJyk7XG4gIH0gY2F0Y2ggKGVycikge31cbn1cblxuLypcbiAqIENyeXB0b2dyYXBoaWNhbGx5IHNlY3VyZSBwc2V1ZG9yYW5kb20gbnVtYmVyIGdlbmVyYXRvclxuICogQXMgTWF0aC5yYW5kb20oKSBpcyBjcnlwdG9ncmFwaGljYWxseSBub3Qgc2FmZSB0byB1c2VcbiAqL1xuZnVuY3Rpb24gY3J5cHRvU2VjdXJlUmFuZG9tSW50KCkge1xuICBpZiAoY3J5cHRvKSB7XG4gICAgLy8gVXNlIGdldFJhbmRvbVZhbHVlcyBtZXRob2QgKEJyb3dzZXIpXG4gICAgaWYgKHR5cGVvZiBjcnlwdG8uZ2V0UmFuZG9tVmFsdWVzID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICB0cnkge1xuICAgICAgICByZXR1cm4gY3J5cHRvLmdldFJhbmRvbVZhbHVlcyhuZXcgVWludDMyQXJyYXkoMSkpWzBdO1xuICAgICAgfSBjYXRjaCAoZXJyKSB7fVxuICAgIH1cblxuICAgIC8vIFVzZSByYW5kb21CeXRlcyBtZXRob2QgKE5vZGVKUylcbiAgICBpZiAodHlwZW9mIGNyeXB0by5yYW5kb21CeXRlcyA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgdHJ5IHtcbiAgICAgICAgcmV0dXJuIGNyeXB0by5yYW5kb21CeXRlcyg0KS5yZWFkSW50MzJMRSgpO1xuICAgICAgfSBjYXRjaCAoZXJyKSB7fVxuICAgIH1cbiAgfVxuICB0aHJvdyBuZXcgRXJyb3IoJ05hdGl2ZSBjcnlwdG8gbW9kdWxlIGNvdWxkIG5vdCBiZSB1c2VkIHRvIGdldCBzZWN1cmUgcmFuZG9tIG51bWJlci4nKTtcbn0iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/amazon-cognito-identity-js/lib/utils/cryptoSecureRandomInt.js\n");

/***/ })

};
;